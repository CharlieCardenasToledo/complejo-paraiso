var p7=Object.create;var Lw=Object.defineProperty,m7=Object.defineProperties,g7=Object.getOwnPropertyDescriptor,v7=Object.getOwnPropertyDescriptors,_7=Object.getOwnPropertyNames,Ck=Object.getOwnPropertySymbols,Ik=Object.getPrototypeOf,Tk=Object.prototype.hasOwnProperty,y7=Object.prototype.propertyIsEnumerable,x7=Reflect.get;var Sk=(n,e,t)=>e in n?Lw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,fe=(n,e)=>{for(var t in e||={})Tk.call(e,t)&&Sk(n,t,e[t]);if(Ck)for(var t of Ck(e))y7.call(e,t)&&Sk(n,t,e[t]);return n},Te=(n,e)=>m7(n,v7(e));var w7=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var b7=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _7(e))!Tk.call(n,i)&&i!==t&&Lw(n,i,{get:()=>e[i],enumerable:!(r=g7(e,i))||r.enumerable});return n};var Bs=(n,e,t)=>(t=n!=null?p7(Ik(n)):{},b7(e||!n||!n.__esModule?Lw(t,"default",{value:n,enumerable:!0}):t,n));var Qc=(n,e,t)=>x7(Ik(n),t,e);var W=(n,e,t)=>new Promise((r,i)=>{var s=c=>{try{a(t.next(c))}catch(l){i(l)}},o=c=>{try{a(t.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(n,e)).next())});var Rs=w7((wa,dD)=>{"use strict";(function(n,e){typeof wa=="object"&&typeof dD<"u"?dD.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(wa,function(){"use strict";function n(_,b,I){if(typeof _=="function"?_===b:_.has(b))return arguments.length<3?b:I;throw new TypeError("Private element is not present on this object")}function e(_,b){if(b.has(_))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(_,b){return _.get(n(_,b))}function r(_,b,I){e(_,b),b.set(_,I)}function i(_,b,I){return _.set(n(_,b),I),I}let s=100,o={},a=()=>{o.previousActiveElement instanceof HTMLElement?(o.previousActiveElement.focus(),o.previousActiveElement=null):document.body&&document.body.focus()},c=_=>new Promise(b=>{if(!_)return b();let I=window.scrollX,z=window.scrollY;o.restoreFocusTimeout=setTimeout(()=>{a(),b()},s),window.scrollTo(I,z)}),l="swal2-",d=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce((_,b)=>(_[b]=l+b,_),{}),g=["success","warning","info","question","error"].reduce((_,b)=>(_[b]=l+b,_),{}),w="SweetAlert2:",y=_=>_.charAt(0).toUpperCase()+_.slice(1),E=_=>{console.warn(`${w} ${typeof _=="object"?_.join(" "):_}`)},M=_=>{console.error(`${w} ${_}`)},k=[],O=_=>{k.includes(_)||(k.push(_),E(_))},K=function(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;O(`"${_}" is deprecated and will be removed in the next major release.${b?` Use "${b}" instead.`:""}`)},Q=_=>typeof _=="function"?_():_,te=_=>_&&typeof _.toPromise=="function",D=_=>te(_)?_.toPromise():Promise.resolve(_),T=_=>_&&Promise.resolve(_)===_,A=()=>document.body.querySelector(`.${d.container}`),F=_=>{let b=A();return b?b.querySelector(_):null},N=_=>F(`.${_}`),V=()=>N(d.popup),U=()=>N(d.icon),nt=()=>N(d["icon-content"]),Ae=()=>N(d.title),lt=()=>N(d["html-container"]),ut=()=>N(d.image),Ut=()=>N(d["progress-steps"]),It=()=>N(d["validation-message"]),Ft=()=>F(`.${d.actions} .${d.confirm}`),Cn=()=>F(`.${d.actions} .${d.cancel}`),Z=()=>F(`.${d.actions} .${d.deny}`),me=()=>N(d["input-label"]),re=()=>F(`.${d.loader}`),ne=()=>N(d.actions),we=()=>N(d.footer),Be=()=>N(d["timer-progress-bar"]),rt=()=>N(d.close),Ge=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,ke=()=>{let _=V();if(!_)return[];let b=_.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),I=Array.from(b).sort((Ue,At)=>{let Kt=parseInt(Ue.getAttribute("tabindex")||"0"),or=parseInt(At.getAttribute("tabindex")||"0");return Kt>or?1:Kt<or?-1:0}),z=_.querySelectorAll(Ge),pe=Array.from(z).filter(Ue=>Ue.getAttribute("tabindex")!=="-1");return[...new Set(I.concat(pe))].filter(Ue=>Dr(Ue))},Lt=()=>qn(document.body,d.shown)&&!qn(document.body,d["toast-shown"])&&!qn(document.body,d["no-backdrop"]),xt=()=>{let _=V();return _?qn(_,d.toast):!1},sr=()=>{let _=V();return _?_.hasAttribute("data-loading"):!1},ct=(_,b)=>{if(_.textContent="",b){let z=new DOMParser().parseFromString(b,"text/html"),pe=z.querySelector("head");pe&&Array.from(pe.childNodes).forEach(At=>{_.appendChild(At)});let Ue=z.querySelector("body");Ue&&Array.from(Ue.childNodes).forEach(At=>{At instanceof HTMLVideoElement||At instanceof HTMLAudioElement?_.appendChild(At.cloneNode(!0)):_.appendChild(At)})}},qn=(_,b)=>{if(!b)return!1;let I=b.split(/\s+/);for(let z=0;z<I.length;z++)if(!_.classList.contains(I[z]))return!1;return!0},Tn=(_,b)=>{Array.from(_.classList).forEach(I=>{!Object.values(d).includes(I)&&!Object.values(g).includes(I)&&!Object.values(b.showClass||{}).includes(I)&&_.classList.remove(I)})},Ve=(_,b,I)=>{if(Tn(_,b),!b.customClass)return;let z=b.customClass[I];if(z){if(typeof z!="string"&&!z.forEach){E(`Invalid type of customClass.${I}! Expected string or iterable object, got "${typeof z}"`);return}mt(_,z)}},Wr=(_,b)=>{if(!b)return null;switch(b){case"select":case"textarea":case"file":return _.querySelector(`.${d.popup} > .${d[b]}`);case"checkbox":return _.querySelector(`.${d.popup} > .${d.checkbox} input`);case"radio":return _.querySelector(`.${d.popup} > .${d.radio} input:checked`)||_.querySelector(`.${d.popup} > .${d.radio} input:first-child`);case"range":return _.querySelector(`.${d.popup} > .${d.range} input`);default:return _.querySelector(`.${d.popup} > .${d.input}`)}},Ni=_=>{if(_.focus(),_.type!=="file"){let b=_.value;_.value="",_.value=b}},ps=(_,b,I)=>{!_||!b||(typeof b=="string"&&(b=b.split(/\s+/).filter(Boolean)),b.forEach(z=>{Array.isArray(_)?_.forEach(pe=>{I?pe.classList.add(z):pe.classList.remove(z)}):I?_.classList.add(z):_.classList.remove(z)}))},mt=(_,b)=>{ps(_,b,!0)},Jr=(_,b)=>{ps(_,b,!1)},Gi=(_,b)=>{let I=Array.from(_.children);for(let z=0;z<I.length;z++){let pe=I[z];if(pe instanceof HTMLElement&&qn(pe,b))return pe}},dr=(_,b,I)=>{I===`${parseInt(I)}`&&(I=parseInt(I)),I||parseInt(I)===0?_.style.setProperty(b,typeof I=="number"?`${I}px`:I):_.style.removeProperty(b)},Dn=function(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";_&&(_.style.display=b)},Yn=_=>{_&&(_.style.display="none")},Xn=function(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";_&&new MutationObserver(()=>{Ls(_,_.innerHTML,b)}).observe(_,{childList:!0,subtree:!0})},Ln=(_,b,I,z)=>{let pe=_.querySelector(b);pe&&pe.style.setProperty(I,z)},Ls=function(_,b){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";b?Dn(_,I):Yn(_)},Dr=_=>!!(_&&(_.offsetWidth||_.offsetHeight||_.getClientRects().length)),iu=()=>!Dr(Ft())&&!Dr(Z())&&!Dr(Cn()),su=_=>_.scrollHeight>_.clientHeight,no=_=>{let b=window.getComputedStyle(_),I=parseFloat(b.getPropertyValue("animation-duration")||"0"),z=parseFloat(b.getPropertyValue("transition-duration")||"0");return I>0||z>0},Oa=function(_){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,I=Be();I&&Dr(I)&&(b&&(I.style.transition="none",I.style.width="100%"),setTimeout(()=>{I.style.transition=`width ${_/1e3}s linear`,I.style.width="0%"},10))},ou=()=>{let _=Be();if(!_)return;let b=parseInt(window.getComputedStyle(_).width);_.style.removeProperty("transition"),_.style.width="100%";let I=parseInt(window.getComputedStyle(_).width),z=b/I*100;_.style.width=`${z}%`},au=()=>typeof window>"u"||typeof document>"u",s0=`
 <div aria-labelledby="${d.title}" aria-describedby="${d["html-container"]}" class="${d.popup}" tabindex="-1">
   <button type="button" class="${d.close}"></button>
   <ul class="${d["progress-steps"]}"></ul>
   <div class="${d.icon}"></div>
   <img class="${d.image}" />
   <h2 class="${d.title}" id="${d.title}"></h2>
   <div class="${d["html-container"]}" id="${d["html-container"]}"></div>
   <input class="${d.input}" id="${d.input}" />
   <input type="file" class="${d.file}" />
   <div class="${d.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${d.select}" id="${d.select}"></select>
   <div class="${d.radio}"></div>
   <label class="${d.checkbox}">
     <input type="checkbox" id="${d.checkbox}" />
     <span class="${d.label}"></span>
   </label>
   <textarea class="${d.textarea}" id="${d.textarea}"></textarea>
   <div class="${d["validation-message"]}" id="${d["validation-message"]}"></div>
   <div class="${d.actions}">
     <div class="${d.loader}"></div>
     <button type="button" class="${d.confirm}"></button>
     <button type="button" class="${d.deny}"></button>
     <button type="button" class="${d.cancel}"></button>
   </div>
   <div class="${d.footer}"></div>
   <div class="${d["timer-progress-bar-container"]}">
     <div class="${d["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),Bd=()=>{let _=A();return _?(_.remove(),Jr([document.documentElement,document.body],[d["no-backdrop"],d["toast-shown"],d["has-column"]]),!0):!1},Ki=()=>{o.currentInstance.resetValidationMessage()},cu=()=>{let _=V(),b=Gi(_,d.input),I=Gi(_,d.file),z=_.querySelector(`.${d.range} input`),pe=_.querySelector(`.${d.range} output`),Ue=Gi(_,d.select),At=_.querySelector(`.${d.checkbox} input`),Kt=Gi(_,d.textarea);b.oninput=Ki,I.onchange=Ki,Ue.onchange=Ki,At.onchange=Ki,Kt.oninput=Ki,z.oninput=()=>{Ki(),pe.value=z.value},z.onchange=()=>{Ki(),pe.value=z.value}},Ud=_=>typeof _=="string"?document.querySelector(_):_,Na=_=>{let b=V();b.setAttribute("role",_.toast?"alert":"dialog"),b.setAttribute("aria-live",_.toast?"polite":"assertive"),_.toast||b.setAttribute("aria-modal","true")},Bo=_=>{window.getComputedStyle(_).direction==="rtl"&&mt(A(),d.rtl)},lu=_=>{let b=Bd();if(au()){M("SweetAlert2 requires document to initialize");return}let I=document.createElement("div");I.className=d.container,b&&mt(I,d["no-transition"]),ct(I,s0);let z=Ud(_.target);z.appendChild(I),Na(_),Bo(z),cu()},ms=(_,b)=>{_ instanceof HTMLElement?b.appendChild(_):typeof _=="object"?jd(_,b):_&&ct(b,_)},jd=(_,b)=>{_.jquery?Vc(b,_):ct(b,_.toString())},Vc=(_,b)=>{if(_.textContent="",0 in b)for(let I=0;I in b;I++)_.appendChild(b[I].cloneNode(!0));else _.appendChild(b.cloneNode(!0))},$d=(_,b)=>{let I=ne(),z=re();!I||!z||(!b.showConfirmButton&&!b.showDenyButton&&!b.showCancelButton?Yn(I):Dn(I),Ve(I,b,"actions"),La(I,z,b),ct(z,b.loaderHtml||""),Ve(z,b,"loader"))};function La(_,b,I){let z=Ft(),pe=Z(),Ue=Cn();!z||!pe||!Ue||(Cr(z,"confirm",I),Cr(pe,"deny",I),Cr(Ue,"cancel",I),Hd(z,pe,Ue,I),I.reverseButtons&&(I.toast?(_.insertBefore(Ue,z),_.insertBefore(pe,z)):(_.insertBefore(Ue,b),_.insertBefore(pe,b),_.insertBefore(z,b))))}function Hd(_,b,I,z){if(!z.buttonsStyling){Jr([_,b,I],d.styled);return}mt([_,b,I],d.styled),z.confirmButtonColor&&(_.style.backgroundColor=z.confirmButtonColor,mt(_,d["default-outline"])),z.denyButtonColor&&(b.style.backgroundColor=z.denyButtonColor,mt(b,d["default-outline"])),z.cancelButtonColor&&(I.style.backgroundColor=z.cancelButtonColor,mt(I,d["default-outline"]))}function Cr(_,b,I){let z=y(b);Ls(_,I[`show${z}Button`],"inline-block"),ct(_,I[`${b}ButtonText`]||""),_.setAttribute("aria-label",I[`${b}ButtonAriaLabel`]||""),_.className=d[b],Ve(_,I,`${b}Button`)}let Bc=(_,b)=>{let I=rt();I&&(ct(I,b.closeButtonHtml||""),Ve(I,b,"closeButton"),Ls(I,b.showCloseButton),I.setAttribute("aria-label",b.closeButtonAriaLabel||""))},Va=(_,b)=>{let I=A();I&&(Ba(I,b.backdrop),o0(I,b.position),P(I,b.grow),Ve(I,b,"container"))};function Ba(_,b){typeof b=="string"?_.style.background=b:b||mt([document.documentElement,document.body],d["no-backdrop"])}function o0(_,b){b&&(b in d?mt(_,d[b]):(E('The "position" parameter is not valid, defaulting to "center"'),mt(_,d.center)))}function P(_,b){b&&mt(_,d[`grow-${b}`])}var j={innerParams:new WeakMap,domCache:new WeakMap};let B=["input","file","range","select","radio","checkbox","textarea"],H=(_,b)=>{let I=V();if(!I)return;let z=j.innerParams.get(_),pe=!z||b.input!==z.input;B.forEach(Ue=>{let At=Gi(I,d[Ue]);At&&(de(Ue,b.inputAttributes),At.className=d[Ue],pe&&Yn(At))}),b.input&&(pe&&q(b),ve(b))},q=_=>{if(!_.input)return;if(!Ee[_.input]){M(`Unexpected type of input! Expected ${Object.keys(Ee).join(" | ")}, got "${_.input}"`);return}let b=he(_.input);if(!b)return;let I=Ee[_.input](b,_);Dn(b),_.inputAutoFocus&&setTimeout(()=>{Ni(I)})},G=_=>{for(let b=0;b<_.attributes.length;b++){let I=_.attributes[b].name;["id","type","value","style"].includes(I)||_.removeAttribute(I)}},de=(_,b)=>{let I=V();if(!I)return;let z=Wr(I,_);if(z){G(z);for(let pe in b)z.setAttribute(pe,b[pe])}},ve=_=>{if(!_.input)return;let b=he(_.input);b&&Ve(b,_,"input")},ce=(_,b)=>{!_.placeholder&&b.inputPlaceholder&&(_.placeholder=b.inputPlaceholder)},ue=(_,b,I)=>{if(I.inputLabel){let z=document.createElement("label"),pe=d["input-label"];z.setAttribute("for",_.id),z.className=pe,typeof I.customClass=="object"&&mt(z,I.customClass.inputLabel),z.innerText=I.inputLabel,b.insertAdjacentElement("beforebegin",z)}},he=_=>{let b=V();if(b)return Gi(b,d[_]||d.input)},Ie=(_,b)=>{["string","number"].includes(typeof b)?_.value=`${b}`:T(b)||E(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof b}"`)},Ee={};Ee.text=Ee.email=Ee.password=Ee.number=Ee.tel=Ee.url=Ee.search=Ee.date=Ee["datetime-local"]=Ee.time=Ee.week=Ee.month=(_,b)=>(Ie(_,b.inputValue),ue(_,_,b),ce(_,b),_.type=b.input,_),Ee.file=(_,b)=>(ue(_,_,b),ce(_,b),_),Ee.range=(_,b)=>{let I=_.querySelector("input"),z=_.querySelector("output");return Ie(I,b.inputValue),I.type=b.input,Ie(z,b.inputValue),ue(I,_,b),_},Ee.select=(_,b)=>{if(_.textContent="",b.inputPlaceholder){let I=document.createElement("option");ct(I,b.inputPlaceholder),I.value="",I.disabled=!0,I.selected=!0,_.appendChild(I)}return ue(_,_,b),_},Ee.radio=_=>(_.textContent="",_),Ee.checkbox=(_,b)=>{let I=Wr(V(),"checkbox");I.value="1",I.checked=!!b.inputValue;let z=_.querySelector("span");return ct(z,b.inputPlaceholder||b.inputLabel),I},Ee.textarea=(_,b)=>{Ie(_,b.inputValue),ce(_,b),ue(_,_,b);let I=z=>parseInt(window.getComputedStyle(z).marginLeft)+parseInt(window.getComputedStyle(z).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let z=parseInt(window.getComputedStyle(V()).width),pe=()=>{if(!document.body.contains(_))return;let Ue=_.offsetWidth+I(_);Ue>z?V().style.width=`${Ue}px`:dr(V(),"width",b.width)};new MutationObserver(pe).observe(_,{attributes:!0,attributeFilter:["style"]})}}),_};let qe=(_,b)=>{let I=lt();I&&(Xn(I),Ve(I,b,"htmlContainer"),b.html?(ms(b.html,I),Dn(I,"block")):b.text?(I.textContent=b.text,Dn(I,"block")):Yn(I),H(_,b))},Me=(_,b)=>{let I=we();I&&(Xn(I),Ls(I,b.footer,"block"),b.footer&&ms(b.footer,I),Ve(I,b,"footer"))},Le=(_,b)=>{let I=j.innerParams.get(_),z=U();if(z){if(I&&b.icon===I.icon){Zn(z,b),st(z,b);return}if(!b.icon&&!b.iconHtml){Yn(z);return}if(b.icon&&Object.keys(g).indexOf(b.icon)===-1){M(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${b.icon}"`),Yn(z);return}Dn(z),Zn(z,b),st(z,b),mt(z,b.showClass&&b.showClass.icon)}},st=(_,b)=>{for(let[I,z]of Object.entries(g))b.icon!==I&&Jr(_,z);mt(_,b.icon&&g[b.icon]),ro(_,b),dn(),Ve(_,b,"icon")},dn=()=>{let _=V();if(!_)return;let b=window.getComputedStyle(_).getPropertyValue("background-color"),I=_.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let z=0;z<I.length;z++)I[z].style.backgroundColor=b},Ar=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Sn=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Zn=(_,b)=>{if(!b.icon&&!b.iconHtml)return;let I=_.innerHTML,z="";b.iconHtml?z=Uo(b.iconHtml):b.icon==="success"?(z=Ar,I=I.replace(/ style=".*?"/g,"")):b.icon==="error"?z=Sn:b.icon&&(z=Uo({question:"?",warning:"!",info:"i"}[b.icon])),I.trim()!==z.trim()&&ct(_,z)},ro=(_,b)=>{if(b.iconColor){_.style.color=b.iconColor,_.style.borderColor=b.iconColor;for(let I of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ln(_,I,"background-color",b.iconColor);Ln(_,".swal2-success-ring","border-color",b.iconColor)}},Uo=_=>`<div class="${d["icon-content"]}">${_}</div>`,Vs=(_,b)=>{let I=ut();if(I){if(!b.imageUrl){Yn(I);return}Dn(I,""),I.setAttribute("src",b.imageUrl),I.setAttribute("alt",b.imageAlt||""),dr(I,"width",b.imageWidth),dr(I,"height",b.imageHeight),I.className=d.image,Ve(I,b,"image")}},jo=!1,Li=0,zd=0,Wd=0,a0=0,Xm=_=>{_.addEventListener("mousedown",qd),document.body.addEventListener("mousemove",uu),_.addEventListener("mouseup",du),_.addEventListener("touchstart",qd),document.body.addEventListener("touchmove",uu),_.addEventListener("touchend",du)},Sw=_=>{_.removeEventListener("mousedown",qd),document.body.removeEventListener("mousemove",uu),_.removeEventListener("mouseup",du),_.removeEventListener("touchstart",qd),document.body.removeEventListener("touchmove",uu),_.removeEventListener("touchend",du)},qd=_=>{let b=V();if(_.target===b||U().contains(_.target)){jo=!0;let I=Zm(_);Li=I.clientX,zd=I.clientY,Wd=parseInt(b.style.insetInlineStart)||0,a0=parseInt(b.style.insetBlockStart)||0,mt(b,"swal2-dragging")}},uu=_=>{let b=V();if(jo){let{clientX:I,clientY:z}=Zm(_);b.style.insetInlineStart=`${Wd+(I-Li)}px`,b.style.insetBlockStart=`${a0+(z-zd)}px`}},du=()=>{let _=V();jo=!1,Jr(_,"swal2-dragging")},Zm=_=>{let b=0,I=0;return _.type.startsWith("mouse")?(b=_.clientX,I=_.clientY):_.type.startsWith("touch")&&(b=_.touches[0].clientX,I=_.touches[0].clientY),{clientX:b,clientY:I}},Ua=(_,b)=>{let I=A(),z=V();if(!(!I||!z)){if(b.toast){dr(I,"width",b.width),z.style.width="100%";let pe=re();pe&&z.insertBefore(pe,U())}else dr(z,"width",b.width);dr(z,"padding",b.padding),b.color&&(z.style.color=b.color),b.background&&(z.style.background=b.background),Yn(It()),io(z,b),b.draggable&&!b.toast?(mt(z,d.draggable),Xm(z)):(Jr(z,d.draggable),Sw(z))}},io=(_,b)=>{let I=b.showClass||{};_.className=`${d.popup} ${Dr(_)?I.popup:""}`,b.toast?(mt([document.documentElement,document.body],d["toast-shown"]),mt(_,d.toast)):mt(_,d.modal),Ve(_,b,"popup"),typeof b.customClass=="string"&&mt(_,b.customClass),b.icon&&mt(_,d[`icon-${b.icon}`])},Gd=(_,b)=>{let I=Ut();if(!I)return;let{progressSteps:z,currentProgressStep:pe}=b;if(!z||z.length===0||pe===void 0){Yn(I);return}Dn(I),I.textContent="",pe>=z.length&&E("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),z.forEach((Ue,At)=>{let Kt=Kd(Ue);if(I.appendChild(Kt),At===pe&&mt(Kt,d["active-progress-step"]),At!==z.length-1){let or=Jm(b);I.appendChild(or)}})},Kd=_=>{let b=document.createElement("li");return mt(b,d["progress-step"]),ct(b,_),b},Jm=_=>{let b=document.createElement("li");return mt(b,d["progress-step-line"]),_.progressStepsDistance&&dr(b,"width",_.progressStepsDistance),b},An=(_,b)=>{let I=Ae();I&&(Xn(I),Ls(I,b.title||b.titleText,"block"),b.title&&ms(b.title,I),b.titleText&&(I.innerText=b.titleText),Ve(I,b,"title"))},fu=(_,b)=>{Ua(_,b),Va(_,b),Gd(_,b),Le(_,b),Vs(_,b),An(_,b),Bc(_,b),qe(_,b),$d(_,b),Me(_,b);let I=V();typeof b.didRender=="function"&&I&&b.didRender(I),o.eventEmitter.emit("didRender",I)},hu=()=>Dr(V()),Uc=()=>{var _;return(_=Ft())===null||_===void 0?void 0:_.click()},Iw=()=>{var _;return(_=Z())===null||_===void 0?void 0:_.click()},eg=()=>{var _;return(_=Cn())===null||_===void 0?void 0:_.click()},jc=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),tg=_=>{_.keydownTarget&&_.keydownHandlerAdded&&(_.keydownTarget.removeEventListener("keydown",_.keydownHandler,{capture:_.keydownListenerCapture}),_.keydownHandlerAdded=!1)},Tw=(_,b,I)=>{tg(_),b.toast||(_.keydownHandler=z=>ng(b,z,I),_.keydownTarget=b.keydownListenerCapture?window:V(),_.keydownListenerCapture=b.keydownListenerCapture,_.keydownTarget.addEventListener("keydown",_.keydownHandler,{capture:_.keydownListenerCapture}),_.keydownHandlerAdded=!0)},c0=(_,b)=>{var I;let z=ke();if(z.length){_=_+b,_===z.length?_=0:_===-1&&(_=z.length-1),z[_].focus();return}(I=V())===null||I===void 0||I.focus()},$c=["ArrowRight","ArrowDown"],$o=["ArrowLeft","ArrowUp"],ng=(_,b,I)=>{_&&(b.isComposing||b.keyCode===229||(_.stopKeydownPropagation&&b.stopPropagation(),b.key==="Enter"?rg(b,_):b.key==="Tab"?ig(b):[...$c,...$o].includes(b.key)?Hc(b.key):b.key==="Escape"&&Dw(b,_,I)))},rg=(_,b)=>{if(!Q(b.allowEnterKey))return;let I=Wr(V(),b.input);if(_.target&&I&&_.target instanceof HTMLElement&&_.target.outerHTML===I.outerHTML){if(["textarea","file"].includes(b.input))return;Uc(),_.preventDefault()}},ig=_=>{let b=_.target,I=ke(),z=-1;for(let pe=0;pe<I.length;pe++)if(b===I[pe]){z=pe;break}_.shiftKey?c0(z,-1):c0(z,1),_.stopPropagation(),_.preventDefault()},Hc=_=>{let b=ne(),I=Ft(),z=Z(),pe=Cn();if(!b||!I||!z||!pe)return;let Ue=[I,z,pe];if(document.activeElement instanceof HTMLElement&&!Ue.includes(document.activeElement))return;let At=$c.includes(_)?"nextElementSibling":"previousElementSibling",Kt=document.activeElement;if(Kt){for(let or=0;or<b.children.length;or++){if(Kt=Kt[At],!Kt)return;if(Kt instanceof HTMLButtonElement&&Dr(Kt))break}Kt instanceof HTMLButtonElement&&Kt.focus()}},Dw=(_,b,I)=>{Q(b.allowEscapeKey)&&(_.preventDefault(),I(jc.esc))};var zc={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let Aw=()=>{let _=A();Array.from(document.body.children).forEach(I=>{I.contains(_)||(I.hasAttribute("aria-hidden")&&I.setAttribute("data-previous-aria-hidden",I.getAttribute("aria-hidden")||""),I.setAttribute("aria-hidden","true"))})},so=()=>{Array.from(document.body.children).forEach(b=>{b.hasAttribute("data-previous-aria-hidden")?(b.setAttribute("aria-hidden",b.getAttribute("data-previous-aria-hidden")||""),b.removeAttribute("data-previous-aria-hidden")):b.removeAttribute("aria-hidden")})},sg=typeof window<"u"&&!!window.GestureEvent,kw=()=>{if(sg&&!qn(document.body,d.iosfix)){let _=document.body.scrollTop;document.body.style.top=`${_*-1}px`,mt(document.body,d.iosfix),pu()}},pu=()=>{let _=A();if(!_)return;let b;_.ontouchstart=I=>{b=Qd(I)},_.ontouchmove=I=>{b&&(I.preventDefault(),I.stopPropagation())}},Qd=_=>{let b=_.target,I=A(),z=lt();return!I||!z||og(_)||mu(_)?!1:b===I||!su(I)&&b instanceof HTMLElement&&b.tagName!=="INPUT"&&b.tagName!=="TEXTAREA"&&!(su(z)&&z.contains(b))},og=_=>_.touches&&_.touches.length&&_.touches[0].touchType==="stylus",mu=_=>_.touches&&_.touches.length>1,gu=()=>{if(qn(document.body,d.iosfix)){let _=parseInt(document.body.style.top,10);Jr(document.body,d.iosfix),document.body.style.top="",document.body.scrollTop=_*-1}},ag=()=>{let _=document.createElement("div");_.className=d["scrollbar-measure"],document.body.appendChild(_);let b=_.getBoundingClientRect().width-_.clientWidth;return document.body.removeChild(_),b},Ho=null,Jn=_=>{Ho===null&&(document.body.scrollHeight>window.innerHeight||_==="scroll")&&(Ho=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Ho+ag()}px`)},Mw=()=>{Ho!==null&&(document.body.style.paddingRight=`${Ho}px`,Ho=null)};function cg(_,b,I,z){xt()?qc(_,z):(c(I).then(()=>qc(_,z)),tg(o)),sg?(b.setAttribute("style","display:none !important"),b.removeAttribute("class"),b.innerHTML=""):b.remove(),Lt()&&(Mw(),gu(),so()),lg()}function lg(){Jr([document.documentElement,document.body],[d.shown,d["height-auto"],d["no-backdrop"],d["toast-shown"]])}function oo(_){_=ao(_);let b=zc.swalPromiseResolve.get(this),I=ug(this);this.isAwaitingPromise?_.isDismissed||(Wc(this),b(_)):I&&b(_)}let ug=_=>{let b=V();if(!b)return!1;let I=j.innerParams.get(_);if(!I||qn(b,I.hideClass.popup))return!1;Jr(b,I.showClass.popup),mt(b,I.hideClass.popup);let z=A();return Jr(z,I.showClass.backdrop),mt(z,I.hideClass.backdrop),dg(_,b,I),!0};function vu(_){let b=zc.swalPromiseReject.get(this);Wc(this),b&&b(_)}let Wc=_=>{_.isAwaitingPromise&&(delete _.isAwaitingPromise,j.innerParams.get(_)||_._destroy())},ao=_=>typeof _>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},_),dg=(_,b,I)=>{var z;let pe=A(),Ue=no(b);typeof I.willClose=="function"&&I.willClose(b),(z=o.eventEmitter)===null||z===void 0||z.emit("willClose",b),Ue?Rw(_,b,pe,I.returnFocus,I.didClose):cg(_,pe,I.returnFocus,I.didClose)},Rw=(_,b,I,z,pe)=>{o.swalCloseEventFinishedCallback=cg.bind(null,_,I,z,pe);let Ue=function(At){if(At.target===b){var Kt;(Kt=o.swalCloseEventFinishedCallback)===null||Kt===void 0||Kt.call(o),delete o.swalCloseEventFinishedCallback,b.removeEventListener("animationend",Ue),b.removeEventListener("transitionend",Ue)}};b.addEventListener("animationend",Ue),b.addEventListener("transitionend",Ue)},qc=(_,b)=>{setTimeout(()=>{var I;typeof b=="function"&&b.bind(_.params)(),(I=o.eventEmitter)===null||I===void 0||I.emit("didClose"),_._destroy&&_._destroy()})},ja=_=>{let b=V();if(b||new Eg,b=V(),!b)return;let I=re();xt()?Yn(U()):l0(b,_),Dn(I),b.setAttribute("data-loading","true"),b.setAttribute("aria-busy","true"),b.focus()},l0=(_,b)=>{let I=ne(),z=re();!I||!z||(!b&&Dr(Ft())&&(b=Ft()),Dn(I),b&&(Yn(b),z.setAttribute("data-button-to-replace",b.className),I.insertBefore(z,b)),mt([_,I],d.loading))},Yd=(_,b)=>{b.input==="select"||b.input==="radio"?_u(_,b):["text","email","number","tel","textarea"].some(I=>I===b.input)&&(te(b.inputValue)||T(b.inputValue))&&(ja(Ft()),pg(_,b))},fg=(_,b)=>{let I=_.getInput();if(!I)return null;switch(b.input){case"checkbox":return Xd(I);case"radio":return Pw(I);case"file":return hg(I);default:return b.inputAutoTrim?I.value.trim():I.value}},Xd=_=>_.checked?1:0,Pw=_=>_.checked?_.value:null,hg=_=>_.files&&_.files.length?_.getAttribute("multiple")!==null?_.files:_.files[0]:null,_u=(_,b)=>{let I=V();if(!I)return;let z=pe=>{b.input==="select"?mg(I,Gc(pe),b):b.input==="radio"&&u0(I,Gc(pe),b)};te(b.inputOptions)||T(b.inputOptions)?(ja(Ft()),D(b.inputOptions).then(pe=>{_.hideLoading(),z(pe)})):typeof b.inputOptions=="object"?z(b.inputOptions):M(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof b.inputOptions}`)},pg=(_,b)=>{let I=_.getInput();I&&(Yn(I),D(b.inputValue).then(z=>{I.value=b.input==="number"?`${parseFloat(z)||0}`:`${z}`,Dn(I),I.focus(),_.hideLoading()}).catch(z=>{M(`Error in inputValue promise: ${z}`),I.value="",Dn(I),I.focus(),_.hideLoading()}))};function mg(_,b,I){let z=Gi(_,d.select);if(!z)return;let pe=(Ue,At,Kt)=>{let or=document.createElement("option");or.value=Kt,ct(or,At),or.selected=d0(Kt,I.inputValue),Ue.appendChild(or)};b.forEach(Ue=>{let At=Ue[0],Kt=Ue[1];if(Array.isArray(Kt)){let or=document.createElement("optgroup");or.label=At,or.disabled=!1,z.appendChild(or),Kt.forEach(tf=>pe(or,tf[1],tf[0]))}else pe(z,Kt,At)}),z.focus()}function u0(_,b,I){let z=Gi(_,d.radio);if(!z)return;b.forEach(Ue=>{let At=Ue[0],Kt=Ue[1],or=document.createElement("input"),tf=document.createElement("label");or.type="radio",or.name=d.radio,or.value=At,d0(At,I.inputValue)&&(or.checked=!0);let Nw=document.createElement("span");ct(Nw,Kt),Nw.className=d.label,tf.appendChild(or),tf.appendChild(Nw),z.appendChild(tf)});let pe=z.querySelectorAll("input");pe.length&&pe[0].focus()}let Gc=_=>{let b=[];return _ instanceof Map?_.forEach((I,z)=>{let pe=I;typeof pe=="object"&&(pe=Gc(pe)),b.push([z,pe])}):Object.keys(_).forEach(I=>{let z=_[I];typeof z=="object"&&(z=Gc(z)),b.push([I,z])}),b},d0=(_,b)=>!!b&&b.toString()===_.toString(),Zd=_=>{let b=j.innerParams.get(_);_.disableButtons(),b.input?zo(_,"confirm"):Kc(_,!0)},gg=_=>{let b=j.innerParams.get(_);_.disableButtons(),b.returnInputValueOnDeny?zo(_,"deny"):Jd(_,!1)},vg=(_,b)=>{_.disableButtons(),b(jc.cancel)},zo=(_,b)=>{let I=j.innerParams.get(_);if(!I.input){M(`The "input" parameter is needed to be set when using returnInputValueOn${y(b)}`);return}let z=_.getInput(),pe=fg(_,I);I.inputValidator?_g(_,pe,b):z&&!z.checkValidity()?(_.enableButtons(),_.showValidationMessage(I.validationMessage||z.validationMessage)):b==="deny"?Jd(_,pe):Kc(_,pe)},_g=(_,b,I)=>{let z=j.innerParams.get(_);_.disableInput(),Promise.resolve().then(()=>D(z.inputValidator(b,z.validationMessage))).then(Ue=>{_.enableButtons(),_.enableInput(),Ue?_.showValidationMessage(Ue):I==="deny"?Jd(_,b):Kc(_,b)})},Jd=(_,b)=>{let I=j.innerParams.get(_||void 0);I.showLoaderOnDeny&&ja(Z()),I.preDeny?(_.isAwaitingPromise=!0,Promise.resolve().then(()=>D(I.preDeny(b,I.validationMessage))).then(pe=>{pe===!1?(_.hideLoading(),Wc(_)):_.close({isDenied:!0,value:typeof pe>"u"?b:pe})}).catch(pe=>h0(_||void 0,pe))):_.close({isDenied:!0,value:b})},f0=(_,b)=>{_.close({isConfirmed:!0,value:b})},h0=(_,b)=>{_.rejectPromise(b)},Kc=(_,b)=>{let I=j.innerParams.get(_||void 0);I.showLoaderOnConfirm&&ja(),I.preConfirm?(_.resetValidationMessage(),_.isAwaitingPromise=!0,Promise.resolve().then(()=>D(I.preConfirm(b,I.validationMessage))).then(pe=>{Dr(It())||pe===!1?(_.hideLoading(),Wc(_)):f0(_,typeof pe>"u"?b:pe)}).catch(pe=>h0(_||void 0,pe))):f0(_,b)};function ei(){let _=j.innerParams.get(this);if(!_)return;let b=j.domCache.get(this);Yn(b.loader),xt()?_.icon&&Dn(U()):yg(b),Jr([b.popup,b.actions],d.loading),b.popup.removeAttribute("aria-busy"),b.popup.removeAttribute("data-loading"),b.confirmButton.disabled=!1,b.denyButton.disabled=!1,b.cancelButton.disabled=!1}let yg=_=>{let b=_.popup.getElementsByClassName(_.loader.getAttribute("data-button-to-replace"));b.length?Dn(b[0],"inline-block"):iu()&&Yn(_.actions)};function p0(){let _=j.innerParams.get(this),b=j.domCache.get(this);return b?Wr(b.popup,_.input):null}function $a(_,b,I){let z=j.domCache.get(_);b.forEach(pe=>{z[pe].disabled=I})}function h(_,b){let I=V();if(!(!I||!_))if(_.type==="radio"){let z=I.querySelectorAll(`[name="${d.radio}"]`);for(let pe=0;pe<z.length;pe++)z[pe].disabled=b}else _.disabled=b}function C(){$a(this,["confirmButton","denyButton","cancelButton"],!1)}function S(){$a(this,["confirmButton","denyButton","cancelButton"],!0)}function L(){h(this.getInput(),!1)}function oe(){h(this.getInput(),!0)}function ge(_){let b=j.domCache.get(this),I=j.innerParams.get(this);ct(b.validationMessage,_),b.validationMessage.className=d["validation-message"],I.customClass&&I.customClass.validationMessage&&mt(b.validationMessage,I.customClass.validationMessage),Dn(b.validationMessage);let z=this.getInput();z&&(z.setAttribute("aria-invalid","true"),z.setAttribute("aria-describedby",d["validation-message"]),Ni(z),mt(z,d.inputerror))}function Oe(){let _=j.domCache.get(this);_.validationMessage&&Yn(_.validationMessage);let b=this.getInput();b&&(b.removeAttribute("aria-invalid"),b.removeAttribute("aria-describedby"),Jr(b,d.inputerror))}let qt={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},qr=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Gt={allowEnterKey:void 0},ti=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Gr=_=>Object.prototype.hasOwnProperty.call(qt,_),Ha=_=>qr.indexOf(_)!==-1,Qi=_=>Gt[_],ef=_=>{Gr(_)||E(`Unknown parameter "${_}"`)},m0=_=>{ti.includes(_)&&E(`The parameter "${_}" is incompatible with toasts`)},x9=_=>{let b=Qi(_);b&&K(_,b)},w9=_=>{_.backdrop===!1&&_.allowOutsideClick&&E('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let b in _)ef(b),_.toast&&m0(b),x9(b)};function pk(_){let b=V(),I=j.innerParams.get(this);if(!b||qn(b,I.hideClass.popup)){E("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let z=b9(_),pe=Object.assign({},I,z);fu(this,pe),j.innerParams.set(this,pe),Object.defineProperties(this,{params:{value:Object.assign({},this.params,_),writable:!1,enumerable:!0}})}let b9=_=>{let b={};return Object.keys(_).forEach(I=>{Ha(I)?b[I]=_[I]:E(`Invalid parameter to update: ${I}`)}),b};function mk(){let _=j.domCache.get(this),b=j.innerParams.get(this);if(!b){gk(this);return}_.popup&&o.swalCloseEventFinishedCallback&&(o.swalCloseEventFinishedCallback(),delete o.swalCloseEventFinishedCallback),typeof b.didDestroy=="function"&&b.didDestroy(),o.eventEmitter.emit("didDestroy"),E9(this)}let E9=_=>{gk(_),delete _.params,delete o.keydownHandler,delete o.keydownTarget,delete o.currentInstance},gk=_=>{_.isAwaitingPromise?(Fw(j,_),_.isAwaitingPromise=!0):(Fw(zc,_),Fw(j,_),delete _.isAwaitingPromise,delete _.disableButtons,delete _.enableButtons,delete _.getInput,delete _.disableInput,delete _.enableInput,delete _.hideLoading,delete _.disableLoading,delete _.showValidationMessage,delete _.resetValidationMessage,delete _.close,delete _.closePopup,delete _.closeModal,delete _.closeToast,delete _.rejectPromise,delete _.update,delete _._destroy)},Fw=(_,b)=>{for(let I in _)_[I].delete(b)};var C9=Object.freeze({__proto__:null,_destroy:mk,close:oo,closeModal:oo,closePopup:oo,closeToast:oo,disableButtons:S,disableInput:oe,disableLoading:ei,enableButtons:C,enableInput:L,getInput:p0,handleAwaitingPromise:Wc,hideLoading:ei,rejectPromise:vu,resetValidationMessage:Oe,showValidationMessage:ge,update:pk});let S9=(_,b,I)=>{_.toast?I9(_,b,I):(D9(b),A9(b),k9(_,b,I))},I9=(_,b,I)=>{b.popup.onclick=()=>{_&&(T9(_)||_.timer||_.input)||I(jc.close)}},T9=_=>!!(_.showConfirmButton||_.showDenyButton||_.showCancelButton||_.showCloseButton),xg=!1,D9=_=>{_.popup.onmousedown=()=>{_.container.onmouseup=function(b){_.container.onmouseup=()=>{},b.target===_.container&&(xg=!0)}}},A9=_=>{_.container.onmousedown=b=>{b.target===_.container&&b.preventDefault(),_.popup.onmouseup=function(I){_.popup.onmouseup=()=>{},(I.target===_.popup||I.target instanceof HTMLElement&&_.popup.contains(I.target))&&(xg=!0)}}},k9=(_,b,I)=>{b.container.onclick=z=>{if(xg){xg=!1;return}z.target===b.container&&Q(_.allowOutsideClick)&&I(jc.backdrop)}},M9=_=>typeof _=="object"&&_.jquery,vk=_=>_ instanceof Element||M9(_),R9=_=>{let b={};return typeof _[0]=="object"&&!vk(_[0])?Object.assign(b,_[0]):["title","html","icon"].forEach((I,z)=>{let pe=_[z];typeof pe=="string"||vk(pe)?b[I]=pe:pe!==void 0&&M(`Unexpected type of ${I}! Expected "string" or "Element", got ${typeof pe}`)}),b};function P9(){for(var _=arguments.length,b=new Array(_),I=0;I<_;I++)b[I]=arguments[I];return new this(...b)}function F9(_){class b extends this{_main(z,pe){return super._main(z,Object.assign({},_,pe))}}return b}let O9=()=>o.timeout&&o.timeout.getTimerLeft(),_k=()=>{if(o.timeout)return ou(),o.timeout.stop()},yk=()=>{if(o.timeout){let _=o.timeout.start();return Oa(_),_}},N9=()=>{let _=o.timeout;return _&&(_.running?_k():yk())},L9=_=>{if(o.timeout){let b=o.timeout.increase(_);return Oa(b,!0),b}},V9=()=>!!(o.timeout&&o.timeout.isRunning()),xk=!1,Ow={};function B9(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Ow[_]=this,xk||(document.body.addEventListener("click",U9),xk=!0)}let U9=_=>{for(let b=_.target;b&&b!==document;b=b.parentNode)for(let I in Ow){let z=b.getAttribute(I);if(z){Ow[I].fire({template:z});return}}};class j9{constructor(){this.events={}}_getHandlersByEventName(b){return typeof this.events[b]>"u"&&(this.events[b]=[]),this.events[b]}on(b,I){let z=this._getHandlersByEventName(b);z.includes(I)||z.push(I)}once(b,I){var z=this;let pe=function(){z.removeListener(b,pe);for(var Ue=arguments.length,At=new Array(Ue),Kt=0;Kt<Ue;Kt++)At[Kt]=arguments[Kt];I.apply(z,At)};this.on(b,pe)}emit(b){for(var I=arguments.length,z=new Array(I>1?I-1:0),pe=1;pe<I;pe++)z[pe-1]=arguments[pe];this._getHandlersByEventName(b).forEach(Ue=>{try{Ue.apply(this,z)}catch(At){console.error(At)}})}removeListener(b,I){let z=this._getHandlersByEventName(b),pe=z.indexOf(I);pe>-1&&z.splice(pe,1)}removeAllListeners(b){this.events[b]!==void 0&&(this.events[b].length=0)}reset(){this.events={}}}o.eventEmitter=new j9;var $9=Object.freeze({__proto__:null,argsToParams:R9,bindClickHandler:B9,clickCancel:eg,clickConfirm:Uc,clickDeny:Iw,enableLoading:ja,fire:P9,getActions:ne,getCancelButton:Cn,getCloseButton:rt,getConfirmButton:Ft,getContainer:A,getDenyButton:Z,getFocusableElements:ke,getFooter:we,getHtmlContainer:lt,getIcon:U,getIconContent:nt,getImage:ut,getInputLabel:me,getLoader:re,getPopup:V,getProgressSteps:Ut,getTimerLeft:O9,getTimerProgressBar:Be,getTitle:Ae,getValidationMessage:It,increaseTimer:L9,isDeprecatedParameter:Qi,isLoading:sr,isTimerRunning:V9,isUpdatableParameter:Ha,isValidParameter:Gr,isVisible:hu,mixin:F9,off:(_,b)=>{if(!_){o.eventEmitter.reset();return}b?o.eventEmitter.removeListener(_,b):o.eventEmitter.removeAllListeners(_)},on:(_,b)=>{o.eventEmitter.on(_,b)},once:(_,b)=>{o.eventEmitter.once(_,b)},resumeTimer:yk,showLoading:ja,stopTimer:_k,toggleTimer:N9});class H9{constructor(b,I){this.callback=b,this.remaining=I,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(b){let I=this.running;return I&&this.stop(),this.remaining+=b,I&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let wk=["swal-title","swal-html","swal-footer"],z9=_=>{let b=typeof _.template=="string"?document.querySelector(_.template):_.template;if(!b)return{};let I=b.content;return Z9(I),Object.assign(W9(I),q9(I),G9(I),K9(I),Q9(I),Y9(I),X9(I,wk))},W9=_=>{let b={};return Array.from(_.querySelectorAll("swal-param")).forEach(z=>{yu(z,["name","value"]);let pe=z.getAttribute("name"),Ue=z.getAttribute("value");!pe||!Ue||(typeof qt[pe]=="boolean"?b[pe]=Ue!=="false":typeof qt[pe]=="object"?b[pe]=JSON.parse(Ue):b[pe]=Ue)}),b},q9=_=>{let b={};return Array.from(_.querySelectorAll("swal-function-param")).forEach(z=>{let pe=z.getAttribute("name"),Ue=z.getAttribute("value");!pe||!Ue||(b[pe]=new Function(`return ${Ue}`)())}),b},G9=_=>{let b={};return Array.from(_.querySelectorAll("swal-button")).forEach(z=>{yu(z,["type","color","aria-label"]);let pe=z.getAttribute("type");!pe||!["confirm","cancel","deny"].includes(pe)||(b[`${pe}ButtonText`]=z.innerHTML,b[`show${y(pe)}Button`]=!0,z.hasAttribute("color")&&(b[`${pe}ButtonColor`]=z.getAttribute("color")),z.hasAttribute("aria-label")&&(b[`${pe}ButtonAriaLabel`]=z.getAttribute("aria-label")))}),b},K9=_=>{let b={},I=_.querySelector("swal-image");return I&&(yu(I,["src","width","height","alt"]),I.hasAttribute("src")&&(b.imageUrl=I.getAttribute("src")||void 0),I.hasAttribute("width")&&(b.imageWidth=I.getAttribute("width")||void 0),I.hasAttribute("height")&&(b.imageHeight=I.getAttribute("height")||void 0),I.hasAttribute("alt")&&(b.imageAlt=I.getAttribute("alt")||void 0)),b},Q9=_=>{let b={},I=_.querySelector("swal-icon");return I&&(yu(I,["type","color"]),I.hasAttribute("type")&&(b.icon=I.getAttribute("type")),I.hasAttribute("color")&&(b.iconColor=I.getAttribute("color")),b.iconHtml=I.innerHTML),b},Y9=_=>{let b={},I=_.querySelector("swal-input");I&&(yu(I,["type","label","placeholder","value"]),b.input=I.getAttribute("type")||"text",I.hasAttribute("label")&&(b.inputLabel=I.getAttribute("label")),I.hasAttribute("placeholder")&&(b.inputPlaceholder=I.getAttribute("placeholder")),I.hasAttribute("value")&&(b.inputValue=I.getAttribute("value")));let z=Array.from(_.querySelectorAll("swal-input-option"));return z.length&&(b.inputOptions={},z.forEach(pe=>{yu(pe,["value"]);let Ue=pe.getAttribute("value");if(!Ue)return;let At=pe.innerHTML;b.inputOptions[Ue]=At})),b},X9=(_,b)=>{let I={};for(let z in b){let pe=b[z],Ue=_.querySelector(pe);Ue&&(yu(Ue,[]),I[pe.replace(/^swal-/,"")]=Ue.innerHTML.trim())}return I},Z9=_=>{let b=wk.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(_.children).forEach(I=>{let z=I.tagName.toLowerCase();b.includes(z)||E(`Unrecognized element <${z}>`)})},yu=(_,b)=>{Array.from(_.attributes).forEach(I=>{b.indexOf(I.name)===-1&&E([`Unrecognized attribute "${I.name}" on <${_.tagName.toLowerCase()}>.`,`${b.length?`Allowed attributes are: ${b.join(", ")}`:"To set the value, use HTML within the element."}`])})},bk=10,J9=_=>{let b=A(),I=V();typeof _.willOpen=="function"&&_.willOpen(I),o.eventEmitter.emit("willOpen",I);let pe=window.getComputedStyle(document.body).overflowY;n7(b,I,_),setTimeout(()=>{e7(b,I)},bk),Lt()&&(t7(b,_.scrollbarPadding,pe),Aw()),!xt()&&!o.previousActiveElement&&(o.previousActiveElement=document.activeElement),typeof _.didOpen=="function"&&setTimeout(()=>_.didOpen(I)),o.eventEmitter.emit("didOpen",I),Jr(b,d["no-transition"])},wg=_=>{let b=V();if(_.target!==b)return;let I=A();b.removeEventListener("animationend",wg),b.removeEventListener("transitionend",wg),I.style.overflowY="auto"},e7=(_,b)=>{no(b)?(_.style.overflowY="hidden",b.addEventListener("animationend",wg),b.addEventListener("transitionend",wg)):_.style.overflowY="auto"},t7=(_,b,I)=>{kw(),b&&I!=="hidden"&&Jn(I),setTimeout(()=>{_.scrollTop=0})},n7=(_,b,I)=>{mt(_,I.showClass.backdrop),I.animation?(b.style.setProperty("opacity","0","important"),Dn(b,"grid"),setTimeout(()=>{mt(b,I.showClass.popup),b.style.removeProperty("opacity")},bk)):Dn(b,"grid"),mt([document.documentElement,document.body],d.shown),I.heightAuto&&I.backdrop&&!I.toast&&mt([document.documentElement,document.body],d["height-auto"])};var Ek={email:(_,b)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(_)?Promise.resolve():Promise.resolve(b||"Invalid email address"),url:(_,b)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(_)?Promise.resolve():Promise.resolve(b||"Invalid URL")};function r7(_){_.inputValidator||(_.input==="email"&&(_.inputValidator=Ek.email),_.input==="url"&&(_.inputValidator=Ek.url))}function i7(_){(!_.target||typeof _.target=="string"&&!document.querySelector(_.target)||typeof _.target!="string"&&!_.target.appendChild)&&(E('Target parameter is not valid, defaulting to "body"'),_.target="body")}function s7(_){r7(_),_.showLoaderOnConfirm&&!_.preConfirm&&E(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),i7(_),typeof _.title=="string"&&(_.title=_.title.split(`
`).join("<br />")),lu(_)}let Wo;var bg=new WeakMap;class Sr{constructor(){if(r(this,bg,void 0),typeof window>"u")return;Wo=this;for(var b=arguments.length,I=new Array(b),z=0;z<b;z++)I[z]=arguments[z];let pe=Object.freeze(this.constructor.argsToParams(I));this.params=pe,this.isAwaitingPromise=!1,i(bg,this,this._main(Wo.params))}_main(b){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(w9(Object.assign({},I,b)),o.currentInstance){let Ue=zc.swalPromiseResolve.get(o.currentInstance),{isAwaitingPromise:At}=o.currentInstance;o.currentInstance._destroy(),At||Ue({isDismissed:!0}),Lt()&&so()}o.currentInstance=Wo;let z=a7(b,I);s7(z),Object.freeze(z),o.timeout&&(o.timeout.stop(),delete o.timeout),clearTimeout(o.restoreFocusTimeout);let pe=c7(Wo);return fu(Wo,z),j.innerParams.set(Wo,z),o7(Wo,pe,z)}then(b){return t(bg,this).then(b)}finally(b){return t(bg,this).finally(b)}}let o7=(_,b,I)=>new Promise((z,pe)=>{let Ue=At=>{_.close({isDismissed:!0,dismiss:At})};zc.swalPromiseResolve.set(_,z),zc.swalPromiseReject.set(_,pe),b.confirmButton.onclick=()=>{Zd(_)},b.denyButton.onclick=()=>{gg(_)},b.cancelButton.onclick=()=>{vg(_,Ue)},b.closeButton.onclick=()=>{Ue(jc.close)},S9(I,b,Ue),Tw(o,I,Ue),Yd(_,I),J9(I),l7(o,I,Ue),u7(b,I),setTimeout(()=>{b.container.scrollTop=0})}),a7=(_,b)=>{let I=z9(_),z=Object.assign({},qt,b,I,_);return z.showClass=Object.assign({},qt.showClass,z.showClass),z.hideClass=Object.assign({},qt.hideClass,z.hideClass),z.animation===!1&&(z.showClass={backdrop:"swal2-noanimation"},z.hideClass={}),z},c7=_=>{let b={popup:V(),container:A(),actions:ne(),confirmButton:Ft(),denyButton:Z(),cancelButton:Cn(),loader:re(),closeButton:rt(),validationMessage:It(),progressSteps:Ut()};return j.domCache.set(_,b),b},l7=(_,b,I)=>{let z=Be();Yn(z),b.timer&&(_.timeout=new H9(()=>{I("timer"),delete _.timeout},b.timer),b.timerProgressBar&&(Dn(z),Ve(z,b,"timerProgressBar"),setTimeout(()=>{_.timeout&&_.timeout.running&&Oa(b.timer)})))},u7=(_,b)=>{if(!b.toast){if(!Q(b.allowEnterKey)){K("allowEnterKey"),h7();return}d7(_)||f7(_,b)||c0(-1,1)}},d7=_=>{let b=Array.from(_.popup.querySelectorAll("[autofocus]"));for(let I of b)if(I instanceof HTMLElement&&Dr(I))return I.focus(),!0;return!1},f7=(_,b)=>b.focusDeny&&Dr(_.denyButton)?(_.denyButton.focus(),!0):b.focusCancel&&Dr(_.cancelButton)?(_.cancelButton.focus(),!0):b.focusConfirm&&Dr(_.confirmButton)?(_.confirmButton.focus(),!0):!1,h7=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let _=new Date,b=localStorage.getItem("swal-initiation");b?(_.getTime()-Date.parse(b))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let I=document.createElement("audio");I.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",I.loop=!0,document.body.appendChild(I),setTimeout(()=>{I.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${_}`)}Sr.prototype.disableButtons=S,Sr.prototype.enableButtons=C,Sr.prototype.getInput=p0,Sr.prototype.disableInput=oe,Sr.prototype.enableInput=L,Sr.prototype.hideLoading=ei,Sr.prototype.disableLoading=ei,Sr.prototype.showValidationMessage=ge,Sr.prototype.resetValidationMessage=Oe,Sr.prototype.close=oo,Sr.prototype.closePopup=oo,Sr.prototype.closeModal=oo,Sr.prototype.closeToast=oo,Sr.prototype.rejectPromise=vu,Sr.prototype.update=pk,Sr.prototype._destroy=mk,Object.assign(Sr,$9),Object.keys(C9).forEach(_=>{Sr[_]=function(){return Wo&&Wo[_]?Wo[_](...arguments):null}}),Sr.DismissReason=jc,Sr.version="11.15.10";let Eg=Sr;return Eg.default=Eg,Eg});typeof wa<"u"&&wa.Sweetalert2&&(wa.swal=wa.sweetAlert=wa.Swal=wa.SweetAlert=wa.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')});function Dk(n,e){return Object.is(n,e)}var Kr=null,g0=!1,Cg=1,qo=Symbol("SIGNAL");function Vt(n){let e=Kr;return Kr=n,e}function Ak(){return Kr}function E7(){return g0}var nf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jw(n){if(g0)throw new Error("");if(Kr===null)return;Kr.consumerOnSignalRead(n);let e=Kr.nextProducerIndex++;if(kg(Kr),e<Kr.producerNode.length&&Kr.producerNode[e]!==n&&v0(Kr)){let t=Kr.producerNode[e];Ag(t,Kr.producerIndexOfThis[e])}Kr.producerNode[e]!==n&&(Kr.producerNode[e]=n,Kr.producerIndexOfThis[e]=v0(Kr)?Fk(n,Kr,e):0),Kr.producerLastReadVersion[e]=n.version}function C7(){Cg++}function kk(n){if(!(v0(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cg)){if(!n.producerMustRecompute(n)&&!Tg(n)){n.dirty=!1,n.lastCleanEpoch=Cg;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Cg}}function Mk(n){if(n.liveConsumerNode===void 0)return;let e=g0;g0=!0;try{for(let t of n.liveConsumerNode)t.dirty||Pk(t)}finally{g0=e}}function Rk(){return Kr?.consumerAllowSignalWrites!==!1}function Pk(n){n.dirty=!0,Mk(n),n.consumerMarkedDirty?.(n)}function _0(n){return n&&(n.nextProducerIndex=0),Vt(n)}function Ig(n,e){if(Vt(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(v0(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ag(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Tg(n){kg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(kk(t),r!==t.version))return!0}return!1}function Dg(n){if(kg(n),v0(n))for(let e=0;e<n.producerNode.length;e++)Ag(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Fk(n,e,t){if(Ok(n),n.liveConsumerNode.length===0&&Nk(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Fk(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ag(n,e){if(Ok(n),n.liveConsumerNode.length===1&&Nk(n))for(let r=0;r<n.producerNode.length;r++)Ag(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];kg(i),i.producerIndexOfThis[r]=e}}function v0(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function kg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ok(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Nk(n){return n.producerNode!==void 0}function Lk(n){let e=Object.create(S7);e.computation=n;let t=()=>{if(kk(e),jw(e),e.value===Sg)throw e.error;return e.value};return t[qo]=e,t}var Vw=Symbol("UNSET"),Bw=Symbol("COMPUTING"),Sg=Symbol("ERRORED"),S7=Te(fe({},nf),{value:Vw,dirty:!0,error:null,equal:Dk,producerMustRecompute(n){return n.value===Vw||n.value===Bw},producerRecomputeValue(n){if(n.value===Bw)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Bw;let t=_0(n),r;try{r=n.computation()}catch(i){r=Sg,n.error=i}finally{Ig(n,t)}if(e!==Vw&&e!==Sg&&r!==Sg&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function I7(){throw new Error}var Vk=I7;function Bk(){Vk()}function Uk(n){Vk=n}var T7=null;function jk(n){let e=Object.create(Hk);e.value=n;let t=()=>(jw(e),e.value);return t[qo]=e,t}function $w(n,e){Rk()||Bk(),n.equal(n.value,e)||(n.value=e,D7(n))}function $k(n,e){Rk()||Bk(),$w(n,e(n.value))}var Hk=Te(fe({},nf),{equal:Dk,value:void 0});function D7(n){n.version++,C7(),Mk(n),T7?.()}function zk(n,e,t){let r=Object.create(A7);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Dg(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Uw)}let a=()=>{if(r.fn===null)return;if(E7())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Tg(r))return;r.hasRun=!0;let c=_0(r);try{r.cleanupFn(),r.cleanupFn=Uw,r.fn(i)}finally{Ig(r,c)}};return r.ref={notify:()=>Pk(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[qo]:r},r.ref}var Uw=()=>{},A7=Te(fe({},nf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Uw});function wt(n){return typeof n=="function"}function rf(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Mg=rf(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xu(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var fr=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(wt(r))try{r()}catch(s){e=s instanceof Mg?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Wk(s)}catch(o){e=e??[],o instanceof Mg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Mg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Wk(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xu(t,e)}remove(e){let{_finalizers:t}=this;t&&xu(t,e),e instanceof n&&e._removeParent(this)}};fr.EMPTY=(()=>{let n=new fr;return n.closed=!0,n})();var Hw=fr.EMPTY;function Rg(n){return n instanceof fr||n&&"closed"in n&&wt(n.remove)&&wt(n.add)&&wt(n.unsubscribe)}function Wk(n){wt(n)?n():n.unsubscribe()}var co={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sf={setTimeout(n,e,...t){let{delegate:r}=sf;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=sf;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Pg(n){sf.setTimeout(()=>{let{onUnhandledError:e}=co;if(e)e(n);else throw n})}function y0(){}var qk=zw("C",void 0,void 0);function Gk(n){return zw("E",void 0,n)}function Kk(n){return zw("N",n,void 0)}function zw(n,e,t){return{kind:n,value:e,error:t}}var wu=null;function of(n){if(co.useDeprecatedSynchronousErrorHandling){let e=!wu;if(e&&(wu={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=wu;if(wu=null,t)throw r}}else n()}function Qk(n){co.useDeprecatedSynchronousErrorHandling&&wu&&(wu.errorThrown=!0,wu.error=n)}var bu=class extends fr{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rg(e)&&e.add(this)):this.destination=R7}static create(e,t,r){return new Yc(e,t,r)}next(e){this.isStopped?qw(Kk(e),this):this._next(e)}error(e){this.isStopped?qw(Gk(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qw(qk,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},k7=Function.prototype.bind;function Ww(n,e){return k7.call(n,e)}var Gw=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Fg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Fg(r)}else Fg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fg(t)}}},Yc=class extends bu{constructor(e,t,r){super();let i;if(wt(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&co.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ww(e.next,s),error:e.error&&Ww(e.error,s),complete:e.complete&&Ww(e.complete,s)}):i=e}this.destination=new Gw(i)}};function Fg(n){co.useDeprecatedSynchronousErrorHandling?Qk(n):Pg(n)}function M7(n){throw n}function qw(n,e){let{onStoppedNotification:t}=co;t&&sf.setTimeout(()=>t(n,e))}var R7={closed:!0,next:y0,error:M7,complete:y0};var af=typeof Symbol=="function"&&Symbol.observable||"@@observable";function gs(n){return n}function Og(...n){return Kw(n)}function Kw(n){return n.length===0?gs:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var kt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=F7(t)?t:new Yc(t,r,i);return of(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Yk(r),new r((i,s)=>{let o=new Yc({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[af](){return this}pipe(...t){return Kw(t)(this)}toPromise(t){return t=Yk(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Yk(n){var e;return(e=n??co.Promise)!==null&&e!==void 0?e:Promise}function P7(n){return n&&wt(n.next)&&wt(n.error)&&wt(n.complete)}function F7(n){return n&&n instanceof bu||P7(n)&&Rg(n)}function Qw(n){return wt(n?.lift)}function Qt(n){return e=>{if(Qw(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function jt(n,e,t,r,i){return new Yw(n,e,t,r,i)}var Yw=class extends bu{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function cf(){return Qt((n,e)=>{let t=null;n._refCount++;let r=jt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var lf=class extends kt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Qw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new fr;let t=this.getSubject();e.add(this.source.subscribe(jt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=fr.EMPTY)}return e}refCount(){return cf()(this)}};var Xk=rf(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ni=(()=>{class n extends kt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ng(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Xk}next(t){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){of(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Hw:(this.currentObservers=null,s.push(t),new fr(()=>{this.currentObservers=null,xu(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new kt;return t.source=this,t}}return n.create=(e,t)=>new Ng(e,t),n})(),Ng=class extends ni{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hw}};var Qr=class extends ni{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xw={now(){return(Xw.delegate||Date).now()},delegate:void 0};var Lg=class extends fr{constructor(e,t){super()}schedule(e,t=0){return this}};var x0={setInterval(n,e,...t){let{delegate:r}=x0;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=x0;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var uf=class extends Lg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return x0.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&x0.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xu(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var df=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};df.now=Xw.now;var ff=class extends df{constructor(e,t=df.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Zw=new ff(uf);var Vg=class extends uf{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Bg=class extends ff{};var Jw=new Bg(Vg);var vs=new kt(n=>n.complete());function Zk(n){return n&&wt(n.schedule)}function Jk(n){return n[n.length-1]}function Ug(n){return wt(Jk(n))?n.pop():void 0}function Xc(n){return Zk(Jk(n))?n.pop():void 0}function eb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tM(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function eM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eu(n){return this instanceof Eu?(this.v=n,this):new Eu(n)}function nM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(w){return Promise.resolve(w).then(g,d)}}function a(g,w){r[g]&&(i[g]=function(y){return new Promise(function(E,M){s.push([g,y,E,M])>1||c(g,y)})},w&&(i[g]=w(i[g])))}function c(g,w){try{l(r[g](w))}catch(y){m(s[0][3],y)}}function l(g){g.value instanceof Eu?Promise.resolve(g.value.v).then(u,d):m(s[0][2],g)}function u(g){c("next",g)}function d(g){c("throw",g)}function m(g,w){g(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function rM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eM=="function"?eM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var jg=n=>n&&typeof n.length=="number"&&typeof n!="function";function $g(n){return wt(n?.then)}function Hg(n){return wt(n[af])}function zg(n){return Symbol.asyncIterator&&wt(n?.[Symbol.asyncIterator])}function Wg(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function O7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qg=O7();function Gg(n){return wt(n?.[qg])}function Kg(n){return nM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Eu(t.read());if(i)return yield Eu(void 0);yield yield Eu(r)}}finally{t.releaseLock()}})}function Qg(n){return wt(n?.getReader)}function kr(n){if(n instanceof kt)return n;if(n!=null){if(Hg(n))return N7(n);if(jg(n))return L7(n);if($g(n))return V7(n);if(zg(n))return iM(n);if(Gg(n))return B7(n);if(Qg(n))return U7(n)}throw Wg(n)}function N7(n){return new kt(e=>{let t=n[af]();if(wt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function L7(n){return new kt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function V7(n){return new kt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Pg)})}function B7(n){return new kt(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iM(n){return new kt(e=>{j7(n,e).catch(t=>e.error(t))})}function U7(n){return iM(Kg(n))}function j7(n,e){var t,r,i,s;return tM(this,void 0,void 0,function*(){try{for(t=rM(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Yi(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Zc(n,e=0){return Qt((t,r)=>{t.subscribe(jt(r,i=>Yi(r,n,()=>r.next(i),e),()=>Yi(r,n,()=>r.complete(),e),i=>Yi(r,n,()=>r.error(i),e)))})}function Jc(n,e=0){return Qt((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sM(n,e){return kr(n).pipe(Jc(e),Zc(e))}function oM(n,e){return kr(n).pipe(Jc(e),Zc(e))}function aM(n,e){return new kt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cM(n,e){return new kt(t=>{let r;return Yi(t,e,()=>{r=n[qg](),Yi(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>wt(r?.return)&&r.return()})}function Yg(n,e){if(!n)throw new Error("Iterable cannot be null");return new kt(t=>{Yi(t,e,()=>{let r=n[Symbol.asyncIterator]();Yi(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lM(n,e){return Yg(Kg(n),e)}function uM(n,e){if(n!=null){if(Hg(n))return sM(n,e);if(jg(n))return aM(n,e);if($g(n))return oM(n,e);if(zg(n))return Yg(n,e);if(Gg(n))return cM(n,e);if(Qg(n))return lM(n,e)}throw Wg(n)}function Ot(n,e){return e?uM(n,e):kr(n)}function Ke(...n){let e=Xc(n);return Ot(n,e)}function hf(n,e){let t=wt(n)?n:()=>n,r=i=>i.error(t());return new kt(e?i=>e.schedule(r,0,i):r)}function tb(n){return!!n&&(n instanceof kt||wt(n.lift)&&wt(n.subscribe))}var lo=rf(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function nb(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let s=new Yc({next:o=>{r(o),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new lo)}});n.subscribe(s)})}function je(n,e){return Qt((t,r)=>{let i=0;t.subscribe(jt(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:$7}=Array;function H7(n,e){return $7(e)?n(...e):n(e)}function Xg(n){return je(e=>H7(n,e))}var{isArray:z7}=Array,{getPrototypeOf:W7,prototype:q7,keys:G7}=Object;function Zg(n){if(n.length===1){let e=n[0];if(z7(e))return{args:e,keys:null};if(K7(e)){let t=G7(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function K7(n){return n&&typeof n=="object"&&W7(n)===q7}function Jg(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function w0(...n){let e=Xc(n),t=Ug(n),{args:r,keys:i}=Zg(n);if(r.length===0)return Ot([],e);let s=new kt(Q7(r,e,i?o=>Jg(i,o):gs));return t?s.pipe(Xg(t)):s}function Q7(n,e,t=gs){return r=>{dM(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)dM(e,()=>{let l=Ot(n[c],e),u=!1;l.subscribe(jt(r,d=>{s[c]=d,u||(u=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function dM(n,e,t){n?Yi(t,n,e):e()}function fM(n,e,t,r,i,s,o,a){let c=[],l=0,u=0,d=!1,m=()=>{d&&!c.length&&!l&&e.complete()},g=y=>l<r?w(y):c.push(y),w=y=>{s&&e.next(y),l++;let E=!1;kr(t(y,u++)).subscribe(jt(e,M=>{i?.(M),s?g(M):e.next(M)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let M=c.shift();o?Yi(e,o,()=>w(M)):w(M)}m()}catch(M){e.error(M)}}))};return n.subscribe(jt(e,g,()=>{d=!0,m()})),()=>{a?.()}}function hr(n,e,t=1/0){return wt(e)?hr((r,i)=>je((s,o)=>e(r,s,i,o))(kr(n(r,i))),t):(typeof e=="number"&&(t=e),Qt((r,i)=>fM(r,i,n,t)))}function el(n=1/0){return hr(gs,n)}function hM(){return el(1)}function pf(...n){return hM()(Ot(n,Xc(n)))}function ev(n){return new kt(e=>{kr(n()).subscribe(e)})}function b0(...n){let e=Ug(n),{args:t,keys:r}=Zg(n),i=new kt(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;kr(t[u]).subscribe(jt(s,m=>{d||(d=!0,l--),a[u]=m},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(r?Jg(r,a):a),s.complete())}))}});return e?i.pipe(Xg(e)):i}function di(n,e){return Qt((t,r)=>{let i=0;t.subscribe(jt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function pr(n){return Qt((e,t)=>{let r=null,i=!1,s;r=e.subscribe(jt(t,void 0,void 0,o=>{s=kr(n(o,pr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function pM(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(jt(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Cu(n,e){return wt(e)?hr(n,e,1):hr(n,1)}function tl(n){return Qt((e,t)=>{let r=!1;e.subscribe(jt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Mr(n){return n<=0?()=>vs:Qt((e,t)=>{let r=0;e.subscribe(jt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function rb(n){return je(()=>n)}function tv(n=Y7){return Qt((e,t)=>{let r=!1;e.subscribe(jt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Y7(){return new lo}function E0(n){return Qt((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Go(n,e){let t=arguments.length>=2;return r=>r.pipe(n?di((i,s)=>n(i,s,r)):gs,Mr(1),t?tl(e):tv(()=>new lo))}function mf(n){return n<=0?()=>vs:Qt((e,t)=>{let r=[];e.subscribe(jt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ib(n,e){let t=arguments.length>=2;return r=>r.pipe(n?di((i,s)=>n(i,s,r)):gs,mf(1),t?tl(e):tv(()=>new lo))}function nv(n,e){return Qt(pM(n,e,arguments.length>=2,!0))}function rv(...n){let e=Xc(n);return Qt((t,r)=>{(e?pf(n,t,e):pf(n,t)).subscribe(r)})}function Ir(n,e){return Qt((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(jt(r,c=>{i?.unsubscribe();let l=0,u=s++;kr(n(c,u)).subscribe(i=jt(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function sb(n){return Qt((e,t)=>{kr(n).subscribe(jt(t,()=>t.complete(),y0)),!t.closed&&e.subscribe(t)})}function Yr(n,e,t){let r=wt(n)||e||t?{next:n,error:e,complete:t}:n;return r?Qt((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(jt(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):gs}var JM="https://g.co/ng/security#xss",et=class extends Error{constructor(e,t){super(DE(e,t)),this.code=e}};function DE(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function L0(n){return{toString:n}.toString()}var iv="__parameters__";function X7(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function eR(n,e,t){return L0(()=>{let r=X7(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(iv)?c[iv]:Object.defineProperty(c,iv,{value:[]})[iv];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Iu=globalThis;function kn(n){for(let e in n)if(n[e]===kn)return e;throw Error("Could not find renamed property on target object.")}function Z7(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bi(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Bi).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function xb(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var J7=kn({__forward_ref__:kn});function Ui(n){return n.__forward_ref__=Ui,n.toString=function(){return Bi(this())},n}function Vi(n){return tR(n)?n():n}function tR(n){return typeof n=="function"&&n.hasOwnProperty(J7)&&n.__forward_ref__===Ui}function Xe(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ga(n){return{providers:n.providers||[],imports:n.imports||[]}}function $v(n){return mM(n,rR)||mM(n,iR)}function nR(n){return $v(n)!==null}function mM(n,e){return n.hasOwnProperty(e)?n[e]:null}function eU(n){let e=n&&(n[rR]||n[iR]);return e||null}function gM(n){return n&&(n.hasOwnProperty(vM)||n.hasOwnProperty(tU))?n[vM]:null}var rR=kn({\u0275prov:kn}),vM=kn({\u0275inj:kn}),iR=kn({ngInjectableDef:kn}),tU=kn({ngInjectorDef:kn}),Ze=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Xe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sR(n){return n&&!!n.\u0275providers}var nU=kn({\u0275cmp:kn}),rU=kn({\u0275dir:kn}),iU=kn({\u0275pipe:kn}),sU=kn({\u0275mod:kn}),gv=kn({\u0275fac:kn}),S0=kn({__NG_ELEMENT_ID__:kn}),_M=kn({__NG_ENV_ID__:kn});function za(n){return typeof n=="string"?n:n==null?"":String(n)}function oU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():za(n)}function aU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new et(-200,n)}function AE(n,e){throw new et(-201,!1)}var Rt=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Rt||{}),wb;function oR(){return wb}function Xi(n){let e=wb;return wb=n,e}function aR(n,e,t){let r=$v(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Rt.Optional)return null;if(e!==void 0)return e;AE(n,"Injector")}var cU={},I0=cU,bb="__NG_DI_FLAG__",vv="ngTempTokenPath",lU="ngTokenPath",uU=/\n/gm,dU="\u0275",yM="__source",xf;function fU(){return xf}function nl(n){let e=xf;return xf=n,e}function hU(n,e=Rt.Default){if(xf===void 0)throw new et(-203,!1);return xf===null?aR(n,void 0,e):xf.get(n,e&Rt.Optional?null:void 0,e)}function vt(n,e=Rt.Default){return(oR()||hU)(Vi(n),e)}function le(n,e=Rt.Default){return vt(n,Hv(e))}function Hv(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Eb(n){let e=[];for(let t=0;t<n.length;t++){let r=Vi(n[t]);if(Array.isArray(r)){if(r.length===0)throw new et(900,!1);let i,s=Rt.Default;for(let o=0;o<r.length;o++){let a=r[o],c=pU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(vt(i,s))}else e.push(vt(r))}return e}function cR(n,e){return n[bb]=e,n.prototype[bb]=e,n}function pU(n){return n[bb]}function mU(n,e,t,r){let i=n[vv];throw e[yM]&&i.unshift(e[yM]),n.message=gU(`
`+n.message,i,t,r),n[lU]=i,n[vv]=null,n}function gU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==dU?n.slice(2):n;let i=Bi(e);if(Array.isArray(e))i=e.map(Bi).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Bi(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(uU,`
  `)}`}var gr=cR(eR("Optional"),8);var zv=cR(eR("SkipSelf"),4);function Du(n,e){let t=n.hasOwnProperty(gv);return t?n[gv]:null}function vU(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function _U(n){return n.flat(Number.POSITIVE_INFINITY)}function kE(n,e){n.forEach(t=>Array.isArray(t)?kE(t,e):e(t))}function lR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _v(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function yU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function ME(n,e,t){let r=V0(n,e);return r>=0?n[r|1]=t:(r=~r,yU(n,r,e,t)),r}function ob(n,e){let t=V0(n,e);if(t>=0)return n[t|1]}function V0(n,e){return xU(n,e,1)}function xU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var bf={},Zi=[],Ef=new Ze(""),uR=new Ze("",-1),dR=new Ze(""),yv=class{get(e,t=I0){if(t===I0){let r=new Error(`NullInjectorError: No provider for ${Bi(e)}!`);throw r.name="NullInjectorError",r}return t}},fR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(fR||{}),Yo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Yo||{}),sl=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(sl||{});function wU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Cb(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];bU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function hR(n){return n===3||n===4||n===6}function bU(n){return n.charCodeAt(0)===64}function T0(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?xM(n,t,i,null,e[++r]):xM(n,t,i,null,null))}}return n}function xM(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var pR="ng-template";function EU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&wU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(RE(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function RE(n){return n.type===4&&n.value!==pR}function CU(n,e,t){let r=n.type===4&&!t?pR:n.value;return e===r}function SU(n,e,t){let r=4,i=n.attrs,s=i!==null?DU(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!uo(r)&&!uo(c))return!1;if(o&&uo(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!CU(n,c,t)||c===""&&e.length===1){if(uo(r))return!1;o=!0}}else if(r&8){if(i===null||!EU(n,i,c,t)){if(uo(r))return!1;o=!0}}else{let l=e[++a],u=IU(c,i,RE(n),t);if(u===-1){if(uo(r))return!1;o=!0;continue}if(l!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&l!==d){if(uo(r))return!1;o=!0}}}}return uo(r)||o}function uo(n){return(n&1)===0}function IU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return AU(e,n)}function TU(n,e,t=!1){for(let r=0;r<e.length;r++)if(SU(n,e[r],t))return!0;return!1}function DU(n){for(let e=0;e<n.length;e++){let t=n[e];if(hR(t))return e}return n.length}function AU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function wM(n,e){return n?":not("+e.trim()+")":e}function kU(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!uo(o)&&(e+=wM(s,i),i=""),r=o,s=s||!uo(r);t++}return i!==""&&(e+=wM(s,i)),e}function MU(n){return n.map(kU).join(",")}function RU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!uo(i))break;i=s}r++}return{attrs:e,classes:t}}function Yt(n){return L0(()=>{let e=yR(n),t=Te(fe({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Yo.Emulated,styles:n.styles||Zi,_:null,schemas:n.schemas||null,tView:null,id:""});xR(t);let r=n.dependencies;return t.directiveDefs=EM(r,!1),t.pipeDefs=EM(r,!0),t.id=OU(t),t})}function PU(n){return ol(n)||mR(n)}function FU(n){return n!==null}function Ka(n){return L0(()=>({type:n.type,bootstrap:n.bootstrap||Zi,declarations:n.declarations||Zi,imports:n.imports||Zi,exports:n.exports||Zi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bM(n,e){if(n==null)return bf;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=sl.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==sl.None?[r,a]:r,e[s]=o):t[s]=r}return t}function fn(n){return L0(()=>{let e=yR(n);return xR(e),e})}function Rf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ol(n){return n[nU]||null}function mR(n){return n[rU]||null}function gR(n){return n[iU]||null}function vR(n){let e=ol(n)||mR(n)||gR(n);return e!==null?e.standalone:!1}function _R(n,e){let t=n[sU]||null;if(!t&&e===!0)throw new Error(`Type ${Bi(n)} does not have '\u0275mod' property.`);return t}function yR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||bf,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Zi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bM(n.inputs,e),outputs:bM(n.outputs),debugInfo:null}}function xR(n){n.features?.forEach(e=>e(n))}function EM(n,e){if(!n)return null;let t=e?gR:PU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(FU)}function OU(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $s(n){return{\u0275providers:n}}function NU(...n){return{\u0275providers:wR(!0,n),\u0275fromNgModule:!0}}function wR(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return kE(e,o=>{let a=o;Sb(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&bR(i,s),t}function bR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];PE(i,s=>{e(s,r)})}}function Sb(n,e,t,r){if(n=Vi(n),!n)return!1;let i=null,s=gM(n),o=!s&&ol(n);if(!s&&!o){let c=n.ngModule;if(s=gM(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Sb(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{kE(s.imports,u=>{Sb(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&bR(l,e)}if(!a){let l=Du(i)||(()=>new i);e({provide:i,useFactory:l,deps:Zi},i),e({provide:dR,useValue:i,multi:!0},i),e({provide:Ef,useValue:()=>vt(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;PE(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function PE(n,e){for(let t of n)sR(t)&&(t=t.\u0275providers),Array.isArray(t)?PE(t,e):e(t)}var LU=kn({provide:String,useValue:kn});function ER(n){return n!==null&&typeof n=="object"&&LU in n}function VU(n){return!!(n&&n.useExisting)}function BU(n){return!!(n&&n.useFactory)}function Cf(n){return typeof n=="function"}function UU(n){return!!n.useClass}var Wv=new Ze(""),lv={},jU={},ab;function FE(){return ab===void 0&&(ab=new yv),ab}var _s=class{},D0=class extends _s{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Tb(e,o=>this.processProvider(o)),this.records.set(uR,gf(void 0,this)),i.has("environment")&&this.records.set(_s,gf(void 0,this));let s=this.records.get(Wv);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dR,Zi,Rt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Vt(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Vt(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=nl(this),r=Xi(void 0),i;try{return e()}finally{nl(t),Xi(r)}}get(e,t=I0,r=Rt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(_M))return e[_M](this);r=Hv(r);let i,s=nl(this),o=Xi(void 0);try{if(!(r&Rt.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=qU(e)&&$v(e);l&&this.injectableDefInScope(l)?c=gf(Ib(e),lv):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Rt.Self?FE():this.parent;return t=r&Rt.Optional&&t===I0?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[vv]=a[vv]||[]).unshift(Bi(e)),s)throw a;return mU(a,e,"R3InjectorError",this.source)}else throw a}finally{Xi(o),nl(s)}}resolveInjectorInitializers(){let e=Vt(null),t=nl(this),r=Xi(void 0),i;try{let s=this.get(Ef,Zi,Rt.Self);for(let o of s)o()}finally{nl(t),Xi(r),Vt(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Bi(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new et(205,!1)}processProvider(e){e=Vi(e);let t=Cf(e)?e:Vi(e&&e.provide),r=HU(e);if(!Cf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=gf(void 0,lv,!0),i.factory=()=>Eb(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Vt(null);try{return t.value===lv&&(t.value=jU,t.value=t.factory()),typeof t.value=="object"&&t.value&&WU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Vt(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Vi(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ib(n){let e=$v(n),t=e!==null?e.factory:Du(n);if(t!==null)return t;if(n instanceof Ze)throw new et(204,!1);if(n instanceof Function)return $U(n);throw new et(204,!1)}function $U(n){if(n.length>0)throw new et(204,!1);let t=eU(n);return t!==null?()=>t.factory(n):()=>new n}function HU(n){if(ER(n))return gf(void 0,n.useValue);{let e=CR(n);return gf(e,lv)}}function CR(n,e,t){let r;if(Cf(n)){let i=Vi(n);return Du(i)||Ib(i)}else if(ER(n))r=()=>Vi(n.useValue);else if(BU(n))r=()=>n.useFactory(...Eb(n.deps||[]));else if(VU(n))r=()=>vt(Vi(n.useExisting));else{let i=Vi(n&&(n.useClass||n.provide));if(zU(n))r=()=>new i(...Eb(n.deps));else return Du(i)||Ib(i)}return r}function gf(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zU(n){return!!n.deps}function WU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function qU(n){return typeof n=="function"||typeof n=="object"&&n instanceof Ze}function Tb(n,e){for(let t of n)Array.isArray(t)?Tb(t,e):t&&sR(t)?Tb(t.\u0275providers,e):e(t)}function ta(n,e){n instanceof D0&&n.assertNotDestroyed();let t,r=nl(n),i=Xi(void 0);try{return e()}finally{nl(r),Xi(i)}}function SR(){return oR()!==void 0||fU()!=null}function IR(n){if(!SR())throw new et(-203,!1)}function GU(n){return typeof n=="function"}var Qa=0,gt=1,ft=2,Si=3,ho=4,mo=5,A0=6,xv=7,Ei=8,Sf=9,Xo=10,mr=11,k0=12,CM=13,Pf=14,po=15,Au=16,vf=17,Wa=18,qv=19,TR=20,rl=21,uv=22,Us=23,ri=25,DR=1;var ku=7,wv=8,If=9,Ci=10,bv=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(bv||{});function il(n){return Array.isArray(n)&&typeof n[DR]=="object"}function Ya(n){return Array.isArray(n)&&n[DR]===!0}function OE(n){return(n.flags&4)!==0}function Gv(n){return n.componentOffset>-1}function Kv(n){return(n.flags&1)===1}function al(n){return!!n.template}function Db(n){return(n[ft]&512)!==0}var Ab=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function AR(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function go(){return kR}function kR(n){return n.type.prototype.ngOnChanges&&(n.setInput=QU),KU}go.ngInherit=!0;function KU(){let n=RR(this),e=n?.current;if(e){let t=n.previous;if(t===bf)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function QU(n,e,t,r,i){let s=this.declaredInputs[r],o=RR(n)||YU(n,{previous:bf,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ab(l&&l.currentValue,t,c===bf),AR(n,e,i,t)}var MR="__ngSimpleChanges__";function RR(n){return n[MR]||null}function YU(n,e){return n[MR]=e}var SM=null;var Ko=function(n,e,t){SM?.(n,e,t)},PR="svg",XU="math";function Zo(n){for(;Array.isArray(n);)n=n[Qa];return n}function FR(n,e){return Zo(e[n])}function Hs(n,e){return Zo(e[n.index])}function NE(n,e){return n.data[e]}function Qv(n,e){return n[e]}function dl(n,e){let t=e[n];return il(t)?t:t[Qa]}function ZU(n){return(n[ft]&4)===4}function LE(n){return(n[ft]&128)===128}function JU(n){return Ya(n[Si])}function cl(n,e){return e==null?null:n[e]}function OR(n){n[vf]=0}function NR(n){n[ft]&1024||(n[ft]|=1024,LE(n)&&Xv(n))}function ej(n,e){for(;n>0;)e=e[Pf],n--;return e}function Yv(n){return!!(n[ft]&9216||n[Us]?.dirty)}function kb(n){n[Xo].changeDetectionScheduler?.notify(8),n[ft]&64&&(n[ft]|=1024),Yv(n)&&Xv(n)}function Xv(n){n[Xo].changeDetectionScheduler?.notify(0);let e=Mu(n);for(;e!==null&&!(e[ft]&8192||(e[ft]|=8192,!LE(e)));)e=Mu(e)}function LR(n,e){if((n[ft]&256)===256)throw new et(911,!1);n[rl]===null&&(n[rl]=[]),n[rl].push(e)}function tj(n,e){if(n[rl]===null)return;let t=n[rl].indexOf(e);t!==-1&&n[rl].splice(t,1)}function Mu(n){let e=n[Si];return Ya(e)?e[Si]:e}var Et={lFrame:KR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var VR=!1;function nj(){return Et.lFrame.elementDepthCount}function rj(){Et.lFrame.elementDepthCount++}function ij(){Et.lFrame.elementDepthCount--}function BR(){return Et.bindingsEnabled}function sj(){return Et.skipHydrationRootTNode!==null}function oj(n){return Et.skipHydrationRootTNode===n}function aj(){Et.skipHydrationRootTNode=null}function dt(){return Et.lFrame.lView}function er(){return Et.lFrame.tView}function Y(n){return Et.lFrame.contextLView=n,n[Ei]}function X(n){return Et.lFrame.contextLView=null,n}function fi(){let n=UR();for(;n!==null&&n.type===64;)n=n.parent;return n}function UR(){return Et.lFrame.currentTNode}function cj(){let n=Et.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function fl(n,e){let t=Et.lFrame;t.currentTNode=n,t.isParent=e}function VE(){return Et.lFrame.isParent}function jR(){Et.lFrame.isParent=!1}function $R(){return Et.lFrame.contextLView}function HR(){return VR}function IM(n){VR=n}function Vu(){let n=Et.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function zR(){return Et.lFrame.bindingIndex}function lj(n){return Et.lFrame.bindingIndex=n}function Ff(){return Et.lFrame.bindingIndex++}function Zv(n){let e=Et.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function uj(){return Et.lFrame.inI18n}function dj(n,e){let t=Et.lFrame;t.bindingIndex=t.bindingRootIndex=n,Mb(e)}function fj(){return Et.lFrame.currentDirectiveIndex}function Mb(n){Et.lFrame.currentDirectiveIndex=n}function hj(n){let e=Et.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function WR(){return Et.lFrame.currentQueryIndex}function BE(n){Et.lFrame.currentQueryIndex=n}function pj(n){let e=n[gt];return e.type===2?e.declTNode:e.type===1?n[mo]:null}function qR(n,e,t){if(t&Rt.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Rt.Host);)if(i=pj(s),i===null||(s=s[Pf],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Et.lFrame=GR();return r.currentTNode=e,r.lView=n,!0}function UE(n){let e=GR(),t=n[gt];Et.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function GR(){let n=Et.lFrame,e=n===null?null:n.child;return e===null?KR(n):e}function KR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function QR(){let n=Et.lFrame;return Et.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var YR=QR;function jE(){let n=QR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mj(n){return(Et.lFrame.contextLView=ej(n,Et.lFrame.contextLView))[Ei]}function vo(){return Et.lFrame.selectedIndex}function Ru(n){Et.lFrame.selectedIndex=n}function Jv(){let n=Et.lFrame;return NE(n.tView,n.selectedIndex)}function xe(){Et.lFrame.currentNamespace=PR}function Pe(){gj()}function gj(){Et.lFrame.currentNamespace=null}function vj(){return Et.lFrame.currentNamespace}var XR=!0;function e1(){return XR}function t1(n){XR=n}function _j(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=kR(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function n1(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function dv(n,e,t){ZR(n,e,3,t)}function fv(n,e,t,r){(n[ft]&3)===t&&ZR(n,e,t,r)}function cb(n,e){let t=n[ft];(t&3)===e&&(t&=16383,t+=1,n[ft]=t)}function ZR(n,e,t,r){let i=r!==void 0?n[vf]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[vf]+=65536),(a<s||s==-1)&&(yj(n,t,e,c),n[vf]=(n[vf]&4294901760)+c+2),c++}function TM(n,e){Ko(4,n,e);let t=Vt(null);try{e.call(n)}finally{Vt(t),Ko(5,n,e)}}function yj(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ft]>>14<n[vf]>>16&&(n[ft]&3)===e&&(n[ft]+=16384,TM(a,s)):TM(a,s)}var wf=-1,Pu=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function xj(n){return n instanceof Pu}function wj(n){return(n.flags&8)!==0}function bj(n){return(n.flags&16)!==0}var lb={},Rb=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Hv(r);let i=this.injector.get(e,lb,r);return i!==lb||t===lb?i:this.parentInjector.get(e,t,r)}};function JR(n){return n!==wf}function Ev(n){return n&32767}function Ej(n){return n>>16}function Cv(n,e){let t=Ej(n),r=e;for(;t>0;)r=r[Pf],t--;return r}var Pb=!0;function Sv(n){let e=Pb;return Pb=n,e}var Cj=256,eP=Cj-1,tP=5,Sj=0,Qo={};function Ij(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(S0)&&(r=t[S0]),r==null&&(r=t[S0]=Sj++);let i=r&eP,s=1<<i;e.data[n+(i>>tP)]|=s}function Iv(n,e){let t=nP(n,e);if(t!==-1)return t;let r=e[gt];r.firstCreatePass&&(n.injectorIndex=e.length,ub(r.data,n),ub(e,null),ub(r.blueprint,null));let i=$E(n,e),s=n.injectorIndex;if(JR(i)){let o=Ev(i),a=Cv(i,e),c=a[gt].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function ub(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nP(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function $E(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aP(i),r===null)return wf;if(t++,i=i[Pf],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return wf}function Fb(n,e,t){Ij(n,e,t)}function Tj(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(hR(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function rP(n,e,t){if(t&Rt.Optional||n!==void 0)return n;AE(e,"NodeInjector")}function iP(n,e,t,r){if(t&Rt.Optional&&r===void 0&&(r=null),!(t&(Rt.Self|Rt.Host))){let i=n[Sf],s=Xi(void 0);try{return i?i.get(e,r,t&Rt.Optional):aR(e,r,t&Rt.Optional)}finally{Xi(s)}}return rP(r,e,t)}function sP(n,e,t,r=Rt.Default,i){if(n!==null){if(e[ft]&2048&&!(r&Rt.Self)){let o=Mj(n,e,t,r,Qo);if(o!==Qo)return o}let s=oP(n,e,t,r,Qo);if(s!==Qo)return s}return iP(e,t,r,i)}function oP(n,e,t,r,i){let s=Aj(t);if(typeof s=="function"){if(!qR(e,n,r))return r&Rt.Host?rP(i,t,r):iP(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Rt.Optional))AE(t);else return o}finally{YR()}}else if(typeof s=="number"){let o=null,a=nP(n,e),c=wf,l=r&Rt.Host?e[po][mo]:null;for((a===-1||r&Rt.SkipSelf)&&(c=a===-1?$E(n,e):e[a+8],c===wf||!AM(r,!1)?a=-1:(o=e[gt],a=Ev(c),e=Cv(c,e)));a!==-1;){let u=e[gt];if(DM(s,a,u.data)){let d=Dj(a,e,t,o,r,l);if(d!==Qo)return d}c=e[a+8],c!==wf&&AM(r,e[gt].data[a+8]===l)&&DM(s,a,e)?(o=u,a=Ev(c),e=Cv(c,e)):a=-1}}return i}function Dj(n,e,t,r,i,s){let o=e[gt],a=o.data[n+8],c=r==null?Gv(a)&&Pb:r!=o&&(a.type&3)!==0,l=i&Rt.Host&&s===a,u=hv(a,o,t,c,l);return u!==null?Fu(e,o,u,a):Qo}function hv(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=r?a:a+u,m=i?a+u:l;for(let g=d;g<m;g++){let w=o[g];if(g<c&&t===w||g>=c&&w.type===t)return g}if(i){let g=o[c];if(g&&al(g)&&g.type===t)return c}return null}function Fu(n,e,t,r){let i=n[t],s=e.data;if(xj(i)){let o=i;o.resolving&&aU(oU(s[t]));let a=Sv(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Xi(o.injectImpl):null,u=qR(n,r,Rt.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&_j(t,s[t],e)}finally{l!==null&&Xi(l),Sv(a),o.resolving=!1,YR()}}return i}function Aj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(S0)?n[S0]:void 0;return typeof e=="number"?e>=0?e&eP:kj:e}function DM(n,e,t){let r=1<<n;return!!(t[e+(n>>tP)]&r)}function AM(n,e){return!(n&Rt.Self)&&!(n&Rt.Host&&e)}var Tu=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sP(this._tNode,this._lView,e,Hv(r),t)}};function kj(){return new Tu(fi(),dt())}function ys(n){return L0(()=>{let e=n.prototype.constructor,t=e[gv]||Ob(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[gv]||Ob(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ob(n){return tR(n)?()=>{let e=Ob(Vi(n));return e&&e()}:Du(n)}function Mj(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ft]&2048&&!(o[ft]&512);){let a=oP(s,o,t,r|Rt.Self,Qo);if(a!==Qo)return a;let c=s.parent;if(!c){let l=o[TR];if(l){let u=l.get(t,Qo,r);if(u!==Qo)return u}c=aP(o),o=o[Pf]}s=c}return i}function aP(n){let e=n[gt],t=e.type;return t===2?e.declTNode:t===1?n[mo]:null}function HE(n){return Tj(fi(),n)}function kM(n,e=null,t=null,r){let i=cP(n,e,t,r);return i.resolveInjectorInitializers(),i}function cP(n,e=null,t=null,r,i=new Set){let s=[t||Zi,NU(n)];return r=r||(typeof n=="object"?void 0:Bi(n)),new D0(s,e||FE(),r||null,i)}var Rr=class n{static{this.THROW_IF_NOT_FOUND=I0}static{this.NULL=new yv}static create(e,t){if(Array.isArray(e))return kM({name:""},t,e,"");{let r=e.name??"";return kM({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=Xe({token:n,providedIn:"any",factory:()=>vt(uR)})}static{this.__NG_ELEMENT_ID__=-1}};var Rj=new Ze("");Rj.__NG_ELEMENT_ID__=n=>{let e=fi();if(e===null)throw new et(204,!1);if(e.type&2)return e.value;if(n&Rt.Optional)return null;throw new et(204,!1)};var Pj="ngOriginalError";function db(n){return n[Pj]}var lP=!0,r1=(()=>{class n{static{this.__NG_ELEMENT_ID__=Fj}static{this.__NG_ENV_ID__=t=>t}}return n})(),Nb=class extends r1{constructor(e){super(),this._lView=e}onDestroy(e){return LR(this._lView,e),()=>tj(this._lView,e)}};function Fj(){return new Nb(dt())}var Bu=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Lb=class extends ni{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,SR()&&(this.destroyRef=le(r1,{optional:!0})??void 0,this.pendingTasks=le(Bu,{optional:!0})??void 0)}emit(e){let t=Vt(null);try{super.next(e)}finally{Vt(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof fr&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Gn=Lb;function Tv(...n){}function uP(n){let e,t;function r(){n=Tv;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function MM(n){return queueMicrotask(()=>n()),()=>{n=Tv}}var zE="isAngularZone",Dv=zE+"_ID",Oj=0,$t=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gn(!1),this.onMicrotaskEmpty=new Gn(!1),this.onStable=new Gn(!1),this.onError=new Gn(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=lP}=e;if(typeof Zone>"u")throw new et(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Vj(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new et(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new et(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Nj,Tv,Tv);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Nj={};function WE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Lj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uP(()=>{n.callbackScheduled=!1,Vb(n),n.isCheckStableRunning=!0,WE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Vb(n)}function Vj(n){let e=()=>{Lj(n)},t=Oj++;n._inner=n._inner.fork({name:"angular",properties:{[zE]:!0,[Dv]:t,[Dv+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(Bj(c))return r.invokeTask(s,o,a,c);try{return RM(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),PM(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return RM(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Uj(c)&&e(),PM(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Vb(n),WE(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Vb(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function RM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PM(n){n._nesting--,WE(n)}var Bb=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gn,this.onMicrotaskEmpty=new Gn,this.onStable=new Gn,this.onError=new Gn}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Bj(n){return dP(n,"__ignore_ng_zone__")}function Uj(n){return dP(n,"__scheduler_tick__")}function dP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Jo=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&db(e);for(;t&&db(t);)t=db(t);return t||null}},jj=new Ze("",{providedIn:"root",factory:()=>{let n=le($t),e=le(Jo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function $j(){return Of(fi(),dt())}function Of(n,e){return new Ii(Hs(n,e))}var Ii=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=$j}}return n})();function Hj(n){return n instanceof Ii?n.nativeElement:n}function zj(){return this._results[Symbol.iterator]()}var Ub=class n{get changes(){return this._changes??=new Gn}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=zj)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=_U(e);(this._changesDetected=!vU(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function fP(n){return(n.flags&128)===128}var hP=new Map,Wj=0;function qj(){return Wj++}function Gj(n){hP.set(n[qv],n)}function jb(n){hP.delete(n[qv])}var FM="__ngContext__";function ll(n,e){il(e)?(n[FM]=e[qv],Gj(e)):n[FM]=e}function pP(n){return gP(n[k0])}function mP(n){return gP(n[ho])}function gP(n){for(;n!==null&&!Ya(n);)n=n[ho];return n}var $b;function vP(n){$b=n}function Kj(){if($b!==void 0)return $b;if(typeof document<"u")return document;throw new et(210,!1)}var qE=new Ze("",{providedIn:"root",factory:()=>Qj}),Qj="ng",GE=new Ze(""),na=new Ze("",{providedIn:"platform",factory:()=>"unknown"});var KE=new Ze("",{providedIn:"root",factory:()=>Kj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Yj="h",Xj="b";var Zj=()=>null;function QE(n,e,t=!1){return Zj(n,e,t)}var _P=!1,Jj=new Ze("",{providedIn:"root",factory:()=>_P});var sv;function e$(){if(sv===void 0&&(sv=null,Iu.trustedTypes))try{sv=Iu.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return sv}function OM(n){return e$()?.createScriptURL(n)||n}var Av=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${JM})`}};function Nf(n){return n instanceof Av?n.changingThisBreaksApplicationSecurity:n}function YE(n,e){let t=t$(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${JM})`)}return t===e}function t$(n){return n instanceof Av&&n.getTypeName()||null}var n$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yP(n){return n=String(n),n.match(n$)?n:"unsafe:"+n}var i1=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(i1||{});function r$(n){let e=wP();return e?e.sanitize(i1.URL,n)||"":YE(n,"URL")?Nf(n):yP(za(n))}function i$(n){let e=wP();if(e)return OM(e.sanitize(i1.RESOURCE_URL,n)||"");if(YE(n,"ResourceURL"))return OM(Nf(n));throw new et(904,!1)}function s$(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?i$:r$}function xP(n,e,t){return s$(e,t)(n)}function wP(){let n=dt();return n&&n[Xo].sanitizer}var o$=/^>|^->|<!--|-->|--!>|<!-$/g,a$=/(<|>)/g,c$="\u200B$1\u200B";function l$(n){return n.replace(o$,e=>e.replace(a$,c$))}function bP(n){return n.ownerDocument.defaultView}function EP(n){return n instanceof Function?n():n}function u$(n){return(n??le(Rr)).get(na)==="browser"}var ea=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ea||{}),d$;function XE(n,e){return d$(n,e)}function _f(n,e,t,r,i){if(r!=null){let s,o=!1;Ya(r)?s=r:il(r)&&(o=!0,r=r[Qa]);let a=Zo(r);n===0&&t!==null?i==null?TP(e,t,a):kv(e,t,a,i||null,!0):n===1&&t!==null?kv(e,t,a,i||null,!0):n===2?T$(e,a,o):n===3&&e.destroyNode(a),s!=null&&A$(e,n,s,t,i)}}function f$(n,e){return n.createText(e)}function h$(n,e,t){n.setValue(e,t)}function p$(n,e){return n.createComment(l$(e))}function CP(n,e,t){return n.createElement(e,t)}function m$(n,e){SP(n,e),e[Qa]=null,e[mo]=null}function g$(n,e,t,r,i,s){r[Qa]=i,r[mo]=e,a1(n,r,t,1,i,s)}function SP(n,e){e[Xo].changeDetectionScheduler?.notify(9),a1(n,e,e[mr],2,null,null)}function v$(n){let e=n[k0];if(!e)return fb(n[gt],n);for(;e;){let t=null;if(il(e))t=e[k0];else{let r=e[Ci];r&&(t=r)}if(!t){for(;e&&!e[ho]&&e!==n;)il(e)&&fb(e[gt],e),e=e[Si];e===null&&(e=n),il(e)&&fb(e[gt],e),t=e&&e[ho]}e=t}}function _$(n,e,t,r){let i=Ci+r,s=t.length;r>0&&(t[i-1][ho]=e),r<s-Ci?(e[ho]=t[i],lR(t,Ci+r,e)):(t.push(e),e[ho]=null),e[Si]=t;let o=e[Au];o!==null&&t!==o&&IP(o,e);let a=e[Wa];a!==null&&a.insertView(n),kb(e),e[ft]|=128}function IP(n,e){let t=n[If],r=e[Si];if(il(r))n[ft]|=bv.HasTransplantedViews;else{let i=r[Si][po];e[po]!==i&&(n[ft]|=bv.HasTransplantedViews)}t===null?n[If]=[e]:t.push(e)}function ZE(n,e){let t=n[If],r=t.indexOf(e);t.splice(r,1)}function M0(n,e){if(n.length<=Ci)return;let t=Ci+e,r=n[t];if(r){let i=r[Au];i!==null&&i!==n&&ZE(i,r),e>0&&(n[t-1][ho]=r[ho]);let s=_v(n,Ci+e);m$(r[gt],r);let o=s[Wa];o!==null&&o.detachView(s[gt]),r[Si]=null,r[ho]=null,r[ft]&=-129}return r}function s1(n,e){if(!(e[ft]&256)){let t=e[mr];t.destroyNode&&a1(n,e,t,3,null,null),v$(e)}}function fb(n,e){if(e[ft]&256)return;let t=Vt(null);try{e[ft]&=-129,e[ft]|=256,e[Us]&&Dg(e[Us]),x$(n,e),y$(n,e),e[gt].type===1&&e[mr].destroy();let r=e[Au];if(r!==null&&Ya(e[Si])){r!==e[Si]&&ZE(r,e);let i=e[Wa];i!==null&&i.detachView(n)}jb(e)}finally{Vt(t)}}function y$(n,e){let t=n.cleanup,r=e[xv];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[xv]=null);let i=e[rl];if(i!==null){e[rl]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function x$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Pu)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ko(4,a,c);try{c.call(a)}finally{Ko(5,a,c)}}else{Ko(4,i,s);try{s.call(i)}finally{Ko(5,i,s)}}}}}function w$(n,e,t){return b$(n,e.parent,t)}function b$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Qa];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Yo.None||s===Yo.Emulated)return null}return Hs(r,t)}}function kv(n,e,t,r,i){n.insertBefore(e,t,r,i)}function TP(n,e,t){n.appendChild(e,t)}function NM(n,e,t,r,i){r!==null?kv(n,e,t,r,i):TP(n,e,t)}function DP(n,e){return n.parentNode(e)}function E$(n,e){return n.nextSibling(e)}function C$(n,e,t){return I$(n,e,t)}function S$(n,e,t){return n.type&40?Hs(n,t):null}var I$=S$,LM;function o1(n,e,t,r){let i=w$(n,r,e),s=e[mr],o=r.parent||e[mo],a=C$(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)NM(s,i,t[c],a,!1);else NM(s,i,t,a,!1);LM!==void 0&&LM(s,r,e,t,i)}function C0(n,e){if(e!==null){let t=e.type;if(t&3)return Hs(e,n);if(t&4)return Hb(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return C0(n,r);{let i=n[e.index];return Ya(i)?Hb(-1,i):Zo(i)}}else{if(t&128)return C0(n,e.next);if(t&32)return XE(e,n)()||Zo(n[e.index]);{let r=AP(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Mu(n[po]);return C0(i,r)}else return C0(n,e.next)}}}return null}function AP(n,e){if(e!==null){let r=n[po][mo],i=e.projection;return r.projection[i]}return null}function Hb(n,e){let t=Ci+n+1;if(t<e.length){let r=e[t],i=r[gt].firstChild;if(i!==null)return C0(r,i)}return e[ku]}function T$(n,e,t){n.removeChild(null,e,t)}function JE(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&ll(Zo(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)JE(n,e,t.child,r,i,s,!1),_f(e,n,i,a,s);else if(c&32){let l=XE(t,r),u;for(;u=l();)_f(e,n,i,u,s);_f(e,n,i,a,s)}else c&16?D$(n,e,r,t,i,s):_f(e,n,i,a,s);t=o?t.projectionNext:t.next}}function a1(n,e,t,r,i,s){JE(t,r,n.firstChild,e,i,s,!1)}function D$(n,e,t,r,i,s){let o=t[po],c=o[mo].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];_f(e,n,i,u,s)}else{let l=c,u=o[Si];fP(r)&&(l.flags|=128),JE(n,e,l,u,i,s,!0)}}function A$(n,e,t,r,i){let s=t[ku],o=Zo(t);s!==o&&_f(e,n,r,s,i);for(let a=Ci;a<t.length;a++){let c=t[a];a1(c[gt],c,n,e,r,s)}}function k$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ea.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ea.Important),n.setStyle(t,r,i,s))}}function M$(n,e,t){n.setAttribute(e,"style",t)}function kP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function MP(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cb(n,e,r),i!==null&&kP(n,e,i),s!==null&&M$(n,e,s)}var Ti={};function x(n=1){RP(er(),dt(),vo()+n,!1)}function RP(n,e,t,r){if(!r)if((e[ft]&3)===3){let s=n.preOrderCheckHooks;s!==null&&dv(e,s,t)}else{let s=n.preOrderHooks;s!==null&&fv(e,s,0,t)}Ru(t)}function Qe(n,e=Rt.Default){let t=dt();if(t===null)return vt(n,e);let r=fi();return sP(r,t,Vi(n),e)}function PP(){let n="invalid";throw new Error(n)}function FP(n,e,t,r,i,s){let o=Vt(null);try{let a=null;i&sl.SignalBased&&(a=e[r][qo]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&sl.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):AR(e,a,r,s)}finally{Vt(o)}}function R$(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ru(~i);else{let s=i,o=t[++r],a=t[++r];dj(o,s);let c=e[s];a(2,c)}}}finally{Ru(-1)}}function c1(n,e,t,r,i,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Qa]=i,d[ft]=r|4|128|8|64,(l!==null||n&&n[ft]&2048)&&(d[ft]|=2048),OR(d),d[Si]=d[Pf]=n,d[Ei]=t,d[Xo]=o||n&&n[Xo],d[mr]=a||n&&n[mr],d[Sf]=c||n&&n[Sf]||null,d[mo]=s,d[qv]=qj(),d[A0]=u,d[TR]=l,d[po]=e.type==2?n[po]:d,d}function Lf(n,e,t,r,i){let s=n.data[e];if(s===null)s=P$(n,e,t,r,i),uj()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=cj();s.injectorIndex=o===null?-1:o.injectorIndex}return fl(s,!0),s}function P$(n,e,t,r,i){let s=UR(),o=VE(),a=o?s:s&&s.parent,c=n.data[e]=B$(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function OP(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function NP(n,e,t,r,i){let s=vo(),o=r&2;try{Ru(-1),o&&e.length>ri&&RP(n,e,ri,!1),Ko(o?2:0,i),t(r,i)}finally{Ru(s),Ko(o?3:1,i)}}function e2(n,e,t){if(OE(e)){let r=Vt(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Vt(r)}}}function t2(n,e,t){BR()&&(W$(n,e,t,Hs(t,e)),(t.flags&64)===64&&BP(n,e,t))}function n2(n,e,t=Hs){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function LP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=r2(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function r2(n,e,t,r,i,s,o,a,c,l,u){let d=ri+r,m=d+i,g=F$(d,m),w=typeof l=="function"?l():l;return g[gt]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:u}}function F$(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ti);return t}function O$(n,e,t,r){let s=r.get(Jj,_P)||t===Yo.ShadowDom,o=n.selectRootElement(e,s);return N$(o),o}function N$(n){L$(n)}var L$=()=>null;function V$(n,e,t,r){let i=$P(e);i.push(t),n.firstCreatePass&&HP(n).push(r,i.length-1)}function B$(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return sj()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function VM(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=sl.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?BM(r,t,l,a,c):BM(r,t,l,a)}return r}function BM(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function U$(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=s[u],m=t?t.get(d):null,g=m?m.inputs:null,w=m?m.outputs:null;c=VM(0,d.inputs,u,c,g),l=VM(1,d.outputs,u,l,w);let y=c!==null&&o!==null&&!RE(e)?nH(c,u,o):null;a.push(y)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function j$(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function i2(n,e,t,r,i,s,o,a){let c=Hs(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(o2(n,t,u,r,i),Gv(e)&&$$(t,e.index)):e.type&3?(r=j$(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function $$(n,e){let t=dl(e,n);t[ft]&16||(t[ft]|=64)}function s2(n,e,t,r){if(BR()){let i=r===null?null:{"":-1},s=G$(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&VP(n,e,t,o,i,a),i&&K$(t,r,i)}t.mergedAttrs=T0(t.mergedAttrs,t.attrs)}function VP(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Fb(Iv(t,e),n,r[l].type);Y$(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=OP(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=T0(t.mergedAttrs,u.hostAttrs),X$(n,t,e,c,u),Q$(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}U$(n,t,s)}function H$(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;z$(o)!=a&&o.push(a),o.push(t,r,s)}}function z$(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function W$(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Gv(t)&&Z$(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Iv(t,e),ll(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Fu(e,n,a,t);if(ll(l,e),o!==null&&tH(e,a-i,l,c,t,o),al(c)){let u=dl(t.index,e);u[Ei]=Fu(e,n,a,t)}}}function BP(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=fj();try{Ru(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];Mb(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&q$(c,l)}}finally{Ru(-1),Mb(o)}}function q$(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function G$(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(TU(e,o.selectors,!1))if(r||(r=[]),al(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;zb(n,e,c)}else r.unshift(o),zb(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function zb(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function K$(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new et(-301,!1);r.push(e[i],s)}}}function Q$(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;al(e)&&(t[""]=n)}}function Y$(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function X$(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Du(i.type,!0)),o=new Pu(s,al(i),Qe);n.blueprint[r]=o,t[r]=o,H$(n,e,r,OP(n,t,i.hostVars,Ti),i)}function Z$(n,e,t){let r=Hs(e,n),i=LP(t),s=n[Xo].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=l1(n,c1(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function J$(n,e,t,r,i,s){let o=Hs(n,e);eH(e[mr],o,s,n.value,t,r,i)}function eH(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?za(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function tH(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++],d=o[a++];FP(r,t,c,l,u,d)}}function nH(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function UP(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function jP(n,e){let t=n.contentQueries;if(t!==null){let r=Vt(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];BE(s),a.contentQueries(2,e[o],o)}}}finally{Vt(r)}}}function l1(n,e){return n[k0]?n[CM][ho]=e:n[k0]=e,n[CM]=e,e}function Wb(n,e,t){BE(0);let r=Vt(null);try{e(n,t)}finally{Vt(r)}}function $P(n){return n[xv]??=[]}function HP(n){return n.cleanup??=[]}function zP(n,e){let t=n[Sf],r=t?t.get(Jo,null):null;r&&r.handleError(e)}function o2(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],u=n.data[o];FP(u,l,r,a,c,i)}}function a2(n,e,t){let r=FR(e,n);h$(n[mr],r,t)}function rH(n,e){let t=dl(e,n),r=t[gt];iH(r,t);let i=t[Qa];i!==null&&t[A0]===null&&(t[A0]=QE(i,t[Sf])),c2(r,t,t[Ei])}function iH(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function c2(n,e,t){UE(e);try{let r=n.viewQuery;r!==null&&Wb(1,r,t);let i=n.template;i!==null&&NP(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Wa]?.finishViewCreation(n),n.staticContentQueries&&jP(n,e),n.staticViewQueries&&Wb(2,n.viewQuery,t);let s=n.components;s!==null&&sH(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ft]&=-5,jE()}}function sH(n,e){for(let t=0;t<e.length;t++)rH(n,e[t])}function u1(n,e,t,r){let i=Vt(null);try{let s=e.tView,a=n[ft]&4096?4096:16,c=c1(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Au]=l;let u=n[Wa];return u!==null&&(c[Wa]=u.createEmbeddedView(s)),c2(s,c,t),c}finally{Vt(i)}}function WP(n,e){let t=Ci+e;if(t<n.length)return n[t]}function R0(n,e){return!e||e.firstChild===null||fP(n)}function d1(n,e,t,r=!0){let i=e[gt];if(_$(i,e,n,t),r){let o=Hb(t,n),a=e[mr],c=DP(a,n[ku]);c!==null&&g$(i,n[mo],a,e,c,o)}let s=e[A0];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function qP(n,e){let t=M0(n,e);return t!==void 0&&s1(t[gt],t),t}function Mv(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Zo(s)),Ya(s)&&oH(s,r);let o=t.type;if(o&8)Mv(n,e,t.child,r);else if(o&32){let a=XE(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=AP(e,t);if(Array.isArray(a))r.push(...a);else{let c=Mu(e[po]);Mv(c[gt],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function oH(n,e){for(let t=Ci;t<n.length;t++){let r=n[t],i=r[gt].firstChild;i!==null&&Mv(r[gt],r,i,e)}n[ku]!==n[Qa]&&e.push(n[ku])}var GP=[];function aH(n){return n[Us]??cH(n)}function cH(n){let e=GP.pop()??Object.create(uH);return e.lView=n,e}function lH(n){n.lView[Us]!==n&&(n.lView=null,GP.push(n))}var uH=Te(fe({},nf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Xv(n.lView)},consumerOnSignalRead(){this.lView[Us]=this}});function dH(n){let e=n[Us]??Object.create(fH);return e.lView=n,e}var fH=Te(fe({},nf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Mu(n.lView);for(;e&&!KP(e[gt]);)e=Mu(e);e&&NR(e)},consumerOnSignalRead(){this.lView[Us]=this}});function KP(n){return n.type!==2}var hH=100;function QP(n,e=!0,t=0){let r=n[Xo],i=r.rendererFactory,s=!1;s||i.begin?.();try{pH(n,t)}catch(o){throw e&&zP(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function pH(n,e){let t=HR();try{IM(!0),qb(n,e);let r=0;for(;Yv(n);){if(r===hH)throw new et(103,!1);r++,qb(n,1)}}finally{IM(t)}}function mH(n,e,t,r){let i=e[ft];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Xo].inlineEffectRunner?.flush(),UE(e);let a=!0,c=null,l=null;s||(KP(n)?(l=aH(e),c=_0(l)):Ak()===null?(a=!1,l=dH(e),c=_0(l)):e[Us]&&(Dg(e[Us]),e[Us]=null));try{OR(e),lj(n.bindingStartIndex),t!==null&&NP(n,e,t,2,r);let u=(i&3)===3;if(!s)if(u){let g=n.preOrderCheckHooks;g!==null&&dv(e,g,null)}else{let g=n.preOrderHooks;g!==null&&fv(e,g,0,null),cb(e,0)}if(o||gH(e),YP(e,0),n.contentQueries!==null&&jP(n,e),!s)if(u){let g=n.contentCheckHooks;g!==null&&dv(e,g)}else{let g=n.contentHooks;g!==null&&fv(e,g,1),cb(e,1)}R$(n,e);let d=n.components;d!==null&&ZP(e,d,0);let m=n.viewQuery;if(m!==null&&Wb(2,m,r),!s)if(u){let g=n.viewCheckHooks;g!==null&&dv(e,g)}else{let g=n.viewHooks;g!==null&&fv(e,g,2),cb(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[uv]){for(let g of e[uv])g();e[uv]=null}s||(e[ft]&=-73)}catch(u){throw s||Xv(e),u}finally{l!==null&&(Ig(l,c),a&&lH(l)),jE()}}function YP(n,e){for(let t=pP(n);t!==null;t=mP(t))for(let r=Ci;r<t.length;r++){let i=t[r];XP(i,e)}}function gH(n){for(let e=pP(n);e!==null;e=mP(e)){if(!(e[ft]&bv.HasTransplantedViews))continue;let t=e[If];for(let r=0;r<t.length;r++){let i=t[r];NR(i)}}}function vH(n,e,t){let r=dl(e,n);XP(r,t)}function XP(n,e){LE(n)&&qb(n,e)}function qb(n,e){let r=n[gt],i=n[ft],s=n[Us],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Tg(s)),o||=!1,s&&(s.dirty=!1),n[ft]&=-9217,o)mH(r,n,r.template,n[Ei]);else if(i&8192){YP(n,1);let a=r.components;a!==null&&ZP(n,a,1)}}function ZP(n,e,t){for(let r=0;r<e.length;r++)vH(n,e[r],t)}function l2(n,e){let t=HR()?64:1088;for(n[Xo].changeDetectionScheduler?.notify(e);n;){n[ft]|=t;let r=Mu(n);if(Db(n)&&!r)return n;n=r}return null}var Ou=class{get rootNodes(){let e=this._lView,t=e[gt];return Mv(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ei]}set context(e){this._lView[Ei]=e}get destroyed(){return(this._lView[ft]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Si];if(Ya(e)){let t=e[wv],r=t?t.indexOf(this):-1;r>-1&&(M0(e,r),_v(t,r))}this._attachedToViewContainer=!1}s1(this._lView[gt],this._lView)}onDestroy(e){LR(this._lView,e)}markForCheck(){l2(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ft]&=-129}reattach(){kb(this._lView),this._lView[ft]|=128}detectChanges(){this._lView[ft]|=1024,QP(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new et(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Db(this._lView),t=this._lView[Au];t!==null&&!e&&ZE(t,this._lView),SP(this._lView[gt],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new et(902,!1);this._appRef=e;let t=Db(this._lView),r=this._lView[Au];r!==null&&!t&&IP(r,this._lView),kb(this._lView)}},Nu=(()=>{class n{static{this.__NG_ELEMENT_ID__=xH}}return n})(),_H=Nu,yH=class extends _H{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=u1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ou(i)}};function xH(){return u2(fi(),dt())}function u2(n,e){return n.type&4?new yH(e,n,Of(n,e)):null}var E2e=new RegExp(`^(\\d+)*(${Xj}|${Yj})*(.*)`);var wH=()=>null;function P0(n,e){return wH(n,e)}var Tf=class{},f1=new Ze("",{providedIn:"root",factory:()=>!1});var JP=new Ze(""),eF=new Ze(""),Gb=class{},Rv=class{};function bH(n){let e=Error(`No component factory found for ${Bi(n)}.`);return e[EH]=n,e}var EH="ngComponent";var Kb=class{resolveComponentFactory(e){throw bH(e)}},Df=class{static{this.NULL=new Kb}},Af=class{},zs=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CH()}}return n})();function CH(){let n=dt(),e=fi(),t=dl(e.index,n);return(il(t)?t:n)[mr]}var SH=(()=>{class n{static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>null})}}return n})();function Pv(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=xb(i,a);else if(s==2){let c=a,l=e[++o];r=xb(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Fv=class extends Df{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ol(e);return new kf(t,this.ngModule)}};function UM(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:sl.None;e?t.push({propName:o,templateName:r,isSignal:(a&sl.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function IH(n){let e=n.toLowerCase();return e==="svg"?PR:e==="math"?XU:null}var kf=class extends Rv{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=UM(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return UM(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=MU(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Vt(null);try{i=i||this.ngModule;let o=i instanceof _s?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Rb(e,o):e,c=a.get(Af,null);if(c===null)throw new et(407,!1);let l=a.get(SH,null),u=a.get(Tf,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},m=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",w=r?O$(m,r,this.componentDef.encapsulation,a):CP(m,g,IH(g)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let E=null;w!==null&&(E=QE(w,a,!0));let M=r2(0,null,null,1,0,null,null,null,null,null,null),k=c1(null,M,null,y,null,null,d,m,a,null,E);UE(k);let O,K,Q=null;try{let te=this.componentDef,D,T=null;te.findHostDirectiveDefs?(D=[],T=new Map,te.findHostDirectiveDefs(te,D,T),D.push(te)):D=[te];let A=TH(k,w);Q=DH(A,w,te,D,k,d,m),K=NE(M,ri),w&&MH(m,te,w,r),t!==void 0&&RH(K,this.ngContentSelectors,t),O=kH(Q,te,D,T,k,[PH]),c2(M,k,null)}catch(te){throw Q!==null&&jb(Q),jb(k),te}finally{jE()}return new Qb(this.componentType,O,Of(K,k),k,K)}finally{Vt(s)}}},Qb=class extends Gb{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ou(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;o2(s[gt],s,i,e,t),this.previousInputValues.set(e,t);let o=dl(this._tNode.index,s);l2(o,1)}}get injector(){return new Tu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TH(n,e){let t=n[gt],r=ri;return n[r]=e,Lf(t,r,2,"#host",null)}function DH(n,e,t,r,i,s,o){let a=i[gt];AH(r,n,e,o);let c=null;e!==null&&(c=QE(e,i[Sf]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=c1(i,LP(t),null,u,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&zb(a,n,r.length-1),l1(i,d),i[n.index]=d}function AH(n,e,t,r){for(let i of n)e.mergedAttrs=T0(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Pv(e,e.mergedAttrs,!0),t!==null&&MP(r,t,e))}function kH(n,e,t,r,i,s){let o=fi(),a=i[gt],c=Hs(o,i);VP(a,i,o,t,null,r);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,m=Fu(i,a,d,o);ll(m,i)}BP(a,i,o),c&&ll(c,i);let l=Fu(i,a,o.directiveStart+o.componentOffset,o);if(n[Ei]=i[Ei]=l,s!==null)for(let u of s)u(l,e);return e2(a,o,i),l}function MH(n,e,t,r){if(r)Cb(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=RU(e.selectors[0]);i&&Cb(n,t,i),s&&s.length>0&&kP(n,t,s.join(" "))}}function RH(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function PH(){let n=fi();n1(dt()[gt],n)}var hl=(()=>{class n{static{this.__NG_ELEMENT_ID__=FH}}return n})();function FH(){let n=fi();return nF(n,dt())}var OH=hl,tF=class extends OH{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Of(this._hostTNode,this._hostLView)}get injector(){return new Tu(this._hostTNode,this._hostLView)}get parentInjector(){let e=$E(this._hostTNode,this._hostLView);if(JR(e)){let t=Cv(e,this._hostLView),r=Ev(e),i=t[gt].data[r+8];return new Tu(i,t)}else return new Tu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=jM(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ci}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=P0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,R0(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!GU(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new kf(ol(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let y=(o?l:this.parentInjector).get(_s,null);y&&(s=y)}let u=ol(c.componentType??{}),d=P0(this._lContainer,u?.id??null),m=d?.firstChild??null,g=c.create(l,i,m,s);return this.insertImpl(g.hostView,a,R0(this._hostTNode,d)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(JU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Si],l=new tF(c,c[mo],c[Si]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return d1(o,i,s,r),e.attachToViewContainerRef(),lR(hb(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=jM(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=M0(this._lContainer,t);r&&(_v(hb(this._lContainer),t),s1(r[gt],r))}detach(e){let t=this._adjustIndex(e,-1),r=M0(this._lContainer,t);return r&&_v(hb(this._lContainer),t)!=null?new Ou(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function jM(n){return n[wv]}function hb(n){return n[wv]||(n[wv]=[])}function nF(n,e){let t,r=e[n.index];return Ya(r)?t=r:(t=UP(r,e,null,n),e[n.index]=t,l1(e,t)),LH(t,e,n,r),new tF(t,n,e)}function NH(n,e){let t=n[mr],r=t.createComment(""),i=Hs(e,n),s=DP(t,i);return kv(t,s,r,E$(t,i),!1),r}var LH=UH,VH=()=>!1;function BH(n,e,t){return VH(n,e,t)}function UH(n,e,t,r){if(n[ku])return;let i;t.type&8?i=Zo(r):i=NH(e,t),n[ku]=i}var Yb=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Xb=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)d2(e,t).matches!==null&&this.queries[t].setDirty()}},Ov=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=KH(e):this.predicate=e}},Zb=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Jb=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,jH(t,s)),this.matchTNodeWithReadOption(e,t,hv(t,e,s,!1,!1))}else r===Nu?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hv(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ii||i===hl||i===Nu&&t.type&4)this.addMatch(t.index,-2);else{let s=hv(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function jH(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function $H(n,e){return n.type&11?Of(n,e):n.type&4?u2(n,e):null}function HH(n,e,t,r){return t===-1?$H(e,n):t===-2?zH(n,e,r):Fu(n,n[gt],t,e)}function zH(n,e,t){if(t===Ii)return Of(e,n);if(t===Nu)return u2(e,n);if(t===hl)return nF(e,n)}function rF(n,e,t,r){let i=e[Wa].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(HH(e,u,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function eE(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=rF(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=Ci;d<u.length;d++){let m=u[d];m[Au]===m[Si]&&eE(m[gt],m,l,r)}if(u[If]!==null){let d=u[If];for(let m=0;m<d.length;m++){let g=d[m];eE(g[gt],g,l,r)}}}}}return r}function WH(n,e){return n[Wa].queries[e].queryList}function iF(n,e,t){let r=new Ub((t&4)===4);return V$(n,e,r,r.destroy),(e[Wa]??=new Xb).queries.push(new Yb(r))-1}function qH(n,e,t){let r=er();return r.firstCreatePass&&(sF(r,new Ov(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),iF(r,dt(),e)}function GH(n,e,t,r){let i=er();if(i.firstCreatePass){let s=fi();sF(i,new Ov(e,t,r),s.index),QH(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return iF(i,dt(),t)}function KH(n){return n.split(",").map(e=>e.trim())}function sF(n,e,t){n.queries===null&&(n.queries=new Zb),n.queries.track(new Jb(e,t))}function QH(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function d2(n,e){return n.queries.getByIndex(e)}function YH(n,e){let t=n[gt],r=d2(t,e);return r.crossesNgTemplate?eE(t,n,e,[]):rF(t,n,r,e)}var $M=new Set;function ra(n){$M.has(n)||($M.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function XH(n){return typeof n=="function"&&n[qo]!==void 0}function Xa(n,e){ra("NgSignals");let t=jk(n),r=t[qo];return e?.equal&&(r.equal=e.equal),t.set=i=>$w(r,i),t.update=i=>$k(r,i),t.asReadonly=ZH.bind(t),t}function ZH(){let n=this[qo];if(n.readonlyFn===void 0){let e=()=>this();e[qo]=n,n.readonlyFn=e}return n.readonlyFn}function oF(n){return XH(n)&&typeof n.set=="function"}function JH(n){return Object.getPrototypeOf(n.prototype).constructor}function hi(n){let e=JH(n.type),t=!0,r=[n];for(;e;){let i;if(al(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new et(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=ov(n.inputs),o.inputTransforms=ov(n.inputTransforms),o.declaredInputs=ov(n.declaredInputs),o.outputs=ov(n.outputs);let a=i.hostBindings;a&&iz(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&nz(n,c),l&&rz(n,l),ez(n,i),Z7(n.outputs,i.outputs),al(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===hi&&(t=!1)}}e=Object.getPrototypeOf(e)}tz(r)}function ez(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function tz(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=T0(i.hostAttrs,t=T0(t,i.hostAttrs))}}function ov(n){return n===bf?{}:n===Zi?[]:n}function nz(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function rz(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function iz(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function f2(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var ul=class{},F0=class{};var tE=class extends ul{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Fv(this);let s=_R(e);this._bootstrapComponents=EP(s.bootstrap),this._r3Injector=cP(e,t,[{provide:ul,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...r],Bi(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},nE=class extends F0{constructor(e){super(),this.moduleType=e}create(e){return new tE(this.moduleType,e,[])}};var Nv=class extends ul{constructor(e){super(),this.componentFactoryResolver=new Fv(this),this.instance=null;let t=new D0([...e.providers,{provide:ul,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],e.parent||FE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function h1(n,e,t=null){return new Nv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function aF(n){return h2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function sz(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function h2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function B0(n,e,t){return n[e]=t}function oz(n,e){return n[e]}function js(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function O0(n,e,t,r){let i=js(n,e,t);return js(n,e+1,r)||i}function cF(n,e,t,r,i){let s=O0(n,e,t,r);return js(n,e+2,i)||s}function az(n,e,t,r,i,s){let o=O0(n,e,t,r);return O0(n,e+2,i,s)||o}function cz(n){return(n.flags&32)===32}function lz(n,e,t,r,i,s,o,a,c){let l=e.consts,u=Lf(e,n,4,o||null,a||null);s2(e,t,u,cl(l,c)),n1(e,u);let d=u.tView=r2(2,u,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function rE(n,e,t,r,i,s,o,a,c,l){let u=t+ri,d=e.firstCreatePass?lz(u,e,n,r,i,s,o,a,c):e.data[u];fl(d,!1);let m=uz(e,n,d,t);e1()&&o1(e,n,m,d),ll(m,n);let g=UP(m,n,m,d);return n[u]=g,l1(n,g),BH(g,d,n),Kv(d)&&t2(e,n,d),c!=null&&n2(n,d,l),d}function se(n,e,t,r,i,s,o,a){let c=dt(),l=er(),u=cl(l.consts,s);return rE(c,l,n,e,t,r,i,u,o,a),se}var uz=dz;function dz(n,e,t,r){return t1(!0),e[mr].createComment("")}var yf=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(yf||{}),lF=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}}return n})(),iE=class n{constructor(){this.ngZone=le($t),this.scheduler=le(Tf),this.errorHandler=le(Jo,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[yf.EarlyRead,yf.Write,yf.MixedReadWrite,yf.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new n})}},sE=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function p2(n,e){!e?.injector&&IR(p2);let t=e?.injector??le(Rr);return u$(t)?(ra("NgAfterNextRender"),hz(n,t,e,!0)):pz}function fz(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function hz(n,e,t,r){let i=e.get(lF);i.impl??=e.get(iE);let s=t?.phase??yf.MixedReadWrite,o=t?.manualCleanup!==!0?e.get(r1):null,a=new sE(i.impl,fz(n,s),r,o);return i.impl.register(a),a}var pz={destroy(){}};function ia(n,e,t,r){let i=dt(),s=Ff();if(js(i,s,e)){let o=er(),a=Jv();J$(a,i,n,e,t,r)}return ia}function uF(n,e,t,r){return js(n,Ff(),t)?e+za(t)+r:Ti}function mz(n,e,t,r,i,s){let o=zR(),a=O0(n,o,t,i);return Zv(2),a?e+za(t)+r+za(i)+s:Ti}function gz(n,e,t,r,i,s,o,a){let c=zR(),l=cF(n,c,t,i,o);return Zv(3),l?e+za(t)+r+za(i)+s+za(o)+a:Ti}function av(n,e){return n<<17|e<<2}function Lu(n){return n>>17&32767}function vz(n){return(n&2)==2}function _z(n,e){return n&131071|e<<17}function oE(n){return n|2}function Mf(n){return(n&131068)>>2}function pb(n,e){return n&-131069|e<<2}function yz(n){return(n&1)===1}function aE(n){return n|1}function xz(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Lu(o),c=Mf(o);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||V0(d,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let m=Lu(n[a+1]);n[r+1]=av(m,a),m!==0&&(n[m+1]=pb(n[m+1],r)),n[a+1]=_z(n[a+1],r)}else n[r+1]=av(a,0),a!==0&&(n[a+1]=pb(n[a+1],r)),a=r;else n[r+1]=av(c,0),a===0?a=r:n[c+1]=pb(n[c+1],r),c=r;l&&(n[r+1]=oE(n[r+1])),HM(n,u,r,!0),HM(n,u,r,!1),wz(e,u,n,r,s),o=av(a,c),s?e.classBindings=o:e.styleBindings=o}function wz(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&V0(s,e)>=0&&(t[r+1]=aE(t[r+1]))}function HM(n,e,t,r){let i=n[t+1],s=e===null,o=r?Lu(i):Mf(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];bz(c,e)&&(a=!0,n[o+1]=r?aE(l):oE(l)),o=r?Lu(l):Mf(l)}a&&(n[t+1]=r?oE(i):aE(i))}function bz(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?V0(n,e)>=0:!1}var fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ez(n){return n.substring(fo.key,fo.keyEnd)}function Cz(n){return Sz(n),dF(n,fF(n,0,fo.textEnd))}function dF(n,e){let t=fo.textEnd;return t===e?-1:(e=fo.keyEnd=Iz(n,fo.key=e,t),fF(n,e,t))}function Sz(n){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=n.length}function fF(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Iz(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ee(n,e,t){let r=dt(),i=Ff();if(js(r,i,e)){let s=er(),o=Jv();i2(s,o,r,n,e,r[mr],t,!1)}return ee}function cE(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";o2(n,t,s[o],o,r)}function tt(n,e){return Dz(n,e,null,!0),tt}function pl(n){Az(Oz,Tz,n,!0)}function Tz(n,e){for(let t=Cz(e);t>=0;t=dF(e,t))ME(n,Ez(e),!0)}function Dz(n,e,t,r){let i=dt(),s=er(),o=Zv(2);if(s.firstUpdatePass&&pF(s,n,o,r),e!==Ti&&js(i,o,e)){let a=s.data[vo()];mF(s,a,i,i[mr],n,i[o+1]=Lz(e,t),r,o)}}function Az(n,e,t,r){let i=er(),s=Zv(2);i.firstUpdatePass&&pF(i,null,s,r);let o=dt();if(t!==Ti&&js(o,s,t)){let a=i.data[vo()];if(gF(a,r)&&!hF(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=xb(c,t||"")),cE(i,a,o,t,r)}else Nz(i,a,o,o[mr],o[s+1],o[s+1]=Fz(n,e,t),r,s)}}function hF(n,e){return e>=n.expandoStartIndex}function pF(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[vo()],o=hF(n,t);gF(s,r)&&e===null&&!o&&(e=!1),e=kz(i,s,e,r),xz(i,s,e,t,o,r)}}function kz(n,e,t,r){let i=hj(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=mb(null,n,e,t,r),t=N0(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=mb(i,n,e,t,r),s===null){let c=Mz(n,e,r);c!==void 0&&Array.isArray(c)&&(c=mb(null,n,e,c[1],r),c=N0(c,e.attrs,r),Rz(n,e,r,c))}else s=Pz(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Mz(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Mf(r)!==0)return n[Lu(r)]}function Rz(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Lu(i)]=r}function Pz(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=N0(r,o,t)}return N0(r,e.attrs,t)}function mb(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=N0(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function N0(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),ME(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Fz(n,e,t){if(t==null||t==="")return Zi;let r=[],i=Nf(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Oz(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&ME(n,r,t)}function Nz(n,e,t,r,i,s,o,a){i===Ti&&(i=Zi);let c=0,l=0,u=0<i.length?i[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let m=c<i.length?i[c+1]:void 0,g=l<s.length?s[l+1]:void 0,w=null,y;u===d?(c+=2,l+=2,m!==g&&(w=d,y=g)):d===null||u!==null&&u<d?(c+=2,w=u):(l+=2,w=d,y=g),w!==null&&mF(n,e,t,r,w,y,o,a),u=c<i.length?i[c]:null,d=l<s.length?s[l]:null}}function mF(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=yz(l)?zM(c,e,t,i,Mf(l),o):void 0;if(!Lv(u)){Lv(s)||vz(l)&&(s=zM(c,null,t,i,a,o));let d=FR(vo(),t);k$(r,o,d,i,s)}}function zM(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,m=t[i+1];m===Ti&&(m=d?Zi:void 0);let g=d?ob(m,r):u===r?m:void 0;if(l&&!Lv(g)&&(g=ob(c,r)),Lv(g)&&(a=g,o))return a;let w=n[i+1];i=o?Lu(w):Mf(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=ob(c,r))}return a}function Lv(n){return n!==void 0}function Lz(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Bi(Nf(n)))),n}function gF(n,e){return(n.flags&(e?8:16))!==0}var lE=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function gb(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Vz(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;s<=o&&s<=c;){let l=n.at(s),u=e[s],d=gb(s,l,s,u,t);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let m=n.at(o),g=e[c],w=gb(o,m,c,g,t);if(w!==0){w<0&&n.updateValue(o,g),o--,c--;continue}let y=t(s,l),E=t(o,m),M=t(s,u);if(Object.is(M,E)){let k=t(c,g);Object.is(k,y)?(n.swap(s,o),n.updateValue(o,g),c--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new Vv,i??=qM(n,s,o,t),uE(n,r,s,M))n.updateValue(s,u),s++,o++;else if(i.has(M))r.set(y,n.detach(s)),o--;else{let k=n.create(s,e[s]);n.attach(s,k),s++,o++}}for(;s<=c;)WM(n,r,t,s,e[s]),s++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&s<=o;){let u=n.at(s),d=l.value,m=gb(s,u,s,d,t);if(m!==0)m<0&&n.updateValue(s,d),s++,l=c.next();else{r??=new Vv,i??=qM(n,s,o,t);let g=t(s,d);if(uE(n,r,s,g))n.updateValue(s,d),s++,o++,l=c.next();else if(!i.has(g))n.attach(s,n.create(s,d)),s++,o++,l=c.next();else{let w=t(s,u);r.set(w,n.detach(s)),o--}}}for(;!l.done;)WM(n,r,t,n.length,l.value),l=c.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(c=>{n.destroy(c)})}function uE(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function WM(n,e,t,r,i){if(uE(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function qM(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Vv=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Se(n,e){ra("NgControlFlow");let t=dt(),r=Ff(),i=t[r]!==Ti?t[r]:-1,s=i!==-1?Bv(t,ri+i):void 0,o=0;if(js(t,r,n)){let a=Vt(null);try{if(s!==void 0&&qP(s,o),n!==-1){let c=ri+n,l=Bv(t,c),u=pE(t[gt],c),d=P0(l,u.tView.ssrId),m=u1(t,u,e,{dehydratedView:d});d1(l,m,o,R0(u,d))}}finally{Vt(a)}}else if(s!==void 0){let a=WP(s,o);a!==void 0&&(a[Ei]=e)}}var dE=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Ci}};function ml(n){return n}function vF(n,e){return e}var fE=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Xt(n,e,t,r,i,s,o,a,c,l,u,d,m){ra("NgControlFlow");let g=dt(),w=er(),y=c!==void 0,E=dt(),M=a?o.bind(E[po][Ei]):o,k=new fE(y,M);E[ri+n]=k,rE(g,w,n+1,e,t,r,i,cl(w.consts,s)),y&&rE(g,w,n+2,c,l,u,d,cl(w.consts,m))}var hE=class extends lE{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Ci}at(e){return this.getLView(e)[Ei].$implicit}attach(e,t){let r=t[A0];this.needsIndexUpdate||=e!==this.length,d1(this.lContainer,t,e,R0(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Bz(this.lContainer,e)}create(e,t){let r=P0(this.lContainer,this.templateTNode.tView.ssrId),i=u1(this.hostLView,this.templateTNode,new dE(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){s1(e[gt],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ei].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ei].$index=e}getLView(e){return Uz(this.lContainer,e)}};function Zt(n){let e=Vt(null),t=vo();try{let r=dt(),i=r[gt],s=r[t],o=t+1,a=Bv(r,o);if(s.liveCollection===void 0){let l=pE(i,o);s.liveCollection=new hE(a,r,l)}else s.liveCollection.reset();let c=s.liveCollection;if(Vz(c,n,s.trackByFn),c.updateIndexes(),s.hasEmptyBlock){let l=Ff(),u=c.length===0;if(js(r,l,u)){let d=t+2,m=Bv(r,d);if(u){let g=pE(i,d),w=P0(m,g.tView.ssrId),y=u1(r,g,void 0,{dehydratedView:w});d1(m,y,0,R0(g,w))}else qP(m,0)}}}finally{Vt(e)}}function Bv(n,e){return n[e]}function Bz(n,e){return M0(n,e)}function Uz(n,e){return WP(n,e)}function pE(n,e){return NE(n,e)}function jz(n,e,t,r,i,s){let o=e.consts,a=cl(o,i),c=Lf(e,n,2,r,a);return s2(e,t,c,cl(o,s)),c.attrs!==null&&Pv(c,c.attrs,!1),c.mergedAttrs!==null&&Pv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function f(n,e,t,r){let i=dt(),s=er(),o=ri+n,a=i[mr],c=s.firstCreatePass?jz(o,s,i,e,t,r):s.data[o],l=$z(s,i,c,a,e,n);i[o]=l;let u=Kv(c);return fl(c,!0),MP(a,l,c),!cz(c)&&e1()&&o1(s,i,l,c),nj()===0&&ll(l,i),rj(),u&&(t2(s,i,c),e2(s,c,i)),r!==null&&n2(i,c),f}function p(){let n=fi();VE()?jR():(n=n.parent,fl(n,!1));let e=n;oj(e)&&aj(),ij();let t=er();return t.firstCreatePass&&(n1(t,n),OE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&wj(e)&&cE(t,e,dt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&bj(e)&&cE(t,e,dt(),e.stylesWithoutHost,!1),p}function ae(n,e,t,r){return f(n,e,t,r),p(),ae}var $z=(n,e,t,r,i,s)=>(t1(!0),CP(r,i,vj()));function Hz(n,e,t,r,i){let s=e.consts,o=cl(s,r),a=Lf(e,n,8,"ng-container",o);o!==null&&Pv(a,o,!0);let c=cl(s,i);return s2(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function m2(n,e,t){let r=dt(),i=er(),s=n+ri,o=i.firstCreatePass?Hz(s,i,r,e,t):i.data[s];fl(o,!0);let a=zz(i,r,o,n);return r[s]=a,e1()&&o1(i,r,a,o),ll(a,r),Kv(o)&&(t2(i,r,o),e2(i,o,r)),t!=null&&n2(r,o),m2}function g2(){let n=fi(),e=er();return VE()?jR():(n=n.parent,fl(n,!1)),e.firstCreatePass&&(n1(e,n),OE(n)&&e.queries.elementEnd(n)),g2}var zz=(n,e,t,r)=>(t1(!0),p$(e[mr],""));function ye(){return dt()}var Su=void 0;function Wz(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var qz=["en",[["a","p"],["AM","PM"],Su],[["AM","PM"],Su,Su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Su,"{1} 'at' {0}",Su],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Wz],vb={};function xs(n){let e=Gz(n),t=GM(e);if(t)return t;let r=e.split("-")[0];if(t=GM(r),t)return t;if(r==="en")return qz;throw new et(701,!1)}function GM(n){return n in vb||(vb[n]=Iu.ng&&Iu.ng.common&&Iu.ng.common.locales&&Iu.ng.common.locales[n]),vb[n]}var vr=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(vr||{});function Gz(n){return n.toLowerCase().replace(/_/g,"-")}var Uv="en-US";var Kz=Uv;function Qz(n){typeof n=="string"&&(Kz=n.toLowerCase().replace(/_/g,"-"))}var Yz=(n,e,t)=>{};function J(n,e,t,r){let i=dt(),s=er(),o=fi();return _F(s,i,i[mr],o,n,e,r),J}function Xz(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[xv],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function _F(n,e,t,r,i,s,o){let a=Kv(r),l=n.firstCreatePass&&HP(n),u=e[Ei],d=$P(e),m=!0;if(r.type&3||o){let y=Hs(r,e),E=o?o(y):y,M=d.length,k=o?K=>o(Zo(K[r.index])):r.index,O=null;if(!o&&a&&(O=Xz(n,e,i,r.index)),O!==null){let K=O.__ngLastListenerFn__||O;K.__ngNextListenerFn__=s,O.__ngLastListenerFn__=s,m=!1}else{s=QM(r,e,u,s),Yz(y,i,s);let K=t.listen(E,i,s);d.push(s,K),l&&l.push(i,k,M,M+1)}}else s=QM(r,e,u,s);let g=r.outputs,w;if(m&&g!==null&&(w=g[i])){let y=w.length;if(y)for(let E=0;E<y;E+=2){let M=w[E],k=w[E+1],Q=e[M][k].subscribe(s),te=d.length;d.push(s,Q),l&&l.push(i,r.index,te,-(te+1))}}}function KM(n,e,t,r){let i=Vt(null);try{return Ko(6,e,t),t(r)!==!1}catch(s){return zP(n,s),!1}finally{Ko(7,e,t),Vt(i)}}function QM(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?dl(n.index,e):e;l2(o,5);let a=KM(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=KM(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function R(n=1){return mj(n)}function Za(n,e,t){return yF(n,"",e,"",t),Za}function yF(n,e,t,r,i){let s=dt(),o=uF(s,e,t,r);if(o!==Ti){let a=er(),c=Jv();i2(a,c,s,n,o,s[mr],i,!1)}return yF}function xF(n,e,t,r){GH(n,e,t,r)}function _o(n,e,t){qH(n,e,t)}function ws(n){let e=dt(),t=er(),r=WR();BE(r+1);let i=d2(t,r);if(n.dirty&&ZU(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=YH(e,r);n.reset(s,Hj),n.notifyOnChanges()}return!0}return!1}function bs(){return WH(dt(),WR())}function v2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function wF(n){let e=$R();return Qv(e,ri+n)}function v(n,e=""){let t=dt(),r=er(),i=n+ri,s=r.firstCreatePass?Lf(r,i,1,e,null):r.data[i],o=Zz(r,t,s,e,n);t[i]=o,e1()&&o1(r,t,o,s),fl(s,!1)}var Zz=(n,e,t,r,i)=>(t1(!0),f$(e[mr],r));function De(n){return ie("",n,""),De}function ie(n,e,t){let r=dt(),i=uF(r,n,e,t);return i!==Ti&&a2(r,vo(),i),ie}function gn(n,e,t,r,i){let s=dt(),o=mz(s,n,e,t,r,i);return o!==Ti&&a2(s,vo(),o),gn}function _2(n,e,t,r,i,s,o){let a=dt(),c=gz(a,n,e,t,r,i,s,o);return c!==Ti&&a2(a,vo(),c),_2}function $e(n,e,t){oF(e)&&(e=e());let r=dt(),i=Ff();if(js(r,i,e)){let s=er(),o=Jv();i2(s,o,r,n,e,r[mr],t,!1)}return $e}function ze(n,e){let t=oF(n);return t&&n.set(e),t}function He(n,e){let t=dt(),r=er(),i=fi();return _F(r,t,t[mr],i,n,e),He}var bF={};function Mn(n){let e=er(),t=dt(),r=n+ri,i=Lf(e,r,128,null,null);return fl(i,!1),v2(e,t,r,bF),Mn}function Ja(n){ra("NgLet");let e=er(),t=dt(),r=vo();return v2(e,t,r,n),n}function ec(n){let e=$R(),t=Qv(e,ri+n);if(t===bF)throw new et(314,!1);return t}function Jz(n,e,t){let r=er();if(r.firstCreatePass){let i=al(n);mE(t,r.data,r.blueprint,i,!0),mE(e,r.data,r.blueprint,i,!1)}}function mE(n,e,t,r,i){if(n=Vi(n),Array.isArray(n))for(let s=0;s<n.length;s++)mE(n[s],e,t,r,i);else{let s=er(),o=dt(),a=fi(),c=Cf(n)?n:Vi(n.provide),l=CR(n),u=a.providerIndexes&1048575,d=a.directiveStart,m=a.providerIndexes>>20;if(Cf(n)||!n.multi){let g=new Pu(l,i,Qe),w=yb(c,e,i?u:u+m,d);w===-1?(Fb(Iv(a,o),s,c),_b(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),o.push(g)):(t[w]=g,o[w]=g)}else{let g=yb(c,e,u+m,d),w=yb(c,e,u,u+m),y=g>=0&&t[g],E=w>=0&&t[w];if(i&&!E||!i&&!y){Fb(Iv(a,o),s,c);let M=nW(i?tW:eW,t.length,i,r,l);!i&&E&&(t[w].providerFactory=M),_b(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(M),o.push(M)}else{let M=EF(t[i?w:g],l,!i&&r);_b(s,n,g>-1?g:w,M)}!i&&r&&E&&t[w].componentProviders++}}}function _b(n,e,t,r){let i=Cf(e),s=UU(e);if(i||s){let c=(s?Vi(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function EF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yb(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function eW(n,e,t,r){return gE(this.multi,[])}function tW(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Fu(t,t[gt],this.providerFactory.index,r);s=a.slice(0,o),gE(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],gE(i,s);return s}function gE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function nW(n,e,t,r,i){let s=new Pu(n,t,Qe);return s.multi=[],s.index=e,s.componentProviders=0,EF(s,i,r&&!t),s}function Es(n,e=[]){return t=>{t.providersResolver=(r,i)=>Jz(r,i?i(n):n,e)}}var rW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=wR(!1,t.type),i=r.length>0?h1([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Xe({token:n,providedIn:"environment",factory:()=>new n(vt(_s))})}}return n})();function Jt(n){ra("NgStandalone"),n.getStandaloneInjector=e=>e.get(rW).getOrCreateStandaloneInjector(n)}function CF(n,e,t){let r=Vu()+n,i=dt();return i[r]===Ti?B0(i,r,t?e.call(t):e()):oz(i,r)}function Uu(n,e,t,r){return SF(dt(),Vu(),n,e,t,r)}function vn(n,e,t,r,i){return IF(dt(),Vu(),n,e,t,r,i)}function gl(n,e,t,r,i,s){return iW(dt(),Vu(),n,e,t,r,i,s)}function ju(n,e,t,r,i,s,o){return sW(dt(),Vu(),n,e,t,r,i,s,o)}function p1(n,e){let t=n[e];return t===Ti?void 0:t}function SF(n,e,t,r,i,s){let o=e+t;return js(n,o,i)?B0(n,o+1,s?r.call(s,i):r(i)):p1(n,o+1)}function IF(n,e,t,r,i,s,o){let a=e+t;return O0(n,a,i,s)?B0(n,a+2,o?r.call(o,i,s):r(i,s)):p1(n,a+2)}function iW(n,e,t,r,i,s,o,a){let c=e+t;return cF(n,c,i,s,o)?B0(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):p1(n,c+3)}function sW(n,e,t,r,i,s,o,a,c){let l=e+t;return az(n,l,i,s,o,a)?B0(n,l+4,c?r.call(c,i,s,o,a):r(i,s,o,a)):p1(n,l+4)}function ot(n,e){let t=er(),r,i=n+ri;t.firstCreatePass?(r=oW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Du(r.type,!0)),o,a=Xi(Qe);try{let c=Sv(!1),l=s();return Sv(c),v2(t,dt(),i,l),l}finally{Xi(a)}}function oW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function hn(n,e,t){let r=n+ri,i=dt(),s=Qv(i,r);return TF(i,r)?SF(i,Vu(),e,s.transform,t,s):s.transform(t)}function ar(n,e,t,r){let i=n+ri,s=dt(),o=Qv(s,i);return TF(s,i)?IF(s,Vu(),e,o.transform,t,r,o):o.transform(t,r)}function TF(n,e){return n[gt].data[e].pure}var qa=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},DF=new qa("18.2.13");var m1=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var AF=new Ze("");function vl(n){return!!n&&typeof n.then=="function"}function y2(n){return!!n&&typeof n.subscribe=="function"}var g1=new Ze(""),kF=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=le(g1,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(vl(s))t.push(s);else if(y2(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),v1=new Ze("");function aW(){Uk(()=>{throw new et(600,!1)})}function cW(n){return n.isBoundToModule}var lW=10;function uW(n,e,t){try{let r=t();return vl(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var $u=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=le(jj),this.afterRenderManager=le(lF),this.zonelessEnabled=le(f1),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ni,this.afterTick=new ni,this.componentTypes=[],this.components=[],this.isStable=le(Bu).hasPendingTasks.pipe(je(t=>!t)),this._injector=le(_s)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Rv;if(!this._injector.get(kF).done){let m=!i&&vR(t),g=!1;throw new et(405,g)}let o;i?o=t:o=this._injector.get(Df).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=cW(o)?void 0:this._injector.get(ul),c=r||o.selector,l=o.create(Rr.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(AF,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),pv(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new et(101,!1);let t=Vt(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Vt(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Af,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<lW;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)dW(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Yv(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;pv(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(v1,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>pv(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new et(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function pv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function dW(n,e,t,r){if(!t&&!Yv(n))return;QP(n,e,t&&!r?0:1)}var vE=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},_1=(()=>{class n{compileModuleSync(t){return new nE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_R(t),s=EP(i.declarations).reduce((o,a)=>{let c=ol(a);return c&&o.push(new kf(c)),o},[]);return new vE(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fW=(()=>{class n{constructor(){this.zone=le($t),this.changeDetectionScheduler=le(Tf),this.applicationRef=le($u)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hW=new Ze("",{factory:()=>!1});function MF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new $t(Te(fe({},PF()),{scheduleInRootZone:t})),[{provide:$t,useFactory:n},{provide:Ef,multi:!0,useFactory:()=>{let r=le(fW,{optional:!0});return()=>r.initialize()}},{provide:Ef,multi:!0,useFactory:()=>{let r=le(pW);return()=>{r.initialize()}}},e===!0?{provide:JP,useValue:!0}:[],{provide:eF,useValue:t??lP}]}function RF(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=MF({ngZoneFactory:()=>{let i=PF(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ra("NgZone_CoalesceEvent"),new $t(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return $s([{provide:hW,useValue:!0},{provide:f1,useValue:!1},r])}function PF(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var pW=(()=>{class n{constructor(){this.subscription=new fr,this.initialized=!1,this.zone=le($t),this.pendingTasks=le(Bu)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{$t.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{$t.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var mW=(()=>{class n{constructor(){this.appRef=le($u),this.taskService=le(Bu),this.ngZone=le($t),this.zonelessEnabled=le(f1),this.disableScheduling=le(JP,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new fr,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Dv):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(le(eF,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Bb||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?MM:uP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Dv+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function gW(){return typeof $localize<"u"&&$localize.locale||Uv}var U0=new Ze("",{providedIn:"root",factory:()=>le(U0,Rt.Optional|Rt.SkipSelf)||gW()});var _E=new Ze("");function cv(n){return!n.moduleRef}function vW(n){let e=cv(n)?n.r3Injector:n.moduleRef.injector,t=e.get($t);return t.run(()=>{cv(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Jo,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),cv(n)){let s=()=>e.destroy(),o=n.platformInjector.get(_E);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(_E);o.add(s),n.moduleRef.onDestroy(()=>{pv(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return uW(r,t,()=>{let s=e.get(kF);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(U0,Uv);if(Qz(o||Uv),cv(n)){let a=e.get($u);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return _W(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function _W(n,e){let t=n.injector.get($u);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new et(-403,!1);e.push(n)}var mv=null;function yW(n=[],e){return Rr.create({name:e,providers:[{provide:Wv,useValue:"platform"},{provide:_E,useValue:new Set([()=>mv=null])},...n]})}function xW(n=[]){if(mv)return mv;let e=yW(n);return mv=e,aW(),wW(e),e}function wW(n){n.get(GE,null)?.forEach(t=>t())}var Ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=bW}}return n})();function bW(n){return EW(fi(),dt(),(n&16)===16)}function EW(n,e,t){if(Gv(n)&&!t){let r=dl(n.index,e);return new Ou(r,r)}else if(n.type&175){let r=e[po];return new Ou(r,e)}return null}var yE=class{constructor(){}supports(e){return aF(e)}create(e){return new xE(e)}},CW=(n,e)=>e,xE=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||CW}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<YM(r,i,s)?t:r,a=YM(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,u=c-i;if(l!=u){for(let m=0;m<l;m++){let g=m<s.length?s[m]:s[m]=0,w=g+m;u<=w&&w<l&&(s[m]=g+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!aF(e))throw new et(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,sz(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new wE(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new jv),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new jv),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},wE=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},bE=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},jv=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new bE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function YM(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var EE=class{constructor(){}supports(e){return e instanceof Map||h2(e)}create(){return new CE}},CE=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||h2(e)))throw new et(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new SE(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},SE=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function XM(){return new x2([new yE])}var x2=(()=>{class n{static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:XM})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XM()),deps:[[n,new zv,new gr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new et(901,!1)}}return n})();function ZM(){return new w2([new EE])}var w2=(()=>{class n{static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:ZM})}constructor(t){this.factories=t}static create(t,r){if(r){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ZM()),deps:[[n,new zv,new gr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r)return r;throw new et(901,!1)}}return n})();function FF(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=xW(r),s=[MF({}),{provide:Tf,useExisting:mW},...t||[]],o=new Nv({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return vW({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Hu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function j0(n,e){ra("NgSignals");let t=Lk(n);return e?.equal&&(t[qo].equal=e.equal),t}function yo(n){let e=Vt(null);try{return n()}finally{Vt(e)}}var SW=new Ze("",{providedIn:"root",factory:()=>le(IW)}),IW=(()=>{class n{static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>new IE})}}return n})(),IE=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=le(Bu),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},TE=class{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=zk(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Jo,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function b2(n,e){ra("NgSignals"),!e?.injector&&IR(b2);let t=e?.injector??le(Rr),r=e?.manualCleanup!==!0?t.get(r1):null,i=new TE(t.get(SW),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(Ji,null,{optional:!0});return!s||!(s._lView[ft]&8)?i.watcher.notify():(s._lView[uv]??=[]).push(i.watcher.notify),i}function OF(n){let e=ol(n);if(!e)return null;let t=new kf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var HF=null;function sc(){return HF}function zF(n){HF??=n}var T1=class{};var es=new Ze(""),O2=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(TW),providedIn:"platform"})}}return n})(),WF=new Ze(""),TW=(()=>{class n extends O2{constructor(){super(),this._doc=le(es),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sc().getBaseHref(this._doc)}onPopState(t){let r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=sc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function N2(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function NF(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function nc(n){return n&&n[0]!=="?"?"?"+n:n}var oc=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(L2),providedIn:"root"})}}return n})(),qF=new Ze(""),L2=(()=>{class n extends oc{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??le(es).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return N2(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+nc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+nc(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+nc(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(vt(O2),vt(qF,8))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GF=(()=>{class n extends oc{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=N2(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+nc(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+nc(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(vt(O2),vt(qF,8))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),Vf=(()=>{class n{constructor(t){this._subject=new Gn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=kW(NF(LF(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nc(r))}normalize(t){return n.stripTrailingSlash(AW(this._basePath,LF(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=nc}static{this.joinWithSlash=N2}static{this.stripTrailingSlash=NF}static{this.\u0275fac=function(r){return new(r||n)(vt(oc))}}static{this.\u0275prov=Xe({token:n,factory:()=>DW(),providedIn:"root"})}}return n})();function DW(){return new Vf(vt(oc))}function AW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function LF(n){return n.replace(/\/index.html$/,"")}function kW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var KF=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(KF||{});var ji=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ji||{}),Rn=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Rn||{}),Cs=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Cs||{}),Ss={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function MW(n){return xs(n)[vr.LocaleId]}function RW(n,e,t){let r=xs(n),i=[r[vr.DayPeriodsFormat],r[vr.DayPeriodsStandalone]],s=Ws(i,e);return Ws(s,t)}function PW(n,e,t){let r=xs(n),i=[r[vr.DaysFormat],r[vr.DaysStandalone]],s=Ws(i,e);return Ws(s,t)}function FW(n,e,t){let r=xs(n),i=[r[vr.MonthsFormat],r[vr.MonthsStandalone]],s=Ws(i,e);return Ws(s,t)}function OW(n,e){let r=xs(n)[vr.Eras];return Ws(r,e)}function y1(n,e){let t=xs(n);return Ws(t[vr.DateFormat],e)}function x1(n,e){let t=xs(n);return Ws(t[vr.TimeFormat],e)}function w1(n,e){let r=xs(n)[vr.DateTimeFormat];return Ws(r,e)}function rc(n,e){let t=xs(n),r=t[vr.NumberSymbols][e];if(typeof r>"u"){if(e===Ss.CurrencyDecimal)return t[vr.NumberSymbols][Ss.Decimal];if(e===Ss.CurrencyGroup)return t[vr.NumberSymbols][Ss.Group]}return r}function NW(n,e){return xs(n)[vr.NumberFormats][e]}function QF(n){if(!n[vr.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[vr.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function LW(n){let e=xs(n);return QF(e),(e[vr.ExtraData][2]||[]).map(r=>typeof r=="string"?E2(r):[E2(r[0]),E2(r[1])])}function VW(n,e,t){let r=xs(n);QF(r);let i=[r[vr.ExtraData][0],r[vr.ExtraData][1]],s=Ws(i,e)||[];return Ws(s,t)||[]}function Ws(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function E2(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var BW=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,b1={},UW=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ic=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(ic||{}),cn=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(cn||{}),an=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(an||{});function jW(n,e,t,r){let i=YW(n);e=tc(t,e)||e;let o=[],a;for(;e;)if(a=UW.exec(e),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;e=u}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=XF(r,c),i=QW(i,r,!0));let l="";return o.forEach(u=>{let d=GW(u);l+=d?d(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function D1(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function tc(n,e){let t=MW(n);if(b1[t]??={},b1[t][e])return b1[t][e];let r="";switch(e){case"shortDate":r=y1(n,Cs.Short);break;case"mediumDate":r=y1(n,Cs.Medium);break;case"longDate":r=y1(n,Cs.Long);break;case"fullDate":r=y1(n,Cs.Full);break;case"shortTime":r=x1(n,Cs.Short);break;case"mediumTime":r=x1(n,Cs.Medium);break;case"longTime":r=x1(n,Cs.Long);break;case"fullTime":r=x1(n,Cs.Full);break;case"short":let i=tc(n,"shortTime"),s=tc(n,"shortDate");r=E1(w1(n,Cs.Short),[i,s]);break;case"medium":let o=tc(n,"mediumTime"),a=tc(n,"mediumDate");r=E1(w1(n,Cs.Medium),[o,a]);break;case"long":let c=tc(n,"longTime"),l=tc(n,"longDate");r=E1(w1(n,Cs.Long),[c,l]);break;case"full":let u=tc(n,"fullTime"),d=tc(n,"fullDate");r=E1(w1(n,Cs.Full),[u,d]);break}return r&&(b1[t][e]=r),r}function E1(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function xo(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function $W(n,e){return xo(n,3).substring(0,e)}function Pr(n,e,t=0,r=!1,i=!1){return function(s,o){let a=HW(n,s);if((t>0||a>-t)&&(a+=t),n===cn.Hours)a===0&&t===-12&&(a=12);else if(n===cn.FractionalSeconds)return $W(a,e);let c=rc(o,Ss.MinusSign);return xo(a,e,c,r,i)}}function HW(n,e){switch(n){case cn.FullYear:return e.getFullYear();case cn.Month:return e.getMonth();case cn.Date:return e.getDate();case cn.Hours:return e.getHours();case cn.Minutes:return e.getMinutes();case cn.Seconds:return e.getSeconds();case cn.FractionalSeconds:return e.getMilliseconds();case cn.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Bn(n,e,t=ji.Format,r=!1){return function(i,s){return zW(i,s,n,e,t,r)}}function zW(n,e,t,r,i,s){switch(t){case an.Months:return FW(e,i,r)[n.getMonth()];case an.Days:return PW(e,i,r)[n.getDay()];case an.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=LW(e),u=VW(e,i,r),d=l.findIndex(m=>{if(Array.isArray(m)){let[g,w]=m,y=o>=g.hours&&a>=g.minutes,E=o<w.hours||o===w.hours&&a<w.minutes;if(g.hours<w.hours){if(y&&E)return!0}else if(y||E)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return RW(e,i,r)[o<12?0:1];case an.Eras:return OW(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function C1(n){return function(e,t,r){let i=-1*r,s=rc(t,Ss.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case ic.Short:return(i>=0?"+":"")+xo(o,2,s)+xo(Math.abs(i%60),2,s);case ic.ShortGMT:return"GMT"+(i>=0?"+":"")+xo(o,1,s);case ic.Long:return"GMT"+(i>=0?"+":"")+xo(o,2,s)+":"+xo(Math.abs(i%60),2,s);case ic.Extended:return r===0?"Z":(i>=0?"+":"")+xo(o,2,s)+":"+xo(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var WW=0,I1=4;function qW(n){let e=D1(n,WW,1).getDay();return D1(n,0,1+(e<=I1?I1:I1+7)-e)}function YF(n){let e=n.getDay(),t=e===0?-3:I1-e;return D1(n.getFullYear(),n.getMonth(),n.getDate()+t)}function C2(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=YF(t),o=qW(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return xo(i,n,rc(r,Ss.MinusSign))}}function S1(n,e=!1){return function(t,r){let s=YF(t).getFullYear();return xo(s,n,rc(r,Ss.MinusSign),e)}}var S2={};function GW(n){if(S2[n])return S2[n];let e;switch(n){case"G":case"GG":case"GGG":e=Bn(an.Eras,Rn.Abbreviated);break;case"GGGG":e=Bn(an.Eras,Rn.Wide);break;case"GGGGG":e=Bn(an.Eras,Rn.Narrow);break;case"y":e=Pr(cn.FullYear,1,0,!1,!0);break;case"yy":e=Pr(cn.FullYear,2,0,!0,!0);break;case"yyy":e=Pr(cn.FullYear,3,0,!1,!0);break;case"yyyy":e=Pr(cn.FullYear,4,0,!1,!0);break;case"Y":e=S1(1);break;case"YY":e=S1(2,!0);break;case"YYY":e=S1(3);break;case"YYYY":e=S1(4);break;case"M":case"L":e=Pr(cn.Month,1,1);break;case"MM":case"LL":e=Pr(cn.Month,2,1);break;case"MMM":e=Bn(an.Months,Rn.Abbreviated);break;case"MMMM":e=Bn(an.Months,Rn.Wide);break;case"MMMMM":e=Bn(an.Months,Rn.Narrow);break;case"LLL":e=Bn(an.Months,Rn.Abbreviated,ji.Standalone);break;case"LLLL":e=Bn(an.Months,Rn.Wide,ji.Standalone);break;case"LLLLL":e=Bn(an.Months,Rn.Narrow,ji.Standalone);break;case"w":e=C2(1);break;case"ww":e=C2(2);break;case"W":e=C2(1,!0);break;case"d":e=Pr(cn.Date,1);break;case"dd":e=Pr(cn.Date,2);break;case"c":case"cc":e=Pr(cn.Day,1);break;case"ccc":e=Bn(an.Days,Rn.Abbreviated,ji.Standalone);break;case"cccc":e=Bn(an.Days,Rn.Wide,ji.Standalone);break;case"ccccc":e=Bn(an.Days,Rn.Narrow,ji.Standalone);break;case"cccccc":e=Bn(an.Days,Rn.Short,ji.Standalone);break;case"E":case"EE":case"EEE":e=Bn(an.Days,Rn.Abbreviated);break;case"EEEE":e=Bn(an.Days,Rn.Wide);break;case"EEEEE":e=Bn(an.Days,Rn.Narrow);break;case"EEEEEE":e=Bn(an.Days,Rn.Short);break;case"a":case"aa":case"aaa":e=Bn(an.DayPeriods,Rn.Abbreviated);break;case"aaaa":e=Bn(an.DayPeriods,Rn.Wide);break;case"aaaaa":e=Bn(an.DayPeriods,Rn.Narrow);break;case"b":case"bb":case"bbb":e=Bn(an.DayPeriods,Rn.Abbreviated,ji.Standalone,!0);break;case"bbbb":e=Bn(an.DayPeriods,Rn.Wide,ji.Standalone,!0);break;case"bbbbb":e=Bn(an.DayPeriods,Rn.Narrow,ji.Standalone,!0);break;case"B":case"BB":case"BBB":e=Bn(an.DayPeriods,Rn.Abbreviated,ji.Format,!0);break;case"BBBB":e=Bn(an.DayPeriods,Rn.Wide,ji.Format,!0);break;case"BBBBB":e=Bn(an.DayPeriods,Rn.Narrow,ji.Format,!0);break;case"h":e=Pr(cn.Hours,1,-12);break;case"hh":e=Pr(cn.Hours,2,-12);break;case"H":e=Pr(cn.Hours,1);break;case"HH":e=Pr(cn.Hours,2);break;case"m":e=Pr(cn.Minutes,1);break;case"mm":e=Pr(cn.Minutes,2);break;case"s":e=Pr(cn.Seconds,1);break;case"ss":e=Pr(cn.Seconds,2);break;case"S":e=Pr(cn.FractionalSeconds,1);break;case"SS":e=Pr(cn.FractionalSeconds,2);break;case"SSS":e=Pr(cn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=C1(ic.Short);break;case"ZZZZZ":e=C1(ic.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=C1(ic.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=C1(ic.Long);break;default:return null}return S2[n]=e,e}function XF(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function KW(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function QW(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=XF(e,i);return KW(n,r*(s-i))}function YW(n){if(VF(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return D1(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(BW))return XW(r)}let e=new Date(n);if(!VF(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function XW(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function VF(n){return n instanceof Date&&!isNaN(n.valueOf())}var ZW=/^(\d+)?\.((\d+)(-(\d+))?)?$/,BF=22,A1=".",$0="0",JW=";",eq=",",I2="#";function tq(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=rc(t,Ss.Infinity);else{let l=sq(n);o&&(l=iq(l));let u=e.minInt,d=e.minFrac,m=e.maxFrac;if(s){let k=s.match(ZW);if(k===null)throw new Error(`${s} is not a valid digit info`);let O=k[1],K=k[3],Q=k[5];O!=null&&(u=T2(O)),K!=null&&(d=T2(K)),Q!=null?m=T2(Q):K!=null&&d>m&&(m=d)}oq(l,d,m);let g=l.digits,w=l.integerLen,y=l.exponent,E=[];for(c=g.every(k=>!k);w<u;w++)g.unshift(0);for(;w<0;w++)g.unshift(0);w>0?E=g.splice(w,g.length):(E=g,g=[0]);let M=[];for(g.length>=e.lgSize&&M.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)M.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&M.unshift(g.join("")),a=M.join(rc(t,r)),E.length&&(a+=rc(t,i)+E.join("")),y&&(a+=rc(t,Ss.Exponential)+"+"+y)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function nq(n,e,t){let r=NW(e,KF.Decimal),i=rq(r,rc(e,Ss.MinusSign));return tq(n,i,e,Ss.Group,Ss.Decimal,t)}function rq(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(JW),i=r[0],s=r[1],o=i.indexOf(A1)!==-1?i.split(A1):[i.substring(0,i.lastIndexOf($0)+1),i.substring(i.lastIndexOf($0)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(I2));for(let u=0;u<c.length;u++){let d=c.charAt(u);d===$0?t.minFrac=t.maxFrac=u+1:d===I2?t.maxFrac=u+1:t.posSuf+=d}let l=a.split(eq);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let u=i.length-t.posPre.length-t.posSuf.length,d=s.indexOf(I2);t.negPre=s.substring(0,d).replace(/'/g,""),t.negSuf=s.slice(d+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function iq(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function sq(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(A1))>-1&&(e=e.replace(A1,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===$0;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===$0;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>BF&&(r=r.splice(0,BF-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function oq(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let d=o;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let d=1;d<o;d++)r[d]=0}if(a>=5)if(o-1<0){for(let d=0;d>o;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,u=r.reduceRight(function(d,m,g,w){return m=m+d,w[g]=m<10?m:m-10,c&&(w[g]===0&&g>=l?w.pop():c=!1),m>=10?1:0},0);u&&(r.unshift(u),n.integerLen++)}function T2(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ZF(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var D2=/\s+/,UF=[],tr=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=UF,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(D2):UF}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(D2):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(D2).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ii),Qe(zs))}}static{this.\u0275dir=fn({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var A2=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qs=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new A2(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),jF(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);jF(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Qe(hl),Qe(Nu),Qe(x2))}}static{this.\u0275dir=fn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function jF(n,e){n.context.$implicit=e.item}var sa=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new k2,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$F("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$F("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Qe(hl),Qe(Nu))}}static{this.\u0275dir=fn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),k2=class{constructor(){this.$implicit=null,this.ngIf=null}};function $F(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Bi(e)}'.`)}var JF=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){let t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){let[i,s]=t.split("."),o=i.indexOf("-")===-1?void 0:ea.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${r}${s}`:r,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ii),Qe(w2),Qe(zs))}}static{this.\u0275dir=fn({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return n})();function V2(n,e){return new et(2100,!1)}var M2=class{createSubscription(e,t){return yo(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){yo(()=>e.unsubscribe())}},R2=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},aq=new R2,cq=new M2,M1=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(vl(t))return aq;if(y2(t))return cq;throw V2(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ji,16))}}static{this.\u0275pipe=Rf({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var lq="mediumDate",uq=new Ze(""),dq=new Ze(""),_l=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??lq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return jW(t,o,s||this.locale,a)}catch(o){throw V2(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(Qe(U0,16),Qe(uq,24),Qe(dq,24))}}static{this.\u0275pipe=Rf({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var eO=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!fq(t))return null;i||=this._locale;try{let s=hq(t);return nq(s,i,r)}catch(s){throw V2(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Qe(U0,16))}}static{this.\u0275pipe=Rf({name:"number",type:n,pure:!0,standalone:!0})}}return n})();function fq(n){return!(n==null||n===""||n!==n)}function hq(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var nn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ka({type:n})}static{this.\u0275inj=Ga({})}}return n})(),B2="browser",pq="server";function mq(n){return n===B2}function U2(n){return n===pq}var tO=(()=>{class n{static{this.\u0275prov=Xe({token:n,providedIn:"root",factory:()=>mq(le(na))?new P2(le(es),window):new F2})}}return n})(),P2=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=gq(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function gq(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var F2=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},k1=class{};var H2=class extends T1{constructor(){super(...arguments),this.supportsDOMEvents=!0}},z2=class n extends H2{static makeCurrent(){zF(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=vq();return t==null?null:_q(t)}resetBaseElement(){H0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ZF(document.cookie,e)}},H0=null;function vq(){return H0=H0||document.querySelector("base"),H0?H0.getAttribute("href"):null}function _q(n){return new URL(n,document.baseURI).pathname}var yq=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),W2=new Ze(""),sO=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new et(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(vt(W2),vt($t))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),R1=class{constructor(e){this._doc=e}},j2="ng-app-id",oO=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=U2(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${j2}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(j2),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(j2,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(vt(es),vt(qE),vt(KE,8),vt(na))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),$2={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},G2=/%COMP%/g,aO="%COMP%",xq=`_nghost-${aO}`,wq=`_ngcontent-${aO}`,bq=!0,Eq=new Ze("",{providedIn:"root",factory:()=>bq});function Cq(n){return wq.replace(G2,n)}function Sq(n){return xq.replace(G2,n)}function cO(n,e){return e.map(t=>t.replace(G2,n))}var nO=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=U2(a),this.defaultRenderer=new z0(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Yo.ShadowDom&&(r=Te(fe({},r),{encapsulation:Yo.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof P1?i.applyToHost(t):i instanceof W0&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Yo.Emulated:s=new P1(c,l,r,this.appId,u,o,a,d);break;case Yo.ShadowDom:return new q2(c,l,t,r,o,a,this.nonce,d);default:s=new W0(c,l,r,u,o,a,d);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(vt(sO),vt(oO),vt(qE),vt(Eq),vt(es),vt(na),vt($t),vt(KE))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),z0=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS($2[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(rO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(rO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new et(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=$2[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=$2[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ea.DashCase|ea.Important)?e.style.setProperty(t,r,i&ea.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ea.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=sc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function rO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var q2=class extends z0{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=cO(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},W0=class extends z0{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?cO(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},P1=class extends W0{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=Cq(l),this.hostAttr=Sq(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Iq=(()=>{class n extends R1{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(vt(es))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})(),iO=["alt","control","meta","shift"],Tq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Aq=(()=>{class n extends R1{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),iO.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Tq[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iO.forEach(o=>{if(o!==i){let a=Dq[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(vt(es))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})();function lO(n,e){return FF(fe({rootComponent:n},kq(e)))}function kq(n){return{appProviders:[...Oq,...n?.providers??[]],platformProviders:Fq}}function Mq(){z2.makeCurrent()}function Rq(){return new Jo}function Pq(){return vP(document),document}var Fq=[{provide:na,useValue:B2},{provide:GE,useValue:Mq,multi:!0},{provide:es,useFactory:Pq,deps:[]}];var Oq=[{provide:Wv,useValue:"root"},{provide:Jo,useFactory:Rq,deps:[]},{provide:W2,useClass:Iq,multi:!0,deps:[es,$t,na]},{provide:W2,useClass:Aq,multi:!0,deps:[es]},nO,oO,sO,{provide:Af,useExisting:nO},{provide:k1,useClass:yq,deps:[]},[]];var F1=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(vt(es))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Tt="primary",op=Symbol("RouteTitle"),Z2=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zf(n){return new Z2(n)}function Lq(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Vq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!oa(n[t],e[t]))return!1;return!0}function oa(n,e){let t=n?J2(n):void 0,r=e?J2(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!xO(n[i],e[i]))return!1;return!0}function J2(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function xO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function wO(n){return n.length>0?n[n.length-1]:null}function xl(n){return tb(n)?n:vl(n)?Ot(Promise.resolve(n)):Ke(n)}var Bq={exact:EO,subset:CO},bO={exact:Uq,subset:jq,ignored:()=>!0};function uO(n,e,t){return Bq[t.paths](n.root,e.root,t.matrixParams)&&bO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Uq(n,e){return oa(n,e)}function EO(n,e,t){if(!Wu(n.segments,e.segments)||!L1(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!EO(n.children[r],e.children[r],t))return!1;return!0}function jq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xO(n[t],e[t]))}function CO(n,e,t){return SO(n,e,e.segments,t)}function SO(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Wu(i,t)||e.hasChildren()||!L1(i,t,r))}else if(n.segments.length===t.length){if(!Wu(n.segments,t)||!L1(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!CO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Wu(n.segments,i)||!L1(n.segments,i,r)||!n.children[Tt]?!1:SO(n.children[Tt],e,s,r)}}function L1(n,e,t){return e.every((r,i)=>bO[t](n[i].parameters,r.parameters))}var cc=class{constructor(e=new pn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zf(this.queryParams),this._queryParamMap}toString(){return zq.serialize(this)}},pn=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return V1(this)}},zu=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zf(this.parameters),this._parameterMap}toString(){return TO(this)}};function $q(n,e){return Wu(n,e)&&n.every((t,r)=>oa(t.parameters,e[r].parameters))}function Wu(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function Hq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Tt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Tt&&(t=t.concat(e(i,r)))}),t}var ap=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>new Wf,providedIn:"root"})}}return n})(),Wf=class{parse(e){let t=new tC(e);return new cc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${q0(e.root,!0)}`,r=Gq(e.queryParams),i=typeof e.fragment=="string"?`#${Wq(e.fragment)}`:"";return`${t}${r}${i}`}},zq=new Wf;function V1(n){return n.segments.map(e=>TO(e)).join("/")}function q0(n,e){if(!n.hasChildren())return V1(n);if(e){let t=n.children[Tt]?q0(n.children[Tt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Tt&&r.push(`${i}:${q0(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=Hq(n,(r,i)=>i===Tt?[q0(n.children[Tt],!1)]:[`${i}:${q0(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Tt]!=null?`${V1(n)}/${t[0]}`:`${V1(n)}/(${t.join("//")})`}}function IO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function O1(n){return IO(n).replace(/%3B/gi,";")}function Wq(n){return encodeURI(n)}function eC(n){return IO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function B1(n){return decodeURIComponent(n)}function dO(n){return B1(n.replace(/\+/g,"%20"))}function TO(n){return`${eC(n.path)}${qq(n.parameters)}`}function qq(n){return Object.entries(n).map(([e,t])=>`;${eC(e)}=${eC(t)}`).join("")}function Gq(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${O1(t)}=${O1(i)}`).join("&"):`${O1(t)}=${O1(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Kq=/^[^\/()?;#]+/;function K2(n){let e=n.match(Kq);return e?e[0]:""}var Qq=/^[^\/()?;=#]+/;function Yq(n){let e=n.match(Qq);return e?e[0]:""}var Xq=/^[^=?&#]+/;function Zq(n){let e=n.match(Xq);return e?e[0]:""}var Jq=/^[^&#]+/;function eG(n){let e=n.match(Jq);return e?e[0]:""}var tC=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Tt]=new pn(e,t)),r}parseSegment(){let e=K2(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new et(4009,!1);return this.capture(e),new zu(B1(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Yq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=K2(this.remaining);i&&(r=i,this.capture(r))}e[B1(t)]=B1(r)}parseQueryParam(e){let t=Zq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=eG(this.remaining);o&&(r=o,this.capture(r))}let i=dO(t),s=dO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=K2(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new et(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Tt);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Tt]:new pn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new et(4011,!1)}};function DO(n){return n.segments.length>0?new pn([],{[Tt]:n}):n}function AO(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=AO(i);if(r===Tt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new pn(n.segments,e);return tG(t)}function tG(n){if(n.numberOfChildren===1&&n.children[Tt]){let e=n.children[Tt];return new pn(n.segments.concat(e.segments),e.children)}return n}function qu(n){return n instanceof cc}function nG(n,e,t=null,r=null){let i=kO(n);return MO(i,e,t,r)}function kO(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new pn(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=DO(r);return e??i}function MO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Q2(i,i,i,t,r);let s=rG(e);if(s.toRoot())return Q2(i,i,new pn([],{}),t,r);let o=iG(s,i,n),a=o.processChildren?Q0(o.segmentGroup,o.index,s.commands):PO(o.segmentGroup,o.index,s.commands);return Q2(i,o.segmentGroup,a,t,r)}function U1(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Z0(n){return typeof n=="object"&&n!=null&&n.outlets}function Q2(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=RO(n,e,t);let a=DO(AO(o));return new cc(a,s,i)}function RO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=RO(s,e,t)}),new pn(n.segments,r)}var j1=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&U1(r[0]))throw new et(4003,!1);let i=r.find(Z0);if(i&&i!==wO(r))throw new et(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rG(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new j1(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new j1(t,e,r)}var jf=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function iG(n,e,t){if(n.isAbsolute)return new jf(e,!0,0);if(!t)return new jf(e,!1,NaN);if(t.parent===null)return new jf(t,!0,0);let r=U1(n.commands[0])?0:1,i=t.segments.length-1+r;return sG(t,i,n.numberOfDoubleDots)}function sG(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new et(4005,!1);i=r.segments.length}return new jf(r,!1,i-s)}function oG(n){return Z0(n[0])?n[0].outlets:{[Tt]:n}}function PO(n,e,t){if(n??=new pn([],{}),n.segments.length===0&&n.hasChildren())return Q0(n,e,t);let r=aG(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new pn(n.segments.slice(0,r.pathIndex),{});return s.children[Tt]=new pn(n.segments.slice(r.pathIndex),n.children),Q0(s,0,i)}else return r.match&&i.length===0?new pn(n.segments,{}):r.match&&!n.hasChildren()?nC(n,e,t):r.match?Q0(n,0,i):nC(n,e,t)}function Q0(n,e,t){if(t.length===0)return new pn(n.segments,{});{let r=oG(t),i={};if(Object.keys(r).some(s=>s!==Tt)&&n.children[Tt]&&n.numberOfChildren===1&&n.children[Tt].segments.length===0){let s=Q0(n.children[Tt],e,t);return new pn(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PO(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new pn(n.segments,i)}}function aG(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Z0(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!hO(c,l,o))return s;r+=2}else{if(!hO(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function nC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Z0(s)){let c=cG(s.outlets);return new pn(r,c)}if(i===0&&U1(t[0])){let c=n.segments[e];r.push(new zu(c.path,fO(t[0]))),i++;continue}let o=Z0(s)?s.outlets[Tt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&U1(a)?(r.push(new zu(o,fO(a))),i+=2):(r.push(new zu(o,{})),i++)}return new pn(r,{})}function cG(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=nC(new pn([],{}),0,r))}),e}function fO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function hO(n,e,t){return n==t.path&&oa(e,t.parameters)}var Y0="imperative",ii=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ii||{}),Gs=class{constructor(e,t){this.id=e,this.url=t}},qf=class extends Gs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=ii.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ds=class extends Gs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=ii.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ts=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ts||{}),$1=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($1||{}),ac=class extends Gs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ii.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yl=class extends Gs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=ii.NavigationSkipped}},J0=class extends Gs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=ii.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},H1=class extends Gs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ii.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rC=class extends Gs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ii.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iC=class extends Gs{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ii.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},sC=class extends Gs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ii.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oC=class extends Gs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=ii.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aC=class{constructor(e){this.route=e,this.type=ii.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cC=class{constructor(e){this.route=e,this.type=ii.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},lC=class{constructor(e){this.snapshot=e,this.type=ii.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uC=class{constructor(e){this.snapshot=e,this.type=ii.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dC=class{constructor(e){this.snapshot=e,this.type=ii.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fC=class{constructor(e){this.snapshot=e,this.type=ii.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},z1=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=ii.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ep=class{},Gf=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function lG(n,e){return n.providers&&!n._injector&&(n._injector=h1(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wo(n){return n.outlet||Tt}function uG(n,e){let t=n.filter(r=>wo(r)===e);return t.push(...n.filter(r=>wo(r)!==e)),t}function cp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hC=class{get injector(){return cp(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lp(this.rootInjector),this.attachRef=null}},lp=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new hC(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(vt(_s))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),W1=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=pC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=pC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=mC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mC(e,this._root).map(t=>t.value)}};function pC(n,e){if(n===e.value)return e;for(let t of e.children){let r=pC(n,t);if(r)return r}return null}function mC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=mC(n,t);if(r.length)return r.unshift(e),r}return[]}var Is=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Uf(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var q1=class extends W1{constructor(e,t){super(e),this.snapshot=t,CC(this,e)}toString(){return this.snapshot.toString()}};function FO(n){let e=dG(n),t=new Qr([new zu("",{})]),r=new Qr({}),i=new Qr({}),s=new Qr({}),o=new Qr(""),a=new ts(t,r,s,o,i,Tt,n,e.root);return a.snapshot=e.root,new q1(new Is(a,[]),e)}function dG(n){let e={},t={},r={},i="",s=new $f([],e,r,i,t,Tt,n,null,{});return new K1("",new Is(s,[]))}var ts=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(je(l=>l[op]))??Ke(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(je(e=>zf(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(je(e=>zf(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function G1(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:fe(fe({},e.params),n.params),data:fe(fe({},e.data),n.data),resolve:fe(fe(fe(fe({},n.data),e.data),i?.data),n._resolvedData)}:r={params:fe({},n.params),data:fe({},n.data),resolve:fe(fe({},n.data),n._resolvedData??{})},i&&NO(i)&&(r.resolve[op]=i.title),r}var $f=class{get title(){return this.data?.[op]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zf(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zf(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},K1=class extends W1{constructor(e,t){super(t),this.url=e,CC(this,t)}toString(){return OO(this._root)}};function CC(n,e){e.value._routerState=n,e.children.forEach(t=>CC(n,t))}function OO(n){let e=n.children.length>0?` { ${n.children.map(OO).join(", ")} } `:"";return`${n.value}${e}`}function Y2(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,oa(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),oa(e.params,t.params)||n.paramsSubject.next(t.params),Vq(e.url,t.url)||n.urlSubject.next(t.url),oa(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gC(n,e){let t=oa(n.params,e.params)&&$q(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||gC(n.parent,e.parent))}function NO(n){return typeof n.title=="string"||n.title===null}var SC=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Tt,this.activateEvents=new Gn,this.deactivateEvents=new Gn,this.attachEvents=new Gn,this.detachEvents=new Gn,this.parentContexts=le(lp),this.location=le(hl),this.changeDetector=le(Ji),this.inputBinder=le(Z1,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new et(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new et(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new et(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new et(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new vC(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=fn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[go]})}}return n})(),vC=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ts?this.route:e===lp?this.childContexts:this.parent.get(e,t)}},Z1=new Ze(""),pO=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=w0([r.queryParams,r.params,r.data]).pipe(Ir(([s,o,a],c)=>(a=fe(fe(fe({},s),o),a),c===0?Ke(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let o=OF(r.component);if(!o){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})();function fG(n,e,t){let r=tp(n,e._root,t?t._root:void 0);return new q1(r,e)}function tp(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=hG(n,e,t);return new Is(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>tp(n,a)),o}}let r=pG(e.value),i=e.children.map(s=>tp(n,s));return new Is(r,i)}}function hG(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tp(n,r,i);return tp(n,r)})}function pG(n){return new ts(new Qr(n.url),new Qr(n.params),new Qr(n.queryParams),new Qr(n.fragment),new Qr(n.data),n.outlet,n.component,n)}var np=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},LO="ngNavigationCancelingError";function Q1(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VO(!1,Ts.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function VO(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[LO]=!0,t.cancellationCode=e,t}function mG(n){return BO(n)&&qu(n.url)}function BO(n){return!!n&&n[LO]}var gG=(n,e,t,r)=>je(i=>(new _C(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),_C=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Y2(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Uf(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Uf(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Uf(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Uf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fC(s.value.snapshot))}),e.children.length&&this.forwardEvent(new uC(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Y2(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Y2(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Y1=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hf=class{constructor(e,t){this.component=e,this.route=t}};function vG(n,e,t){let r=n._root,i=e?e._root:null;return G0(r,i,t,[r.value])}function _G(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Yf(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nR(n)?n:e.get(n):r}function G0(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Uf(e);return n.children.forEach(o=>{yG(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>X0(a,t.getContext(o),i)),i}function yG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=xG(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Y1(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?G0(n,e,a?a.children:null,r,i):G0(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hf(a.outlet.component,o))}else o&&X0(e,a,i),i.canActivateChecks.push(new Y1(r)),s.component?G0(n,null,a?a.children:null,r,i):G0(n,null,t,r,i);return i}function xG(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Wu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wu(n.url,e.url)||!oa(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gC(n,e)||!oa(n.queryParams,e.queryParams);case"paramsChange":default:return!gC(n,e)}}function X0(n,e,t){let r=Uf(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?X0(o,e.children.getContext(s),t):X0(o,null,t):X0(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Hf(e.outlet.component,i)):t.canDeactivateChecks.push(new Hf(null,i)):t.canDeactivateChecks.push(new Hf(null,i))}function up(n){return typeof n=="function"}function wG(n){return typeof n=="boolean"}function bG(n){return n&&up(n.canLoad)}function EG(n){return n&&up(n.canActivate)}function CG(n){return n&&up(n.canActivateChild)}function SG(n){return n&&up(n.canDeactivate)}function IG(n){return n&&up(n.canMatch)}function UO(n){return n instanceof lo||n?.name==="EmptyError"}var N1=Symbol("INITIAL_VALUE");function Kf(){return Ir(n=>w0(n.map(e=>e.pipe(Mr(1),rv(N1)))).pipe(je(e=>{for(let t of e)if(t!==!0){if(t===N1)return N1;if(t===!1||TG(t))return t}return!0}),di(e=>e!==N1),Mr(1)))}function TG(n){return qu(n)||n instanceof np}function DG(n,e){return hr(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Ke(Te(fe({},t),{guardsResult:!0})):AG(o,r,i,n).pipe(hr(a=>a&&wG(a)?kG(r,s,n,e):Ke(a)),je(a=>Te(fe({},t),{guardsResult:a})))})}function AG(n,e,t,r){return Ot(n).pipe(hr(i=>OG(i.component,i.route,t,e,r)),Go(i=>i!==!0,!0))}function kG(n,e,t,r){return Ot(e).pipe(Cu(i=>pf(RG(i.route.parent,r),MG(i.route,r),FG(n,i.path,t),PG(n,i.route,t))),Go(i=>i!==!0,!0))}function MG(n,e){return n!==null&&e&&e(new dC(n)),Ke(!0)}function RG(n,e){return n!==null&&e&&e(new lC(n)),Ke(!0)}function PG(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Ke(!0);let i=r.map(s=>ev(()=>{let o=cp(e)??t,a=Yf(s,o),c=EG(a)?a.canActivate(e,n):ta(o,()=>a(e,n));return xl(c).pipe(Go())}));return Ke(i).pipe(Kf())}function FG(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>_G(o)).filter(o=>o!==null).map(o=>ev(()=>{let a=o.guards.map(c=>{let l=cp(o.node)??t,u=Yf(c,l),d=CG(u)?u.canActivateChild(r,n):ta(l,()=>u(r,n));return xl(d).pipe(Go())});return Ke(a).pipe(Kf())}));return Ke(s).pipe(Kf())}function OG(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Ke(!0);let o=s.map(a=>{let c=cp(e)??i,l=Yf(a,c),u=SG(l)?l.canDeactivate(n,e,t,r):ta(c,()=>l(n,e,t,r));return xl(u).pipe(Go())});return Ke(o).pipe(Kf())}function NG(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Ke(!0);let s=i.map(o=>{let a=Yf(o,n),c=bG(a)?a.canLoad(e,t):ta(n,()=>a(e,t));return xl(c)});return Ke(s).pipe(Kf(),jO(r))}function jO(n){return Og(Yr(e=>{if(typeof e!="boolean")throw Q1(n,e)}),je(e=>e===!0))}function LG(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Ke(!0);let s=i.map(o=>{let a=Yf(o,n),c=IG(a)?a.canMatch(e,t):ta(n,()=>a(e,t));return xl(c)});return Ke(s).pipe(Kf(),jO(r))}var rp=class{constructor(e){this.segmentGroup=e||null}},ip=class extends Error{constructor(e){super(),this.urlTree=e}};function Bf(n){return hf(new rp(n))}function VG(n){return hf(new et(4e3,!1))}function BG(n){return hf(VO(!1,Ts.GuardRejected))}var yC=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Ke(r);if(i.numberOfChildren>1||!i.children[Tt])return VG(`${e.redirectTo}`);i=i.children[Tt]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:m,params:g,data:w,title:y}=i,E=ta(s,()=>a({params:g,data:w,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:m,title:y}));if(E instanceof cc)throw new ip(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new ip(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new cc(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new pn(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new et(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},xC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UG(n,e,t,r,i){let s=$O(n,e,t);return s.matched?(r=lG(e,r),LG(r,e,t,i).pipe(je(o=>o===!0?s:fe({},xC)))):Ke(s)}function $O(n,e,t){if(e.path==="**")return jG(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?fe({},xC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Lq)(t,n,e);if(!i)return fe({},xC);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?fe(fe({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function jG(n){return{matched:!0,parameters:n.length>0?wO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function mO(n,e,t,r){return t.length>0&&zG(n,t,r)?{segmentGroup:new pn(e,HG(r,new pn(t,n.children))),slicedSegments:[]}:t.length===0&&WG(n,t,r)?{segmentGroup:new pn(n.segments,$G(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pn(n.segments,n.children),slicedSegments:t}}function $G(n,e,t,r){let i={};for(let s of t)if(J1(n,e,s)&&!r[wo(s)]){let o=new pn([],{});i[wo(s)]=o}return fe(fe({},r),i)}function HG(n,e){let t={};t[Tt]=e;for(let r of n)if(r.path===""&&wo(r)!==Tt){let i=new pn([],{});t[wo(r)]=i}return t}function zG(n,e,t){return t.some(r=>J1(n,e,r)&&wo(r)!==Tt)}function WG(n,e,t){return t.some(r=>J1(n,e,r))}function J1(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function qG(n,e,t){return e.length===0&&!n.children[t]}var wC=class{};function GG(n,e,t,r,i,s,o="emptyOnly"){return new bC(n,e,t,r,i,o,s).recognize()}var KG=31,bC=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new yC(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new et(4002,`'${e.segmentGroup}'`)}recognize(){let e=mO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(je(({children:t,rootSnapshot:r})=>{let i=new Is(r,t),s=new K1("",i),o=nG(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new $f([],Object.freeze({}),Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Tt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Tt,t).pipe(je(r=>({children:r,rootSnapshot:t})),pr(r=>{if(r instanceof ip)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rp?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(je(o=>o instanceof Is?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ot(s).pipe(Cu(o=>{let a=r.children[o],c=uG(t,o);return this.processSegmentGroup(e,c,a,o,i)}),nv((o,a)=>(o.push(...a),o)),tl(null),ib(),hr(o=>{if(o===null)return Bf(r);let a=HO(o);return QG(a),Ke(a)}))}processSegment(e,t,r,i,s,o,a){return Ot(t).pipe(Cu(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(pr(l=>{if(l instanceof rp)return Ke(null);throw l}))),Go(c=>!!c),pr(c=>{if(UO(c))return qG(r,i,s)?Ke(new wC):Bf(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return wo(r)!==o&&(o===Tt||!J1(i,s,r))?Bf(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Bf(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:m}=$O(t,i,s);if(!c)return Bf(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KG&&(this.allowRedirects=!1));let g=new $f(s,l,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,gO(i),wo(i),i.component??i._loadedComponent??null,i,vO(i)),w=G1(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let y=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,g,e);return this.applyRedirects.lineralizeSegments(i,y).pipe(hr(E=>this.processSegment(e,r,t,E.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=UG(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ir(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ir(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:m,remainingSegments:g}=c,w=new $f(m,d,Object.freeze(fe({},this.urlTree.queryParams)),this.urlTree.fragment,gO(r),wo(r),r.component??r._loadedComponent??null,r,vO(r)),y=G1(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(y.params),w.data=Object.freeze(y.data);let{segmentGroup:E,slicedSegments:M}=mO(t,m,g,l);if(M.length===0&&E.hasChildren())return this.processChildren(u,l,E,w).pipe(je(O=>new Is(w,O)));if(l.length===0&&M.length===0)return Ke(new Is(w,[]));let k=wo(r)===s;return this.processSegment(u,l,E,M,k?Tt:s,!0,w).pipe(je(O=>new Is(w,O instanceof Is?[O]:[])))}))):Bf(t)))}getChildConfig(e,t,r){return t.children?Ke({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Ke({routes:t._loadedRoutes,injector:t._loadedInjector}):NG(e,t,r,this.urlSerializer).pipe(hr(i=>i?this.configLoader.loadChildren(e,t).pipe(Yr(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):BG(t))):Ke({routes:[],injector:e})}};function QG(n){n.sort((e,t)=>e.value.outlet===Tt?-1:t.value.outlet===Tt?1:e.value.outlet.localeCompare(t.value.outlet))}function YG(n){let e=n.value.routeConfig;return e&&e.path===""}function HO(n){let e=[],t=new Set;for(let r of n){if(!YG(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=HO(r.children);e.push(new Is(r.value,i))}return e.filter(r=>!t.has(r))}function gO(n){return n.data||{}}function vO(n){return n.resolve||{}}function XG(n,e,t,r,i,s){return hr(o=>GG(n,e,t,r,o.extractedUrl,i,s).pipe(je(({state:a,tree:c})=>Te(fe({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function ZG(n,e){return hr(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ke(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of zO(c))o.add(l);let a=0;return Ot(o).pipe(Cu(c=>s.has(c)?JG(c,r,n,e):(c.data=G1(c,c.parent,n).resolve,Ke(void 0))),Yr(()=>a++),mf(1),hr(c=>a===o.size?Ke(t):vs))})}function zO(n){let e=n.children.map(t=>zO(t)).flat();return[n,...e]}function JG(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!NO(i)&&(s[op]=i.title),eK(s,n,e,r).pipe(je(o=>(n._resolvedData=o,n.data=G1(n,n.parent,t).resolve,null)))}function eK(n,e,t,r){let i=J2(n);if(i.length===0)return Ke({});let s={};return Ot(i).pipe(hr(o=>tK(n[o],e,t,r).pipe(Go(),Yr(a=>{if(a instanceof np)throw Q1(new Wf,a);s[o]=a}))),mf(1),rb(s),pr(o=>UO(o)?vs:hf(o)))}function tK(n,e,t,r){let i=cp(e)??r,s=Yf(n,i),o=s.resolve?s.resolve(e,t):ta(i,()=>s(e,t));return xl(o)}function X2(n){return Ir(e=>{let t=n(e);return t?Ot(t).pipe(je(()=>e)):Ke(e)})}var WO=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Tt);return r}getResolvedTitleForRoute(t){return t.data[op]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(nK),providedIn:"root"})}}return n})(),nK=(()=>{class n extends WO{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(vt(F1))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dp=new Ze("",{providedIn:"root",factory:()=>({})}),rK=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Yt({type:n,selectors:[["ng-component"]],standalone:!0,features:[Jt],decls:1,vars:0,template:function(r,i){r&1&&ae(0,"router-outlet")},dependencies:[SC],encapsulation:2})}}return n})();function IC(n){let e=n.children&&n.children.map(IC),t=e?Te(fe({},n),{children:e}):fe({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Tt&&(t.component=rK),t}var sp=new Ze(""),TC=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=le(_1)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ke(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=xl(t.loadComponent()).pipe(je(qO),Yr(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),E0(()=>{this.componentLoaders.delete(t)})),i=new lf(r,()=>new ni).pipe(cf());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ke({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=iK(r,this.compiler,t,this.onLoadEndListener).pipe(E0(()=>{this.childrenLoaders.delete(r)})),o=new lf(s,()=>new ni).pipe(cf());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iK(n,e,t,r){return xl(n.loadChildren()).pipe(je(qO),hr(i=>i instanceof F0||Array.isArray(i)?Ke(i):Ot(e.compileModuleAsync(i))),je(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(sp,[],{optional:!0,self:!0}).flat()),{routes:o.map(IC),injector:s}}))}function sK(n){return n&&typeof n=="object"&&"default"in n}function qO(n){return sK(n)?n.default:n}var DC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(oK),providedIn:"root"})}}return n})(),oK=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GO=new Ze(""),KO=new Ze("");function aK(n,e,t){let r=n.get(KO),i=n.get(es);return n.get($t).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),cK(n))),{onViewTransitionCreated:c}=r;return c&&ta(n,()=>c({transition:a,from:e,to:t})),o})}function cK(n){return new Promise(e=>{p2({read:()=>setTimeout(e)},{injector:n})})}var lK=new Ze(""),AC=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ni,this.transitionAbortSubject=new ni,this.configLoader=le(TC),this.environmentInjector=le(_s),this.urlSerializer=le(ap),this.rootContexts=le(lp),this.location=le(Vf),this.inputBindingEnabled=le(Z1,{optional:!0})!==null,this.titleStrategy=le(WO),this.options=le(dp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=le(DC),this.createViewTransition=le(GO,{optional:!0}),this.navigationErrorHandler=le(lK,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ke(void 0),this.rootComponentType=null;let t=i=>this.events.next(new aC(i)),r=i=>this.events.next(new cC(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Te(fe(fe({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Qr({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Y0,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(di(s=>s.id!==0),je(s=>Te(fe({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ir(s=>{let o=!1,a=!1;return Ke(s).pipe(Ir(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Ts.SupersededByNewNavigation),vs;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Te(fe({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new yl(c.id,this.urlSerializer.serialize(c.rawUrl),d,$1.IgnoredSameUrlNavigation)),c.resolve(!1),vs}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Ke(c).pipe(Ir(d=>{let m=this.transitions?.getValue();return this.events.next(new qf(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions?.getValue()?vs:Promise.resolve(d)}),XG(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yr(d=>{s.targetSnapshot=d.targetSnapshot,s.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=Te(fe({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let m=new H1(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:m,source:g,restoredState:w,extras:y}=c,E=new qf(d,this.urlSerializer.serialize(m),g,w);this.events.next(E);let M=FO(this.rootComponentType).snapshot;return this.currentTransition=s=Te(fe({},c),{targetSnapshot:M,urlAfterRedirects:m,extras:Te(fe({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,Ke(s)}else{let d="";return this.events.next(new yl(c.id,this.urlSerializer.serialize(c.extractedUrl),d,$1.IgnoredByUrlHandlingStrategy)),c.resolve(!1),vs}}),Yr(c=>{let l=new rC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),je(c=>(this.currentTransition=s=Te(fe({},c),{guards:vG(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),DG(this.environmentInjector,c=>this.events.next(c)),Yr(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Q1(this.urlSerializer,c.guardsResult);let l=new iC(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),di(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Ts.GuardRejected),!1)),X2(c=>{if(c.guards.canActivateChecks.length)return Ke(c).pipe(Yr(l=>{let u=new sC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Ir(l=>{let u=!1;return Ke(l).pipe(ZG(this.paramsInheritanceStrategy,this.environmentInjector),Yr({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Ts.NoDataFromResolver)}}))}),Yr(l=>{let u=new oC(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),X2(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Yr(m=>{u.component=m}),je(()=>{})));for(let m of u.children)d.push(...l(m));return d};return w0(l(c.targetSnapshot.root)).pipe(tl(null),Mr(1))}),X2(()=>this.afterPreactivation()),Ir(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?Ot(u).pipe(je(()=>s)):Ke(s)}),je(c=>{let l=fG(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Te(fe({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Yr(()=>{this.events.next(new ep)}),gG(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Mr(1),Yr({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ds(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),sb(this.transitionAbortSubject.pipe(Yr(c=>{throw c}))),E0(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Ts.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),pr(c=>{if(a=!0,BO(c))this.events.next(new ac(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),mG(c)?this.events.next(new Gf(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new J0(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let u=ta(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof np){let{message:d,cancellationCode:m}=Q1(this.urlSerializer,u);this.events.next(new ac(s.id,this.urlSerializer.serialize(s.extractedUrl),d,m)),this.events.next(new Gf(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);s.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return vs}))}))}cancelNavigationTransition(t,r,i){let s=new ac(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function uK(n){return n!==Y0}var dK=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(fK),providedIn:"root"})}}return n})(),EC=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},fK=(()=>{class n extends EC{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),QO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:()=>le(hK),providedIn:"root"})}}return n})(),hK=(()=>{class n extends QO{constructor(){super(...arguments),this.location=le(Vf),this.urlSerializer=le(ap),this.options=le(dp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=le(DC),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new cc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=FO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof qf)this.stateMemento=this.createStateMemento();else if(t instanceof yl)this.rawUrlTree=r.initialUrl;else if(t instanceof H1){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof ep?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof ac&&(t.code===Ts.GuardRejected||t.code===Ts.NoDataFromResolver)?this.restoreHistory(r):t instanceof J0?this.restoreHistory(r,!0):t instanceof Ds&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof cc?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=fe(fe({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=fe(fe({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),K0=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(K0||{});function YO(n,e){n.events.pipe(di(t=>t instanceof Ds||t instanceof ac||t instanceof J0||t instanceof yl),je(t=>t instanceof Ds||t instanceof yl?K0.COMPLETE:(t instanceof ac?t.code===Ts.Redirect||t.code===Ts.SupersededByNewNavigation:!1)?K0.REDIRECTING:K0.FAILED),di(t=>t!==K0.REDIRECTING),Mr(1)).subscribe(()=>{e()})}function pK(n){throw n}var mK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ht=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=le(m1),this.stateManager=le(QO),this.options=le(dp,{optional:!0})||{},this.pendingTasks=le(Bu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=le(AC),this.urlSerializer=le(ap),this.location=le(Vf),this.urlHandlingStrategy=le(DC),this._events=new ni,this.errorHandler=this.options.errorHandler||pK,this.navigated=!1,this.routeReuseStrategy=le(dK),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=le(sp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!le(Z1,{optional:!0}),this.eventsSubscription=new fr,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ac&&r.code!==Ts.Redirect&&r.code!==Ts.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ds)this.navigated=!0;else if(r instanceof Gf){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=fe({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||uK(i.source)},o);this.scheduleNavigation(a,Y0,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}_K(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Y0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=fe({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(IC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=fe(fe({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let m=i?i.snapshot:this.routerState.snapshot.root;d=kO(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return MO(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Y0,null,r)}navigate(t,r={skipLocationChange:!1}){return vK(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=fe({},mK):r===!1?i=fe({},gK):i=r,qu(t))return uO(this.currentUrlTree,t,i);let s=this.parseUrl(t);return uO(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((d,m)=>{a=d,c=m});let u=this.pendingTasks.add();return YO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function vK(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new et(4008,!1)}function _K(n){return!(n instanceof ep)&&!(n instanceof Gf)}var Qf=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new ni,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Ds&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(qu(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:xP(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,s=this.el.nativeElement;r!==null?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:qu(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ht),Qe(ts),HE("tabindex"),Qe(zs),Qe(Ii),Qe(oc))}}static{this.\u0275dir=fn({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&J("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),r&2&&ia("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Hu],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Hu],replaceUrl:[2,"replaceUrl","replaceUrl",Hu],routerLink:"routerLink"},standalone:!0,features:[f2,go]})}}return n})(),XO=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Gn,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof Ds&&this.update()})}ngAfterContentInit(){Ke(this.links.changes,Ke(null)).pipe(el()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ot(t).pipe(el()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=yK(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let s=i.urlTree;return s?t.isActive(s,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ht),Qe(Ii),Qe(zs),Qe(Ji),Qe(Qf,8))}}static{this.\u0275dir=fn({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,s){if(r&1&&xF(s,Qf,5),r&2){let o;ws(o=bs())&&(i.links=o)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[go]})}}return n})();function yK(n){return!!n.paths}var X1=class{};var xK=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(di(t=>t instanceof Ds),Cu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=h1(s.providers,t,`Route: ${s.path}`));let o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ot(i).pipe(el())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=Ke(null);let s=i.pipe(hr(o=>o===null?Ke(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(r);return Ot([s,o]).pipe(el())}else return s})}static{this.\u0275fac=function(r){return new(r||n)(vt(Ht),vt(_1),vt(_s),vt(X1),vt(TC))}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ZO=new Ze(""),wK=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof qf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ds?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof yl&&t.code===$1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof z1&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new z1(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){PP()}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac})}}return n})();function JO(n,...e){return $s([{provide:sp,multi:!0,useValue:n},[],{provide:ts,useFactory:e4,deps:[Ht]},{provide:v1,multi:!0,useFactory:t4},e.map(t=>t.\u0275providers)])}function e4(n){return n.routerState.root}function fp(n,e){return{\u0275kind:n,\u0275providers:e}}function t4(){let n=le(Rr);return e=>{let t=n.get($u);if(e!==t.components[0])return;let r=n.get(Ht),i=n.get(n4);n.get(kC)===1&&r.initialNavigation(),n.get(r4,null,Rt.Optional)?.setUpPreloading(),n.get(ZO,null,Rt.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var n4=new Ze("",{factory:()=>new ni}),kC=new Ze("",{providedIn:"root",factory:()=>1});function bK(){return fp(2,[{provide:kC,useValue:0},{provide:g1,multi:!0,deps:[Rr],useFactory:e=>{let t=e.get(WF,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ht),s=e.get(n4);YO(i,()=>{r(!0)}),e.get(AC).afterPreactivation=()=>(r(!0),s.closed?Ke(void 0):s),i.initialNavigation()}))}}])}function EK(){return fp(3,[{provide:g1,multi:!0,useFactory:()=>{let e=le(Ht);return()=>{e.setUpLocationChangeListener()}}},{provide:kC,useValue:2}])}var r4=new Ze("");function CK(n){return fp(0,[{provide:r4,useExisting:xK},{provide:X1,useExisting:n}])}function SK(){return fp(8,[pO,{provide:Z1,useExisting:pO}])}function IK(n){let e=[{provide:GO,useValue:aK},{provide:KO,useValue:fe({skipNextTransition:!!n?.skipInitialTransition},n)}];return fp(9,e)}var _O=new Ze("ROUTER_FORROOT_GUARD"),TK=[Vf,{provide:ap,useClass:Wf},Ht,lp,{provide:ts,useFactory:e4,deps:[Ht]},TC,[]],wl=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[TK,[],{provide:sp,multi:!0,useValue:t},{provide:_O,useFactory:MK,deps:[[Ht,new gr,new zv]]},{provide:dp,useValue:r||{}},r?.useHash?AK():kK(),DK(),r?.preloadingStrategy?CK(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?RK(r):[],r?.bindToComponentInputs?SK().\u0275providers:[],r?.enableViewTransitions?IK().\u0275providers:[],PK()]}}static forChild(t){return{ngModule:n,providers:[{provide:sp,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(vt(_O,8))}}static{this.\u0275mod=Ka({type:n})}static{this.\u0275inj=Ga({})}}return n})();function DK(){return{provide:ZO,useFactory:()=>{let n=le(tO),e=le($t),t=le(dp),r=le(AC),i=le(ap);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wK(i,r,n,e,t)}}}function AK(){return{provide:oc,useClass:GF}}function kK(){return{provide:oc,useClass:L2}}function MK(n){return"guarded"}function RK(n){return[n.initialNavigation==="disabled"?EK().\u0275providers:[],n.initialNavigation==="enabledBlocking"?bK().\u0275providers:[]]}var yO=new Ze("");function PK(){return[{provide:yO,useFactory:t4},{provide:v1,multi:!0,useExisting:yO}]}var o4=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},FK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},a4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,c=i+2<n.length,l=c?n[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(m=64)),r.push(t[u],t[d],t[m],t[g])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(o4(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||d==null)throw new RC;let m=s<<2|a>>4;if(r.push(m),l!==64){let g=a<<4&240|l>>2;if(r.push(g),d!==64){let w=l<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},RC=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},OK=function(n){let e=o4(n);return a4.encodeByteArray(e,!0)},hp=function(n){return OK(n).replace(/\./g,"")},FC=function(n){try{return a4.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NK(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var LK=()=>NK().__FIREBASE_DEFAULTS__,VK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},BK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&FC(n[1]);return e&&JSON.parse(e)},t_=()=>{try{return LK()||VK()||BK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OC=n=>{var e,t;return(t=(e=t_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},n_=n=>{let e=OC(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},NC=()=>{var n;return(n=t_())===null||n===void 0?void 0:n.config},LC=n=>{var e;return(e=t_())===null||e===void 0?void 0:e[`_${n}`]};var e_=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function c4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[hp(JSON.stringify(t)),hp(JSON.stringify(o)),""].join(".")}function si(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function l4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(si())}function UK(){var n;let e=(n=t_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function u4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d4(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function f4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h4(){let n=si();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function p4(){return!UK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VC(){try{return typeof indexedDB=="object"}catch{return!1}}function m4(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var jK="FirebaseError",ns=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}},lc=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$K(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ns(i,a,r)}};function $K(n,e){return n.replace(HK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var HK=/\{\$([^}]+)}/g;function g4(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Gu(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(s4(s)&&s4(o)){if(!Gu(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function s4(n){return n!==null&&typeof n=="object"}function pp(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Xf(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Zf(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function v4(n,e){let t=new PC(n,e);return t.subscribe.bind(t)}var PC=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=MC),i.error===void 0&&(i.error=MC),i.complete===void 0&&(i.complete=MC);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function zK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function MC(){}var OCe=4*60*60*1e3;function nr(n){return n&&n._delegate?n._delegate:n}var rs=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ku="[DEFAULT]";var BC=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new e_;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qK(e))try{this.getOrInitializeService({instanceIdentifier:Ku})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ku){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return W(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ku){return this.instances.has(e)}getOptions(e=Ku){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WK(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ku){return this.component?this.component.multipleInstances?e:Ku:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WK(n){return n===Ku?void 0:n}function qK(n){return n.instantiationMode==="EAGER"}var r_=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new BC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var GK=[],zt=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(zt||{}),KK={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},QK=zt.INFO,YK={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},XK=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=YK[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},bl=class{constructor(e){this.name=e,this._logLevel=QK,this._logHandler=XK,this._userLogHandler=null,GK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...e),this._logHandler(this,zt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...e),this._logHandler(this,zt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,zt.INFO,...e),this._logHandler(this,zt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,zt.WARN,...e),this._logHandler(this,zt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...e),this._logHandler(this,zt.ERROR,...e)}};var ZK=(n,e)=>e.some(t=>n instanceof t),_4,y4;function JK(){return _4||(_4=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eQ(){return y4||(y4=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var x4=new WeakMap,jC=new WeakMap,w4=new WeakMap,UC=new WeakMap,HC=new WeakMap;function tQ(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(aa(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&x4.set(t,n)}).catch(()=>{}),HC.set(e,n),e}function nQ(n){if(jC.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});jC.set(n,e)}var $C={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jC.get(n);if(e==="objectStoreNames")return n.objectStoreNames||w4.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return aa(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function b4(n){$C=n($C)}function rQ(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(i_(this),e,...t);return w4.set(r,e.sort?e.sort():[e]),aa(r)}:eQ().includes(n)?function(...e){return n.apply(i_(this),e),aa(x4.get(this))}:function(...e){return aa(n.apply(i_(this),e))}}function iQ(n){return typeof n=="function"?rQ(n):(n instanceof IDBTransaction&&nQ(n),ZK(n,JK())?new Proxy(n,$C):n)}function aa(n){if(n instanceof IDBRequest)return tQ(n);if(UC.has(n))return UC.get(n);let e=iQ(n);return e!==n&&(UC.set(n,e),HC.set(e,n)),e}var i_=n=>HC.get(n);function C4(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=aa(o);return r&&o.addEventListener("upgradeneeded",c=>{r(aa(o.result),c.oldVersion,c.newVersion,aa(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var sQ=["get","getKey","getAll","getAllKeys","count"],oQ=["put","add","delete","clear"],zC=new Map;function E4(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(zC.get(e))return zC.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=oQ.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sQ.includes(t)))return;let s=function(o,...a){return W(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),i&&c.done]))[0]})};return zC.set(e,s),s}b4(n=>Te(fe({},n),{get:(e,t,r)=>E4(e,t)||n.get(e,t,r),has:(e,t)=>!!E4(e,t)||n.has(e,t)}));var qC=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aQ(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function aQ(n){let e=n.getComponent();return e?.type==="VERSION"}var GC="@firebase/app",S4="0.10.13";var uc=new bl("@firebase/app"),cQ="@firebase/app-compat",lQ="@firebase/analytics-compat",uQ="@firebase/analytics",dQ="@firebase/app-check-compat",fQ="@firebase/app-check",hQ="@firebase/auth",pQ="@firebase/auth-compat",mQ="@firebase/database",gQ="@firebase/data-connect",vQ="@firebase/database-compat",_Q="@firebase/functions",yQ="@firebase/functions-compat",xQ="@firebase/installations",wQ="@firebase/installations-compat",bQ="@firebase/messaging",EQ="@firebase/messaging-compat",CQ="@firebase/performance",SQ="@firebase/performance-compat",IQ="@firebase/remote-config",TQ="@firebase/remote-config-compat",DQ="@firebase/storage",AQ="@firebase/storage-compat",kQ="@firebase/firestore",MQ="@firebase/vertexai-preview",RQ="@firebase/firestore-compat",PQ="firebase",FQ="10.14.1";var KC="[DEFAULT]",OQ={[GC]:"fire-core",[cQ]:"fire-core-compat",[uQ]:"fire-analytics",[lQ]:"fire-analytics-compat",[fQ]:"fire-app-check",[dQ]:"fire-app-check-compat",[hQ]:"fire-auth",[pQ]:"fire-auth-compat",[mQ]:"fire-rtdb",[gQ]:"fire-data-connect",[vQ]:"fire-rtdb-compat",[_Q]:"fire-fn",[yQ]:"fire-fn-compat",[xQ]:"fire-iid",[wQ]:"fire-iid-compat",[bQ]:"fire-fcm",[EQ]:"fire-fcm-compat",[CQ]:"fire-perf",[SQ]:"fire-perf-compat",[IQ]:"fire-rc",[TQ]:"fire-rc-compat",[DQ]:"fire-gcs",[AQ]:"fire-gcs-compat",[kQ]:"fire-fst",[RQ]:"fire-fst-compat",[MQ]:"fire-vertex","fire-js":"fire-js",[PQ]:"fire-js-all"};var mp=new Map,NQ=new Map,QC=new Map;function I4(n,e){try{n.container.addComponent(e)}catch(t){uc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ca(n){let e=n.name;if(QC.has(e))return uc.debug(`There were multiple attempts to register component ${e}.`),!1;QC.set(e,n);for(let t of mp.values())I4(t,n);for(let t of NQ.values())I4(t,n);return!0}function Qu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bo(n){return n.settings!==void 0}var LQ={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},El=new lc("app","Firebase",LQ);var YC=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw El.create("app-deleted",{appName:this._name})}};var Cl=FQ;function JC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:KC,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw El.create("bad-app-name",{appName:String(i)});if(t||(t=NC()),!t)throw El.create("no-options");let s=mp.get(i);if(s){if(Gu(t,s.options)&&Gu(r,s.config))return s;throw El.create("duplicate-app",{appName:i})}let o=new r_(i);for(let c of QC.values())o.addComponent(c);let a=new YC(t,r,o);return mp.set(i,a),a}function Sl(n=KC){let e=mp.get(n);if(!e&&n===KC&&NC())return JC();if(!e)throw El.create("no-app",{appName:n});return e}function s_(){return Array.from(mp.values())}function rr(n,e,t){var r;let i=(r=OQ[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),uc.warn(a.join(" "));return}ca(new rs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var VQ="firebase-heartbeat-database",BQ=1,gp="firebase-heartbeat-store",WC=null;function k4(){return WC||(WC=C4(VQ,BQ,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(gp)}catch(t){console.warn(t)}}}}).catch(n=>{throw El.create("idb-open",{originalErrorMessage:n.message})})),WC}function UQ(n){return W(this,null,function*(){try{let t=(yield k4()).transaction(gp),r=yield t.objectStore(gp).get(M4(n));return yield t.done,r}catch(e){if(e instanceof ns)uc.warn(e.message);else{let t=El.create("idb-get",{originalErrorMessage:e?.message});uc.warn(t.message)}}})}function T4(n,e){return W(this,null,function*(){try{let r=(yield k4()).transaction(gp,"readwrite");yield r.objectStore(gp).put(e,M4(n)),yield r.done}catch(t){if(t instanceof ns)uc.warn(t.message);else{let r=El.create("idb-set",{originalErrorMessage:t?.message});uc.warn(r.message)}}})}function M4(n){return`${n.name}!${n.options.appId}`}var jQ=1024,$Q=30*24*60*60*1e3,XC=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ZC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return W(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=D4();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=$Q}),this._storage.overwrite(this._heartbeatsCache))}catch(r){uc.warn(r)}})}getHeartbeatsHeader(){return W(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=D4(),{heartbeatsToSend:r,unsentEntries:i}=HQ(this._heartbeatsCache.heartbeats),s=hp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return uc.warn(t),""}})}};function D4(){return new Date().toISOString().substring(0,10)}function HQ(n,e=jQ){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),A4(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),A4(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var ZC=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return W(this,null,function*(){return VC()?m4().then(()=>!0).catch(()=>!1):!1})}read(){return W(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield UQ(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return W(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return T4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return W(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return T4(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function A4(n){return hp(JSON.stringify({version:2,heartbeats:n})).length}function zQ(n){ca(new rs("platform-logger",e=>new qC(e),"PRIVATE")),ca(new rs("heartbeat",e=>new XC(e),"PRIVATE")),rr(GC,S4,n),rr(GC,S4,"esm2017"),rr("fire-js","")}zQ("");var WQ="firebase",qQ="10.14.1";rr(WQ,qQ,"app");var dc=new qa("ANGULARFIRE2_VERSION");function eh(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Xu=(n,e)=>{let t=e?[e]:s_(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Il=class{constructor(){return Xu(GQ)}},GQ="app-check";function Jf(){}var o_=class{zone;delegate;constructor(e,t=Jw){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},eS=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jf,{},Jf,Jf)),t.pipe(Yr({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Tl=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new o_(Zone.current)),this.insideAngular=t.run(()=>new o_(Zone.current,Zw)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(vt($t))};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function a_(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function KQ(n){return a_().ngZone.runOutsideAngular(()=>n())}function Yu(n){return a_().ngZone.run(()=>n())}function QQ(n){return YQ(a_())(n)}function YQ(n){return function(t){return t=t.lift(new eS(n.ngZone)),t.pipe(Jc(n.outsideAngular),Zc(n.insideAngular))}}var XQ=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Yu(()=>n.apply(void 0,r))},Pn=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Yu(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Jf,{},Jf,Jf))),r[s]=XQ(r[s],t));let i=KQ(()=>n.apply(this,r));if(!e)if(i instanceof kt){let s=a_();return i.pipe(Jc(s.outsideAngular),Zc(s.insideAngular))}else return Yu(()=>i);return i instanceof kt?i.pipe(QQ):i instanceof Promise?Yu(()=>new Promise((s,o)=>i.then(a=>Yu(()=>s(a)),a=>Yu(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Yu(()=>i)};var Eo=class{constructor(e){return e}},fc=class{constructor(){return s_()}};function ZQ(n){return n&&n.length===1?n[0]:new Eo(Sl())}var tS=new Ze("angularfire2._apps"),JQ={provide:Eo,useFactory:ZQ,deps:[[new gr,tS]]},eY={provide:fc,deps:[[new gr,tS]]};function tY(n){return(e,t)=>{let r=t.get(na);rr("angularfire",dc.full,"core"),rr("angularfire",dc.full,"app"),rr("angular",DF.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Eo(i)}}function R4(n,...e){return $s([JQ,eY,{provide:tS,useFactory:tY(n),multi:!0,deps:[$t,Rr,Tl,...e]}])}var P4=Pn(JC,!0);function Y4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var X4=Y4,Z4=new lc("auth","Firebase",Y4());var h_=new bl("@firebase/auth");function nY(n,...e){h_.logLevel<=zt.WARN&&h_.warn(`Auth (${Cl}): ${n}`,...e)}function l_(n,...e){h_.logLevel<=zt.ERROR&&h_.error(`Auth (${Cl}): ${n}`,...e)}function ua(n,...e){throw CS(n,...e)}function Zu(n,...e){return CS(n,...e)}function J4(n,e,t){let r=Object.assign(Object.assign({},X4()),{[e]:t});return new lc("auth","Firebase",r).create(e,{appName:n.name})}function mc(n){return J4(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CS(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Z4.create(n,...e)}function ht(n,e,...t){if(!n)throw CS(e,...t)}function hc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw l_(e),new Error(e)}function Al(n,e){n||hc(e)}function sS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function rY(){return F4()==="http:"||F4()==="https:"}function F4(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function iY(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rY()||d4()||"connection"in navigator)?navigator.onLine:!0}function sY(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ju=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Al(t>e,"Short delay should be less than long delay!"),this.isMobile=l4()||f4()}get(){return iY()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function SS(n,e){Al(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var p_=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var oY={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aY=new Ju(3e4,6e4);function kl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ml(s,o,a,c){return W(this,arguments,function*(n,e,t,r,i={}){return eN(n,i,()=>W(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let d=pp(Object.assign({key:n.config.apiKey},u)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let g=Object.assign({method:e,headers:m},l);return u4()||(g.referrerPolicy="no-referrer"),p_.fetch()(tN(n,n.config.apiHost,t,d),g)}))})}function eN(n,e,t){return W(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},oY),e);try{let i=new oS(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw c_(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw c_(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw c_(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw c_(n,"user-disabled",o);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw J4(n,u,l);ua(n,u)}}catch(i){if(i instanceof ns)throw i;ua(n,"network-request-failed",{message:String(i)})}})}function Cp(s,o,a,c){return W(this,arguments,function*(n,e,t,r,i={}){let l=yield Ml(n,e,t,r,i);return"mfaPendingCredential"in l&&ua(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function tN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?SS(n.config,i):`${n.config.apiScheme}://${i}`}function cY(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var oS=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zu(this.auth,"network-request-failed")),aY.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function c_(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zu(n,e,r);return i.customData._tokenResponse=t,i}function O4(n){return n!==void 0&&n.enterprise!==void 0}var aS=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cY(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function lY(n,e){return W(this,null,function*(){return Ml(n,"GET","/v2/recaptchaConfig",kl(n,e))})}function uY(n,e){return W(this,null,function*(){return Ml(n,"POST","/v1/accounts:delete",e)})}function nN(n,e){return W(this,null,function*(){return Ml(n,"POST","/v1/accounts:lookup",e)})}function vp(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function IS(n,e=!1){return W(this,null,function*(){let t=nr(n),r=yield t.getIdToken(e),i=TS(r);ht(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:vp(nS(i.auth_time)),issuedAtTime:vp(nS(i.iat)),expirationTime:vp(nS(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function nS(n){return Number(n)*1e3}function TS(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return l_("JWT malformed, contained fewer than 3 sections"),null;try{let i=FC(t);return i?JSON.parse(i):(l_("Failed to decode base64 JWT payload"),null)}catch(i){return l_("Caught error parsing JWT payload as JSON",i?.toString()),null}}function N4(n){let e=TS(n);return ht(e,"internal-error"),ht(typeof e.exp<"u","internal-error"),ht(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function yp(n,e,t=!1){return W(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof ns&&dY(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function dY({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var cS=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>W(this,null,function*(){yield this.iteration()}),t)}iteration(){return W(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var xp=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vp(this.lastLoginAt),this.creationTime=vp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function m_(n){return W(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield yp(n,nN(t,{idToken:r}));ht(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?rN(s.providerUserInfo):[],a=fY(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,u=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new xp(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)})}function DS(n){return W(this,null,function*(){let e=nr(n);yield m_(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function fY(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function rN(n){return n.map(e=>{var{providerId:t}=e,r=eb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hY(n,e){return W(this,null,function*(){let t=yield eN(n,{},()=>W(this,null,function*(){let r=pp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=tN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",p_.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function pY(n,e){return W(this,null,function*(){return Ml(n,"POST","/v2/accounts:revokeToken",kl(n,e))})}var _p=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ht(e.idToken,"internal-error"),ht(typeof e.idToken<"u","internal-error"),ht(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N4(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ht(e.length!==0,"internal-error");let t=N4(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return W(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ht(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return W(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield hY(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ht(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ht(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ht(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return hc("not implemented")}};function Dl(n,e){ht(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var th=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=eb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xp(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return W(this,null,function*(){let t=yield yp(this,this.stsTokenManager.getToken(this.auth,e));return ht(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return IS(this,e)}reload(){return DS(this)}_assign(e){this!==e&&(ht(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ht(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return W(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield m_(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return W(this,null,function*(){if(bo(this.auth.app))return Promise.reject(mc(this.auth));let e=yield this.getIdToken();return yield yp(this,uY(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,u;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,y=(a=t.tenantId)!==null&&a!==void 0?a:void 0,E=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,M=(l=t.createdAt)!==null&&l!==void 0?l:void 0,k=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:O,emailVerified:K,isAnonymous:Q,providerData:te,stsTokenManager:D}=t;ht(O&&D,e,"internal-error");let T=_p.fromJSON(this.name,D);ht(typeof O=="string",e,"internal-error"),Dl(d,e.name),Dl(m,e.name),ht(typeof K=="boolean",e,"internal-error"),ht(typeof Q=="boolean",e,"internal-error"),Dl(g,e.name),Dl(w,e.name),Dl(y,e.name),Dl(E,e.name),Dl(M,e.name),Dl(k,e.name);let A=new n({uid:O,auth:e,email:m,emailVerified:K,displayName:d,isAnonymous:Q,photoURL:w,phoneNumber:g,tenantId:y,stsTokenManager:T,createdAt:M,lastLoginAt:k});return te&&Array.isArray(te)&&(A.providerData=te.map(F=>Object.assign({},F))),E&&(A._redirectEventId=E),A}static _fromIdTokenResponse(e,t,r=!1){return W(this,null,function*(){let i=new _p;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield m_(s),s})}static _fromGetAccountInfoResponse(e,t,r){return W(this,null,function*(){let i=t.users[0];ht(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?rN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new _p;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new xp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var L4=new Map;function pc(n){Al(n instanceof Function,"Expected a class definition");let e=L4.get(n);return e?(Al(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,L4.set(n,e),e)}var mY=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return W(this,null,function*(){return!0})}_set(t,r){return W(this,null,function*(){this.storage[t]=r})}_get(t){return W(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return W(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),lS=mY;function u_(n,e,t){return`firebase:${n}:${e}:${t}`}var g_=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=u_(this.userKey,i.apiKey,s),this.fullPersistenceKey=u_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return W(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?th._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return W(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return W(this,null,function*(){if(!t.length)return new n(pc(lS),e,r);let i=(yield Promise.all(t.map(l=>W(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||pc(lS),o=u_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(o);if(u){let d=th._fromJSON(e,u);l!==s&&(a=d),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>W(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function V4(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lN(e))return"Blackberry";if(uN(e))return"Webos";if(sN(e))return"Safari";if((e.includes("chrome/")||oN(e))&&!e.includes("edge/"))return"Chrome";if(cN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function iN(n=si()){return/firefox\//i.test(n)}function sN(n=si()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oN(n=si()){return/crios\//i.test(n)}function aN(n=si()){return/iemobile/i.test(n)}function cN(n=si()){return/android/i.test(n)}function lN(n=si()){return/blackberry/i.test(n)}function uN(n=si()){return/webos/i.test(n)}function AS(n=si()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gY(n=si()){var e;return AS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function vY(){return h4()&&document.documentMode===10}function dN(n=si()){return AS(n)||cN(n)||uN(n)||lN(n)||/windows phone/i.test(n)||aN(n)}function fN(n,e=[]){let t;switch(n){case"Browser":t=V4(si());break;case"Worker":t=`${V4(si())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Cl}/${r}`}var uS=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return W(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _Y(t){return W(this,arguments,function*(n,e={}){return Ml(n,"GET","/v2/passwordPolicy",kl(n,e))})}var yY=6,dS=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:yY,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var fS=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v_(this),this.idTokenSubscription=new v_(this),this.beforeStateQueue=new uS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pc(t)),this._initializationPromise=this.queue(()=>W(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield g_.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return W(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return W(this,null,function*(){try{let t=yield nN(this,{idToken:e}),r=yield th._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return W(this,null,function*(){var t;if(bo(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ht(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return W(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return W(this,null,function*(){try{yield m_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=sY()}_delete(){return W(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return W(this,null,function*(){if(bo(this.app))return Promise.reject(mc(this));let t=e?nr(e):null;return t&&ht(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return W(this,null,function*(){if(!this._deleted)return e&&ht(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>W(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return W(this,null,function*(){return bo(this.app)?Promise.reject(mc(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bo(this.app)?Promise.reject(mc(this)):this.queue(()=>W(this,null,function*(){yield this.assertedPersistence.setPersistence(pc(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return W(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return W(this,null,function*(){let e=yield _Y(this),t=new dS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new lc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return W(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield pY(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return W(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return W(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&pc(e)||this._popupRedirectResolver;ht(t,this,"argument-error"),this.redirectPersistenceManager=yield g_.create(this,[pc(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return W(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>W(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return W(this,null,function*(){if(e===this.currentUser)return this.queue(()=>W(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ht(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return W(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ht(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return W(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return W(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&nY(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function td(n){return nr(n)}var v_=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=v4(t=>this.observer=t)}get next(){return ht(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var C_={loadJS(){return W(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xY(n){C_=n}function hN(n){return C_.loadJS(n)}function wY(){return C_.recaptchaEnterpriseScript}function bY(){return C_.gapiScript}function pN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var EY="recaptcha-enterprise",CY="NO_RECAPTCHA",hS=class{constructor(e){this.type=EY,this.auth=td(e)}verify(e="verify",t=!1){return W(this,null,function*(){function r(s){return W(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>W(this,null,function*(){lY(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new aS(c);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(c=>{a(c)})}))})}function i(s,o,a){let c=window.grecaptcha;O4(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(CY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&O4(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wY();c.length!==0&&(c+=a),hN(c).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function B4(n,e,t,r=!1){return W(this,null,function*(){let i=new hS(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function pS(n,e,t,r){return W(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield B4(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>W(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield B4(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(s)}))})}function kS(n,e){let t=Qu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Gu(s,e??{}))return i;ua(i,"already-initialized")}return t.initialize({options:e})}function SY(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(pc);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function MS(n,e,t){let r=td(n);ht(r._canInitEmulator,r,"emulator-config-failed"),ht(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=mN(e),{host:o,port:a}=IY(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||TY()}function mN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function IY(n){let e=mN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:U4(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:U4(o)}}}function U4(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function TY(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return hc("not implemented")}_getIdTokenResponse(e){return hc("not implemented")}_linkToIdToken(e,t){return hc("not implemented")}_getReauthenticationResolver(e){return hc("not implemented")}};function DY(n,e){return W(this,null,function*(){return Ml(n,"POST","/v1/accounts:signUp",e)})}function AY(n,e){return W(this,null,function*(){return Cp(n,"POST","/v1/accounts:signInWithPassword",kl(n,e))})}function kY(n,e){return W(this,null,function*(){return Cp(n,"POST","/v1/accounts:signInWithEmailLink",kl(n,e))})}function MY(n,e){return W(this,null,function*(){return Cp(n,"POST","/v1/accounts:signInWithEmailLink",kl(n,e))})}var bp=class n extends wp{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return W(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pS(e,t,"signInWithPassword",AY);case"emailLink":return kY(e,{email:this._email,oobCode:this._password});default:ua(e,"internal-error")}})}_linkToIdToken(e,t){return W(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pS(e,r,"signUpPassword",DY);case"emailLink":return MY(e,{idToken:t,email:this._email,oobCode:this._password});default:ua(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function rS(n,e){return W(this,null,function*(){return Cp(n,"POST","/v1/accounts:signInWithIdp",kl(n,e))})}function RY(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PY(n){let e=Xf(Zf(n)).link,t=e?Xf(Zf(e)).deep_link_id:null,r=Xf(Zf(n)).deep_link_id;return(r?Xf(Zf(r)).link:null)||r||t||e||n}var __=class n{constructor(e){var t,r,i,s,o,a;let c=Xf(Zf(e)),l=(t=c.apiKey)!==null&&t!==void 0?t:null,u=(r=c.oobCode)!==null&&r!==void 0?r:null,d=RY((i=c.mode)!==null&&i!==void 0?i:null);ht(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=PY(e);try{return new n(t)}catch{return null}}};var gN=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return bp._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=__.parseLink(r);return ht(i,"argument-error"),bp._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),y_=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var mS=class extends y_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function FY(n,e){return W(this,null,function*(){return Cp(n,"POST","/v1/accounts:signUp",kl(n,e))})}var nh=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return W(this,null,function*(){let s=yield th._fromIdTokenResponse(e,r,i),o=j4(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return W(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=j4(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function j4(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var gS=class n extends ns{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function vN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?gS._fromErrorAndOperation(n,s,e,r):s})}function OY(n,e,t=!1){return W(this,null,function*(){let r=yield yp(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return nh._forOperation(n,"link",r)})}function NY(n,e,t=!1){return W(this,null,function*(){let{auth:r}=n;if(bo(r.app))return Promise.reject(mc(r));let i="reauthenticate";try{let s=yield yp(n,vN(r,i,e,n),t);ht(s.idToken,r,"internal-error");let o=TS(s.idToken);ht(o,r,"internal-error");let{sub:a}=o;return ht(n.uid===a,r,"user-mismatch"),nh._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ua(r,"user-mismatch"),s}})}function _N(n,e,t=!1){return W(this,null,function*(){if(bo(n.app))return Promise.reject(mc(n));let r="signIn",i=yield vN(n,r,e),s=yield nh._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function RS(n,e){return W(this,null,function*(){return _N(td(n),e)})}function yN(n){return W(this,null,function*(){let e=td(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function PS(n,e,t){return W(this,null,function*(){if(bo(n.app))return Promise.reject(mc(n));let r=td(n),o=yield pS(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FY).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&yN(n),c}),a=yield nh._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function FS(n,e,t){return bo(n.app)?Promise.reject(mc(n)):RS(nr(n),gN.credential(e,t)).catch(r=>W(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&yN(n),r}))}function S_(n,e,t,r){return nr(n).onIdTokenChanged(e,t,r)}function OS(n,e,t){return nr(n).beforeAuthStateChanged(e,t)}function I_(n,e,t,r){return nr(n).onAuthStateChanged(e,t,r)}function NS(n){return nr(n).signOut()}var x_="__sak";var w_=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(x_,"1"),this.storage.removeItem(x_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var LY=1e3,VY=10,BY=(()=>{class n extends w_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);vY()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,VY):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},LY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return W(this,null,function*(){yield Qc(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return W(this,null,function*(){let r=yield Qc(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return W(this,null,function*(){yield Qc(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),xN=BY;var UY=(()=>{class n extends w_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),LS=UY;function jY(n){return Promise.all(n.map(e=>W(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var $Y=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return W(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(u=>W(this,null,function*(){return u(r.origin,o)})),l=yield jY(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var vS=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return W(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=wN("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let m=d;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(u),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function la(){return window}function HY(n){la().location.href=n}function bN(){return typeof la().WorkerGlobalScope<"u"&&typeof la().importScripts=="function"}function zY(){return W(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function WY(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function qY(){return bN()?self:null}var EN="firebaseLocalStorageDb",GY=1,b_="firebaseLocalStorage",CN="fbase_key",ed=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function T_(n,e){return n.transaction([b_],e?"readwrite":"readonly").objectStore(b_)}function KY(){let n=indexedDB.deleteDatabase(EN);return new ed(n).toPromise()}function _S(){let n=indexedDB.open(EN,GY);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(b_,{keyPath:CN})}catch(i){t(i)}}),n.addEventListener("success",()=>W(this,null,function*(){let r=n.result;r.objectStoreNames.contains(b_)?e(r):(r.close(),yield KY(),e(yield _S()))}))})}function $4(n,e,t){return W(this,null,function*(){let r=T_(n,!0).put({[CN]:e,value:t});return new ed(r).toPromise()})}function QY(n,e){return W(this,null,function*(){let t=T_(n,!1).get(e),r=yield new ed(t).toPromise();return r===void 0?null:r.value})}function H4(n,e){let t=T_(n,!0).delete(e);return new ed(t).toPromise()}var YY=800,XY=3,ZY=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return W(this,null,function*(){return this.db?this.db:(this.db=yield _S(),this.db)})}_withRetries(t){return W(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>XY)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return W(this,null,function*(){return bN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return W(this,null,function*(){this.receiver=$Y._getInstance(qY()),this.receiver._subscribe("keyChanged",(t,r)=>W(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>W(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return W(this,null,function*(){var t,r;if(this.activeServiceWorker=yield zY(),!this.activeServiceWorker)return;this.sender=new vS(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return W(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||WY()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return W(this,null,function*(){try{if(!indexedDB)return!1;let t=yield _S();return yield $4(t,x_,"1"),yield H4(t,x_),!0}catch{}return!1})}_withPendingWrite(t){return W(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return W(this,null,function*(){return this._withPendingWrite(()=>W(this,null,function*(){return yield this._withRetries(i=>$4(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return W(this,null,function*(){let r=yield this._withRetries(i=>QY(i,t));return this.localCache[t]=r,r})}_remove(t){return W(this,null,function*(){return this._withPendingWrite(()=>W(this,null,function*(){return yield this._withRetries(r=>H4(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return W(this,null,function*(){let t=yield this._withRetries(s=>{let o=T_(s,!1).getAll();return new ed(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>W(this,null,function*(){return this._poll()}),YY)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SN=ZY;var DSe=pN("rcb"),ASe=new Ju(3e4,6e4);function JY(n,e){return e?pc(e):(ht(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ep=class extends wp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rS(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function eX(n){return _N(n.auth,new Ep(n),n.bypassAuthState)}function tX(n){let{auth:e,user:t}=n;return ht(t,e,"internal-error"),NY(t,new Ep(n),n.bypassAuthState)}function nX(n){return W(this,null,function*(){let{auth:e,user:t}=n;return ht(t,e,"internal-error"),OY(t,new Ep(n),n.bypassAuthState)})}var yS=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>W(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return W(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eX;case"linkViaPopup":case"linkViaRedirect":return nX;case"reauthViaPopup":case"reauthViaRedirect":return tX;default:ua(this.auth,"internal-error")}}resolve(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Al(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kSe=new Ju(2e3,1e4);var rX="pendingRedirect",d_=new Map,xS=class n extends yS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return W(this,null,function*(){let e=d_.get(this.auth._key());if(!e){try{let r=(yield iX(this.resolver,this.auth))?yield Qc(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}d_.set(this.auth._key(),e)}return this.bypassAuthState||d_.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return W(this,null,function*(){if(e.type==="signInViaRedirect")return Qc(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Qc(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return W(this,null,function*(){})}cleanUp(){}};function iX(n,e){return W(this,null,function*(){let t=aX(e),r=oX(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function sX(n,e){d_.set(n._key(),e)}function oX(n){return pc(n._redirectPersistence)}function aX(n){return u_(rX,n.config.apiKey,n.name)}function cX(n,e,t=!1){return W(this,null,function*(){if(bo(n.app))return Promise.reject(mc(n));let r=td(n),i=JY(r,e),o=yield new xS(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var lX=10*60*1e3,wS=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uX(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!IN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zu(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lX&&this.cachedEventUids.clear(),this.cachedEventUids.has(z4(e))}saveEventToCache(e){this.cachedEventUids.add(z4(e)),this.lastProcessedEventTime=Date.now()}};function z4(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function IN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function uX(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IN(n);default:return!1}}function dX(t){return W(this,arguments,function*(n,e={}){return Ml(n,"GET","/v1/projects",e)})}var fX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hX=/^https?/;function pX(n){return W(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield dX(n);for(let t of e)try{if(mX(t))return}catch{}ua(n,"unauthorized-domain")})}function mX(n){let e=sS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!hX.test(t))return!1;if(fX.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var gX=new Ju(3e4,6e4);function W4(){let n=la().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vX(n){return new Promise((e,t)=>{var r,i,s;function o(){W4(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{W4(),t(Zu(n,"network-request-failed"))},timeout:gX.get()})}if(!((i=(r=la().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=la().gapi)===null||s===void 0)&&s.load)o();else{let a=pN("iframefcb");return la()[a]=()=>{gapi.load?o():t(Zu(n,"network-request-failed"))},hN(`${bY()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw f_=null,e})}var f_=null;function _X(n){return f_=f_||vX(n),f_}var yX=new Ju(5e3,15e3),xX="__/auth/iframe",wX="emulator/auth/iframe",bX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CX(n){let e=n.config;ht(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?SS(e,wX):`https://${n.config.authDomain}/${xX}`,r={apiKey:e.apiKey,appName:n.name,v:Cl},i=EX.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${pp(r).slice(1)}`}function SX(n){return W(this,null,function*(){let e=yield _X(n),t=la().gapi;return ht(t,n,"internal-error"),e.open({where:document.body,url:CX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bX,dontclear:!0},r=>new Promise((i,s)=>W(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Zu(n,"network-request-failed"),a=la().setTimeout(()=>{s(o)},yX.get());function c(){la().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var IX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TX=500,DX=600,AX="_blank",kX="http://localhost",E_=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function MX(n,e,t,r=TX,i=DX){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},IX),{width:r.toString(),height:i.toString(),top:s,left:o}),l=si().toLowerCase();t&&(a=oN(l)?AX:t),iN(l)&&(e=e||kX,c.scrollbars="yes");let u=Object.entries(c).reduce((m,[g,w])=>`${m}${g}=${w},`,"");if(gY(l)&&a!=="_self")return RX(e||"",a),new E_(null);let d=window.open(e||"",a,u);ht(d,n,"popup-blocked");try{d.focus()}catch{}return new E_(d)}function RX(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var PX="__/auth/handler",FX="emulator/auth/handler",OX=encodeURIComponent("fac");function q4(n,e,t,r,i,s){return W(this,null,function*(){ht(n.config.authDomain,n,"auth-domain-config-required"),ht(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Cl,eventId:i};if(e instanceof y_){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",g4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof mS){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${OX}=${encodeURIComponent(c)}`:"";return`${NX(n)}?${pp(a).slice(1)}${l}`})}function NX({config:n}){return n.emulator?SS(n,FX):`https://${n.authDomain}/${PX}`}var iS="webStorageSupport",bS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=LS,this._completeRedirectFn=cX,this._overrideRedirectResult=sX}_openPopup(e,t,r,i){return W(this,null,function*(){var s;Al((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield q4(e,t,r,sS(),i);return MX(e,o,wN())})}_openRedirect(e,t,r,i){return W(this,null,function*(){yield this._originValidation(e);let s=yield q4(e,t,r,sS(),i);return HY(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Al(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return W(this,null,function*(){let t=yield SX(e),r=new wS(e);return t.register("authEvent",i=>(ht(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(iS,{type:iS},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[iS];o!==void 0&&t(!!o),ua(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=pX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dN()||sN()||AS()}},TN=bS;var G4="@firebase/auth",K4="1.7.9";var ES=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return W(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ht(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function LX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VX(n){ca(new rs("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ht(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fN(n)},l=new fS(r,i,s,c);return SY(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ca(new rs("auth-internal",e=>{let t=td(e.getProvider("auth").getImmediate());return(r=>new ES(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(G4,K4,LX(n)),rr(G4,K4,"esm2017")}var BX=5*60,UX=LC("authIdTokenMaxAge")||BX,Q4=null,jX=n=>e=>W(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>UX)return;let i=t?.token;Q4!==i&&(Q4=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function VS(n=Sl()){let e=Qu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=kS(n,{popupRedirectResolver:TN,persistence:[SN,xN,LS]}),r=LC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=jX(s.toString());OS(t,o,()=>o(t.currentUser)),S_(t,a=>o(a))}}let i=OC("auth");return i&&MS(t,`http://${i}`),t}function $X(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xY({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Zu("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",$X().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VX("Browser");function AN(n){return new kt(function(e){var t=I_(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var kN="auth",gc=class{constructor(e){return e}},nd=class{constructor(){return Xu(kN)}};var BS=new Ze("angularfire2.auth-instances");function kZ(n,e){let t=eh(kN,n,e);return t&&new gc(t)}function MZ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gc(r)}}var RZ={provide:nd,deps:[[new gr,BS]]},PZ={provide:gc,useFactory:kZ,deps:[[new gr,BS],Eo]};function MN(n,...e){return rr("angularfire",dc.full,"auth"),$s([PZ,RZ,{provide:BS,useFactory:MZ(n),multi:!0,deps:[$t,Rr,Tl,fc,[new gr,Il],...e]}])}var RN=Pn(AN,!0);var PN=Pn(PS,!0);var FN=Pn(VS,!0);var ON=Pn(FS,!0);var NN=Pn(NS,!0);var LN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VN={};var Rl,US;(function(){var n;function e(D,T){function A(){}A.prototype=T.prototype,D.D=T.prototype,D.prototype=new A,D.prototype.constructor=D,D.C=function(F,N,V){for(var U=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)U[nt-2]=arguments[nt];return T.prototype[N].apply(F,U)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,T,A){A||(A=0);var F=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)F[N]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(N=0;16>N;++N)F[N]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=D.g[0],A=D.g[1],N=D.g[2];var V=D.g[3],U=T+(V^A&(N^V))+F[0]+3614090360&4294967295;T=A+(U<<7&4294967295|U>>>25),U=V+(N^T&(A^N))+F[1]+3905402710&4294967295,V=T+(U<<12&4294967295|U>>>20),U=N+(A^V&(T^A))+F[2]+606105819&4294967295,N=V+(U<<17&4294967295|U>>>15),U=A+(T^N&(V^T))+F[3]+3250441966&4294967295,A=N+(U<<22&4294967295|U>>>10),U=T+(V^A&(N^V))+F[4]+4118548399&4294967295,T=A+(U<<7&4294967295|U>>>25),U=V+(N^T&(A^N))+F[5]+1200080426&4294967295,V=T+(U<<12&4294967295|U>>>20),U=N+(A^V&(T^A))+F[6]+2821735955&4294967295,N=V+(U<<17&4294967295|U>>>15),U=A+(T^N&(V^T))+F[7]+4249261313&4294967295,A=N+(U<<22&4294967295|U>>>10),U=T+(V^A&(N^V))+F[8]+1770035416&4294967295,T=A+(U<<7&4294967295|U>>>25),U=V+(N^T&(A^N))+F[9]+2336552879&4294967295,V=T+(U<<12&4294967295|U>>>20),U=N+(A^V&(T^A))+F[10]+4294925233&4294967295,N=V+(U<<17&4294967295|U>>>15),U=A+(T^N&(V^T))+F[11]+2304563134&4294967295,A=N+(U<<22&4294967295|U>>>10),U=T+(V^A&(N^V))+F[12]+1804603682&4294967295,T=A+(U<<7&4294967295|U>>>25),U=V+(N^T&(A^N))+F[13]+4254626195&4294967295,V=T+(U<<12&4294967295|U>>>20),U=N+(A^V&(T^A))+F[14]+2792965006&4294967295,N=V+(U<<17&4294967295|U>>>15),U=A+(T^N&(V^T))+F[15]+1236535329&4294967295,A=N+(U<<22&4294967295|U>>>10),U=T+(N^V&(A^N))+F[1]+4129170786&4294967295,T=A+(U<<5&4294967295|U>>>27),U=V+(A^N&(T^A))+F[6]+3225465664&4294967295,V=T+(U<<9&4294967295|U>>>23),U=N+(T^A&(V^T))+F[11]+643717713&4294967295,N=V+(U<<14&4294967295|U>>>18),U=A+(V^T&(N^V))+F[0]+3921069994&4294967295,A=N+(U<<20&4294967295|U>>>12),U=T+(N^V&(A^N))+F[5]+3593408605&4294967295,T=A+(U<<5&4294967295|U>>>27),U=V+(A^N&(T^A))+F[10]+38016083&4294967295,V=T+(U<<9&4294967295|U>>>23),U=N+(T^A&(V^T))+F[15]+3634488961&4294967295,N=V+(U<<14&4294967295|U>>>18),U=A+(V^T&(N^V))+F[4]+3889429448&4294967295,A=N+(U<<20&4294967295|U>>>12),U=T+(N^V&(A^N))+F[9]+568446438&4294967295,T=A+(U<<5&4294967295|U>>>27),U=V+(A^N&(T^A))+F[14]+3275163606&4294967295,V=T+(U<<9&4294967295|U>>>23),U=N+(T^A&(V^T))+F[3]+4107603335&4294967295,N=V+(U<<14&4294967295|U>>>18),U=A+(V^T&(N^V))+F[8]+1163531501&4294967295,A=N+(U<<20&4294967295|U>>>12),U=T+(N^V&(A^N))+F[13]+2850285829&4294967295,T=A+(U<<5&4294967295|U>>>27),U=V+(A^N&(T^A))+F[2]+4243563512&4294967295,V=T+(U<<9&4294967295|U>>>23),U=N+(T^A&(V^T))+F[7]+1735328473&4294967295,N=V+(U<<14&4294967295|U>>>18),U=A+(V^T&(N^V))+F[12]+2368359562&4294967295,A=N+(U<<20&4294967295|U>>>12),U=T+(A^N^V)+F[5]+4294588738&4294967295,T=A+(U<<4&4294967295|U>>>28),U=V+(T^A^N)+F[8]+2272392833&4294967295,V=T+(U<<11&4294967295|U>>>21),U=N+(V^T^A)+F[11]+1839030562&4294967295,N=V+(U<<16&4294967295|U>>>16),U=A+(N^V^T)+F[14]+4259657740&4294967295,A=N+(U<<23&4294967295|U>>>9),U=T+(A^N^V)+F[1]+2763975236&4294967295,T=A+(U<<4&4294967295|U>>>28),U=V+(T^A^N)+F[4]+1272893353&4294967295,V=T+(U<<11&4294967295|U>>>21),U=N+(V^T^A)+F[7]+4139469664&4294967295,N=V+(U<<16&4294967295|U>>>16),U=A+(N^V^T)+F[10]+3200236656&4294967295,A=N+(U<<23&4294967295|U>>>9),U=T+(A^N^V)+F[13]+681279174&4294967295,T=A+(U<<4&4294967295|U>>>28),U=V+(T^A^N)+F[0]+3936430074&4294967295,V=T+(U<<11&4294967295|U>>>21),U=N+(V^T^A)+F[3]+3572445317&4294967295,N=V+(U<<16&4294967295|U>>>16),U=A+(N^V^T)+F[6]+76029189&4294967295,A=N+(U<<23&4294967295|U>>>9),U=T+(A^N^V)+F[9]+3654602809&4294967295,T=A+(U<<4&4294967295|U>>>28),U=V+(T^A^N)+F[12]+3873151461&4294967295,V=T+(U<<11&4294967295|U>>>21),U=N+(V^T^A)+F[15]+530742520&4294967295,N=V+(U<<16&4294967295|U>>>16),U=A+(N^V^T)+F[2]+3299628645&4294967295,A=N+(U<<23&4294967295|U>>>9),U=T+(N^(A|~V))+F[0]+4096336452&4294967295,T=A+(U<<6&4294967295|U>>>26),U=V+(A^(T|~N))+F[7]+1126891415&4294967295,V=T+(U<<10&4294967295|U>>>22),U=N+(T^(V|~A))+F[14]+2878612391&4294967295,N=V+(U<<15&4294967295|U>>>17),U=A+(V^(N|~T))+F[5]+4237533241&4294967295,A=N+(U<<21&4294967295|U>>>11),U=T+(N^(A|~V))+F[12]+1700485571&4294967295,T=A+(U<<6&4294967295|U>>>26),U=V+(A^(T|~N))+F[3]+2399980690&4294967295,V=T+(U<<10&4294967295|U>>>22),U=N+(T^(V|~A))+F[10]+4293915773&4294967295,N=V+(U<<15&4294967295|U>>>17),U=A+(V^(N|~T))+F[1]+2240044497&4294967295,A=N+(U<<21&4294967295|U>>>11),U=T+(N^(A|~V))+F[8]+1873313359&4294967295,T=A+(U<<6&4294967295|U>>>26),U=V+(A^(T|~N))+F[15]+4264355552&4294967295,V=T+(U<<10&4294967295|U>>>22),U=N+(T^(V|~A))+F[6]+2734768916&4294967295,N=V+(U<<15&4294967295|U>>>17),U=A+(V^(N|~T))+F[13]+1309151649&4294967295,A=N+(U<<21&4294967295|U>>>11),U=T+(N^(A|~V))+F[4]+4149444226&4294967295,T=A+(U<<6&4294967295|U>>>26),U=V+(A^(T|~N))+F[11]+3174756917&4294967295,V=T+(U<<10&4294967295|U>>>22),U=N+(T^(V|~A))+F[2]+718787259&4294967295,N=V+(U<<15&4294967295|U>>>17),U=A+(V^(N|~T))+F[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+(N+(U<<21&4294967295|U>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.u=function(D,T){T===void 0&&(T=D.length);for(var A=T-this.blockSize,F=this.B,N=this.h,V=0;V<T;){if(N==0)for(;V<=A;)i(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<T;)if(F[N++]=D.charCodeAt(V++),N==this.blockSize){i(this,F),N=0;break}}else for(;V<T;)if(F[N++]=D[V++],N==this.blockSize){i(this,F),N=0;break}}this.h=N,this.o+=T},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;var A=8*this.o;for(T=D.length-8;T<D.length;++T)D[T]=A&255,A/=256;for(this.u(D),D=Array(16),T=A=0;4>T;++T)for(var F=0;32>F;F+=8)D[A++]=this.g[T]>>>F&255;return D};function s(D,T){var A=a;return Object.prototype.hasOwnProperty.call(A,D)?A[D]:A[D]=T(D)}function o(D,T){this.h=T;for(var A=[],F=!0,N=D.length-1;0<=N;N--){var V=D[N]|0;F&&V==T||(A[N]=V,F=!1)}this.g=A}var a={};function c(D){return-128<=D&&128>D?s(D,function(T){return new o([T|0],0>T?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return d;if(0>D)return E(l(-D));for(var T=[],A=1,F=0;D>=A;F++)T[F]=D/A|0,A*=4294967296;return new o(T,0)}function u(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return E(u(D.substring(1),T));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(T,8)),F=d,N=0;N<D.length;N+=8){var V=Math.min(8,D.length-N),U=parseInt(D.substring(N,N+V),T);8>V?(V=l(Math.pow(T,V)),F=F.j(V).add(l(U))):(F=F.j(A),F=F.add(l(U)))}return F}var d=c(0),m=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(y(this))return-E(this).m();for(var D=0,T=1,A=0;A<this.g.length;A++){var F=this.i(A);D+=(0<=F?F:4294967296+F)*T,T*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(y(this))return"-"+E(this).toString(D);for(var T=l(Math.pow(D,6)),A=this,F="";;){var N=K(A,T).g;A=M(A,N.j(T));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(D);if(A=N,w(A))return V+F;for(;6>V.length;)V="0"+V;F=V+F}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function y(D){return D.h==-1}n.l=function(D){return D=M(this,D),y(D)?-1:w(D)?0:1};function E(D){for(var T=D.g.length,A=[],F=0;F<T;F++)A[F]=~D.g[F];return new o(A,~D.h).add(m)}n.abs=function(){return y(this)?E(this):this},n.add=function(D){for(var T=Math.max(this.g.length,D.g.length),A=[],F=0,N=0;N<=T;N++){var V=F+(this.i(N)&65535)+(D.i(N)&65535),U=(V>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);F=U>>>16,V&=65535,U&=65535,A[N]=U<<16|V}return new o(A,A[A.length-1]&-2147483648?-1:0)};function M(D,T){return D.add(E(T))}n.j=function(D){if(w(this)||w(D))return d;if(y(this))return y(D)?E(this).j(E(D)):E(E(this).j(D));if(y(D))return E(this.j(E(D)));if(0>this.l(g)&&0>D.l(g))return l(this.m()*D.m());for(var T=this.g.length+D.g.length,A=[],F=0;F<2*T;F++)A[F]=0;for(F=0;F<this.g.length;F++)for(var N=0;N<D.g.length;N++){var V=this.i(F)>>>16,U=this.i(F)&65535,nt=D.i(N)>>>16,Ae=D.i(N)&65535;A[2*F+2*N]+=U*Ae,k(A,2*F+2*N),A[2*F+2*N+1]+=V*Ae,k(A,2*F+2*N+1),A[2*F+2*N+1]+=U*nt,k(A,2*F+2*N+1),A[2*F+2*N+2]+=V*nt,k(A,2*F+2*N+2)}for(F=0;F<T;F++)A[F]=A[2*F+1]<<16|A[2*F];for(F=T;F<2*T;F++)A[F]=0;return new o(A,0)};function k(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function O(D,T){this.g=D,this.h=T}function K(D,T){if(w(T))throw Error("division by zero");if(w(D))return new O(d,d);if(y(D))return T=K(E(D),T),new O(E(T.g),E(T.h));if(y(T))return T=K(D,E(T)),new O(E(T.g),T.h);if(30<D.g.length){if(y(D)||y(T))throw Error("slowDivide_ only works with positive integers.");for(var A=m,F=T;0>=F.l(D);)A=Q(A),F=Q(F);var N=te(A,1),V=te(F,1);for(F=te(F,2),A=te(A,2);!w(F);){var U=V.add(F);0>=U.l(D)&&(N=N.add(A),V=U),F=te(F,1),A=te(A,1)}return T=M(D,N.j(T)),new O(N,T)}for(N=d;0<=D.l(T);){for(A=Math.max(1,Math.floor(D.m()/T.m())),F=Math.ceil(Math.log(A)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),V=l(A),U=V.j(T);y(U)||0<U.l(D);)A-=F,V=l(A),U=V.j(T);w(V)&&(V=m),N=N.add(V),D=M(D,U)}return new O(N,D)}n.A=function(D){return K(this,D).h},n.and=function(D){for(var T=Math.max(this.g.length,D.g.length),A=[],F=0;F<T;F++)A[F]=this.i(F)&D.i(F);return new o(A,this.h&D.h)},n.or=function(D){for(var T=Math.max(this.g.length,D.g.length),A=[],F=0;F<T;F++)A[F]=this.i(F)|D.i(F);return new o(A,this.h|D.h)},n.xor=function(D){for(var T=Math.max(this.g.length,D.g.length),A=[],F=0;F<T;F++)A[F]=this.i(F)^D.i(F);return new o(A,this.h^D.h)};function Q(D){for(var T=D.g.length+1,A=[],F=0;F<T;F++)A[F]=D.i(F)<<1|D.i(F-1)>>>31;return new o(A,D.h)}function te(D,T){var A=T>>5;T%=32;for(var F=D.g.length-A,N=[],V=0;V<F;V++)N[V]=0<T?D.i(V+A)>>>T|D.i(V+A+1)<<32-T:D.i(V+A);return new o(N,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,US=VN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=u,Rl=VN.Integer=o}).apply(typeof LN<"u"?LN:typeof self<"u"?self:typeof window<"u"?window:{});var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vc={};var jS,FZ,rh,$S,Sp,A_,HS,zS,WS;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,C,S){return h==Array.prototype||h==Object.prototype||(h[C]=S.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof D_=="object"&&D_];for(var C=0;C<h.length;++C){var S=h[C];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(h,C){if(C)e:{var S=r;h=h.split(".");for(var L=0;L<h.length-1;L++){var oe=h[L];if(!(oe in S))break e;S=S[oe]}h=h[h.length-1],L=S[h],C=C(L),C!=L&&C!=null&&e(S,h,{configurable:!0,writable:!0,value:C})}}function s(h,C){h instanceof String&&(h+="");var S=0,L=!1,oe={next:function(){if(!L&&S<h.length){var ge=S++;return{value:C(ge,h[ge]),done:!1}}return L=!0,{done:!0,value:void 0}}};return oe[Symbol.iterator]=function(){return oe},oe}i("Array.prototype.values",function(h){return h||function(){return s(this,function(C,S){return S})}});var o=o||{},a=this||self;function c(h){var C=typeof h;return C=C!="object"?C:h?Array.isArray(h)?"array":C:"null",C=="array"||C=="object"&&typeof h.length=="number"}function l(h){var C=typeof h;return C=="object"&&h!=null||C=="function"}function u(h,C,S){return h.call.apply(h.bind,arguments)}function d(h,C,S){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(oe,L),h.apply(C,oe)}}return function(){return h.apply(C,arguments)}}function m(h,C,S){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,m.apply(null,arguments)}function g(h,C){var S=Array.prototype.slice.call(arguments,1);return function(){var L=S.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function w(h,C){function S(){}S.prototype=C.prototype,h.aa=C.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(L,oe,ge){for(var Oe=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)Oe[qt-2]=arguments[qt];return C.prototype[oe].apply(L,Oe)}}function y(h){let C=h.length;if(0<C){let S=Array(C);for(let L=0;L<C;L++)S[L]=h[L];return S}return[]}function E(h,C){for(let S=1;S<arguments.length;S++){let L=arguments[S];if(c(L)){let oe=h.length||0,ge=L.length||0;h.length=oe+ge;for(let Oe=0;Oe<ge;Oe++)h[oe+Oe]=L[Oe]}else h.push(L)}}class M{constructor(C,S){this.i=C,this.j=S,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function k(h){return/^[\s\xa0]*$/.test(h)}function O(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function K(h){return K[" "](h),h}K[" "]=function(){};var Q=O().indexOf("Gecko")!=-1&&!(O().toLowerCase().indexOf("webkit")!=-1&&O().indexOf("Edge")==-1)&&!(O().indexOf("Trident")!=-1||O().indexOf("MSIE")!=-1)&&O().indexOf("Edge")==-1;function te(h,C,S){for(let L in h)C.call(S,h[L],L,h)}function D(h,C){for(let S in h)C.call(void 0,h[S],S,h)}function T(h){let C={};for(let S in h)C[S]=h[S];return C}let A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(h,C){let S,L;for(let oe=1;oe<arguments.length;oe++){L=arguments[oe];for(S in L)h[S]=L[S];for(let ge=0;ge<A.length;ge++)S=A[ge],Object.prototype.hasOwnProperty.call(L,S)&&(h[S]=L[S])}}function N(h){var C=1;h=h.split(":");let S=[];for(;0<C&&h.length;)S.push(h.shift()),C--;return h.length&&S.push(h.join(":")),S}function V(h){a.setTimeout(()=>{throw h},0)}function U(){var h=It;let C=null;return h.g&&(C=h.g,h.g=h.g.next,h.g||(h.h=null),C.next=null),C}class nt{constructor(){this.h=this.g=null}add(C,S){let L=Ae.get();L.set(C,S),this.h?this.h.next=L:this.g=L,this.h=L}}var Ae=new M(()=>new lt,h=>h.reset());class lt{constructor(){this.next=this.g=this.h=null}set(C,S){this.h=C,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,Ut=!1,It=new nt,Ft=()=>{let h=a.Promise.resolve(void 0);ut=()=>{h.then(Cn)}};var Cn=()=>{for(var h;h=U();){try{h.h.call(h.g)}catch(S){V(S)}var C=Ae;C.j(h),100>C.h&&(C.h++,h.next=C.g,C.g=h)}Ut=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(h,C){this.type=h,this.g=this.target=C,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,C=Object.defineProperty({},"passive",{get:function(){h=!0}});try{let S=()=>{};a.addEventListener("test",S,C),a.removeEventListener("test",S,C)}catch{}return h}();function ne(h,C){if(me.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=C,C=h.relatedTarget){if(Q){e:{try{K(C.nodeName);var oe=!0;break e}catch{}oe=!1}oe||(C=null)}}else S=="mouseover"?C=h.fromElement:S=="mouseout"&&(C=h.toElement);this.relatedTarget=C,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:we[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ne.aa.h.call(this)}}w(ne,me);var we={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Be="closure_listenable_"+(1e6*Math.random()|0),rt=0;function Ge(h,C,S,L,oe){this.listener=h,this.proxy=null,this.src=C,this.type=S,this.capture=!!L,this.ha=oe,this.key=++rt,this.da=this.fa=!1}function ke(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Lt(h){this.src=h,this.g={},this.h=0}Lt.prototype.add=function(h,C,S,L,oe){var ge=h.toString();h=this.g[ge],h||(h=this.g[ge]=[],this.h++);var Oe=sr(h,C,L,oe);return-1<Oe?(C=h[Oe],S||(C.fa=!1)):(C=new Ge(C,this.src,ge,!!L,oe),C.fa=S,h.push(C)),C};function xt(h,C){var S=C.type;if(S in h.g){var L=h.g[S],oe=Array.prototype.indexOf.call(L,C,void 0),ge;(ge=0<=oe)&&Array.prototype.splice.call(L,oe,1),ge&&(ke(C),h.g[S].length==0&&(delete h.g[S],h.h--))}}function sr(h,C,S,L){for(var oe=0;oe<h.length;++oe){var ge=h[oe];if(!ge.da&&ge.listener==C&&ge.capture==!!S&&ge.ha==L)return oe}return-1}var ct="closure_lm_"+(1e6*Math.random()|0),qn={};function Tn(h,C,S,L,oe){if(L&&L.once)return Ni(h,C,S,L,oe);if(Array.isArray(C)){for(var ge=0;ge<C.length;ge++)Tn(h,C[ge],S,L,oe);return null}return S=Yn(S),h&&h[Be]?h.K(C,S,l(L)?!!L.capture:!!L,oe):Ve(h,C,S,!1,L,oe)}function Ve(h,C,S,L,oe,ge){if(!C)throw Error("Invalid event type");var Oe=l(oe)?!!oe.capture:!!oe,qt=dr(h);if(qt||(h[ct]=qt=new Lt(h)),S=qt.add(C,S,L,Oe,ge),S.proxy)return S;if(L=Wr(),S.proxy=L,L.src=h,L.listener=S,h.addEventListener)re||(oe=Oe),oe===void 0&&(oe=!1),h.addEventListener(C.toString(),L,oe);else if(h.attachEvent)h.attachEvent(Jr(C.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Wr(){function h(S){return C.call(h.src,h.listener,S)}let C=Gi;return h}function Ni(h,C,S,L,oe){if(Array.isArray(C)){for(var ge=0;ge<C.length;ge++)Ni(h,C[ge],S,L,oe);return null}return S=Yn(S),h&&h[Be]?h.L(C,S,l(L)?!!L.capture:!!L,oe):Ve(h,C,S,!0,L,oe)}function ps(h,C,S,L,oe){if(Array.isArray(C))for(var ge=0;ge<C.length;ge++)ps(h,C[ge],S,L,oe);else L=l(L)?!!L.capture:!!L,S=Yn(S),h&&h[Be]?(h=h.i,C=String(C).toString(),C in h.g&&(ge=h.g[C],S=sr(ge,S,L,oe),-1<S&&(ke(ge[S]),Array.prototype.splice.call(ge,S,1),ge.length==0&&(delete h.g[C],h.h--)))):h&&(h=dr(h))&&(C=h.g[C.toString()],h=-1,C&&(h=sr(C,S,L,oe)),(S=-1<h?C[h]:null)&&mt(S))}function mt(h){if(typeof h!="number"&&h&&!h.da){var C=h.src;if(C&&C[Be])xt(C.i,h);else{var S=h.type,L=h.proxy;C.removeEventListener?C.removeEventListener(S,L,h.capture):C.detachEvent?C.detachEvent(Jr(S),L):C.addListener&&C.removeListener&&C.removeListener(L),(S=dr(C))?(xt(S,h),S.h==0&&(S.src=null,C[ct]=null)):ke(h)}}}function Jr(h){return h in qn?qn[h]:qn[h]="on"+h}function Gi(h,C){if(h.da)h=!0;else{C=new ne(C,this);var S=h.listener,L=h.ha||h.src;h.fa&&mt(h),h=S.call(L,C)}return h}function dr(h){return h=h[ct],h instanceof Lt?h:null}var Dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(h){return typeof h=="function"?h:(h[Dn]||(h[Dn]=function(C){return h.handleEvent(C)}),h[Dn])}function Xn(){Z.call(this),this.i=new Lt(this),this.M=this,this.F=null}w(Xn,Z),Xn.prototype[Be]=!0,Xn.prototype.removeEventListener=function(h,C,S,L){ps(this,h,C,S,L)};function Ln(h,C){var S,L=h.F;if(L)for(S=[];L;L=L.F)S.push(L);if(h=h.M,L=C.type||C,typeof C=="string")C=new me(C,h);else if(C instanceof me)C.target=C.target||h;else{var oe=C;C=new me(L,h),F(C,oe)}if(oe=!0,S)for(var ge=S.length-1;0<=ge;ge--){var Oe=C.g=S[ge];oe=Ls(Oe,L,!0,C)&&oe}if(Oe=C.g=h,oe=Ls(Oe,L,!0,C)&&oe,oe=Ls(Oe,L,!1,C)&&oe,S)for(ge=0;ge<S.length;ge++)Oe=C.g=S[ge],oe=Ls(Oe,L,!1,C)&&oe}Xn.prototype.N=function(){if(Xn.aa.N.call(this),this.i){var h=this.i,C;for(C in h.g){for(var S=h.g[C],L=0;L<S.length;L++)ke(S[L]);delete h.g[C],h.h--}}this.F=null},Xn.prototype.K=function(h,C,S,L){return this.i.add(String(h),C,!1,S,L)},Xn.prototype.L=function(h,C,S,L){return this.i.add(String(h),C,!0,S,L)};function Ls(h,C,S,L){if(C=h.i.g[String(C)],!C)return!0;C=C.concat();for(var oe=!0,ge=0;ge<C.length;++ge){var Oe=C[ge];if(Oe&&!Oe.da&&Oe.capture==S){var qt=Oe.listener,qr=Oe.ha||Oe.src;Oe.fa&&xt(h.i,Oe),oe=qt.call(qr,L)!==!1&&oe}}return oe&&!L.defaultPrevented}function Dr(h,C,S){if(typeof h=="function")S&&(h=m(h,S));else if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:a.setTimeout(h,C||0)}function iu(h){h.g=Dr(()=>{h.g=null,h.i&&(h.i=!1,iu(h))},h.l);let C=h.h;h.h=null,h.m.apply(null,C)}class su extends Z{constructor(C,S){super(),this.m=C,this.l=S,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(h){Z.call(this),this.h=h,this.g={}}w(no,Z);var Oa=[];function ou(h){te(h.g,function(C,S){this.g.hasOwnProperty(S)&&mt(C)},h),h.g={}}no.prototype.N=function(){no.aa.N.call(this),ou(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var au=a.JSON.stringify,s0=a.JSON.parse,Bd=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Ki(){}Ki.prototype.h=null;function cu(h){return h.h||(h.h=h.i())}function Ud(){}var Na={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bo(){me.call(this,"d")}w(Bo,me);function lu(){me.call(this,"c")}w(lu,me);var ms={},jd=null;function Vc(){return jd=jd||new Xn}ms.La="serverreachability";function $d(h){me.call(this,ms.La,h)}w($d,me);function La(h){let C=Vc();Ln(C,new $d(C))}ms.STAT_EVENT="statevent";function Hd(h,C){me.call(this,ms.STAT_EVENT,h),this.stat=C}w(Hd,me);function Cr(h){let C=Vc();Ln(C,new Hd(C,h))}ms.Ma="timingevent";function Bc(h,C){me.call(this,ms.Ma,h),this.size=C}w(Bc,me);function Va(h,C){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},C)}function Ba(){this.g=!0}Ba.prototype.xa=function(){this.g=!1};function o0(h,C,S,L,oe,ge){h.info(function(){if(h.g)if(ge)for(var Oe="",qt=ge.split("&"),qr=0;qr<qt.length;qr++){var Gt=qt[qr].split("=");if(1<Gt.length){var ti=Gt[0];Gt=Gt[1];var Gr=ti.split("_");Oe=2<=Gr.length&&Gr[1]=="type"?Oe+(ti+"="+Gt+"&"):Oe+(ti+"=redacted&")}}else Oe=null;else Oe=ge;return"XMLHTTP REQ ("+L+") [attempt "+oe+"]: "+C+`
`+S+`
`+Oe})}function P(h,C,S,L,oe,ge,Oe){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+oe+"]: "+C+`
`+S+`
`+ge+" "+Oe})}function j(h,C,S,L){h.info(function(){return"XMLHTTP TEXT ("+C+"): "+H(h,S)+(L?" "+L:"")})}function B(h,C){h.info(function(){return"TIMEOUT: "+C})}Ba.prototype.info=function(){};function H(h,C){if(!h.g)return C;if(!C)return null;try{var S=JSON.parse(C);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var L=S[h];if(!(2>L.length)){var oe=L[1];if(Array.isArray(oe)&&!(1>oe.length)){var ge=oe[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Oe=1;Oe<oe.length;Oe++)oe[Oe]=""}}}}return au(S)}catch{return C}}var q={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},G={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},de;function ve(){}w(ve,Ki),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},de=new ve;function ce(h,C,S,L){this.j=h,this.i=C,this.l=S,this.R=L||1,this.U=new no(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var he={},Ie={};function Ee(h,C,S){h.L=1,h.v=fu(io(C)),h.m=S,h.P=!0,qe(h,null)}function qe(h,C){h.F=Date.now(),st(h),h.A=io(h.v);var S=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),ig(S.i,"t",L),h.C=0,S=h.j.J,h.h=new ue,h.g=f0(h.j,S?C:null,!h.m),0<h.O&&(h.M=new su(m(h.Y,h,h.g),h.O)),C=h.U,S=h.g,L=h.ca;var oe="readystatechange";Array.isArray(oe)||(oe&&(Oa[0]=oe.toString()),oe=Oa);for(var ge=0;ge<oe.length;ge++){var Oe=Tn(S,oe[ge],L||C.handleEvent,!1,C.h||C);if(!Oe)break;C.g[Oe.key]=Oe}C=h.H?T(h.H):{},h.m?(h.u||(h.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,C)):(h.u="GET",h.g.ea(h.A,h.u,null,C)),La(),o0(h.i,h.u,h.A,h.l,h.R,h.m)}ce.prototype.ca=function(h){h=h.target;let C=this.M;C&&ao(h)==3?C.j():this.Y(h)},ce.prototype.Y=function(h){try{if(h==this.g)e:{let Gr=ao(this.g);var C=this.g.Ba();let Ha=this.g.Z();if(!(3>Gr)&&(Gr!=3||this.g&&(this.h.h||this.g.oa()||dg(this.g)))){this.J||Gr!=4||C==7||(C==8||0>=Ha?La(3):La(2)),Ar(this);var S=this.g.Z();this.X=S;t:if(Me(this)){var L=dg(this.g);h="";var oe=L.length,ge=ao(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),Sn(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(C=0;C<oe;C++)this.h.h=!0,h+=this.h.i.decode(L[C],{stream:!(ge&&C==oe-1)});L.length=0,this.h.g+=h,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=S==200,P(this.i,this.u,this.A,this.l,this.R,Gr,S),this.o){if(this.T&&!this.K){t:{if(this.g){var qt,qr=this.g;if((qt=qr.g?qr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(qt)){var Gt=qt;break t}}Gt=null}if(S=Gt)j(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ro(this,S);else{this.o=!1,this.s=3,Cr(12),Zn(this),Sn(this);break e}}if(this.P){S=!0;let Qi;for(;!this.J&&this.C<Oe.length;)if(Qi=Le(this,Oe),Qi==Ie){Gr==4&&(this.s=4,Cr(14),S=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(Qi==he){this.s=4,Cr(15),j(this.i,this.l,Oe,"[Invalid Chunk]"),S=!1;break}else j(this.i,this.l,Qi,null),ro(this,Qi);if(Me(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gr!=4||Oe.length!=0||this.h.h||(this.s=1,Cr(16),S=!1),this.o=this.o&&S,!S)j(this.i,this.l,Oe,"[Invalid Chunked Response]"),Zn(this),Sn(this);else if(0<Oe.length&&!this.W){this.W=!0;var ti=this.j;ti.g==this&&ti.ba&&!ti.M&&(ti.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),Gc(ti),ti.M=!0,Cr(11))}}else j(this.i,this.l,Oe,null),ro(this,Oe);Gr==4&&Zn(this),this.o&&!this.J&&(Gr==4?gg(this.j,this):(this.o=!1,st(this)))}else Rw(this.g),S==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,Cr(12)):(this.s=0,Cr(13)),Zn(this),Sn(this)}}}catch{}finally{}};function Me(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Le(h,C){var S=h.C,L=C.indexOf(`
`,S);return L==-1?Ie:(S=Number(C.substring(S,L)),isNaN(S)?he:(L+=1,L+S>C.length?Ie:(C=C.slice(L,L+S),h.C=L+S,C)))}ce.prototype.cancel=function(){this.J=!0,Zn(this)};function st(h){h.S=Date.now()+h.I,dn(h,h.I)}function dn(h,C){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Va(m(h.ba,h),C)}function Ar(h){h.B&&(a.clearTimeout(h.B),h.B=null)}ce.prototype.ba=function(){this.B=null;let h=Date.now();0<=h-this.S?(B(this.i,this.A),this.L!=2&&(La(),Cr(17)),Zn(this),this.s=2,Sn(this)):dn(this,this.S-h)};function Sn(h){h.j.G==0||h.J||gg(h.j,h)}function Zn(h){Ar(h);var C=h.M;C&&typeof C.ma=="function"&&C.ma(),h.M=null,ou(h.U),h.g&&(C=h.g,h.g=null,C.abort(),C.ma())}function ro(h,C){try{var S=h.j;if(S.G!=0&&(S.g==h||zd(S.h,h))){if(!h.K&&zd(S.h,h)&&S.G==3){try{var L=S.Da.g.parse(C)}catch{L=null}if(Array.isArray(L)&&L.length==3){var oe=L;if(oe[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)Zd(S),Yd(S);else break e;u0(S),Cr(18)}}else S.za=oe[1],0<S.za-S.T&&37500>oe[2]&&S.F&&S.v==0&&!S.C&&(S.C=Va(m(S.Za,S),6e3));if(1>=Li(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else zo(S,11)}else if((h.K||S.g==h)&&Zd(S),!k(C))for(oe=S.Da.g.parse(C),C=0;C<oe.length;C++){let Gt=oe[C];if(S.T=Gt[0],Gt=Gt[1],S.G==2)if(Gt[0]=="c"){S.K=Gt[1],S.ia=Gt[2];let ti=Gt[3];ti!=null&&(S.la=ti,S.j.info("VER="+S.la));let Gr=Gt[4];Gr!=null&&(S.Aa=Gr,S.j.info("SVER="+S.Aa));let Ha=Gt[5];Ha!=null&&typeof Ha=="number"&&0<Ha&&(L=1.5*Ha,S.L=L,S.j.info("backChannelRequestTimeoutMs_="+L)),L=S;let Qi=h.g;if(Qi){let ef=Qi.g?Qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ef){var ge=L.h;ge.g||ef.indexOf("spdy")==-1&&ef.indexOf("quic")==-1&&ef.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Wd(ge,ge.h),ge.h=null))}if(L.D){let m0=Qi.g?Qi.g.getResponseHeader("X-HTTP-Session-Id"):null;m0&&(L.ya=m0,An(L.I,L.D,m0))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),L=S;var Oe=h;if(L.qa=Jd(L,L.J?L.ia:null,L.W),Oe.K){a0(L.h,Oe);var qt=Oe,qr=L.L;qr&&(qt.I=qr),qt.B&&(Ar(qt),st(qt)),L.g=Oe}else mg(L);0<S.i.length&&Xd(S)}else Gt[0]!="stop"&&Gt[0]!="close"||zo(S,7);else S.G==3&&(Gt[0]=="stop"||Gt[0]=="close"?Gt[0]=="stop"?zo(S,7):l0(S):Gt[0]!="noop"&&S.l&&S.l.ta(Gt),S.v=0)}}La(4)}catch{}}var Uo=class{constructor(h,C){this.g=h,this.map=C}};function Vs(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jo(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Li(h){return h.h?1:h.g?h.g.size:0}function zd(h,C){return h.h?h.h==C:h.g?h.g.has(C):!1}function Wd(h,C){h.g?h.g.add(C):h.h=C}function a0(h,C){h.h&&h.h==C?h.h=null:h.g&&h.g.has(C)&&h.g.delete(C)}Vs.prototype.cancel=function(){if(this.i=Xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let h of this.g.values())h.cancel();this.g.clear()}};function Xm(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let C=h.i;for(let S of h.g.values())C=C.concat(S.D);return C}return y(h.i)}function Sw(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var C=[],S=h.length,L=0;L<S;L++)C.push(h[L]);return C}C=[],S=0;for(L in h)C[S++]=h[L];return C}function qd(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var C=[];h=h.length;for(var S=0;S<h;S++)C.push(S);return C}C=[],S=0;for(let L in h)C[S++]=L;return C}}}function uu(h,C){if(h.forEach&&typeof h.forEach=="function")h.forEach(C,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,C,void 0);else for(var S=qd(h),L=Sw(h),oe=L.length,ge=0;ge<oe;ge++)C.call(void 0,L[ge],S&&S[ge],h)}var du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zm(h,C){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var L=h[S].indexOf("="),oe=null;if(0<=L){var ge=h[S].substring(0,L);oe=h[S].substring(L+1)}else ge=h[S];C(ge,oe?decodeURIComponent(oe.replace(/\+/g," ")):"")}}}function Ua(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ua){this.h=h.h,Gd(this,h.j),this.o=h.o,this.g=h.g,Kd(this,h.s),this.l=h.l;var C=h.i,S=new $c;S.i=C.i,C.g&&(S.g=new Map(C.g),S.h=C.h),Jm(this,S),this.m=h.m}else h&&(C=String(h).match(du))?(this.h=!1,Gd(this,C[1]||"",!0),this.o=hu(C[2]||""),this.g=hu(C[3]||"",!0),Kd(this,C[4]),this.l=hu(C[5]||"",!0),Jm(this,C[6]||"",!0),this.m=hu(C[7]||"")):(this.h=!1,this.i=new $c(null,this.h))}Ua.prototype.toString=function(){var h=[],C=this.j;C&&h.push(Uc(C,eg,!0),":");var S=this.g;return(S||C=="file")&&(h.push("//"),(C=this.o)&&h.push(Uc(C,eg,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(Uc(S,S.charAt(0)=="/"?tg:jc,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",Uc(S,c0)),h.join("")};function io(h){return new Ua(h)}function Gd(h,C,S){h.j=S?hu(C,!0):C,h.j&&(h.j=h.j.replace(/:$/,""))}function Kd(h,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);h.s=C}else h.s=null}function Jm(h,C,S){C instanceof $c?(h.i=C,Dw(h.i,h.h)):(S||(C=Uc(C,Tw)),h.i=new $c(C,h.h))}function An(h,C,S){h.i.set(C,S)}function fu(h){return An(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function hu(h,C){return h?C?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Uc(h,C,S){return typeof h=="string"?(h=encodeURI(h).replace(C,Iw),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Iw(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var eg=/[#\/\?@]/g,jc=/[#\?:]/g,tg=/[#\?]/g,Tw=/[#\?@]/g,c0=/#/g;function $c(h,C){this.h=this.g=null,this.i=h||null,this.j=!!C}function $o(h){h.g||(h.g=new Map,h.h=0,h.i&&Zm(h.i,function(C,S){h.add(decodeURIComponent(C.replace(/\+/g," ")),S)}))}n=$c.prototype,n.add=function(h,C){$o(this),this.i=null,h=Hc(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(C),this.h+=1,this};function ng(h,C){$o(h),C=Hc(h,C),h.g.has(C)&&(h.i=null,h.h-=h.g.get(C).length,h.g.delete(C))}function rg(h,C){return $o(h),C=Hc(h,C),h.g.has(C)}n.forEach=function(h,C){$o(this),this.g.forEach(function(S,L){S.forEach(function(oe){h.call(C,oe,L,this)},this)},this)},n.na=function(){$o(this);let h=Array.from(this.g.values()),C=Array.from(this.g.keys()),S=[];for(let L=0;L<C.length;L++){let oe=h[L];for(let ge=0;ge<oe.length;ge++)S.push(C[L])}return S},n.V=function(h){$o(this);let C=[];if(typeof h=="string")rg(this,h)&&(C=C.concat(this.g.get(Hc(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)C=C.concat(h[S])}return C},n.set=function(h,C){return $o(this),this.i=null,h=Hc(this,h),rg(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[C]),this.h+=1,this},n.get=function(h,C){return h?(h=this.V(h),0<h.length?String(h[0]):C):C};function ig(h,C,S){ng(h,C),0<S.length&&(h.i=null,h.g.set(Hc(h,C),y(S)),h.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],C=Array.from(this.g.keys());for(var S=0;S<C.length;S++){var L=C[S];let ge=encodeURIComponent(String(L)),Oe=this.V(L);for(L=0;L<Oe.length;L++){var oe=ge;Oe[L]!==""&&(oe+="="+encodeURIComponent(String(Oe[L]))),h.push(oe)}}return this.i=h.join("&")};function Hc(h,C){return C=String(C),h.j&&(C=C.toLowerCase()),C}function Dw(h,C){C&&!h.j&&($o(h),h.i=null,h.g.forEach(function(S,L){var oe=L.toLowerCase();L!=oe&&(ng(this,L),ig(this,oe,S))},h)),h.j=C}function zc(h,C){let S=new Ba;if(a.Image){let L=new Image;L.onload=g(so,S,"TestLoadImage: loaded",!0,C,L),L.onerror=g(so,S,"TestLoadImage: error",!1,C,L),L.onabort=g(so,S,"TestLoadImage: abort",!1,C,L),L.ontimeout=g(so,S,"TestLoadImage: timeout",!1,C,L),a.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else C(!1)}function Aw(h,C){let S=new Ba,L=new AbortController,oe=setTimeout(()=>{L.abort(),so(S,"TestPingServer: timeout",!1,C)},1e4);fetch(h,{signal:L.signal}).then(ge=>{clearTimeout(oe),ge.ok?so(S,"TestPingServer: ok",!0,C):so(S,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(oe),so(S,"TestPingServer: error",!1,C)})}function so(h,C,S,L,oe){try{oe&&(oe.onload=null,oe.onerror=null,oe.onabort=null,oe.ontimeout=null),L(S)}catch{}}function sg(){this.g=new Bd}function kw(h,C,S){let L=S||"";try{uu(h,function(oe,ge){let Oe=oe;l(oe)&&(Oe=au(oe)),C.push(L+ge+"="+encodeURIComponent(Oe))})}catch(oe){throw C.push(L+"type="+encodeURIComponent("_badmap")),oe}}function pu(h){this.l=h.Ub||null,this.j=h.eb||!1}w(pu,Ki),pu.prototype.g=function(){return new Qd(this.l,this.j)},pu.prototype.i=function(h){return function(){return h}}({});function Qd(h,C){Xn.call(this),this.D=h,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Qd,Xn),n=Qd.prototype,n.open=function(h,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=C,this.readyState=1,gu(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(C.body=h),(this.D||a).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,gu(this)),this.g&&(this.readyState=3,gu(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;og(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function og(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var C=h.value?h.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!h.done}))&&(this.response=this.responseText+=C)}h.done?mu(this):gu(this),this.readyState==3&&og(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,mu(this))},n.Qa=function(h){this.g&&(this.response=h,mu(this))},n.ga=function(){this.g&&mu(this)};function mu(h){h.readyState=4,h.l=null,h.j=null,h.v=null,gu(h)}n.setRequestHeader=function(h,C){this.u.append(h,C)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],C=this.h.entries();for(var S=C.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=C.next();return h.join(`\r
`)};function gu(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ag(h){let C="";return te(h,function(S,L){C+=L,C+=":",C+=S,C+=`\r
`}),C}function Ho(h,C,S){e:{for(L in S){var L=!1;break e}L=!0}L||(S=ag(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):An(h,C,S))}function Jn(h){Xn.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Jn,Xn);var Mw=/^https?$/i,cg=["POST","PUT"];n=Jn.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,C,S,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);C=C?C.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():de.g(),this.v=this.o?cu(this.o):cu(de),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(C,String(h),!0),this.B=!1}catch(ge){lg(this,ge);return}if(h=S||"",S=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var oe in L)S.set(oe,L[oe]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(let ge of L.keys())S.set(ge,L.get(ge));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(S.keys()).find(ge=>ge.toLowerCase()=="content-type"),oe=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(cg,C,void 0))||L||oe||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[ge,Oe]of S)this.g.setRequestHeader(ge,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wc(this),this.u=!0,this.g.send(h),this.u=!1}catch(ge){lg(this,ge)}};function lg(h,C){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=C,h.m=5,oo(h),vu(h)}function oo(h){h.A||(h.A=!0,Ln(h,"complete"),Ln(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Ln(this,"complete"),Ln(this,"abort"),vu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vu(this,!0)),Jn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ug(this):this.bb())},n.bb=function(){ug(this)};function ug(h){if(h.h&&typeof o<"u"&&(!h.v[1]||ao(h)!=4||h.Z()!=2)){if(h.u&&ao(h)==4)Dr(h.Ea,0,h);else if(Ln(h,"readystatechange"),ao(h)==4){h.h=!1;try{let Oe=h.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var S;if(!(S=C)){var L;if(L=Oe===0){var oe=String(h.D).match(du)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),L=!Mw.test(oe?oe.toLowerCase():"")}S=L}if(S)Ln(h,"complete"),Ln(h,"success");else{h.m=6;try{var ge=2<ao(h)?h.g.statusText:""}catch{ge=""}h.l=ge+" ["+h.Z()+"]",oo(h)}}finally{vu(h)}}}}function vu(h,C){if(h.g){Wc(h);let S=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,C||Ln(h,"ready");try{S.onreadystatechange=L}catch{}}}function Wc(h){h.I&&(a.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ao(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ao(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var C=this.g.responseText;return h&&C.indexOf(h)==0&&(C=C.substring(h.length)),s0(C)}};function dg(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Rw(h){let C={};h=(h.g&&2<=ao(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(k(h[L]))continue;var S=N(h[L]);let oe=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();let ge=C[oe]||[];C[oe]=ge,ge.push(S)}D(C,function(L){return L.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qc(h,C,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||C}function ja(h){this.Aa=0,this.i=[],this.j=new Ba,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qc("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qc("baseRetryDelayMs",5e3,h),this.cb=qc("retryDelaySeedMs",1e4,h),this.Wa=qc("forwardChannelMaxRetries",2,h),this.wa=qc("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Vs(h&&h.concurrentRequestLimit),this.Da=new sg,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ja.prototype,n.la=8,n.G=1,n.connect=function(h,C,S,L){Cr(0),this.W=h,this.H=C||{},S&&L!==void 0&&(this.H.OSID=S,this.H.OAID=L),this.F=this.X,this.I=Jd(this,null,this.W),Xd(this)};function l0(h){if(fg(h),h.G==3){var C=h.U++,S=io(h.I);if(An(S,"SID",h.K),An(S,"RID",C),An(S,"TYPE","terminate"),_u(h,S),C=new ce(h,h.j,C),C.L=2,C.v=fu(io(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(C.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=C.v,S=!0),S||(C.g=f0(C.j,null),C.g.ea(C.v)),C.F=Date.now(),st(C)}_g(h)}function Yd(h){h.g&&(Gc(h),h.g.cancel(),h.g=null)}function fg(h){Yd(h),h.u&&(a.clearTimeout(h.u),h.u=null),Zd(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Xd(h){if(!jo(h.h)&&!h.s){h.s=!0;var C=h.Ga;ut||Ft(),Ut||(ut(),Ut=!0),It.add(C,h),h.B=0}}function Pw(h,C){return Li(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=C.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Va(m(h.Ga,h,C),vg(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;let oe=new ce(this,this.j,h),ge=this.o;if(this.S&&(ge?(ge=T(ge),F(ge,this.S)):ge=this.S),this.m!==null||this.O||(oe.H=ge,ge=null),this.P)e:{for(var C=0,S=0;S<this.i.length;S++){t:{var L=this.i[S];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(C+=L,4096<C){C=S;break e}if(C===4096||S===this.i.length-1){C=S+1;break e}}C=1e3}else C=1e3;C=pg(this,oe,C),S=io(this.I),An(S,"RID",h),An(S,"CVER",22),this.D&&An(S,"X-HTTP-Session-Id",this.D),_u(this,S),ge&&(this.O?C="headers="+encodeURIComponent(String(ag(ge)))+"&"+C:this.m&&Ho(S,this.m,ge)),Wd(this.h,oe),this.Ua&&An(S,"TYPE","init"),this.P?(An(S,"$req",C),An(S,"SID","null"),oe.T=!0,Ee(oe,S,null)):Ee(oe,S,C),this.G=2}}else this.G==3&&(h?hg(this,h):this.i.length==0||jo(this.h)||hg(this))};function hg(h,C){var S;C?S=C.l:S=h.U++;let L=io(h.I);An(L,"SID",h.K),An(L,"RID",S),An(L,"AID",h.T),_u(h,L),h.m&&h.o&&Ho(L,h.m,h.o),S=new ce(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),C&&(h.i=C.D.concat(h.i)),C=pg(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wd(h.h,S),Ee(S,L,C)}function _u(h,C){h.H&&te(h.H,function(S,L){An(C,L,S)}),h.l&&uu({},function(S,L){An(C,L,S)})}function pg(h,C,S){S=Math.min(h.i.length,S);var L=h.l?m(h.l.Na,h.l,h):null;e:{var oe=h.i;let ge=-1;for(;;){let Oe=["count="+S];ge==-1?0<S?(ge=oe[0].g,Oe.push("ofs="+ge)):ge=0:Oe.push("ofs="+ge);let qt=!0;for(let qr=0;qr<S;qr++){let Gt=oe[qr].g,ti=oe[qr].map;if(Gt-=ge,0>Gt)ge=Math.max(0,oe[qr].g-100),qt=!1;else try{kw(ti,Oe,"req"+Gt+"_")}catch{L&&L(ti)}}if(qt){L=Oe.join("&");break e}}}return h=h.i.splice(0,S),C.D=h,L}function mg(h){if(!h.g&&!h.u){h.Y=1;var C=h.Fa;ut||Ft(),Ut||(ut(),Ut=!0),It.add(C,h),h.v=0}}function u0(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Va(m(h.Fa,h),vg(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,d0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Va(m(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Cr(10),Yd(this),d0(this))};function Gc(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function d0(h){h.g=new ce(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var C=io(h.qa);An(C,"RID","rpc"),An(C,"SID",h.K),An(C,"AID",h.T),An(C,"CI",h.F?"0":"1"),!h.F&&h.ja&&An(C,"TO",h.ja),An(C,"TYPE","xmlhttp"),_u(h,C),h.m&&h.o&&Ho(C,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=fu(io(C)),S.m=null,S.P=!0,qe(S,h)}n.Za=function(){this.C!=null&&(this.C=null,Yd(this),u0(this),Cr(19))};function Zd(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function gg(h,C){var S=null;if(h.g==C){Zd(h),Gc(h),h.g=null;var L=2}else if(zd(h.h,C))S=C.D,a0(h.h,C),L=1;else return;if(h.G!=0){if(C.o)if(L==1){S=C.m?C.m.length:0,C=Date.now()-C.F;var oe=h.B;L=Vc(),Ln(L,new Bc(L,S)),Xd(h)}else mg(h);else if(oe=C.s,oe==3||oe==0&&0<C.X||!(L==1&&Pw(h,C)||L==2&&u0(h)))switch(S&&0<S.length&&(C=h.h,C.i=C.i.concat(S)),oe){case 1:zo(h,5);break;case 4:zo(h,10);break;case 3:zo(h,6);break;default:zo(h,2)}}}function vg(h,C){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*C}function zo(h,C){if(h.j.info("Error code "+C),C==2){var S=m(h.fb,h),L=h.Xa;let oe=!L;L=new Ua(L||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gd(L,"https"),fu(L),oe?zc(L.toString(),S):Aw(L.toString(),S)}else Cr(2);h.G=0,h.l&&h.l.sa(C),_g(h),fg(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Cr(2)):(this.j.info("Failed to ping google.com"),Cr(1))};function _g(h){if(h.G=0,h.ka=[],h.l){let C=Xm(h.h);(C.length!=0||h.i.length!=0)&&(E(h.ka,C),E(h.ka,h.i),h.h.i.length=0,y(h.i),h.i.length=0),h.l.ra()}}function Jd(h,C,S){var L=S instanceof Ua?io(S):new Ua(S);if(L.g!="")C&&(L.g=C+"."+L.g),Kd(L,L.s);else{var oe=a.location;L=oe.protocol,C=C?C+"."+oe.hostname:oe.hostname,oe=+oe.port;var ge=new Ua(null);L&&Gd(ge,L),C&&(ge.g=C),oe&&Kd(ge,oe),S&&(ge.l=S),L=ge}return S=h.D,C=h.ya,S&&C&&An(L,S,C),An(L,"VER",h.la),_u(h,L),L}function f0(h,C,S){if(C&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=h.Ca&&!h.pa?new Jn(new pu({eb:S})):new Jn(h.pa),C.Ha(h.J),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function h0(){}n=h0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kc(){}Kc.prototype.g=function(h,C){return new ei(h,C)};function ei(h,C){Xn.call(this),this.g=new ja(C),this.l=h,this.h=C&&C.messageUrlParams||null,h=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(h?h["X-WebChannel-Content-Type"]=C.messageContentType:h={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(h?h["X-WebChannel-Client-Profile"]=C.va:h={"X-WebChannel-Client-Profile":C.va}),this.g.S=h,(h=C&&C.Sb)&&!k(h)&&(this.g.m=h),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!k(C)&&(this.g.D=C,h=this.h,h!==null&&C in h&&(h=this.h,C in h&&delete h[C])),this.j=new $a(this)}w(ei,Xn),ei.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){l0(this.g)},ei.prototype.o=function(h){var C=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=au(h),h=S);C.i.push(new Uo(C.Ya++,h)),C.G==3&&Xd(C)},ei.prototype.N=function(){this.g.l=null,delete this.j,l0(this.g),delete this.g,ei.aa.N.call(this)};function yg(h){Bo.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var C=h.__sm__;if(C){e:{for(let S in C){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,C=C!==null&&h in C?C[h]:void 0),this.data=C}else this.data=h}w(yg,Bo);function p0(){lu.call(this),this.status=1}w(p0,lu);function $a(h){this.g=h}w($a,h0),$a.prototype.ua=function(){Ln(this.g,"a")},$a.prototype.ta=function(h){Ln(this.g,new yg(h))},$a.prototype.sa=function(h){Ln(this.g,new p0)},$a.prototype.ra=function(){Ln(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,WS=vc.createWebChannelTransport=function(){return new Kc},zS=vc.getStatEventTarget=function(){return Vc()},HS=vc.Event=ms,A_=vc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},q.NO_ERROR=0,q.TIMEOUT=8,q.HTTP_ERROR=6,Sp=vc.ErrorCode=q,G.COMPLETE="complete",$S=vc.EventType=G,Ud.EventType=Na,Na.OPEN="a",Na.CLOSE="b",Na.ERROR="c",Na.MESSAGE="d",Xn.prototype.listen=Xn.prototype.K,rh=vc.WebChannel=Ud,FZ=vc.FetchXmlHttpFactory=pu,Jn.prototype.listenOnce=Jn.prototype.L,Jn.prototype.getLastError=Jn.prototype.Ka,Jn.prototype.getLastErrorCode=Jn.prototype.Ba,Jn.prototype.getStatus=Jn.prototype.Z,Jn.prototype.getResponseJson=Jn.prototype.Oa,Jn.prototype.getResponseText=Jn.prototype.oa,Jn.prototype.send=Jn.prototype.ea,Jn.prototype.setWithCredentials=Jn.prototype.Ha,jS=vc.XhrIo=Jn}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var BN="@firebase/firestore";var oi=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");var bh="10.14.0";var od=new bl("@firebase/firestore");function Ip(){return od.logLevel}function Je(n,...e){if(od.logLevel<=zt.DEBUG){let t=e.map(AT);od.debug(`Firestore (${bh}): ${n}`,...t)}}function _c(n,...e){if(od.logLevel<=zt.ERROR){let t=e.map(AT);od.error(`Firestore (${bh}): ${n}`,...t)}}function uh(n,...e){if(od.logLevel<=zt.WARN){let t=e.map(AT);od.warn(`Firestore (${bh}): ${n}`,...t)}}function AT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function pt(n="Unexpected state"){let e=`FIRESTORE (${bh}) INTERNAL ASSERTION FAILED: `+n;throw _c(e),new Error(e)}function _n(n,e){n||pt()}function yt(n,e){return n}var be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},We=class extends ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Co=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var F_=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},YS=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}},XS=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ZS=class{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_n(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Co;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Co,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>W(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Co)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_n(typeof r.accessToken=="string"),new F_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return _n(e===null||typeof e=="string"),new oi(e)}},JS=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},eI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new JS(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},tI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},nI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){_n(this.o===void 0);let r=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_n(typeof t.token=="string"),this.R=t.token,new tI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function OZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var O_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=OZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function sn(n,e){return n<e?-1:n>e?1:0}function dh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Lr=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new We(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new We(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new We(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ct=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Lr(0,0))}static max(){return new n(new Lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var N_=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&pt(),r===void 0?r=e.length-t:r>e.length-t&&pt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},cr=class n extends N_{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new We(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},NZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ks=class n extends N_{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return NZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new We(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new We(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new We(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new We(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var at=class n{constructor(e){this.path=e}static fromPath(e){return new n(cr.fromString(e))}static fromName(e){return new n(cr.fromString(e).popFirst(5))}static empty(){return new n(cr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new cr(e.slice()))}};var rI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};rI.UNKNOWN_ID=-1;function LZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ct.fromTimestamp(r===1e9?new Lr(t+1,0):new Lr(t,r));return new ad(i,at.empty(),e)}function VZ(n){return new ad(n.readTime,n.key,-1)}var ad=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ct.min(),at.empty(),-1)}static max(){return new n(Ct.max(),at.empty(),-1)}};function BZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=at.comparator(n.documentKey,e.documentKey),t!==0?t:sn(n.largestBatchId,e.largestBatchId))}var UZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",iI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Kp(n){return W(this,null,function*(){if(n.code!==be.FAILED_PRECONDITION||n.message!==UZ)throw n;Je("LocalStore","Unexpectedly lost primary lease")})}var Re=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&pt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function jZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qp(n){return n.name==="IndexedDbTransactionError"}var x3=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function hy(n){return n==null}function Rp(n){return n===0&&1/n==-1/0}function $Z(n){return typeof n=="number"&&Number.isInteger(n)&&!Rp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var HZ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],RIe=[...HZ,"documentOverlays"],zZ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WZ=zZ,qZ=[...WZ,"indexConfiguration","indexState","indexEntries"];var PIe=[...qZ,"globals"];function UN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pd(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var _r=class n{constructor(e,t){this.comparator=e,this.root=t||fa.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fa.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fa.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}},ah=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fa=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pt();let e=this.left.check();if(e!==this.right.check())throw pt();return e+(this.isRed()?0:1)}};fa.EMPTY=null,fa.RED=!0,fa.BLACK=!1;fa.EMPTY=new class{constructor(){this.size=0}get key(){throw pt()}get value(){throw pt()}get color(){throw pt()}get left(){throw pt()}get right(){throw pt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new fa(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ai=class n{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new L_(this.data.getIterator())}getIteratorFrom(e){return new L_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},L_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ks=class n{constructor(e){this.fields=e,e.sort(ks.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ai(ks.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dh(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var V_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Mi=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new V_("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mi.EMPTY_BYTE_STRING=new Mi("");var GZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yc(n){if(_n(!!n),typeof n=="string"){let e=0,t=GZ.exec(n);if(_n(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ir(n.seconds),nanos:ir(n.nanos)}}function ir(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fl(n){return typeof n=="string"?Mi.fromBase64String(n):Mi.fromUint8Array(n)}function kT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function MT(n){let e=n.mapValue.fields.__previous_value__;return kT(e)?MT(e):e}function Pp(n){let e=yc(n.mapValue.fields.__local_write_time__.timestampValue);return new Lr(e.seconds,e.nanos)}var sI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},B_=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var k_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function cd(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kT(n)?4:E3(n)?9007199254740991:b3(n)?10:11:pt()}function ga(n,e){if(n===e)return!0;let t=cd(n);if(t!==cd(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Pp(n).isEqual(Pp(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=yc(i.timestampValue),a=yc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Fl(i.bytesValue).isEqual(Fl(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ir(i.geoPointValue.latitude)===ir(s.geoPointValue.latitude)&&ir(i.geoPointValue.longitude)===ir(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ir(i.integerValue)===ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ir(i.doubleValue),a=ir(s.doubleValue);return o===a?Rp(o)===Rp(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return dh(n.arrayValue.values||[],e.arrayValue.values||[],ga);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(UN(o)!==UN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ga(o[c],a[c])))return!1;return!0}(n,e);default:return pt()}}function Fp(n,e){return(n.values||[]).find(t=>ga(t,e))!==void 0}function fh(n,e){if(n===e)return 0;let t=cd(n),r=cd(e);if(t!==r)return sn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return sn(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ir(s.integerValue||s.doubleValue),c=ir(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jN(n.timestampValue,e.timestampValue);case 4:return jN(Pp(n),Pp(e));case 5:return sn(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Fl(s),c=Fl(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=sn(a[l],c[l]);if(u!==0)return u}return sn(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=sn(ir(s.latitude),ir(o.latitude));return a!==0?a:sn(ir(s.longitude),ir(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return $N(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,u;let d=s.fields||{},m=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,y=sn(((l=g?.values)===null||l===void 0?void 0:l.length)||0,((u=w?.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:$N(g,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===k_.mapValue&&o===k_.mapValue)return 0;if(s===k_.mapValue)return 1;if(o===k_.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let m=sn(c[d],u[d]);if(m!==0)return m;let g=fh(a[c[d]],l[u[d]]);if(g!==0)return g}return sn(c.length,u.length)}(n.mapValue,e.mapValue);default:throw pt()}}function jN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return sn(n,e);let t=yc(n),r=yc(e),i=sn(t.seconds,r.seconds);return i!==0?i:sn(t.nanos,r.nanos)}function $N(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=fh(t[i],r[i]);if(s)return s}return sn(t.length,r.length)}function hh(n){return oI(n)}function oI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=yc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Fl(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return at.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=oI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${oI(t.fields[o])}`;return i+"}"}(n.mapValue):pt()}function HN(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aI(n){return!!n&&"integerValue"in n}function RT(n){return!!n&&"arrayValue"in n}function zN(n){return!!n&&"nullValue"in n}function WN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function R_(n){return!!n&&"mapValue"in n}function b3(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Dp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return pd(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Dp(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Dp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function E3(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var As=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!R_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dp(t)}setAll(e){let t=ks.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Dp(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());R_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ga(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];R_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pd(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Dp(this.value))}};function C3(n){let e=[];return pd(n.fields,(t,r)=>{let i=new ks([t]);if(R_(r)){let s=C3(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Ks(e)}var So=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ct.min(),Ct.min(),Ct.min(),As.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ct.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ct.min(),Ct.min(),As.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ct.min(),Ct.min(),As.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ph=class{constructor(e,t){this.position=e,this.inclusive=t}};function qN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=at.comparator(at.fromName(o.referenceValue),t.key):r=fh(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ga(n.position[t],e.position[t]))return!1;return!0}var ld=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function KZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var U_=class{},Nr=class n extends U_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lI(e,t,r):t==="array-contains"?new fI(e,r):t==="in"?new hI(e,r):t==="not-in"?new pI(e,r):t==="array-contains-any"?new mI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uI(e,r):new dI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fh(t,this.value)):t!==null&&cd(this.value)===cd(t)&&this.matchesComparison(fh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Io=class n extends U_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return S3(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function S3(n){return n.op==="and"}function I3(n){return QZ(n)&&S3(n)}function QZ(n){for(let e of n.filters)if(e instanceof Io)return!1;return!0}function cI(n){if(n instanceof Nr)return n.field.canonicalString()+n.op.toString()+hh(n.value);if(I3(n))return n.filters.map(e=>cI(e)).join(",");{let e=n.filters.map(t=>cI(t)).join(",");return`${n.op}(${e})`}}function T3(n,e){return n instanceof Nr?function(r,i){return i instanceof Nr&&r.op===i.op&&r.field.isEqual(i.field)&&ga(r.value,i.value)}(n,e):n instanceof Io?function(r,i){return i instanceof Io&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&T3(o,i.filters[a]),!0):!1}(n,e):void pt()}function D3(n){return n instanceof Nr?function(t){return`${t.field.canonicalString()} ${t.op} ${hh(t.value)}`}(n):n instanceof Io?function(t){return t.op.toString()+" {"+t.getFilters().map(D3).join(" ,")+"}"}(n):"Filter"}var lI=class extends Nr{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){let t=at.comparator(e.key,this.key);return this.matchesComparison(t)}},uI=class extends Nr{constructor(e,t){super(e,"in",t),this.keys=A3("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},dI=class extends Nr{constructor(e,t){super(e,"not-in",t),this.keys=A3("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function A3(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}var fI=class extends Nr{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return RT(t)&&Fp(t.arrayValue,this.value)}},hI=class extends Nr{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fp(this.value.arrayValue,t)}},pI=class extends Nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Fp(this.value.arrayValue,t)}},mI=class extends Nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!RT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Fp(this.value.arrayValue,r))}};var gI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function KN(n,e=null,t=[],r=[],i=null,s=null,o=null){return new gI(n,e,t,r,i,s,o)}function PT(n){let e=yt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hh(r)).join(",")),e.ue=t}return e.ue}function FT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!KZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!T3(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GN(n.startAt,e.startAt)&&GN(n.endAt,e.endAt)}function vI(n){return at.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ol=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function YZ(n,e,t,r,i,s,o,a){return new Ol(n,e,t,r,i,s,o,a)}function py(n){return new Ol(n)}function QN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k3(n){return n.collectionGroup!==null}function Ap(n){let e=yt(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ai(ks.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ld(s,r))}),t.has(ks.keyField().canonicalString())||e.ce.push(new ld(ks.keyField(),r))}return e.ce}function ha(n){let e=yt(n);return e.le||(e.le=XZ(e,Ap(n))),e.le}function XZ(n,e){if(n.limitType==="F")return KN(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ld(i.field,s)});let t=n.endAt?new ph(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new ph(n.startAt.position,n.startAt.inclusive):null;return KN(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _I(n,e){let t=n.filters.concat([e]);return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function j_(n,e,t){return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function my(n,e){return FT(ha(n),ha(e))&&n.limitType===e.limitType}function M3(n){return`${PT(ha(n))}|lt:${n.limitType}`}function ih(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>D3(i)).join(", ")}]`),hy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hh(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hh(i)).join(",")),`Target(${r})`}(ha(n))}; limitType=${n.limitType})`}function gy(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):at.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Ap(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=qN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ap(r),i)||r.endAt&&!function(o,a,c){let l=qN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ap(r),i))}(n,e)}function ZZ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R3(n){return(e,t)=>{let r=!1;for(let i of Ap(n)){let s=JZ(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JZ(n,e,t){let r=n.field.isKeyField()?at.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?fh(c,l):pt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return pt()}}var Nl=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pd(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return w3(this.inner)}size(){return this.innerSize}};var eJ=new _r(at.comparator);function xc(){return eJ}var P3=new _r(at.comparator);function Tp(...n){let e=P3;for(let t of n)e=e.insert(t.key,t);return e}function F3(n){let e=P3;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rd(){return kp()}function O3(){return kp()}function kp(){return new Nl(n=>n.toString(),(n,e)=>n.isEqual(e))}var tJ=new _r(at.comparator),nJ=new Ai(at.comparator);function Wt(...n){let e=nJ;for(let t of n)e=e.add(t);return e}var rJ=new Ai(sn);function iJ(){return rJ}function OT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rp(e)?"-0":e}}function N3(n){return{integerValue:""+n}}function sJ(n,e){return $Z(e)?N3(e):OT(n,e)}var mh=class{constructor(){this._=void 0}};function oJ(n,e,t){return n instanceof ud?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&kT(s)&&(s=MT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof dd?V3(n,e):n instanceof fd?B3(n,e):function(i,s){let o=L3(i,s),a=YN(o)+YN(i.Pe);return aI(o)&&aI(i.Pe)?N3(a):OT(i.serializer,a)}(n,e)}function aJ(n,e,t){return n instanceof dd?V3(n,e):n instanceof fd?B3(n,e):t}function L3(n,e){return n instanceof gh?function(r){return aI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ud=class extends mh{},dd=class extends mh{constructor(e){super(),this.elements=e}};function V3(n,e){let t=U3(e);for(let r of n.elements)t.some(i=>ga(i,r))||t.push(r);return{arrayValue:{values:t}}}var fd=class extends mh{constructor(e){super(),this.elements=e}};function B3(n,e){let t=U3(e);for(let r of n.elements)t=t.filter(i=>!ga(i,r));return{arrayValue:{values:t}}}var gh=class extends mh{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function YN(n){return ir(n.integerValue||n.doubleValue)}function U3(n){return RT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var yI=class{constructor(e,t){this.field=e,this.transform=t}};function cJ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof dd&&i instanceof dd||r instanceof fd&&i instanceof fd?dh(r.elements,i.elements,ga):r instanceof gh&&i instanceof gh?ga(r.Pe,i.Pe):r instanceof ud&&i instanceof ud}(n.transform,e.transform)}var xI=class{constructor(e,t){this.version=e,this.transformResults=t}},pa=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function P_(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var vh=class{};function j3(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Op(n.key,pa.none()):new hd(n.key,n.data,pa.none());{let t=n.data,r=As.empty(),i=new Ai(ks.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new va(n.key,r,new Ks(i.toArray()),pa.none())}}function lJ(n,e,t){n instanceof hd?function(i,s,o){let a=i.value.clone(),c=ZN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof va?function(i,s,o){if(!P_(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=ZN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll($3(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Mp(n,e,t,r){return n instanceof hd?function(s,o,a,c){if(!P_(s.precondition,o))return a;let l=s.value.clone(),u=JN(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof va?function(s,o,a,c){if(!P_(s.precondition,o))return a;let l=JN(s.fieldTransforms,c,o),u=o.data;return u.setAll($3(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,o,a){return P_(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function uJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=L3(r.transform,i||null);s!=null&&(t===null&&(t=As.empty()),t.set(r.field,s))}return t||null}function XN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dh(r,i,(s,o)=>cJ(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var hd=class extends vh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},va=class extends vh{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function $3(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function ZN(n,e,t){let r=new Map;_n(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,aJ(o,a,t[i]))}return r}function JN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,oJ(s,o,e))}return r}var Op=class extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wI=class extends vh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&lJ(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Mp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Mp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=O3();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=j3(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&dh(this.mutations,e.mutations,(t,r)=>XN(t,r))&&dh(this.baseMutations,e.baseMutations,(t,r)=>XN(t,r))}},EI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){_n(e.mutations.length===r.length);let i=function(){return tJ}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var CI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var SI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Fr,en;function dJ(n){switch(n){default:return pt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function H3(n){if(n===void 0)return _c("GRPC error has no .code"),be.UNKNOWN;switch(n){case Fr.OK:return be.OK;case Fr.CANCELLED:return be.CANCELLED;case Fr.UNKNOWN:return be.UNKNOWN;case Fr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Fr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Fr.INTERNAL:return be.INTERNAL;case Fr.UNAVAILABLE:return be.UNAVAILABLE;case Fr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Fr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Fr.NOT_FOUND:return be.NOT_FOUND;case Fr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Fr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Fr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Fr.ABORTED:return be.ABORTED;case Fr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Fr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Fr.DATA_LOSS:return be.DATA_LOSS;default:return pt()}}(en=Fr||(Fr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";var e3=null;function fJ(){return new TextEncoder}var hJ=new Rl([4294967295,4294967295],0);function t3(n){let e=fJ().encode(n),t=new US;return t.update(e),new Uint8Array(t.digest())}function n3(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Rl([t,r],0),new Rl([i,s],0)]}var II=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new id(`Invalid padding: ${t}`);if(r<0)throw new id(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new id(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new id(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Rl.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Rl.fromNumber(r)));return i.compare(hJ)===1&&(i=new Rl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=t3(e),[r,i]=n3(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=t3(e),[r,i]=n3(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},id=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $_=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Np.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ct.min(),i,new _r(sn),xc(),Wt())}},Np=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Wt(),Wt(),Wt())}};var ch=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},H_=class{constructor(e,t){this.targetId=e,this.me=t}},z_=class{constructor(e,t,r=Mi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},W_=class{constructor(){this.fe=0,this.ge=i3(),this.pe=Mi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),t=Wt(),r=Wt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:pt()}}),new Np(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=i3()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_n(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},TI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=xc(),this.qe=r3(),this.Qe=new _r(sn)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:pt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(vI(s))if(r===0){let o=new at(s.path);this.Ue(t,o,So.newNoDocument(o,Ct.min()))}else _n(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}e3?.et(function(u,d,m,g,w){var y,E,M,k,O,K;let Q={localCacheCount:u,existenceFilterCount:d.count,databaseId:m.database,projectId:m.projectId},te=d.unchangedNames;return te&&(Q.bloomFilter={applied:w===0,hashCount:(y=te?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(k=(M=(E=te?.bits)===null||E===void 0?void 0:E.bitmap)===null||M===void 0?void 0:M.length)!==null&&k!==void 0?k:0,padding:(K=(O=te?.bits)===null||O===void 0?void 0:O.padding)!==null&&K!==void 0?K:0,mightContain:D=>{var T;return(T=g?.mightContain(D))!==null&&T!==void 0&&T}}),Q}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Fl(r).toUint8Array()}catch(c){if(c instanceof V_)return uh("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new II(o,i,s)}catch(c){return uh(c instanceof id?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&vI(a.target)){let c=new at(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,So.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Wt();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new $_(e,t,this.Qe,this.ke,r);return this.ke=xc(),this.qe=r3(),this.Qe=new _r(sn),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new W_,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ai(sn),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new W_),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function r3(){return new _r(at.comparator)}function i3(){return new _r(at.comparator)}var pJ={asc:"ASCENDING",desc:"DESCENDING"},mJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gJ={and:"AND",or:"OR"},DI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function AI(n,e){return n.useProto3Json||hy(e)?e:{value:e}}function q_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z3(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vJ(n,e){return q_(n,e.toTimestamp())}function ma(n){return _n(!!n),Ct.fromTimestamp(function(t){let r=yc(t);return new Lr(r.seconds,r.nanos)}(n))}function NT(n,e){return kI(n,e).canonicalString()}function kI(n,e){let t=function(i){return new cr(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function W3(n){let e=cr.fromString(n);return _n(Y3(e)),e}function MI(n,e){return NT(n.databaseId,e.path)}function qS(n,e){let t=W3(e);if(t.get(1)!==n.databaseId.projectId)throw new We(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new We(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(G3(t))}function q3(n,e){return NT(n.databaseId,e)}function _J(n){let e=W3(n);return e.length===4?cr.emptyPath():G3(e)}function RI(n){return new cr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function G3(n){return _n(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function s3(n,e,t){return{name:MI(n,e),fields:t.value.mapValue.fields}}function yJ(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:pt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(_n(u===void 0||typeof u=="string"),Mi.fromBase64String(u||"")):(_n(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Mi.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?be.UNKNOWN:H3(l.code);return new We(u,l.message||"")}(o);t=new z_(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=qS(n,r.document.name),s=ma(r.document.updateTime),o=r.document.createTime?ma(r.document.createTime):Ct.min(),a=new As({mapValue:{fields:r.document.fields}}),c=So.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new ch(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=qS(n,r.document),s=r.readTime?ma(r.readTime):Ct.min(),o=So.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ch([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=qS(n,r.document),s=r.removedTargetIds||[];t=new ch([],s,i,null)}else{if(!("filter"in e))return pt();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new SI(i,s),a=r.targetId;t=new H_(a,o)}}return t}function xJ(n,e){let t;if(e instanceof hd)t={update:s3(n,e.key,e.value)};else if(e instanceof Op)t={delete:MI(n,e.key)};else if(e instanceof va)t={update:s3(n,e.key,e.data),updateMask:AJ(e.fieldMask)};else{if(!(e instanceof wI))return pt();t={verify:MI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ud)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pt()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:vJ(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pt()}(n,e.precondition)),t}function wJ(n,e){return n&&n.length>0?(_n(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ma(i.updateTime):ma(s);return o.isEqual(Ct.min())&&(o=ma(s)),new xI(o,i.transformResults||[])}(t,e))):[]}function bJ(n,e){return{documents:[q3(n,e.path)]}}function EJ(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=q3(n,i);let s=function(l){if(l.length!==0)return Q3(Io.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(u=>function(m){return{field:sh(m.field),direction:IJ(m.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=AI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function CJ(n){let e=_J(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){_n(r===1);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){let m=K3(d);return m instanceof Io&&I3(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(m=>function(w){return new ld(oh(w.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,hy(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(d){let m=!!d.before,g=d.values||[];return new ph(g,m)}(t.startAt));let l=null;return t.endAt&&(l=function(d){let m=!d.before,g=d.values||[];return new ph(g,m)}(t.endAt)),YZ(e,i,o,s,a,"F",c,l)}function SJ(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function K3(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=oh(t.unaryFilter.field);return Nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=oh(t.unaryFilter.field);return Nr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=oh(t.unaryFilter.field);return Nr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=oh(t.unaryFilter.field);return Nr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pt()}}(n):n.fieldFilter!==void 0?function(t){return Nr.create(oh(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Io.create(t.compositeFilter.filters.map(r=>K3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pt()}}(t.compositeFilter.op))}(n):pt()}function IJ(n){return pJ[n]}function TJ(n){return mJ[n]}function DJ(n){return gJ[n]}function sh(n){return{fieldPath:n.canonicalString()}}function oh(n){return ks.fromServerFormat(n.fieldPath)}function Q3(n){return n instanceof Nr?function(t){if(t.op==="=="){if(WN(t.value))return{unaryFilter:{field:sh(t.field),op:"IS_NAN"}};if(zN(t.value))return{unaryFilter:{field:sh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(WN(t.value))return{unaryFilter:{field:sh(t.field),op:"IS_NOT_NAN"}};if(zN(t.value))return{unaryFilter:{field:sh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sh(t.field),op:TJ(t.op),value:t.value}}}(n):n instanceof Io?function(t){let r=t.getFilters().map(i=>Q3(i));return r.length===1?r[0]:{compositeFilter:{op:DJ(t.op),filters:r}}}(n):pt()}function AJ(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Y3(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Lp=class n{constructor(e,t,r,i,s=Ct.min(),o=Ct.min(),a=Mi.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var PI=class{constructor(e){this.ct=e}};function kJ(n){let e=CJ({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?j_(e,e.limit,"L"):e}var G_=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ir(e.integerValue));else if("doubleValue"in e){let r=ir(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Rp(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=yc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Fl(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?E3(e)?this.dt(t,Number.MAX_SAFE_INTEGER):b3(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):pt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ir(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),at.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};G_.vt=new G_;var FI=class{constructor(){this.un=new OI}addToCollectionParentIndex(e,t){return this.un.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Re.resolve()}deleteFieldIndex(e,t){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,t){return Re.resolve()}getDocumentsMatchingTarget(e,t){return Re.resolve(null)}getIndexType(e,t){return Re.resolve(0)}getFieldIndexes(e,t){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,t){return Re.resolve(ad.min())}getMinOffsetFromCollectionGroup(e,t){return Re.resolve(ad.min())}updateCollectionGroup(e,t,r){return Re.resolve()}updateIndexEntries(e,t){return Re.resolve()}},OI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ai(cr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ai(cr.comparator)).toArray()}};var OIe=new Uint8Array(0);var da=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};da.DEFAULT_COLLECTION_PERCENTILE=10,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,da.DEFAULT=new da(41943040,da.DEFAULT_COLLECTION_PERCENTILE,da.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),da.DISABLED=new da(-1,0,0);var Vp=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var NI=class{constructor(){this.changes=new Nl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,So.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?Re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var LI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var VI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Mp(r.mutation,i,Ks.empty(),Lr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){let i=rd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Tp();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=rd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=xc(),o=kp(),a=function(){return kp()}();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof va)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),Mp(u.mutation,l,u.mutation.getFieldMask(),Lr.now())):o.set(l.key,Ks.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new LI(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let r=kp(),i=new _r((o,a)=>o-a),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Ks.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||Wt()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=O3();u.forEach(m=>{if(!s.has(m)){let g=j3(t.get(m),r.get(m));g!==null&&d.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return Re.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return at.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k3(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Re.resolve(rd()),a=-1,c=s;return o.next(l=>Re.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?Re.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{c=c.insert(u,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Wt())).next(u=>({batchId:a,changes:F3(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let i=Tp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Tp();return this.indexManager.getCollectionParents(e,s).next(a=>Re.forEach(a,c=>{let l=function(d,m){return new Ol(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,So.newInvalidDocument(u)))});let a=Tp();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&Mp(u.mutation,l,Ks.empty(),Lr.now()),gy(t,l)&&(a=a.insert(c,l))}),a})}};var BI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Re.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ma(i.createTime)}}(t)),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:kJ(i.bundledQuery),readTime:ma(i.readTime)}}(t)),Re.resolve()}};var UI=class{constructor(){this.overlays=new _r(at.comparator),this.Ir=new Map}getOverlay(e,t){return Re.resolve(this.overlays.get(t))}getOverlays(e,t){let r=rd();return Re.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Re.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Re.resolve()}getOverlaysForCollection(e,t,r){let i=rd(),s=t.length+1,o=new at(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new _r((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=s.get(l.largestBatchId);u===null&&(u=rd(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=rd(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return Re.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new CI(t,r));let s=this.Ir.get(t);s===void 0&&(s=Wt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var jI=class{constructor(){this.sessionToken=Mi.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Re.resolve()}};var Bp=class{constructor(){this.Tr=new Ai(Or.Er),this.dr=new Ai(Or.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Or(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Or(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new at(new cr([])),r=new Or(t,e),i=new Or(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new at(new cr([])),r=new Or(t,e),i=new Or(t,e+1),s=Wt();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Or(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Or=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return at.comparator(e.key,t.key)||sn(e.wr,t.wr)}static Ar(e,t){return sn(e.wr,t.wr)||at.comparator(e.key,t.key)}};var $I=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ai(Or.Er)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new bI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Or(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Re.resolve(o)}lookupMutationBatch(e,t){return Re.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return Re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Or(t,0),i=new Or(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),Re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ai(sn);return t.forEach(i=>{let s=new Or(i,0),o=new Or(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Re.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;at.isDocumentKey(s)||(s=s.child(""));let o=new Or(new at(s),0),a=new Ai(sn);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),Re.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){_n(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Re.forEach(t.mutations,i=>{let s=new Or(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Or(t,0),i=this.br.firstAfterOrEqual(r);return Re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var HI=class{constructor(e){this.Mr=e,this.docs=function(){return new _r(at.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return Re.resolve(r?r.document.mutableCopy():So.newInvalidDocument(t))}getEntries(e,t){let r=xc();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():So.newInvalidDocument(i))}),Re.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=xc(),o=t.path,a=new at(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||BZ(VZ(u),r)<=0||(i.has(u.key)||gy(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Re.resolve(s)}getAllFromCollectionGroup(e,t,r,i){pt()}Or(e,t){return Re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zI(this)}getSize(e){return Re.resolve(this.size)}},zI=class extends NI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Re.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var WI=class{constructor(e){this.persistence=e,this.Nr=new Nl(t=>PT(t),FT),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bp,this.targetCount=0,this.kr=Vp.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Re.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Vp(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.Kn(t),Re.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Re.waitFor(s).next(()=>i)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return Re.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Re.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Re.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Re.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return Re.resolve(r)}containsKey(e,t){return Re.resolve(this.Br.containsKey(t))}};var qI=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new x3(0),this.Kr=!1,this.Kr=!0,this.$r=new jI,this.referenceDelegate=e(this),this.Ur=new WI(this),this.indexManager=new FI,this.remoteDocumentCache=function(i){return new HI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new PI(t),this.Gr=new BI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $I(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);let i=new GI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Re.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},GI=class extends iI{constructor(e){super(),this.currentSequenceNumber=e}},KI=class n{constructor(e){this.persistence=e,this.Jr=new Bp,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw pt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Re.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.Xr,r=>{let i=at.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Ct.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Re.or([()=>Re.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var QI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Wt(),i=Wt();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var YI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return p4()?8:jZ(si())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new YI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ip()<=zt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",ih(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Re.resolve()):(Ip()<=zt.DEBUG&&Je("QueryEngine","Query:",ih(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ip()<=zt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",ih(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ha(t))):Re.resolve())}Yi(e,t){if(QN(t))return Re.resolve(null);let r=ha(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=j_(t,null,"F"),r=ha(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Wt(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,j_(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return QN(t)||i.isEqual(Ct.min())?Re.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?Re.resolve(null):(Ip()<=zt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ih(t)),this.rs(e,o,t,LZ(i,-1)).next(a=>a))})}ts(e,t){let r=new Ai(R3(e));return t.forEach((i,s)=>{gy(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ip()<=zt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",ih(t)),this.Ji.getDocumentsMatchingQuery(e,t,ad.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ZI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new _r(sn),this._s=new Nl(s=>PT(s),FT),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function MJ(n,e,t,r){return new ZI(n,e,t,r)}function X3(n,e){return W(this,null,function*(){let t=yt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Wt();for(let l of i){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function RJ(n,e){let t=yt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,m=d.keys(),g=Re.resolve();return m.forEach(w=>{g=g.next(()=>u.getEntry(c,w)).next(y=>{let E=l.docVersions.get(w);_n(E!==null),y.version.compareTo(E)<0&&(d.applyToRemoteDocument(y,l),y.isValidDocument()&&(y.setReadTime(l.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Wt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Z3(n){let e=yt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function PJ(n,e){let t=yt(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((u,d)=>{let m=i.get(d);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,u.addedDocuments,d)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(Mi.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(d,g),function(y,E,M){return y.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,g,u)&&a.push(t.Ur.updateTargetData(s,g))});let c=xc(),l=Wt();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(FJ(s,o,e.documentUpdates).next(u=>{c=u.Ps,l=u.Is})),!r.isEqual(Ct.min())){let u=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return Re.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function FJ(n,e,t){let r=Wt(),i=Wt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=xc();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ct.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):Je("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function OJ(n,e){let t=yt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function NJ(n,e){let t=yt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,Re.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Lp(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function JI(n,e,t){return W(this,null,function*(){let r=yt(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Qp(o))throw o;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function o3(n,e,t){let r=yt(n),i=Ct.min(),s=Wt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=yt(c),m=d._s.get(u);return m!==void 0?Re.resolve(d.os.get(m)):d.Ur.getTargetData(l,u)}(r,o,ha(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:Ct.min(),t?s:Wt())).next(a=>(LJ(r,ZZ(e),a),{documents:a,Ts:s})))}function LJ(n,e,t){let r=n.us.get(e)||Ct.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var K_=class{constructor(){this.activeTargetIds=iJ()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var eT=class{constructor(){this.so=new K_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new K_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tT=class{_o(e){}shutdown(){}};var Q_=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var M_=null;function GS(){return M_===null?M_=function(){return 268435456+Math.round(2147483648*Math.random())}():M_++,"0x"+M_.toString(16)}var VJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nT=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Di="WebChannelConnection",rT=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=GS(),c=this.xo(t,r.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(u=>(Je("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw uh("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=VJ[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=GS();return new Promise((o,a)=>{let c=new jS;c.setWithCredentials(!0),c.listenOnce($S.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Sp.NO_ERROR:let u=c.getResponseJson();Je(Di,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Sp.TIMEOUT:Je(Di,`RPC '${e}' ${s} timed out`),a(new We(be.DEADLINE_EXCEEDED,"Request time out"));break;case Sp.HTTP_ERROR:let d=c.getStatus();if(Je(Di,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let g=m?.error;if(g&&g.status&&g.message){let w=function(E){let M=E.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(M)>=0?M:be.UNKNOWN}(g.status);a(new We(w,g.message))}else a(new We(be.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new We(be.UNAVAILABLE,"Connection failed."));break;default:pt()}}finally{Je(Di,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);Je(Di,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=GS(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WS(),a=zS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=s.join("");Je(Di,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=o.createWebChannel(u,c),m=!1,g=!1,w=new nT({Io:E=>{g?Je(Di,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(m||(Je(Di,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),Je(Di,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},To:()=>d.close()}),y=(E,M,k)=>{E.listen(M,O=>{try{k(O)}catch(K){setTimeout(()=>{throw K},0)}})};return y(d,rh.EventType.OPEN,()=>{g||(Je(Di,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),y(d,rh.EventType.CLOSE,()=>{g||(g=!0,Je(Di,`RPC '${e}' stream ${i} transport closed`),w.So())}),y(d,rh.EventType.ERROR,E=>{g||(g=!0,uh(Di,`RPC '${e}' stream ${i} transport errored:`,E),w.So(new We(be.UNAVAILABLE,"The operation could not be completed")))}),y(d,rh.EventType.MESSAGE,E=>{var M;if(!g){let k=E.data[0];_n(!!k);let O=k,K=O.error||((M=O[0])===null||M===void 0?void 0:M.error);if(K){Je(Di,`RPC '${e}' stream ${i} received error:`,K);let Q=K.status,te=function(A){let F=Fr[A];if(F!==void 0)return H3(F)}(Q),D=K.message;te===void 0&&(te=be.INTERNAL,D="Unknown error status: "+Q+" with message "+K.message),g=!0,w.So(new We(te,D)),d.close()}else Je(Di,`RPC '${e}' stream ${i} received:`,k),w.bo(k)}}),y(a,HS.STAT_EVENT,E=>{E.stat===A_.PROXY?Je(Di,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===A_.NOPROXY&&Je(Di,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function KS(){return typeof document<"u"?document:null}function vy(n){return new DI(n,!0)}var Y_=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var X_=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Y_(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return W(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return W(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return W(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(_c(t.toString()),_c("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new We(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>W(this,null,function*(){this.state=0,this.start()}))}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iT=class extends X_{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=yJ(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ct.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Ct.min():o.readTime?ma(o.readTime):Ct.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=RI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=vI(c)?{documents:bJ(s,c)}:{query:EJ(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=z3(s,o.resumeToken);let l=AI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Ct.min())>0){a.readTime=q_(s,o.snapshotVersion.toTimestamp());let l=AI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=SJ(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=RI(this.serializer),t.removeTarget=e,this.a_(t)}},sT=class extends X_{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return _n(!!e.streamToken),this.lastStreamToken=e.streamToken,_n(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=wJ(e.writeResults,e.commitTime),r=ma(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=RI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xJ(this.serializer,r))};this.a_(t)}};var oT=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new We(be.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,kI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(be.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,kI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new We(be.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},aT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(_c(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var cT=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>W(this,null,function*(){md(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),yield function(c){return W(this,null,function*(){let l=yt(c);l.L_.add(4),yield Yp(l),l.q_.set("Unknown"),l.L_.delete(4),yield _y(l)})}(this))}))}),this.q_=new aT(r,i)}};function _y(n){return W(this,null,function*(){if(md(n))for(let e of n.B_)yield e(!0)})}function Yp(n){return W(this,null,function*(){for(let e of n.B_)yield e(!1)})}function J3(n,e){let t=yt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),UT(t)?BT(t):Eh(t).r_()&&VT(t,e))}function LT(n,e){let t=yt(n),r=Eh(t);t.N_.delete(e),r.r_()&&e5(t,e),t.N_.size===0&&(r.r_()?r.o_():md(t)&&t.q_.set("Unknown"))}function VT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eh(n).A_(e)}function e5(n,e){n.Q_.xe(e),Eh(n).R_(e)}function BT(n){n.Q_=new TI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Eh(n).start(),n.q_.v_()}function UT(n){return md(n)&&!Eh(n).n_()&&n.N_.size>0}function md(n){return yt(n).L_.size===0}function t5(n){n.Q_=void 0}function BJ(n){return W(this,null,function*(){n.q_.set("Online")})}function UJ(n){return W(this,null,function*(){n.N_.forEach((e,t)=>{VT(n,e)})})}function jJ(n,e){return W(this,null,function*(){t5(n),UT(n)?(n.q_.M_(e),BT(n)):n.q_.set("Unknown")})}function $J(n,e,t){return W(this,null,function*(){if(n.q_.set("Online"),e instanceof z_&&e.state===2&&e.cause)try{yield function(i,s){return W(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Z_(n,r)}else if(e instanceof ch?n.Q_.Ke(e):e instanceof H_?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ct.min()))try{let r=yield Z3(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.N_.get(l);u&&s.N_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.N_.get(c);if(!u)return;s.N_.set(c,u.withResumeToken(Mi.EMPTY_BYTE_STRING,u.snapshotVersion)),e5(s,c);let d=new Lp(u.target,c,l,u.sequenceNumber);VT(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),yield Z_(n,r)}})}function Z_(n,e,t){return W(this,null,function*(){if(!Qp(e))throw e;n.L_.add(1),yield Yp(n),n.q_.set("Offline"),t||(t=()=>Z3(n.localStore)),n.asyncQueue.enqueueRetryable(()=>W(this,null,function*(){Je("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield _y(n)}))})}function n5(n,e){return e().catch(t=>Z_(n,t,e))}function yy(n){return W(this,null,function*(){let e=yt(n),t=Ll(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HJ(e);)try{let i=yield OJ(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,zJ(e,i)}catch(i){yield Z_(e,i)}r5(e)&&i5(e)})}function HJ(n){return md(n)&&n.O_.length<10}function zJ(n,e){n.O_.push(e);let t=Ll(n);t.r_()&&t.V_&&t.m_(e.mutations)}function r5(n){return md(n)&&!Ll(n).n_()&&n.O_.length>0}function i5(n){Ll(n).start()}function WJ(n){return W(this,null,function*(){Ll(n).p_()})}function qJ(n){return W(this,null,function*(){let e=Ll(n);for(let t of n.O_)e.m_(t.mutations)})}function GJ(n,e,t){return W(this,null,function*(){let r=n.O_.shift(),i=EI.from(r,e,t);yield n5(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield yy(n)})}function KJ(n,e){return W(this,null,function*(){e&&Ll(n).V_&&(yield function(r,i){return W(this,null,function*(){if(function(o){return dJ(o)&&o!==be.ABORTED}(i.code)){let s=r.O_.shift();Ll(r).s_(),yield n5(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield yy(r)}})}(n,e)),r5(n)&&i5(n)})}function a3(n,e){return W(this,null,function*(){let t=yt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");let r=md(t);t.L_.add(3),yield Yp(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield _y(t)})}function QJ(n,e){return W(this,null,function*(){let t=yt(n);e?(t.L_.delete(2),yield _y(t)):e||(t.L_.add(2),yield Yp(t),t.q_.set("Unknown"))})}function Eh(n){return n.K_||(n.K_=function(t,r,i){let s=yt(t);return s.w_(),new iT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:BJ.bind(null,n),Ro:UJ.bind(null,n),mo:jJ.bind(null,n),d_:$J.bind(null,n)}),n.B_.push(e=>W(this,null,function*(){e?(n.K_.s_(),UT(n)?BT(n):n.q_.set("Unknown")):(yield n.K_.stop(),t5(n))}))),n.K_}function Ll(n){return n.U_||(n.U_=function(t,r,i){let s=yt(t);return s.w_(),new sT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WJ.bind(null,n),mo:KJ.bind(null,n),f_:qJ.bind(null,n),g_:GJ.bind(null,n)}),n.B_.push(e=>W(this,null,function*(){e?(n.U_.s_(),yield yy(n)):(yield n.U_.stop(),n.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var lT=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Co,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new We(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function jT(n,e){if(_c("AsyncQueue",`${e}: ${n}`),Qp(n))return new We(be.UNAVAILABLE,`${e}: ${n}`);throw n}var J_=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=Tp(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var ey=class{constructor(){this.W_=new _r(at.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):pt():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},_h=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,J_.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&my(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var uT=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},dT=class{constructor(){this.queries=c3(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=yt(t),s=i.queries;i.queries=c3(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new We(be.ABORTED,"Firestore shutting down"))}};function c3(){return new Nl(n=>M3(n),my)}function $T(n,e){return W(this,null,function*(){let t=yt(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uT,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=jT(o,`Initialization of query '${ih(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&zT(t)})}function HT(n,e){return W(this,null,function*(){let t=yt(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function YJ(n,e){let t=yt(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&zT(t)}function XJ(n,e,t){let r=yt(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function zT(n){n.Y_.forEach(e=>{e.next()})}var fT,l3;(l3=fT||(fT={})).ea="default",l3.Cache="cache";var Up=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _h(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=_h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fT.Cache}};var ty=class{constructor(e){this.key=e}},ny=class{constructor(e){this.key=e}},hT=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=R3(e),this.Ra=new J_(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new ey,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let m=i.get(u),g=gy(this.query,d)?d:null,w=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),E=!1;m&&g?m.data.isEqual(g.data)?w!==y&&(r.track({type:3,doc:g}),E=!0):this.ga(m,g)||(r.track({type:2,doc:g}),E=!0,(c&&this.Aa(g,c)>0||l&&this.Aa(g,l)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),E=!0):m&&!g&&(r.track({type:1,doc:m}),E=!0,(c||l)&&(a=!0)),E&&(g?(o=o.add(g),s=y?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((u,d)=>function(g,w){let y=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pt()}};return y(g)-y(w)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new _h(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ey,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Wt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ny(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ty(r))}),t}ba(e){this.Ta=e.Ts,this.da=Wt();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return _h.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},mT=class{constructor(e){this.key=e,this.va=!1}},gT=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nl(a=>M3(a),my),this.Ma=new Map,this.xa=new Set,this.Oa=new _r(at.comparator),this.Na=new Map,this.La=new Bp,this.Ba={},this.ka=new Map,this.qa=Vp.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function ZJ(n,e,t=!0){return W(this,null,function*(){let r=u5(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield s5(r,e,t,!0),i})}function JJ(n,e){return W(this,null,function*(){let t=u5(n);yield s5(t,e,!0,!1)})}function s5(n,e,t,r){return W(this,null,function*(){let i=yield NJ(n.localStore,ha(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield eee(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&J3(n.remoteStore,i),a})}function eee(n,e,t,r,i){return W(this,null,function*(){n.Ka=(d,m,g)=>function(y,E,M,k){return W(this,null,function*(){let O=E.view.ma(M);O.ns&&(O=yield o3(y.localStore,E.query,!1).then(({documents:D})=>E.view.ma(D,O)));let K=k&&k.targetChanges.get(E.targetId),Q=k&&k.targetMismatches.get(E.targetId)!=null,te=E.view.applyChanges(O,y.isPrimaryClient,K,Q);return d3(y,E.targetId,te.wa),te.snapshot})}(n,d,m,g);let s=yield o3(n.localStore,e,!0),o=new hT(e,s.Ts),a=o.ma(s.documents),c=Np.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);d3(n,t,l.wa);let u=new pT(e,t,o);return n.Fa.set(e,u),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function tee(n,e,t){return W(this,null,function*(){let r=yt(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!my(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield JI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&LT(r.remoteStore,i.targetId),vT(r,i.targetId)}).catch(Kp))):(vT(r,i.targetId),yield JI(r.localStore,i.targetId,!0))})}function nee(n,e){return W(this,null,function*(){let t=yt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),LT(t.remoteStore,r.targetId))})}function ree(n,e,t){return W(this,null,function*(){let r=uee(n);try{let i=yield function(o,a){let c=yt(o),l=Lr.now(),u=a.reduce((g,w)=>g.add(w.key),Wt()),d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=xc(),y=Wt();return c.cs.getEntries(g,u).next(E=>{w=E,w.forEach((M,k)=>{k.isValidDocument()||(y=y.add(M))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(E=>{d=E;let M=[];for(let k of a){let O=uJ(k,d.get(k.key).overlayedDocument);O!=null&&M.push(new va(k.key,O,C3(O.value.mapValue),pa.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,M,a)}).next(E=>{m=E;let M=E.applyToLocalDocumentSet(d,y);return c.documentOverlayCache.saveOverlays(g,E.batchId,M)})}).then(()=>({batchId:m.batchId,changes:F3(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new _r(sn)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Xp(r,i.changes),yield yy(r.remoteStore)}catch(i){let s=jT(i,"Failed to persist write");t.reject(s)}})}function o5(n,e){return W(this,null,function*(){let t=yt(n);try{let r=yield PJ(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(_n(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?_n(o.va):i.removedDocuments.size>0&&(_n(o.va),o.va=!1))}),yield Xp(t,r,e)}catch(r){yield Kp(r)}})}function u3(n,e,t){let r=yt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=yt(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let m of d.j_)m.Z_(a)&&(l=!0)}),l&&zT(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iee(n,e,t){return W(this,null,function*(){let r=yt(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new _r(at.comparator);o=o.insert(s,So.newNoDocument(s,Ct.min()));let a=Wt().add(s),c=new $_(Ct.min(),new Map,new _r(sn),o,a);yield o5(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),WT(r)}else yield JI(r.localStore,e,!1).then(()=>vT(r,e,t)).catch(Kp)})}function see(n,e){return W(this,null,function*(){let t=yt(n),r=e.batch.batchId;try{let i=yield RJ(t.localStore,e);c5(t,r,null),a5(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xp(t,i)}catch(i){yield Kp(i)}})}function oee(n,e,t){return W(this,null,function*(){let r=yt(n);try{let i=yield function(o,a){let c=yt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(_n(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);c5(r,e,t),a5(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xp(r,i)}catch(i){yield Kp(i)}})}function a5(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function c5(n,e,t){let r=yt(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function vT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||l5(n,r)})}function l5(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(LT(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),WT(n))}function d3(n,e,t){for(let r of t)r instanceof ty?(n.La.addReference(r.key,e),aee(n,r)):r instanceof ny?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||l5(n,r.key)):pt()}function aee(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.xa.add(r),WT(n))}function WT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new at(cr.fromString(e)),r=n.qa.next();n.Na.set(r,new mT(t)),n.Oa=n.Oa.insert(t,r),J3(n.remoteStore,new Lp(ha(py(t.path)),r,"TargetPurposeLimboResolution",x3.oe))}}function Xp(n,e,t){return W(this,null,function*(){let r=yt(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let d=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){i.push(l);let d=QI.Wi(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return W(this,null,function*(){let u=yt(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Re.forEach(l,m=>Re.forEach(m.$i,g=>u.persistence.referenceDelegate.addReference(d,m.targetId,g)).next(()=>Re.forEach(m.Ui,g=>u.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))}catch(d){if(!Qp(d))throw d;Je("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let m=d.targetId;if(!d.fromCache){let g=u.os.get(m),w=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(w);u.os=u.os.insert(m,y)}}})}(r.localStore,s))})}function cee(n,e){return W(this,null,function*(){let t=yt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());let r=yield X3(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new We(be.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xp(t,r.hs)}})}function lee(n,e){let t=yt(n),r=t.Na.get(e);if(r&&r.va)return Wt().add(r.key);{let i=Wt(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function u5(n){let e=yt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=o5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iee.bind(null,e),e.Ca.d_=YJ.bind(null,e.eventManager),e.Ca.$a=XJ.bind(null,e.eventManager),e}function uee(n){let e=yt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=see.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oee.bind(null,e),e}var f3=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return W(this,null,function*(){this.serializer=vy(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return MJ(this.persistence,new XI,t.initialUser,this.serializer)}Ga(t){return new qI(KI.Zr,this.serializer)}Wa(t){return new eT}terminate(){return W(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var dee=(()=>{class n{initialize(t,r){return W(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=cee.bind(null,this.syncEngine),yield QJ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new dT}()}createDatastore(t){let r=vy(t.databaseInfo.databaseId),i=function(o){return new rT(o)}(t.databaseInfo);return function(o,a,c,l){return new oT(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new cT(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>u3(this.syncEngine,r,0),function(){return Q_.D()?new Q_:new tT}())}createSyncEngine(t,r){return function(s,o,a,c,l,u,d){let m=new gT(s,o,a,c,l,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return W(this,null,function*(){var t,r;yield function(s){return W(this,null,function*(){let o=yt(s);Je("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Yp(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var jp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):_c("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _T=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=O_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>W(this,null,function*(){Je("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(Je("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Co;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>W(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=jT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function QS(n,e){return W(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>W(this,null,function*(){r.isEqual(i)||(yield X3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function h3(n,e){return W(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield fee(n);Je("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>a3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>a3(e.remoteStore,i)),n._onlineComponents=e})}function fee(n){return W(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{yield QS(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===be.FAILED_PRECONDITION||i.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;uh("Error using user provided cache. Falling back to memory cache: "+t),yield QS(n,new f3)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),yield QS(n,new f3);return n._offlineComponents})}function d5(n){return W(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),yield h3(n,n._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),yield h3(n,new dee))),n._onlineComponents})}function hee(n){return d5(n).then(e=>e.syncEngine)}function ry(n){return W(this,null,function*(){let e=yield d5(n),t=e.eventManager;return t.onListen=ZJ.bind(null,e.syncEngine),t.onUnlisten=tee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JJ.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nee.bind(null,e.syncEngine),t})}function pee(n,e,t={}){let r=new Co;return n.asyncQueue.enqueueAndForget(()=>W(this,null,function*(){return function(s,o,a,c,l){let u=new jp({next:m=>{u.Za(),o.enqueueAndForget(()=>HT(s,d));let g=m.docs.has(a);!g&&m.fromCache?l.reject(new We(be.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?l.reject(new We(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),d=new Up(py(a.path),u,{includeMetadataChanges:!0,_a:!0});return $T(s,d)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function mee(n,e,t={}){let r=new Co;return n.asyncQueue.enqueueAndForget(()=>W(this,null,function*(){return function(s,o,a,c,l){let u=new jp({next:m=>{u.Za(),o.enqueueAndForget(()=>HT(s,d)),m.fromCache&&c.source==="server"?l.reject(new We(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),d=new Up(a,u,{includeMetadataChanges:!0,_a:!0});return $T(s,d)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function f5(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var p3=new Map;function h5(n,e,t){if(!t)throw new We(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gee(n,e,t,r){if(e===!0&&r===!0)throw new We(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function m3(n){if(!at.isDocumentKey(n))throw new We(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function g3(n){if(at.isDocumentKey(n))throw new We(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":pt()}function is(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new We(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=xy(n);throw new We(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vee(n,e){if(e<=0)throw new We(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var iy=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new We(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new We(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gee("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=f5((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new We(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new We(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new We(be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yh=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new We(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new We(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YS;switch(r.type){case"firstParty":return new eI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new We(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return W(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=p3.get(t);r&&(Je("ComponentProvider","Removing Datastore"),p3.delete(t),r.terminate())}(this),Promise.resolve()}};function p5(n,e,t,r={}){var i;let s=(n=is(n,yh))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&uh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=oi.MOCK_USER;else{a=c4(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new We(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new oi(l)}n._authCredentials=new XS(new F_(a,c))}}var wc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ki=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Pl=class n extends wc{constructor(e,t,r){super(e,t,py(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new at(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function m5(n,e,...t){if(n=nr(n),h5("collection","path",e),n instanceof yh){let r=cr.fromString(e,...t);return g3(r),new Pl(n,null,r)}{if(!(n instanceof ki||n instanceof Pl))throw new We(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(cr.fromString(e,...t));return g3(r),new Pl(n.firestore,null,r)}}function qT(n,e,...t){if(n=nr(n),arguments.length===1&&(e=O_.newId()),h5("doc","path",e),n instanceof yh){let r=cr.fromString(e,...t);return m3(r),new ki(n,null,new at(r))}{if(!(n instanceof ki||n instanceof Pl))throw new We(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(cr.fromString(e,...t));return m3(r),new ki(n.firestore,n instanceof Pl?n.converter:null,new at(r))}}var sy=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Y_(this,"async_queue_retry"),this.Vu=()=>{let r=KS();r&&Je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=KS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=KS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Co;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return W(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Qp(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _c("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=lT.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pt()}verifyOperationInProgress(){}wu(){return W(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function v3(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var To=class extends yh{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new sy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return W(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sy(e),this._firestoreClient=void 0,yield e}})}};function g5(n,e){let t=typeof n=="object"?n:Sl(),r=typeof n=="string"?n:e||"(default)",i=Qu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=n_("firestore");s&&p5(i,...s)}return i}function wy(n){if(n._terminated)throw new We(be.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_ee(n),n._firestoreClient}function _ee(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,u){return new sI(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,f5(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new _T(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var $p=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Mi.fromBase64String(e))}catch(t){throw new We(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var xh=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new We(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ks(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wh=class{constructor(e){this._methodName=e}};var Hp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new We(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new We(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}};var zp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var yee=/^__.*__$/,yT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new va(e,this.data,this.fieldMask,t,this.fieldTransforms):new hd(e,this.data,t,this.fieldTransforms)}},oy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new va(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function v5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pt()}}var xT=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cy(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(v5(this.Cu)&&yee.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},wT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vy(e)}Qu(e,t,r,i=!1){return new xT({Cu:e,methodName:t,qu:r,path:ks.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function by(n){let e=n._freezeSettings(),t=vy(n._databaseId);return new wT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _5(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);GT("Data must be an object, but it was:",o,r);let a=y5(r,o),c,l;if(s.merge)c=new Ks(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let m=ET(e,d,t);if(!o.contains(m))throw new We(be.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);w5(u,m)||u.push(m)}c=new Ks(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new yT(new As(a),c,l)}var ay=class n extends wh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};var bT=class n extends wh{_toFieldTransform(e){return new yI(e.path,new ud)}isEqual(e){return e instanceof n}};function xee(n,e,t,r){let i=n.Qu(1,e,t);GT("Data must be an object, but it was:",i,r);let s=[],o=As.empty();pd(r,(c,l)=>{let u=KT(e,c,t);l=nr(l);let d=i.Nu(u);if(l instanceof ay)s.push(u);else{let m=Zp(l,d);m!=null&&(s.push(u),o.set(u,m))}});let a=new Ks(s);return new oy(o,a,i.fieldTransforms)}function wee(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[ET(e,r,t)],c=[i];if(s.length%2!=0)throw new We(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(ET(e,s[m])),c.push(s[m+1]);let l=[],u=As.empty();for(let m=a.length-1;m>=0;--m)if(!w5(l,a[m])){let g=a[m],w=c[m];w=nr(w);let y=o.Nu(g);if(w instanceof ay)l.push(g);else{let E=Zp(w,y);E!=null&&(l.push(g),u.set(g,E))}}let d=new Ks(l);return new oy(u,d,o.fieldTransforms)}function bee(n,e,t,r=!1){return Zp(t,n.Qu(r?4:3,e))}function Zp(n,e){if(x5(n=nr(n)))return GT("Unsupported field value:",e,n),y5(n,e);if(n instanceof wh)return function(r,i){if(!v5(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Zp(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sJ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Lr.fromDate(r);return{timestampValue:q_(i.serializer,s)}}if(r instanceof Lr){let s=new Lr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:q_(i.serializer,s)}}if(r instanceof Hp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $p)return{bytesValue:z3(i.serializer,r._byteString)};if(r instanceof ki){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:NT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof zp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return OT(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xy(r)}`)}(n,e)}function y5(n,e){let t={};return w3(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pd(n,(r,i)=>{let s=Zp(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function x5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lr||n instanceof Hp||n instanceof $p||n instanceof ki||n instanceof wh||n instanceof zp)}function GT(n,e,t){if(!x5(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=xy(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function ET(n,e,t){if((e=nr(e))instanceof xh)return e._internalPath;if(typeof e=="string")return KT(n,e);throw cy("Field path arguments must be of type string or ",n,!1,void 0,t)}var Eee=new RegExp("[~\\*/\\[\\]]");function KT(n,e,t){if(e.search(Eee)>=0)throw cy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xh(...e.split("."))._internalPath}catch{throw cy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cy(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new We(be.INVALID_ARGUMENT,a+n+c)}function w5(n,e){return n.some(t=>t.isEqual(e))}var ly=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new CT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ey("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},CT=class extends ly{data(){return super.data()}};function Ey(n,e){return typeof e=="string"?KT(n,e):e instanceof xh?e._internalPath:e._delegate._internalPath}function b5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new We(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Wp=class{},qp=class extends Wp{};function E5(n,e,...t){let r=[];e instanceof Wp&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof ST).length,a=s.filter(c=>c instanceof uy).length;if(o>1||o>0&&a>0)throw new We(be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var uy=class n extends qp{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return T5(e._query,t),new wc(e.firestore,e.converter,_I(e._query,t))}_parse(e){let t=by(e.firestore);return function(s,o,a,c,l,u,d){let m;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new We(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){y3(d,u);let g=[];for(let w of d)g.push(_3(c,s,w));m={arrayValue:{values:g}}}else m=_3(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||y3(d,u),m=bee(a,o,d,u==="in"||u==="not-in");return Nr.create(l,u,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function C5(n,e,t){let r=e,i=Ey("where",n);return uy._create(i,r,t)}var ST=class n extends Wp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Io.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)T5(o,c),o=_I(o,c)}(e._query,t),new wc(e.firestore,e.converter,_I(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var IT=class n extends qp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new We(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new We(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ld(s,o)}(e._query,this._field,this._direction);return new wc(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ol(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function S5(n,e="asc"){let t=e,r=Ey("orderBy",n);return IT._create(r,t)}var TT=class n extends qp{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new wc(e.firestore,e.converter,j_(e._query,this._limit,this._limitType))}};function I5(n){return vee("limit",n),TT._create("limit",n,"F")}function _3(n,e,t){if(typeof(t=nr(t))=="string"){if(t==="")throw new We(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k3(e)&&t.indexOf("/")!==-1)throw new We(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(cr.fromString(t));if(!at.isDocumentKey(r))throw new We(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return HN(n,new at(r))}if(t instanceof ki)return HN(n,t._key);throw new We(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xy(t)}.`)}function y3(n,e){if(!Array.isArray(n)||n.length===0)throw new We(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function T5(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new We(be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new We(be.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var DT=class{convertValue(e,t="none"){switch(cd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw pt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return pd(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ir(o.doubleValue));return new zp(s)}convertGeoPoint(e){return new Hp(ir(e.latitude),ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=MT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pp(e));default:return null}}convertTimestamp(e){let t=yc(e);return new Lr(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=cr.fromString(e);_n(Y3(r));let i=new B_(r.get(1),r.get(3)),s=new at(r.popFirst(5));return i.isEqual(t)||_c(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function D5(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var sd=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dy=class extends ly{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ey("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},lh=class extends dy{data(e={}){return super.data(e)}},fy=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new sd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new lh(this._firestore,this._userDataWriter,r.key,r,new sd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new We(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new sd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Cee(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function Cee(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pt()}}function A5(n){n=is(n,ki);let e=is(n.firestore,To);return pee(wy(e),n._key).then(t=>O5(e,n,t))}var Gp=class extends DT{constructor(e){super(),this.firestore=e}convertBytes(e){return new $p(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,t)}};function k5(n){n=is(n,wc);let e=is(n.firestore,To),t=wy(e),r=new Gp(e);return b5(n._query),mee(t,n._query).then(i=>new fy(e,r,n,i))}function M5(n,e,t){n=is(n,ki);let r=is(n.firestore,To),i=D5(n.converter,e,t);return Sy(r,[_5(by(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,pa.none())])}function R5(n,e,t,...r){n=is(n,ki);let i=is(n.firestore,To),s=by(i),o;return o=typeof(e=nr(e))=="string"||e instanceof xh?wee(s,"updateDoc",n._key,e,t,r):xee(s,"updateDoc",n._key,e),Sy(i,[o.toMutation(n._key,pa.exists(!0))])}function P5(n){return Sy(is(n.firestore,To),[new Op(n._key,pa.none())])}function F5(n,e){let t=is(n.firestore,To),r=qT(n),i=D5(n.converter,e);return Sy(t,[_5(by(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,pa.exists(!1))]).then(()=>r)}function Cy(n,...e){var t,r,i;n=nr(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||v3(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(v3(e[o])){let d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(n instanceof ki)l=is(n.firestore,To),u=py(n._key.path),c={next:d=>{e[o]&&e[o](O5(l,n,d))},error:e[o+1],complete:e[o+2]};else{let d=is(n,wc);l=is(d.firestore,To),u=d._query;let m=new Gp(l);c={next:g=>{e[o]&&e[o](new fy(l,m,d,g))},error:e[o+1],complete:e[o+2]},b5(n._query)}return function(m,g,w,y){let E=new jp(y),M=new Up(g,E,w);return m.asyncQueue.enqueueAndForget(()=>W(this,null,function*(){return $T(yield ry(m),M)})),()=>{E.Za(),m.asyncQueue.enqueueAndForget(()=>W(this,null,function*(){return HT(yield ry(m),M)}))}}(wy(l),u,a,c)}function Sy(n,e){return function(r,i){let s=new Co;return r.asyncQueue.enqueueAndForget(()=>W(this,null,function*(){return ree(yield hee(r),i,s)})),s.promise}(wy(n),e)}function O5(n,e,t){let r=t.docs.get(e._key),i=new Gp(n);return new dy(n,i,e._key,r,new sd(t.hasPendingWrites,t.fromCache),e.converter)}function N5(){return new bT("serverTimestamp")}(function(e,t=!0){(function(i){bh=i})(Cl),ca(new rs("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new To(new ZS(r.getProvider("auth-internal")),new nI(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new We(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new B_(l.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rr(BN,"4.7.3",e),rr(BN,"4.7.3","esm2017")})();var Iy=function(){return Iy=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Iy.apply(this,arguments)};var Tee={includeMetadataChanges:!1};function L5(n,e){return e===void 0&&(e=Tee),new kt(function(t){var r=Cy(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function V5(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Iy(Iy({},r),(t={},t[e.idField]=n.id,t))}function B5(n){return L5(n,{includeMetadataChanges:!0}).pipe(je(function(e){return e.docs}))}function U5(n,e){return e===void 0&&(e={}),B5(n).pipe(je(function(t){return t.map(function(r){return V5(r,e)})}))}var rn=class{constructor(e){return e}},j5="firestore",QT=class{constructor(){return Xu(j5)}};var YT=new Ze("angularfire2.firestore-instances");function Dee(n,e){let t=eh(j5,n,e);return t&&new rn(t)}function Aee(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rn(r)}}var kee={provide:QT,deps:[[new gr,YT]]},Mee={provide:rn,useFactory:Dee,deps:[[new gr,YT],Eo]};function $5(n,...e){return rr("angularfire",dc.full,"fst"),$s([Mee,kee,{provide:YT,useFactory:Aee(n),multi:!0,deps:[$t,Rr,Tl,fc,[new gr,nd],[new gr,Il],...e]}])}var Vr=Pn(U5,!0);var yr=Pn(F5,!0);var it=Pn(m5,!0);var _a=Pn(P5,!0);var Ye=Pn(qT,!0);var ln=Pn(A5,!0);var Tr=Pn(k5,!0);var H5=Pn(g5,!0);var Jp=Pn(I5,!0);var z5=Pn(Cy,!0);var Un=Pn(S5,!0);var tn=Pn(E5,!0);var W5=Pn(N5,!0),ya=Pn(M5,!0);var St=Pn(R5,!0);var yn=Pn(C5,!0);var jn=class n{auth=le(gc);firestore=le(rn);LAST_EMAIL_KEY="lastLoginEmail";authErrorSubject=new Qr(null);authError$=this.authErrorSubject.asObservable();user$=RN(this.auth);userData$=this.user$.pipe(Ir(e=>e?this.getUserData(e.uid):Ke(null)),pr(e=>(console.error("Error loading user data:",e),Ke(null))));isAdmin$=this.userData$.pipe(je(e=>e?.role==="admin"));isWaiter$=this.userData$.pipe(je(e=>e?.role==="mesero"));isCook$=this.userData$.pipe(je(e=>e?.role==="cocinero"));isCashier$=this.userData$.pipe(je(e=>e?.role==="cobrador"));userRole$=this.userData$.pipe(je(e=>e?.role||null));constructor(){this.authErrorSubject.next(null)}login(e,t,r="session"){return W(this,null,function*(){try{this.authErrorSubject.next(null),r==="local"&&localStorage.setItem(this.LAST_EMAIL_KEY,e);let i=yield ON(this.auth,e,t);try{yield nb(this.getUserData(i.user.uid))}catch{console.warn("No se pudieron cargar los datos del usuario, pero el inicio de sesi\xF3n fue exitoso")}return i.user}catch(i){throw console.error("Error de inicio de sesi\xF3n:",i),this.authErrorSubject.next(i.message),i}})}logout(){return W(this,null,function*(){try{yield NN(this.auth)}catch(e){throw console.error("Error al cerrar sesi\xF3n:",e),e}})}getUserData(e){return new kt(t=>{let r=Ye(this.firestore,`users/${e}`);ln(r).then(i=>{i.exists()?(t.next(i.data()),t.complete()):(console.warn(`No data found for user ${e}`),t.next(null),t.complete())}).catch(i=>{console.error("Error al obtener datos del usuario:",i),t.error(i)})})}hasRole(e){return this.userRole$.pipe(je(t=>t?e.includes(t):!1))}getLastLoginEmail(){return localStorage.getItem(this.LAST_EMAIL_KEY)}createUserProfile(e,t){return W(this,null,function*(){try{let r=Ye(this.firestore,`users/${e}`);yield ya(r,Te(fe({},t),{createdAt:new Date}))}catch(r){throw console.error("Error al crear perfil de usuario:",r),new Error("No se pudo crear el perfil de usuario")}})}updateUserProfile(e,t){return W(this,null,function*(){try{let r=Ye(this.firestore,`users/${e}`);yield ya(r,Te(fe({},t),{updatedAt:new Date}),{merge:!0})}catch(r){throw console.error("Error al actualizar perfil de usuario:",r),new Error("No se pudo actualizar el perfil de usuario")}})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ty=class n{authService=le(jn);router=le(Ht);ngOnInit(){this.authService.userRole$.pipe(di(e=>e!==null),Mr(1)).subscribe(e=>{switch(console.log("Rol detectado:",e),e){case"admin":case"mesero":case"cobrador":this.router.navigate(["/home"]);break;case"cocinero":this.router.navigate(["/cocina"]);break;default:this.router.navigate(["/login"])}}),setTimeout(()=>{this.router.navigate(["/login"])},3e3)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-redirect"]],standalone:!0,features:[Jt],decls:5,vars:0,consts:[[1,"flex","justify-center","items-center","h-screen","bg-gray-100"],[1,"text-center"],[1,"text-xl","mb-4"],[1,"w-16","h-16","border-t-4","border-blue-500","border-solid","rounded-full","animate-spin","mx-auto"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"p",2),v(3,"Redireccionando..."),p(),ae(4,"div",3),p()())},dependencies:[nn]})};var tL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(zs),Qe(Ii))}}static{this.\u0275dir=fn({type:n})}}return n})(),sm=(()=>{class n extends tL{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,features:[hi]})}}return n})(),_d=new Ze(""),Ree={provide:_d,useExisting:Ui(()=>bc),multi:!0},bc=(()=>{class n extends sm{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&J("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Es([Ree]),hi]})}}return n})(),Pee={provide:_d,useExisting:Ui(()=>xr),multi:!0};function Fee(){let n=sc()?sc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Oee=new Ze(""),xr=(()=>{class n extends tL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Fee())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(zs),Qe(Ii),Qe(Oee,8))}}static{this.\u0275dir=fn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&J("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Es([Pee]),hi]})}}return n})();function Vl(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function nL(n){return n!=null&&typeof n.length=="number"}var yd=new Ze(""),rD=new Ze(""),Nee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ms=class{static min(e){return rL(e)}static max(e){return Lee(e)}static required(e){return Vee(e)}static requiredTrue(e){return Bee(e)}static email(e){return Uee(e)}static minLength(e){return iL(e)}static maxLength(e){return sL(e)}static pattern(e){return oL(e)}static nullValidator(e){return Ay(e)}static compose(e){return fL(e)}static composeAsync(e){return pL(e)}};function rL(n){return e=>{if(Vl(e.value)||Vl(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Lee(n){return e=>{if(Vl(e.value)||Vl(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Vee(n){return Vl(n.value)?{required:!0}:null}function Bee(n){return n.value===!0?null:{required:!0}}function Uee(n){return Vl(n.value)||Nee.test(n.value)?null:{email:!0}}function iL(n){return e=>Vl(e.value)||!nL(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function sL(n){return e=>nL(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function oL(n){if(!n)return Ay;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Vl(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function Ay(n){return null}function aL(n){return n!=null}function cL(n){return vl(n)?Ot(n):n}function lL(n){let e={};return n.forEach(t=>{e=t!=null?fe(fe({},e),t):e}),Object.keys(e).length===0?null:e}function uL(n,e){return e.map(t=>t(n))}function jee(n){return!n.validate}function dL(n){return n.map(e=>jee(e)?e:t=>e.validate(t))}function fL(n){if(!n)return null;let e=n.filter(aL);return e.length==0?null:function(t){return lL(uL(t,e))}}function hL(n){return n!=null?fL(dL(n)):null}function pL(n){if(!n)return null;let e=n.filter(aL);return e.length==0?null:function(t){let r=uL(t,e).map(cL);return b0(r).pipe(je(lL))}}function mL(n){return n!=null?pL(dL(n)):null}function q5(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gL(n){return n._rawValidators}function vL(n){return n._rawAsyncValidators}function XT(n){return n?Array.isArray(n)?n:[n]:[]}function ky(n,e){return Array.isArray(n)?n.includes(e):n===e}function G5(n,e){let t=XT(e);return XT(n).forEach(i=>{ky(t,i)||t.push(i)}),t}function K5(n,e){return XT(e).filter(t=>!ky(n,t))}var My=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hL(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},gd=class extends My{get formDirective(){return null}get path(){return null}},vd=class extends My{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ry=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},$ee={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},VDe=Te(fe({},$ee),{"[class.ng-submitted]":"isSubmitted"}),Br=(()=>{class n extends Ry{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(vd,2))}}static{this.\u0275dir=fn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&tt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[hi]})}}return n})(),Ly=(()=>{class n extends Ry{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Qe(gd,10))}}static{this.\u0275dir=fn({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&tt("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[hi]})}}return n})();var em="VALID",Dy="INVALID",Ch="PENDING",tm="DISABLED",Bl=class{},Py=class extends Bl{constructor(e,t){super(),this.value=e,this.source=t}},nm=class extends Bl{constructor(e,t){super(),this.pristine=e,this.source=t}},rm=class extends Bl{constructor(e,t){super(),this.touched=e,this.source=t}},Sh=class extends Bl{constructor(e,t){super(),this.status=e,this.source=t}},ZT=class extends Bl{constructor(e){super(),this.source=e}},JT=class extends Bl{constructor(e){super(),this.source=e}};function iD(n){return(Vy(n)?n.validators:n)||null}function Hee(n){return Array.isArray(n)?hL(n):n||null}function sD(n,e){return(Vy(e)?e.asyncValidators:n)||null}function zee(n){return Array.isArray(n)?mL(n):n||null}function Vy(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function _L(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new et(1e3,"");if(!r[t])throw new et(1001,"")}function yL(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new et(1002,"")})}var Ih=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=j0(()=>this.statusReactive()),this.statusReactive=Xa(void 0),this._pristine=j0(()=>this.pristineReactive()),this.pristineReactive=Xa(!0),this._touched=j0(()=>this.touchedReactive()),this.touchedReactive=Xa(!1),this._events=new ni,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yo(this.statusReactive)}set status(e){yo(()=>this.statusReactive.set(e))}get valid(){return this.status===em}get invalid(){return this.status===Dy}get pending(){return this.status==Ch}get disabled(){return this.status===tm}get enabled(){return this.status!==tm}get pristine(){return yo(this.pristineReactive)}set pristine(e){yo(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return yo(this.touchedReactive)}set touched(e){yo(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(G5(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(G5(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(K5(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(K5(e,this._rawAsyncValidators))}hasValidator(e){return ky(this._rawValidators,e)}hasAsyncValidator(e){return ky(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Te(fe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new rm(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new rm(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Te(fe({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new nm(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new nm(!0,r))}markAsPending(e={}){this.status=Ch;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Te(fe({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=tm,this.errors=null,this._forEachChild(i=>{i.disable(Te(fe({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Py(this.value,r)),this._events.next(new Sh(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te(fe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=em,this._forEachChild(r=>{r.enable(Te(fe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te(fe({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===em||this.status===Ch)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Py(this.value,t)),this._events.next(new Sh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Te(fe({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?tm:em}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ch,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=cL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Gn,this.statusChanges=new Gn}_calculateStatus(){return this._allControlsDisabled()?tm:this.errors?Dy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ch)?Ch:this._anyControlsHaveStatus(Dy)?Dy:em}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new nm(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rm(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Vy(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Hee(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=zee(this._rawAsyncValidators)}},Fy=class extends Ih{constructor(e,t,r){super(iD(t),sD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yL(this,!0,e),Object.keys(e).forEach(r=>{_L(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var eD=class extends Fy{};var By=new Ze("CallSetDisabledState",{providedIn:"root",factory:()=>Uy}),Uy="always";function xL(n,e){return[...e.path,n]}function tD(n,e,t=Uy){oD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),qee(n,e),Kee(n,e),Gee(n,e),Wee(n,e)}function Q5(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ny(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Oy(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Wee(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function oD(n,e){let t=gL(n);e.validator!==null?n.setValidators(q5(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=vL(n);e.asyncValidator!==null?n.setAsyncValidators(q5(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Oy(e._rawValidators,i),Oy(e._rawAsyncValidators,i)}function Ny(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=gL(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=vL(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return Oy(e._rawValidators,r),Oy(e._rawAsyncValidators,r),t}function qee(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&wL(n,e)})}function Gee(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&wL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function wL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Kee(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Qee(n,e){n==null,oD(n,e)}function Yee(n,e){return Ny(n,e)}function bL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Xee(n){return Object.getPrototypeOf(n.constructor)===sm}function Zee(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===xr?t=s:Xee(s)?r=s:i=s}),i||r||t||null}function Jee(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Y5(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function X5(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var im=class extends Ih{constructor(e=null,t,r){super(iD(t),sD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vy(t)&&(t.nonNullable||t.initialValueIsDefault)&&(X5(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Y5(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Y5(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){X5(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var ete=n=>n instanceof im;var tte={provide:vd,useExisting:Ui(()=>pi)},Z5=Promise.resolve(),pi=(()=>{class n extends vd{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new im,this._registered=!1,this.name="",this.update=new Gn,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=EL(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bL(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){tD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Z5.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Hu(r);Z5.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?xL(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Qe(gd,9),Qe(yd,10),Qe(rD,10),Qe(_d,10),Qe(Ji,8),Qe(By,8))}}static{this.\u0275dir=fn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Es([tte]),hi,go]})}}return n})(),jy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=fn({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),nte={provide:_d,useExisting:Ui(()=>Do),multi:!0},Do=(()=>{class n extends sm{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&J("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Es([nte]),hi]})}}return n})();var CL=new Ze("");var rte={provide:gd,useExisting:Ui(()=>om)},om=(()=>{class n extends gd{get submitted(){return yo(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=j0(()=>this._submittedReactive()),this._submittedReactive=Xa(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Gn,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ny(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return tD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Q5(t.control||null,t,!1),Jee(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Zee(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new ZT(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new JT(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Q5(r||null,t),ete(i)&&(tD(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Qee(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Yee(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){oD(this.form,this),this._oldForm&&Ny(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(r){return new(r||n)(Qe(yd,10),Qe(rD,10),Qe(By,8))}}static{this.\u0275dir=fn({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&J("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Es([rte]),hi,go]})}}return n})();var ite={provide:vd,useExisting:Ui(()=>am)},am=(()=>{class n extends vd{set isDisabled(t){}static{this._ngModelWarningSentOnce=!1}constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new Gn,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=EL(this,s)}ngOnChanges(t){this._added||this._setUpControl(),bL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return xL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||n)(Qe(gd,13),Qe(yd,10),Qe(rD,10),Qe(_d,10),Qe(CL,8))}}static{this.\u0275dir=fn({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Es([ite]),hi,go]})}}return n})(),ste={provide:_d,useExisting:Ui(()=>ss),multi:!0};function SL(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ote(n){return n.split(":")[0]}var ss=(()=>{class n extends sm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=SL(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=ote(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&J("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Es([ste]),hi]})}}return n})(),Qs=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(SL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ii),Qe(zs),Qe(ss,9))}}static{this.\u0275dir=fn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),ate={provide:_d,useExisting:Ui(()=>IL),multi:!0};function J5(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function cte(n){return n.split(":")[0]}var IL=(()=>{class n extends sm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=cte(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&J("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Es([ate]),hi]})}}return n})(),Ys=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(J5(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(J5(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Qe(Ii),Qe(zs),Qe(IL,9))}}static{this.\u0275dir=fn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function TL(n){return typeof n=="number"?n:parseInt(n,10)}function lte(n){return typeof n=="number"?n:parseFloat(n)}var $y=(()=>{class n{constructor(){this._validator=Ay}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ay,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=fn({type:n,features:[go]})}}return n})();var ute={provide:yd,useExisting:Ui(()=>Ao),multi:!0},Ao=(()=>{class n extends $y{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>lte(t),this.createValidator=t=>rL(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ia("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Es([ute]),hi]})}}return n})();var dte={provide:yd,useExisting:Ui(()=>aD),multi:!0},aD=(()=>{class n extends $y{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>TL(t),this.createValidator=t=>iL(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ia("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[Es([dte]),hi]})}}return n})(),fte={provide:yd,useExisting:Ui(()=>cD),multi:!0},cD=(()=>{class n extends $y{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>TL(t),this.createValidator=t=>sL(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ia("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Es([fte]),hi]})}}return n})(),hte={provide:yd,useExisting:Ui(()=>lD),multi:!0},lD=(()=>{class n extends $y{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=t=>t,this.createValidator=t=>oL(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ys(n)))(i||n)}})()}static{this.\u0275dir=fn({type:n,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ia("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},features:[Es([hte]),hi]})}}return n})();var DL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ka({type:n})}static{this.\u0275inj=Ga({})}}return n})(),nD=class extends Ih{constructor(e,t,r){super(iD(t),sD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){yL(this,!1,e),e.forEach((r,i)=>{_L(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function eL(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Hy=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return eL(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Fy(i,s)}record(t,r=null){let i=this._reduceControls(t);return new eD(i,r)}control(t,r,i){let s={};return this.useNonNullable?(eL(r)?s=r:(s.validators=r,s.asyncValidators=i),new im(t,Te(fe({},s),{nonNullable:!0}))):new im(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new nD(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof im)return t;if(t instanceof Ih)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ur=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:By,useValue:t.callSetDisabledState??Uy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ka({type:n})}static{this.\u0275inj=Ga({imports:[DL]})}}return n})(),zy=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:CL,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:By,useValue:t.callSetDisabledState??Uy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ka({type:n})}static{this.\u0275inj=Ga({imports:[DL]})}}return n})();var pte=n=>({"translate-x-4":n}),Wy=class n{fb=le(Hy);authService=le(jn);router=le(Ht);loginForm=this.fb.group({email:["",[Ms.required,Ms.email]],password:["",Ms.required],rememberMe:[!0]});isLoading=!1;errorMessage="";ngOnInit(){let e=this.authService.getLastLoginEmail();e&&this.loginForm.patchValue({email:e}),this.authService.user$.pipe(Mr(1)).subscribe(t=>{t&&(console.log("Usuario ya autenticado, redirigiendo..."),this.router.navigate(["/home"]))})}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}get rememberMe(){return this.loginForm.get("rememberMe")}onSubmit(){return W(this,null,function*(){if(!this.loginForm.invalid){this.isLoading=!0,this.errorMessage="";try{let{email:e,password:t,rememberMe:r}=this.loginForm.value;console.log("Intentando iniciar sesi\xF3n con:",e);let i=r?"local":"session",s=yield this.authService.login(e,t,i);console.log("Login exitoso:",s),this.authService.userData$.pipe(Mr(1)).subscribe({next:o=>{console.log("Datos de usuario cargados:",o),o&&o.role?o.role==="cocinero"?this.router.navigate(["/cocina"]):o.role==="admin"?this.router.navigate(["/admin"]):this.router.navigate(["/home"]):this.router.navigate(["/home"])},error:o=>{console.error("Error al cargar datos del usuario:",o),this.errorMessage=this.getErrorMessage(o.message||o),this.isLoading=!1}})}catch(e){console.error("Error de inicio de sesi\xF3n:",e),this.errorMessage=this.getErrorMessage(e.code||e.message),this.isLoading=!1}}})}getErrorMessage(e){switch(e){case"auth/user-not-found":case"auth/wrong-password":return"Email o contrase\xF1a incorrectos";case"auth/too-many-requests":return"Demasiados intentos fallidos. Intente m\xE1s tarde";case"auth/network-request-failed":return"Error de conexi\xF3n. Verifique su conexi\xF3n a internet";case"No user data found":case"No se pudo crear el perfil de usuario":return"Error al acceder a su perfil. Contacte al administrador";default:return"Error al iniciar sesi\xF3n. Intente nuevamente"}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-login"]],standalone:!0,features:[Jt],decls:41,vars:4,consts:[[1,"flex","min-h-screen"],[1,"flex-1","flex","flex-col","justify-center","px-8","md:px-16","lg:px-20"],[1,"w-full","max-w-md","mx-auto"],[1,"text-4xl","font-light","text-teal-400","mb-2"],[1,"text-gray-400","mb-8"],[3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"block","text-gray-600","mb-2"],["type","email","formControlName","email","placeholder","Tu direcci\xF3n de correo",1,"w-full","px-4","py-3","rounded-lg","border","border-gray-200","focus:outline-none","focus:ring-2","focus:ring-teal-400"],[1,"mb-6"],["type","password","formControlName","password","placeholder","Tu contrase\xF1a",1,"w-full","px-4","py-3","rounded-lg","border","border-gray-200","focus:outline-none","focus:ring-2","focus:ring-teal-400"],[1,"flex","items-center","mb-6"],[1,"relative","inline-block","w-10","mr-2","align-middle"],["type","checkbox","formControlName","rememberMe","id","rememberMe",1,"opacity-0","absolute","h-0","w-0"],["for","rememberMe",1,"block","overflow-hidden","h-6","rounded-full","bg-gray-300","cursor-pointer","toggle-label"],[1,"block","bg-white","rounded-full","h-6","w-6","transform","transition-transform","duration-200","ease-in-out","toggle-dot",3,"ngClass"],["for","rememberMe",1,"text-gray-600"],["type","submit",1,"w-full","bg-teal-400","hover:bg-teal-500","text-white","uppercase","font-medium","py-3","px-4","rounded-lg","transition","duration-200"],[1,"mt-4","text-center"],[1,"text-gray-400"],["href","#",1,"text-teal-400"],[1,"absolute","bottom-4","left-0","right-0","text-center","text-gray-400","text-sm"],[1,"mt-2","space-x-4"],["href","#",1,"text-gray-400","hover:text-gray-600"]],template:function(t,r){if(t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),v(4,"Bienvenido de Nuevo"),p(),f(5,"p",4),v(6,"Ingresa tu correo y contrase\xF1a para iniciar sesi\xF3n"),p(),f(7,"form",5),J("ngSubmit",function(){return r.onSubmit()}),f(8,"div",6)(9,"label",7),v(10,"Correo"),p(),ae(11,"input",8),p(),f(12,"div",9)(13,"label",7),v(14,"Contrase\xF1a"),p(),ae(15,"input",10),p(),f(16,"div",11)(17,"div",12),ae(18,"input",13),f(19,"label",14),ae(20,"span",15),p()(),f(21,"label",16),v(22,"Recordarme"),p()(),f(23,"button",17),v(24," INICIAR SESI\xD3N "),p()(),f(25,"div",18)(26,"p",19),v(27," \xBFNo tienes una cuenta? "),f(28,"a",20),v(29,"Reg\xEDstrate"),p()()()(),f(30,"div",21),v(31," \xA9 2021, Hecho con \u2764\uFE0F por Creative Tim & Simmmple para una mejor web. "),f(32,"div",22)(33,"a",23),v(34,"Creative Tim"),p(),f(35,"a",23),v(36,"Simmmple"),p(),f(37,"a",23),v(38,"Blog"),p(),f(39,"a",23),v(40,"Licencia"),p()()()()()),t&2){let i;x(7),ee("formGroup",r.loginForm),x(13),ee("ngClass",Uu(2,pte,(i=r.loginForm.get("rememberMe"))==null?null:i.value))}},dependencies:[nn,tr,zy,jy,xr,bc,Br,Ly,om,am]})};var qy=class n{transform(e){if(!e)return"Fecha no v\xE1lida";let t;if(typeof e=="string"&&e.includes("/")){let i=e.split("/");if(i.length===3){let s=parseInt(i[0],10),o=parseInt(i[1],10)-1,a=parseInt(i[2],10);t=new Date(a,o,s)}else return"Fecha no v\xE1lida"}else t=new Date(e);return isNaN(t.getTime())?"Fecha no v\xE1lida":new Intl.DateTimeFormat("es-ES",{weekday:"long",day:"numeric",month:"long",year:"numeric"}).format(t)}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Rf({name:"formatDateSpanish",type:n,pure:!0,standalone:!0})};var _t=Bs(Rs());var ba=class n{firestore=le(rn);authService=le(jn);currentUserData=null;transactionOccurred=Xa(!1);constructor(){this.authService.userData$.subscribe(e=>{this.currentUserData=e})}openCashRegister(e){let t=it(this.firestore,"cash_registers"),r=Te(fe({},e),{currency:"USD",serverTimestamp:W5(),currentAmount:e.initialAmount,status:"open",closedAt:null,closedBy:null,transactions:[]});return Ot(yr(t,r)).pipe(je(i=>i.id),pr(i=>{throw console.error("Error al abrir caja:",i),new Error("No se pudo abrir la caja registradora")}))}isCashRegisterOpenToday(){let e=it(this.firestore,"cash_registers"),t=new Date;t.setHours(0,0,0,0);let r=new Date(t);r.setDate(r.getDate()+1);let i=tn(e,yn("openedAt",">=",t),yn("openedAt","<",r),yn("status","==","open"));return Ot(Tr(i)).pipe(je(s=>!s.empty),pr(s=>(console.error("Error al verificar estado de caja:",s),Ke(!1))))}getCurrentCashRegister(){let e=it(this.firestore,"cash_registers"),t=tn(e,yn("status","==","open"),Un("openedAt","desc"),Jp(1));return Ot(Tr(t)).pipe(je(r=>{if(r.empty)return null;let i=r.docs[0];return fe({id:i.id},i.data())}),pr(r=>(console.error("Error al obtener caja actual:",r),Ke(null))))}registerTransaction(e){return this.getCurrentCashRegister().pipe(je(t=>{if(!t)throw new Error("No hay una caja abierta");return t}),Ir(t=>{let r=Ye(this.firestore,`cash_registers/${t.id}`),i=parseFloat((e.amount||0).toFixed(2)),s=parseFloat((t.currentAmount+i).toFixed(2)),o=Te(fe({},e),{amount:i,currency:"USD",timestamp:new Date,registeredBy:this.getUserInfo()});return Ot(St(r,{currentAmount:s,transactions:[...t.transactions||[],o]})).pipe(je(()=>(this.transactionOccurred.update(a=>!a),!0)))}),pr(t=>(console.error("Error al registrar transacci\xF3n:",t),Ke(!1))))}closeCashRegister(e){return this.getCurrentCashRegister().pipe(je(t=>{if(!t)throw new Error("No hay una caja abierta para cerrar");return t}),Ir(t=>{let r=Ye(this.firestore,`cash_registers/${t.id}`),i={status:"closed",closedAt:new Date,closedBy:this.getUserInfo(),finalAmount:e.finalAmount,finalDetails:e.details,difference:e.finalAmount-t.currentAmount,notes:e.notes||""};return Ot(St(r,i)).pipe(je(()=>!0))}),pr(t=>(console.error("Error al cerrar caja:",t),Ke(!1))))}registerPayment(e){let t={type:"payment",amount:e.amount,description:e.description,orderId:e.orderId,paymentMethod:e.paymentMethod};return this.registerTransaction(t)}registerExpense(e){let t={type:"expense",amount:-Math.abs(e.amount),description:e.description};return this.registerTransaction(t)}registerIncome(e){let t={type:"income",amount:Math.abs(e.amount),description:e.description};return this.registerTransaction(t)}registerRefund(e){let t={type:"refund",amount:-Math.abs(e.amount),description:e.description,orderId:e.orderId};return this.registerTransaction(t)}getUserInfo(){return{uid:this.currentUserData?.uid||"",name:this.currentUserData?.name||"Usuario Desconocido",role:this.currentUserData?.role||""}}getCashRegisterHistory(e=10){let t=it(this.firestore,"cash_registers"),r=tn(t,Un("openedAt","desc"),Jp(e));return Ot(Tr(r)).pipe(je(i=>i.docs.map(s=>fe({id:s.id},s.data()))),pr(i=>(console.error("Error al obtener historial:",i),Ke([]))))}getCurrentTransactions(){return this.getCurrentCashRegister().pipe(je(e=>e?e.transactions||[]:[]))}getCurrentBalance(){return this.getCurrentCashRegister().pipe(je(e=>e&&e.currentAmount||0))}getCurrentSummary(){return this.getCurrentCashRegister().pipe(je(e=>{if(!e)return{totalPayments:0,totalExpenses:0,totalIncomes:0,totalRefunds:0,initialAmount:0,currentAmount:0,paymentMethods:{efectivo:0,transferencia:0,ahorita:0,deUna:0,otros:0}};let t=0,r=0,i=0,s=0,o=0,a=0,c=0,l=0,u=0;return(e.transactions||[]).forEach(d=>{switch(d.type){case"payment":t+=d.amount;let m=(d.paymentMethod||"").toLowerCase();m==="efectivo"?o+=d.amount:m==="transferencia"?a+=d.amount:m==="ahorita"?c+=d.amount:m==="de una"?l+=d.amount:u+=d.amount;break;case"expense":r+=Math.abs(d.amount);break;case"income":i+=d.amount;break;case"refund":s+=Math.abs(d.amount);break}}),{totalPayments:t,totalExpenses:r,totalIncomes:i,totalRefunds:s,initialAmount:e.initialAmount,currentAmount:e.currentAmount,paymentMethods:{efectivo:o,transferencia:a,ahorita:c,deUna:l,otros:u}}}))}syncOrdersWithTransactions(e="oEDiI6A372Oz4mP3Ojjr"){return this.getCashRegisterById(e).pipe(Ir(t=>{if(!t)throw new Error(`No se encontr\xF3 la caja con ID ${e}`);let r=it(this.firestore,"orders"),i=tn(r,yn("status","==","Cobrado"));return Ot(Tr(i)).pipe(Ir(s=>{if(s.empty)return Ke(!0);let o=s.docs.map(c=>fe({id:c.id},c.data()));console.log(`Se encontraron ${o.length} \xF3rdenes para sincronizar`);let a=o.map(c=>this.registerPayment({orderId:c.id,amount:c.total,paymentMethod:c.paymentMethod||"efectivo",description:`Pago de orden #${c.id} - Mesa(s): ${c.tables?.join(", ")}`}).pipe(Ir(l=>{if(l){let u=Ye(this.firestore,`orders/${c.id}`);return Ot(St(u,{syncedWithCashRegister:!0,cashRegisterId:e})).pipe(je(()=>!0))}return Ke(!1)})));return a.length===0?Ke(!0):b0(a).pipe(je(c=>c.every(l=>l===!0)))}))}),pr(t=>(console.error("Error al sincronizar \xF3rdenes con caja:",t),Ke(!1))))}getCashRegisterById(e){let t=Ye(this.firestore,`cash_registers/${e}`);return Ot(Tr(tn(it(this.firestore,"cash_registers"),yn("__name__","==",e)))).pipe(je(r=>{if(r.empty)return null;let i=r.docs[0];return fe({id:i.id},i.data())}),pr(r=>(console.error(`Error al obtener caja con ID ${e}:`,r),Ke(null))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var gte=["notificationSound"],vte=(n,e)=>e.id+"-"+(e.selectedOption||"")+"-"+(e.quantity||"1"),kL=(n,e)=>n+"-"+e.id+"-"+(e.selectedOption||"")+"-"+(e.quantity||"1"),Ky=(n,e)=>e.id,cm=(n,e)=>({"background-color":n,"border-color":e}),AL=n=>({"background-color":n}),_te=(n,e,t,r)=>({"bg-yellow-100 text-yellow-800":n,"bg-blue-100 text-blue-800":e,"bg-green-100 text-green-800":t,"bg-purple-100 text-purple-800":r}),yte=(n,e,t,r)=>({"bg-yellow-100 text-yellow-800":n,"bg-blue-100 text-blue-800":e,"bg-green-100 text-green-800":t,"bg-indigo-100 text-indigo-800":r});function xte(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",74),p())}function wte(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",75),p())}function bte(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",76),p())}function Ete(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",77),p())}function Cte(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",78),p())}function Ste(n,e){n&1&&(xe(),f(0,"svg",12),ae(1,"path",79),p())}function Ite(n,e){if(n&1&&(f(0,"span"),v(1),ot(2,"formatDateSpanish"),p()),n&2){let t=R();x(),De(hn(2,1,t.currentDate))}}function Tte(n,e){n&1&&(f(0,"span"),v(1,"Ayer"),p())}function Dte(n,e){n&1&&(f(0,"span"),v(1,"\xDAltimos 7 d\xEDas"),p())}function Ate(n,e){if(n&1&&(f(0,"span"),v(1),ot(2,"formatDateSpanish"),p()),n&2){let t=R();x(),De(hn(2,1,t.customDate))}}function kte(n,e){n&1&&(f(0,"span"),v(1,"Todos los registros"),p())}function Mte(n,e){n&1&&(f(0,"div",81),xe(),f(1,"svg",82),ae(2,"path",83),p(),Pe(),f(3,"span"),v(4,"No hay \xEDtems en espera"),p()())}function Rte(n,e){if(n&1&&(f(0,"p",89),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Pte(n,e){if(n&1){let t=ye();Mn(0),f(1,"div",85),J("click",function(){let i=Y(t).$implicit,s=R(3);return X(s.viewOrderDetails(s.getOrderById(i.orderId||"")))}),f(2,"div",86)(3,"div",87)(4,"div")(5,"h5",88),v(6),p(),se(7,Rte,2,1,"p",89),p(),f(8,"span",90),v(9),p()(),f(10,"div",91)(11,"span",92),v(12),p(),f(13,"span",89),v(14),ot(15,"date"),p()()()()}if(n&2){let t=e.$implicit,r=R(3).getOrderColor(t.orderId);x(),ee("ngStyle",vn(10,cm,r,r)),x(5),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?7:-1),x(2),ie(" Mesa ",t.tableInfo," "),x(3),De(t.customerName),x(2),ie(" ",ar(15,7,t.orderDate,"HH:mm")," ")}}function Fte(n,e){if(n&1&&Xt(0,Pte,16,13,"div",84,vte),n&2){R();let t=ec(2);Zt(t)}}function Ote(n,e){if(n&1&&(f(0,"div",52)(1,"div",80),Mn(2),se(3,Mte,5,0,"div",81)(4,Fte,2,0),p()()),n&2){x(2);let t=Ja(R().getItemsByStatus("En espera"));x(),Se(t.length===0?3:4)}}function Nte(n,e){n&1&&(f(0,"div",81),xe(),f(1,"svg",82),ae(2,"path",83),p(),Pe(),f(3,"span"),v(4,"No hay \xEDtems en preparaci\xF3n"),p()())}function Lte(n,e){if(n&1&&(f(0,"p",89),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Vte(n,e){if(n&1){let t=ye();Mn(0),f(1,"div",85),J("click",function(){let i=Y(t).$implicit,s=R(3);return X(s.viewOrderDetails(s.getOrderById(i.orderId||"")))}),f(2,"div",86)(3,"div",87)(4,"div")(5,"h5",88),v(6),p(),se(7,Lte,2,1,"p",89),p(),f(8,"span",90),v(9),p()(),f(10,"div",91)(11,"span",92),v(12),p(),f(13,"span",89),v(14),ot(15,"date"),p()()()()}if(n&2){let t=e.$implicit,r=R(3).getOrderColor(t.orderId);x(),ee("ngStyle",vn(10,cm,r,r)),x(5),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?7:-1),x(2),ie(" Mesa ",t.tableInfo," "),x(3),De(t.customerName),x(2),ie(" ",ar(15,7,t.orderDate,"HH:mm")," ")}}function Bte(n,e){if(n&1&&Xt(0,Vte,16,13,"div",84,kL),n&2){R();let t=ec(2);Zt(t)}}function Ute(n,e){if(n&1&&(f(0,"div",52)(1,"div",80),Mn(2),se(3,Nte,5,0,"div",81)(4,Bte,2,0),p()()),n&2){x(2);let t=Ja(R().getItemsByStatus("En preparaci\xF3n"));x(),Se(t.length===0?3:4)}}function jte(n,e){n&1&&(f(0,"div",81),xe(),f(1,"svg",82),ae(2,"path",83),p(),Pe(),f(3,"span"),v(4,"No hay \xEDtems listos para servir"),p()())}function $te(n,e){if(n&1&&(f(0,"p",89),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Hte(n,e){if(n&1){let t=ye();Mn(0),f(1,"div",85),J("click",function(){let i=Y(t).$implicit,s=R(3);return X(s.viewOrderDetails(s.getOrderById(i.orderId||"")))}),f(2,"div",86)(3,"div",87)(4,"div")(5,"h5",88),v(6),p(),se(7,$te,2,1,"p",89),p(),f(8,"span",90),v(9),p()(),f(10,"div",91)(11,"span",92),v(12),p(),f(13,"span",89),v(14),ot(15,"date"),p()(),f(16,"div",93)(17,"button",94),J("click",function(i){let s=Y(t).$implicit;return R(3).markItemAsServed(s,s.orderId||""),X(i.stopPropagation())}),xe(),f(18,"svg",95),ae(19,"path",36),p(),Pe(),f(20,"span",96),v(21,"Servir"),p()()()()()}if(n&2){let t=e.$implicit,r=R(3).getOrderColor(t.orderId);x(),ee("ngStyle",vn(10,cm,r,r)),x(5),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?7:-1),x(2),ie(" Mesa ",t.tableInfo," "),x(3),De(t.customerName),x(2),ie(" ",ar(15,7,t.orderDate,"HH:mm")," ")}}function zte(n,e){if(n&1&&Xt(0,Hte,22,13,"div",84,kL),n&2){R();let t=ec(2);Zt(t)}}function Wte(n,e){if(n&1&&(f(0,"div",52)(1,"div",80),Mn(2),se(3,jte,5,0,"div",81)(4,zte,2,0),p()()),n&2){x(2);let t=Ja(R().getItemsByStatus("Listos para servir"));x(),Se(t.length===0?3:4)}}function qte(n,e){n&1&&(f(0,"div",81),xe(),f(1,"svg",82),ae(2,"path",83),p(),Pe(),f(3,"span"),v(4,"No hay pedidos servidos"),p()())}function Gte(n,e){if(n&1&&(f(0,"p",89),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Mesas: ",t.tables.join(", ")," ")}}function Kte(n,e){if(n&1&&(f(0,"span",99),v(1),p()),n&2){let t=e.$implicit;x(),gn(" ",t.quantity,"x ",t.name," ")}}function Qte(n,e){if(n&1&&(f(0,"span",100),v(1),p()),n&2){let t=R().$implicit;x(),ie(" +",t.items.length-3," m\xE1s ")}}function Yte(n,e){if(n&1){let t=ye();f(0,"div",93)(1,"button",101),J("click",function(i){Y(t);let s=R().$implicit;return R(3).chargeOrder(s.id),X(i.stopPropagation())}),xe(),f(2,"svg",102),ae(3,"path",103),p(),Pe(),f(4,"span",96),v(5),p()()()}if(n&2){R();let t=ec(20);x(),ee("disabled",!t)("ngClass",t?"bg-teal-500 text-white hover:bg-teal-600 active:bg-teal-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),x(4),De(t?"Cobrar":"Faltan \xEDtems por servir")}}function Xte(n,e){if(n&1){let t=ye();Mn(0),f(1,"div",85),J("click",function(){let i=Y(t).$implicit,s=R(3);return X(s.viewOrderDetails(i))}),f(2,"div",86)(3,"div",87)(4,"div")(5,"h5",88),v(6),p(),se(7,Gte,2,1,"p",89),p(),f(8,"span",90),v(9),ot(10,"date"),p()(),f(11,"div",97)(12,"div",98),Xt(13,Kte,2,2,"span",99,Ky),se(15,Qte,2,1,"span",100),p()(),Mn(16),ot(17,"async"),ot(18,"async"),ot(19,"async"),Mn(20),se(21,Yte,6,3,"div",93),p()()}if(n&2){let t=e.$implicit,r=R(3),i=r.getOrderColor(t.id);x(),ee("ngStyle",vn(16,cm,i,i)),x(5),De(t.customer.name),x(),Se(t.tables?7:-1),x(2),ie(" ",ar(10,6,t.date,"HH:mm")," "),x(4),Zt(r.getTopItems(t,3)),x(2),Se(t.items.length>3?15:-1);let s=hn(17,9,r.isAdmin$)||hn(18,11,r.isCashier$)||hn(19,13,r.isWaiter$);x(5),Ja(r.areAllItemsServed(t)),x(),Se(s?21:-1)}}function Zte(n,e){if(n&1&&Xt(0,Xte,22,19,"div",84,Ky),n&2){R();let t=ec(2);Zt(t)}}function Jte(n,e){if(n&1&&(f(0,"div",52)(1,"div",80),Mn(2),se(3,qte,5,0,"div",81)(4,Zte,2,0),p()()),n&2){x(2);let t=Ja(R().getServedOrders());x(),Se(t.length===0?3:4)}}function ene(n,e){n&1&&(f(0,"div",81),xe(),f(1,"svg",82),ae(2,"path",83),p(),Pe(),f(3,"span"),v(4,"No hay pedidos"),p()())}function tne(n,e){if(n&1&&(f(0,"p",89),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Mesas: ",t.tables.join(", ")," ")}}function nne(n,e){if(n&1&&(f(0,"div",105),xe(),f(1,"svg",108),ae(2,"path",21),p(),Pe(),f(3,"span"),v(4),ot(5,"date"),p()()),n&2){let t=R().$implicit;x(4),ie("Cobrado a las ",ar(5,1,t.paidAt,"HH:mm"),"")}}function rne(n,e){if(n&1&&(f(0,"div",106)(1,"span",109),v(2,"Total:"),p(),f(3,"span",110),v(4),p()()),n&2){let t=R().$implicit;x(4),ie("$",t.total.toFixed(2),"")}}function ine(n,e){n&1&&(xe(),f(0,"svg",108),ae(1,"path",103),p(),Pe(),f(2,"span"),v(3,"Efectivo"),p())}function sne(n,e){n&1&&(xe(),f(0,"svg",108),ae(1,"path",41),p(),Pe(),f(2,"span"),v(3,"Tarjeta"),p())}function one(n,e){if(n&1&&(f(0,"span"),v(1),p()),n&2){let t=R(2).$implicit;x(),De(t.paymentMethod)}}function ane(n,e){if(n&1&&(f(0,"div",107)(1,"span",111),se(2,ine,4,0)(3,sne,4,0)(4,one,2,1,"span"),p()()),n&2){let t,r=R().$implicit;x(2),Se((t=r.paymentMethod)==="cash"?2:t==="card"?3:4)}}function cne(n,e){if(n&1){let t=ye();f(0,"div",93)(1,"button",112),J("click",function(i){Y(t);let s=R().$implicit;return R(3).printReceipt(s.id),X(i.stopPropagation())}),xe(),f(2,"svg",102),ae(3,"path",113),p(),Pe(),f(4,"span",96),v(5,"Recibo"),p()()()}}function lne(n,e){if(n&1){let t=ye();Mn(0),f(1,"div",85),J("click",function(){let i=Y(t).$implicit,s=R(3);return X(s.viewOrderDetails(i))}),f(2,"div",86)(3,"div",87)(4,"div")(5,"h5",88),v(6),p(),se(7,tne,2,1,"p",89),p(),f(8,"span",90),v(9),ot(10,"date"),p()(),Mn(11),ot(12,"async"),ot(13,"async"),ot(14,"async"),f(15,"div",104),se(16,nne,6,4,"div",105)(17,rne,5,1,"div",106),p(),se(18,ane,5,1,"div",107)(19,cne,6,0,"div",93),p()()}if(n&2){let t=e.$implicit,r=R(3),i=r.getOrderColor(t.id);x(),ee("ngStyle",vn(17,cm,i,i)),x(5),De(t.customer.name),x(),Se(t.tables?7:-1),x(2),ie(" ",ar(10,8,t.date,"HH:mm")," ");let s=hn(12,11,r.isAdmin$)||hn(13,13,r.isCashier$)||hn(14,15,r.isWaiter$);x(7),Se(t.paidAt?16:-1),x(),Se(s?17:-1),x(),Se(t.paymentMethod?18:-1),x(),Se(s?19:-1)}}function une(n,e){if(n&1&&Xt(0,lne,20,20,"div",84,Ky),n&2){R();let t=ec(2);Zt(t)}}function dne(n,e){if(n&1&&(f(0,"div",52)(1,"div",80),Mn(2),se(3,ene,5,0,"div",81)(4,une,2,0),p()()),n&2){let t=R();x(2);let r=Ja(t.getOrdersForDateAndStatus(t.currentDate.toLocaleDateString(),"Cobrado"));x(),Se(r.length===0?3:4)}}function fne(n,e){if(n&1&&(f(0,"p",124)(1,"span",126),v(2,"ID:"),p(),v(3),p()),n&2){let t=R(2);x(3),ie(" ",t.selectedOrder.customer.idNumber," ")}}function hne(n,e){if(n&1&&(f(0,"p",124)(1,"span",126),v(2,"Mesas:"),p(),v(3),p()),n&2){let t=R(2);x(3),ie(" ",t.selectedOrder.tables.join(", ")," ")}}function pne(n,e){if(n&1&&(f(0,"p",124)(1,"span",126),v(2,"Cobrado:"),p(),ae(3,"br"),v(4),ot(5,"date"),p()),n&2){let t=R(2);x(4),ie(" ",ar(5,1,t.selectedOrder.paidAt,"dd/MM/yyyy HH:mm")," ")}}function mne(n,e){if(n&1&&(f(0,"span",151),v(1),p()),n&2){let t=R(2).$implicit,r=R(2);x(),ie("(+$",r.getOptionPrice(t.selectedOption,t).toFixed(2),")")}}function gne(n,e){if(n&1&&(f(0,"span",146),v(1),se(2,mne,2,1,"span",151),p()),n&2){let t=R().$implicit,r=R(2);x(),ie(" ",t.selectedOption," "),x(),Se(r.getOptionPrice(t.selectedOption,t)>0?2:-1)}}function vne(n,e){if(n&1&&(f(0,"span",148),v(1),p()),n&2){let t=R().$implicit,r=R(2);x(),ie("$",(r.calculateItemPrice(t)*t.quantity).toFixed(2),"")}}function _ne(n,e){if(n&1){let t=ye();f(0,"div",150)(1,"button",152),J("click",function(i){Y(t);let s=R().$implicit,o=R(2);return o.markItemAsReady(s,o.selectedOrder.id),X(i.stopPropagation())}),xe(),f(2,"svg",153),ae(3,"path",154),p(),v(4," Marcar como listo "),p()()}}function yne(n,e){if(n&1&&(f(0,"div",134)(1,"div",141)(2,"div",142)(3,"div",143)(4,"span",144),v(5),p(),f(6,"div")(7,"span",145),v(8),p(),se(9,gne,3,2,"span",146),p()()(),f(10,"div",147),Mn(11),ot(12,"async"),ot(13,"async"),ot(14,"async"),se(15,vne,2,1,"span",148),f(16,"span",149),v(17),p()()(),Mn(18),ot(19,"async"),ot(20,"async"),Mn(21),se(22,_ne,5,0,"div",150),p()),n&2){let t=e.$implicit,r=R(2);ee("ngClass",r.getItemStatusClass(t.status||"En espera")),x(5),ie("",t.quantity,"x"),x(3),De(t.name),x(),Se(t.selectedOption?9:-1);let i=hn(12,8,r.isAdmin$)||hn(13,10,r.isCashier$)||hn(14,12,r.isWaiter$);x(6),Se(i?15:-1),x(),ee("ngClass",ju(18,yte,(t.status||"En espera")==="En espera",(t.status||"En espera")==="En preparaci\xF3n",(t.status||"En espera")==="Listos para servir",(t.status||"En espera")==="Servido")),x(),ie(" ",t.status||"En espera"," ");let s=hn(19,14,r.isAdmin$)||hn(20,16,r.isWaiter$),o=r.isSpecialCategory(t)&&(t.status||"En espera")!=="Listos para servir"&&s;x(5),Se(o?22:-1)}}function xne(n,e){if(n&1&&(f(0,"div",135)(1,"p",155),v(2,"Total:"),p(),f(3,"p",116),v(4),p()()),n&2){let t=R(2);x(4),ie("$",t.selectedOrder.total.toFixed(2),"")}}function wne(n,e){if(n&1){let t=ye();f(0,"button",156),J("click",function(){Y(t);let i=R(2);return i.chargeOrder(i.selectedOrder.id),X(i.closeOrderDetails())}),xe(),f(1,"svg",102),ae(2,"path",103),p(),v(3," Cobrar "),p()}}function bne(n,e){if(n&1){let t=ye();f(0,"button",157),J("click",function(){Y(t);let i=R(2);return i.addItemsToOrder(i.selectedOrder),X(i.closeOrderDetails())}),xe(),f(1,"svg",102),ae(2,"path",158),p(),v(3," A\xF1adir Art\xEDculos "),p()}}function Ene(n,e){if(n&1){let t=ye();f(0,"button",159),J("click",function(){Y(t);let i=R(2);return i.cancelOrder(i.selectedOrder),X(i.closeOrderDetails())}),xe(),f(1,"svg",102),ae(2,"path",119),p(),v(3," Cancelar Pedido "),p()}}function Cne(n,e){if(n&1){let t=ye();f(0,"div",73),Mn(1),f(2,"div",114)(3,"div",115)(4,"h2",116),v(5,"Detalles del Pedido"),p(),f(6,"button",117),J("click",function(){Y(t);let i=R();return X(i.closeOrderDetails())}),xe(),f(7,"svg",118),ae(8,"path",119),p()()(),Pe(),f(9,"div",120)(10,"div",121)(11,"div")(12,"h3",122),v(13,"Cliente"),p(),f(14,"p",123),v(15),p(),se(16,fne,4,1,"p",124),ot(17,"async"),ot(18,"async"),se(19,hne,4,1,"p",124),p(),f(20,"div")(21,"h3",122),v(22,"Informaci\xF3n"),p(),f(23,"p",125)(24,"span",126),v(25,"Fecha:"),p(),ae(26,"br"),v(27),ot(28,"date"),p(),f(29,"div",127)(30,"span",128),v(31,"Estado:"),p(),f(32,"span",129),v(33),p()(),se(34,pne,6,4,"p",124),p()(),f(35,"div",130)(36,"h3",131),xe(),f(37,"svg",95),ae(38,"path",132),p(),v(39," Art\xEDculos "),p(),Pe(),f(40,"div",133),Xt(41,yne,23,23,"div",134,Ky),p(),Mn(43),ot(44,"async"),ot(45,"async"),ot(46,"async"),se(47,xne,5,1,"div",135),Mn(48),ot(49,"async"),Mn(50),ot(51,"async"),Mn(52),ot(53,"async"),Mn(54)(55)(56)(57),f(58,"div",136),se(59,wne,4,0,"button",137)(60,bne,4,0,"button",138)(61,Ene,4,0,"button",139),f(62,"button",140),J("click",function(){Y(t);let i=R();return X(i.closeOrderDetails())}),xe(),f(63,"svg",102),ae(64,"path",119),p(),v(65," Cerrar "),p()()()()()()}if(n&2){let t=R(),r=t.getOrderColor(t.selectedOrder.id);x(2),ee("ngStyle",Uu(32,AL,r)),x(),ee("ngStyle",Uu(34,AL,r)),x(12),De(t.selectedOrder.customer.name),x(),Se(hn(17,13,t.isAdmin$)||hn(18,15,t.isCashier$)?16:-1),x(3),Se(t.selectedOrder.tables&&t.selectedOrder.tables.length>0?19:-1),x(8),ie(" ",ar(28,17,t.selectedOrder.date,"dd/MM/yyyy HH:mm")," "),x(5),ee("ngClass",ju(36,_te,t.selectedOrder.status==="En espera",t.selectedOrder.status==="En preparaci\xF3n",t.selectedOrder.status==="Listos para servir",t.isPaid(t.selectedOrder))),x(),ie(" ",t.isPaid(t.selectedOrder)?"Cobrado":t.selectedOrder.status||"En espera"," "),x(),Se(t.isPaid(t.selectedOrder)?34:-1),x(7),Zt(t.selectedOrder.items);let i=hn(44,20,t.isAdmin$)||hn(45,22,t.isCashier$)||hn(46,24,t.isWaiter$);x(6),Se(i?47:-1);let s=hn(49,26,t.isAdmin$),o=hn(51,28,t.isWaiter$),a=hn(53,30,t.isCashier$),c=t.isPaid(t.selectedOrder),l=!c&&t.selectedOrder.status==="Listos para servir",u=!c,d=!c&&t.selectedOrder.status==="En espera";x(12),Se(l&&(s||a||o)?59:-1),x(),Se(u&&(s||o)?60:-1),x(),Se(d&&(s||o)?61:-1)}}var Gy=class n{firestore=le(rn);router=le(Ht);authService=le(jn);cashRegisterService=le(ba);isAdmin$=this.authService.isAdmin$;isWaiter$=this.authService.isWaiter$;isCook$=this.authService.isCook$;isCashier$=this.authService.isCashier$;sectionExpanded={waiting:!0,preparing:!1,ready:!1,served:!1,paid:!1};currentDate=new Date;cdr=le(Ji);ngZone=le($t);notificationSound;soundEnabled=!1;notificationsEnabled=!1;isFullscreen=!1;selectedOrderSignal=Xa(null);get selectedOrder(){return this.selectedOrderSignal()}set selectedOrder(e){this.selectedOrderSignal.set(e)}groupedOrders=new Map;filteredGroupedOrders=new Map;visibleDates=[];allDates=[];selectedDateFilter="today";customDate=new Date;excludedCategoryIds=["JWXmTEO143llfKM5PmkU","p4r4p8ofhtPIOrf4M14c","UmMtTqxhOZETuKr7tVMd"];unsubscribeOrders;isObject(e){return e!==null&&typeof e=="object"&&"name"in e}getFilteredDates(){let e=new Date().toLocaleDateString();switch(this.selectedDateFilter){case"today":return this.allDates.filter(t=>t===e);case"yesterday":{let t=new Date;t.setDate(t.getDate()-1);let r=t.toLocaleDateString();return this.allDates.filter(i=>i===r)}case"week":{let t=new Date;return t.setDate(t.getDate()-7),this.allDates.filter(r=>new Date(r)>=t)}case"custom":{let t=this.customDate.toLocaleDateString();return this.allDates.filter(r=>r===t)}case"all":default:return this.allDates}}setDateFilter(e){this.selectedDateFilter=e,e!=="custom"&&(this.customDate=new Date),this.applyDateFilter();let t="";switch(e){case"today":t="Mostrando pedidos de hoy";break;case"yesterday":t="Mostrando pedidos de ayer";break;case"week":t="Mostrando pedidos de la \xFAltima semana";break;case"all":t="Mostrando todos los pedidos";break;default:break}t&&_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:t})}getStatusCounts(){let e=this.extractAllItems(),t=e.filter(a=>(a.status||"En espera")==="En espera").length,r=e.filter(a=>(a.status||"En espera")==="En preparaci\xF3n").length,i=e.filter(a=>(a.status||"En espera")==="Listos para servir").length,s=this.getServedOrders().length,o=0;return this.getFilteredDates().forEach(a=>{o+=this.getOrdersForDateAndStatus(a,"Cobrado").length}),{waitingCount:t,preparingCount:r,readyCount:i,servedCount:s,paidCount:o}}setCustomDate(e){let t=e.split("-");if(t.length===3){let r=parseInt(t[0]),i=parseInt(t[1])-1,s=parseInt(t[2]);this.customDate=new Date(r,i,s),this.selectedDateFilter="custom",this.applyDateFilter(),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:`Mostrando pedidos del ${s}/${i+1}/${r}`})}else console.error("Formato de fecha incorrecto:",e),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"Formato de fecha inv\xE1lido"})}getOptionPrice(e,t){if(!e)return 0;if(t.options&&t.options.length>0){let r=t.options.find(i=>this.isObject(i)&&i.name===e);if(r&&this.isObject(r)&&r.price)return r.price}return 0}cancelOrder(e){return W(this,null,function*(){let t=yield this.isAdmin$.pipe(Mr(1)).toPromise(),r=yield this.isWaiter$.pipe(Mr(1)).toPromise();if(!t&&!r){_t.default.fire({icon:"error",title:"Acceso denegado",text:"No tienes permisos para cancelar pedidos",confirmButtonText:"Entendido"});return}if(this.isPaid(e)){_t.default.fire({icon:"warning",title:"Pedido Cobrado",text:"No se pueden cancelar pedidos que ya han sido cobrados",confirmButtonText:"Entendido"});return}if((yield _t.default.fire({title:"\xBFEst\xE1s seguro?",text:"Esta acci\xF3n cancelar\xE1 el pedido y restaurar\xE1 el inventario",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S\xED, cancelar",cancelButtonText:"No, mantener",heightAuto:!1})).isConfirmed)try{_t.default.fire({title:"Cancelando pedido...",text:"Por favor, espere",allowOutsideClick:!1,didOpen:()=>{_t.default.showLoading()},heightAuto:!1});let s=Ye(this.firestore,`orders/${e.id}`);yield _a(s),_t.default.close(),_t.default.fire({icon:"success",title:"Pedido Cancelado",text:"El pedido ha sido cancelado correctamente",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0}),this.loadOrders()}catch(s){console.error("Error al cancelar pedido:",s),_t.default.close(),_t.default.fire({icon:"error",title:"Error",text:"No se pudo cancelar el pedido. Intente nuevamente.",footer:`${s instanceof Error?s.message:"Error desconocido"}`,heightAuto:!1})}})}calculateItemPrice(e){let t=e.price;if(e.selectedOption&&e.options&&e.options.length>0){let r=this.getOptionPrice(e.selectedOption,e);t+=r}return t}ngOnInit(){this.selectedDateFilter="today",this.loadOrders(),this.startAudioResetInterval();let e=localStorage.getItem("homeSoundEnabled");this.soundEnabled=e==="true";let t=localStorage.getItem("homeNotificationsEnabled");this.notificationsEnabled=t==="true",document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),this.optimizeForTablet(),setTimeout(()=>{this.soundEnabled&&this.initAudio()},1e3)}optimizeForTablet(){document.documentElement.style.setProperty("--touch-target-min","44px");let e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}handleFullscreenChange(){this.isFullscreen=!!document.fullscreenElement}loadOrders(){try{let e=new Map,t=new Map;this.groupedOrders.forEach(o=>{o.forEach(a=>{e.set(a.id,a.status),a.items.forEach(c=>{let l=`${a.id}-${c.id}-${c.name}-${c.selectedOption||""}`;t.set(l,c.status||"En espera")})})});let r=it(this.firestore,"orders"),i=tn(r,Un("date","desc")),s=z5(i,o=>{let a=[];o.forEach(l=>{let u=l.data(),d=u.date instanceof Lr?u.date.toDate():new Date(u.date),m=u.paidAt instanceof Lr?u.paidAt.toDate():u.paidAt?new Date(u.paidAt):null,g=Te(fe({id:l.id},u),{date:d,paidAt:m});a.push(g);let w=e.get(g.id),y=g.status;w&&w!=="Cobrado"&&y==="Cobrado"&&m&&!g.syncedWithCashRegister&&this.registerOrderPaymentInCashRegister(g),w&&w!=="Listos para servir"&&g.status==="Listos para servir"&&(this.playNotification(),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"success",title:`Pedido #${g.id.substring(0,6)} listo para servir`,text:`${g.customer.name} - Mesa ${g.tables?.join(", ")||"N/A"}`})),g.items.forEach(E=>{let M=`${g.id}-${E.id}-${E.name}-${E.selectedOption||""}`,k=t.get(M),O=E.status||"En espera";k&&k!=="Listos para servir"&&O==="Listos para servir"&&(this.playNotification(),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"success",title:"\xCDtem listo para servir",text:`${E.name} (Pedido de ${g.customer.name})`})),t.set(M,O)})}),this.groupedOrders=this.groupOrdersByDate(a);let c=new Date().toLocaleDateString();if(this.groupedOrders.has(c)){let l=this.groupedOrders.get(c)?.filter(u=>u.customer&&u.customer.name!=="Cliente de Tienda");console.log("Pedidos de comandas hoy:",l)}else console.log("No hay pedidos para la fecha actual:",c);a.forEach(l=>{e.set(l.id,l.status),l.items.forEach(u=>{let d=`${l.id}-${u.id}-${u.name}-${u.selectedOption||""}`;t.set(d,u.status||"En espera")})}),this.allDates=Array.from(this.groupedOrders.keys()).sort((l,u)=>{let d=new Date(l);return new Date(u).getTime()-d.getTime()}),this.visibleDates=this.allDates,this.applyDateFilter(),this.ngZone.run(()=>{setTimeout(()=>{this.cdr.markForCheck(),this.cdr.detectChanges()},0)})},o=>{console.error("Error al escuchar pedidos:",o),this.showErrorToast("No se pudieron cargar los pedidos")});this.unsubscribeOrders=s}catch(e){console.error("Error al configurar el listener de pedidos:",e),this.showErrorToast("Error de conexi\xF3n")}}registerOrderPaymentInCashRegister(e){!e||!e.total||e.syncedWithCashRegister||this.cashRegisterService.getCurrentCashRegister().subscribe({next:t=>{if(!t){_t.default.fire({icon:"warning",title:"Caja cerrada",text:"El pedido ha sido cobrado pero no se ha registrado en caja porque no hay una caja abierta.",toast:!0,position:"top-end",showConfirmButton:!0,confirmButtonText:"Entendido"});return}let r=e.paymentMethod||"efectivo",i=e.tables&&e.tables.length>0?`Mesa ${e.tables.join(", ")}`:"Sin mesa",s=`Pago de orden #${e.id.substring(0,6)} - ${e.customer.name} - ${i}`;this.cashRegisterService.registerPayment({orderId:e.id,amount:e.total,paymentMethod:r,description:s}).subscribe({next:o=>{if(o){console.log(`Pago registrado autom\xE1ticamente en caja: Orden ${e.id}`);let a=Ye(this.firestore,`orders/${e.id}`);St(a,{syncedWithCashRegister:!0,cashRegisterId:t.id}).catch(c=>console.error("Error al marcar pedido como sincronizado:",c)),_t.default.fire({icon:"success",title:"Pago registrado",text:"El pago del pedido se ha registrado autom\xE1ticamente en caja",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}else console.error(`No se pudo registrar el pago en caja: Orden ${e.id}`),_t.default.fire({icon:"error",title:"Error en registro",text:"No se pudo registrar el pago autom\xE1ticamente en caja",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},error:o=>{console.error("Error al registrar pago en caja:",o),_t.default.fire({icon:"error",title:"Error en registro",text:"Ocurri\xF3 un error al registrar el pago en caja",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}})},error:t=>{console.error("Error al verificar estado de caja:",t),_t.default.fire({icon:"error",title:"Error",text:"No se pudo verificar el estado de la caja",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}})}syncPaidOrdersWithCashRegister(){event&&event.stopPropagation(),_t.default.fire({title:"\xBFSincronizar pedidos cobrados?",text:"Esta acci\xF3n registrar\xE1 en la caja todos los pedidos cobrados que no hayan sido sincronizados previamente.",icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, sincronizar",cancelButtonText:"Cancelar",heightAuto:!1}).then(e=>{if(e.isConfirmed){_t.default.fire({title:"Sincronizando",text:"Procesando pedidos cobrados...",allowOutsideClick:!1,didOpen:()=>{_t.default.showLoading()},heightAuto:!1});let t=[];if(this.allDates.forEach(i=>{(this.groupedOrders.get(i)||[]).forEach(o=>{o.status==="Cobrado"&&o.paidAt&&!o.syncedWithCashRegister&&o.customer&&o.customer.name!=="Cliente de Tienda"&&t.push(o)})}),t.length===0){_t.default.fire({icon:"info",title:"Sin pedidos para sincronizar",text:"Todos los pedidos cobrados ya est\xE1n sincronizados con la caja.",confirmButtonText:"Entendido",heightAuto:!1});return}let r=i=>{if(i>=t.length){_t.default.close(),_t.default.fire({icon:"success",title:"Sincronizaci\xF3n completada",text:`Se han sincronizado ${t.length} pedidos con la caja.`,confirmButtonText:"Entendido",heightAuto:!1});return}let s=t[i];this.registerOrderPaymentInCashRegister(s),setTimeout(()=>{r(i+1)},500)};r(0)}})}applyDateFilter(){let e=this.getFilteredDates();this.filteredGroupedOrders=new Map,e.length===0&&this.allDates.length>0?console.log("No hay pedidos para la fecha seleccionada"):e.forEach(r=>{if(this.groupedOrders.has(r)){let i=this.groupedOrders.get(r).filter(s=>s.customer&&s.customer.name!=="Cliente de Tienda");i.length>0&&this.filteredGroupedOrders.set(r,i)}});let t=this.getStatusCounts();setTimeout(()=>{this.cdr.detectChanges()},0)}showErrorToast(e){_t.default.fire({icon:"error",title:"Error",text:e,toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0})}ngOnDestroy(){this.unsubscribeOrders&&this.unsubscribeOrders(),this.audioResetInterval&&clearInterval(this.audioResetInterval),document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this))}areAllItemsServed(e){return!e||!e.items||e.items.length===0?!1:e.items.every(t=>t.status==="Servido")}isSpecialCategory(e){return this.excludedCategoryIds.includes(e.categoryId||"")}markItemAsReady(e,t){return W(this,null,function*(){try{let r=Ye(this.firestore,`orders/${t}`),i=yield ln(r);if(i.exists()){let a=(i.data().items||[]).map(c=>c.id===e.id&&c.name===e.name&&c.selectedOption===e.selectedOption?Te(fe({},c),{status:"Servido"}):c);yield St(r,{items:a}),yield this.updateOrderStatusIfNeeded(t),this.ngZone.run(()=>{if(this.selectedOrder&&this.selectedOrder.id===t){let c=fe({},this.selectedOrder);c.items=c.items.map(l=>l.id===e.id&&l.name===e.name&&l.selectedOption===e.selectedOption?Te(fe({},l),{status:"Servido"}):l),this.selectedOrderSignal.set(c),setTimeout(()=>{this.cdr.markForCheck(),this.cdr.detectChanges()},0)}}),this.playNotification(),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"success",title:`${e.name} est\xE1 listo para servir`}),this.loadOrders()}}catch(r){console.error("Error al marcar \xEDtem como listo:",r),this.showErrorToast("No se pudo actualizar el estado del \xEDtem")}})}viewOrderDetails(e){e?this.selectedOrderSignal.set(e):_t.default.fire({icon:"warning",title:"Pedido no encontrado",text:"No se pudo encontrar el pedido seleccionado",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})}closeOrderDetails(){this.selectedOrderSignal.set(null)}updateOrderStatusIfNeeded(e){return W(this,null,function*(){try{let t=Ye(this.firestore,`orders/${e}`),r=yield ln(t);if(r.exists()){let o=(r.data().items||[]).map(a=>a.status||"En espera");if(o.every(a=>a==="Listos para servir")){yield St(t,{status:"Listos para servir"});return}if(o.every(a=>a==="Listos para servir"||a==="En preparaci\xF3n")){yield St(t,{status:"En preparaci\xF3n"});return}o.some(a=>a==="En espera")&&(yield St(t,{status:"En espera"}))}}catch(t){console.error("Error al actualizar estado general:",t)}})}isPaid(e){return!!e.paidAt}groupOrdersByDate(e){let t=new Map;return e.forEach(r=>{let i=r.date.toLocaleDateString();t.has(i)||t.set(i,[]),t.get(i).push(r)}),t.forEach(r=>{r.sort((i,s)=>s.date.getTime()-i.date.getTime())}),t}getOrdersForDateAndStatus(e,t){if(t==="Cobrado"){let r=[];return this.selectedDateFilter!=="today"&&this.selectedDateFilter!=="custom"?(this.getFilteredDates().forEach(o=>{let c=(this.filteredGroupedOrders.get(o)||[]).filter(l=>this.isPaid(l)&&l.customer&&l.customer.name!=="Cliente de Tienda");r=[...r,...c]}),r):(this.filteredGroupedOrders.get(e)||[]).filter(o=>this.isPaid(o)&&o.customer&&o.customer.name!=="Cliente de Tienda")}else return(this.filteredGroupedOrders.get(e)||[]).filter(i=>!this.isPaid(i)&&i.status===t&&i.customer&&i.customer.name!=="Cliente de Tienda")}chargeOrder(e){this.router.navigate(["/cobrar",e])}getTextColor(e){if(e.startsWith("#")){let r=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return(.299*r+.587*i+.114*s)/255>.6?"text-gray-800":"text-white"}let t=e.match(/hsl\(\d+,\s*\d+%,\s*(\d+)%\)/);return t&&t[1]?parseInt(t[1],10)>70?"text-gray-800":"text-white":"text-gray-800"}getOrderColor(e){if(!e)return"#f0f0f0";let t=["#FFCDB2","#B5EAD7","#C7CEEA","#FFB4A2","#E2F0CB","#CDDAFD","#FDE4CF","#F4ACB7","#D8E2DC","#BEE1E6","#F8EDEB","#ECE4DB"],r=0;for(let s=0;s<e.length;s++)r=e.charCodeAt(s)+((r<<5)-r);r=Math.abs(r);let i=r%t.length;return t[i]}addItemsToOrder(e){localStorage.setItem("editOrderId",e.id),this.router.navigate(["/pedido"],{queryParams:{mode:"edit",orderId:e.id}})}hasReadyItems(e){return e.items.some(t=>(t.status||"En espera")==="Listos para servir"&&e.status!=="Listos para servir")}getItemStatusClass(e){switch(e){case"En espera":return"bg-yellow-50 border-l-2 border-yellow-300";case"En preparaci\xF3n":return"bg-blue-50 border-l-2 border-blue-300";case"Listos para servir":return"bg-green-50 border-l-2 border-green-300";default:return"bg-gray-50 border-l-2 border-gray-300"}}toggleSection(e){this.sectionExpanded[e]=!this.sectionExpanded[e],e==="paid"&&this.sectionExpanded.paid&&(this.applyDateFilter(),setTimeout(()=>{this.cdr.detectChanges()},0))}getServedOrders(){let e=[];return this.getFilteredDates().forEach(t=>{let r=this.filteredGroupedOrders.get(t)||[];for(let i of r)!this.isPaid(i)&&i.customer&&i.customer.name!=="Cliente de Tienda"&&i.items.some(o=>o.status==="Servido")&&e.push(i)}),e}getOrdersForDate(e){return this.filteredGroupedOrders.get(e)||[]}getTopItems(e,t){return e.items.slice(0,t)}markItemAsServed(e,t){return W(this,null,function*(){try{let r=Ye(this.firestore,`orders/${t}`),i=yield ln(r);if(i.exists()){let a=(i.data().items||[]).map(c=>c.id===e.id&&c.name===e.name&&c.selectedOption===e.selectedOption?Te(fe({},c),{status:"Servido"}):c);yield St(r,{items:a}),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"success",title:`${e.name} ha sido servido`}),this.loadOrders()}}catch(r){console.error("Error al marcar \xEDtem como servido:",r),this.showErrorToast("No se pudo actualizar el estado del \xEDtem")}})}printReceipt(e){event?.stopPropagation(),_t.default.fire({title:"Imprimiendo recibo...",text:"Enviando a la impresora",icon:"info",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,heightAuto:!1}),setTimeout(()=>{_t.default.fire({title:"Recibo enviado",text:"El recibo se ha enviado a la impresora correctamente",icon:"success",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3})},2e3)}toggleSound(){this.soundEnabled=!this.soundEnabled,localStorage.setItem("homeSoundEnabled",this.soundEnabled.toString()),this.soundEnabled?this.initAudio():_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Sonido desactivado"})}initAudio(){if(!this.notificationSound){console.warn("Elemento de audio no disponible");return}this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,this.notificationSound.nativeElement.load(),this.notificationSound.nativeElement.volume=.01;let e=this.notificationSound.nativeElement.play();e!==void 0&&e.then(()=>{setTimeout(()=>{this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,this.notificationSound.nativeElement.volume=1,_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones sonoras activadas"})},100)}).catch(t=>{console.warn("Error al inicializar audio:",t),_t.default.fire({title:"Habilitar sonido",text:'Toque "Aceptar" para activar las notificaciones sonoras',icon:"info",confirmButtonText:"Aceptar",heightAuto:!1}).then(r=>{r.isConfirmed&&(this.notificationSound.nativeElement.volume=1,this.notificationSound.nativeElement.play().then(()=>{this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones sonoras activadas"})}).catch(i=>{console.error("No se pudo activar el audio:",i),this.soundEnabled=!1,localStorage.setItem("homeSoundEnabled","false"),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"warning",title:"No se pudo activar el sonido",text:"Revise la configuraci\xF3n de su dispositivo"})}))})})}toggleNotifications(){this.notificationsEnabled=!this.notificationsEnabled,localStorage.setItem("homeNotificationsEnabled",this.notificationsEnabled.toString()),this.notificationsEnabled?Notification.permission!=="granted"?Notification.requestPermission().then(e=>{e==="granted"?_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones activadas"}):(this.notificationsEnabled=!1,localStorage.setItem("homeNotificationsEnabled","false"),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"warning",title:"Permiso denegado",text:"No se pudo activar las notificaciones"}))}):_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones activadas"}):_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Notificaciones desactivadas"})}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen().then(()=>{this.isFullscreen=!1,_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Saliendo de pantalla completa"})}).catch(e=>{console.error("Error al salir de pantalla completa:",e)}):document.documentElement.requestFullscreen().then(()=>{this.isFullscreen=!0,_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Modo pantalla completa activado"})}).catch(e=>{console.error("Error al entrar en pantalla completa:",e),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"No se pudo activar pantalla completa"})})}playNotification(){if(this.soundEnabled&&this.notificationSound){let t=this.notificationSound.nativeElement;t.pause(),t.currentTime=0,t.volume=.8,t.play().catch(r=>{console.warn("Primer intento de reproducci\xF3n fall\xF3:",r),setTimeout(()=>{t.currentTime=0,t.play().catch(i=>{console.error("Segundo intento de reproducci\xF3n fall\xF3:",i),setTimeout(()=>{t.volume=.5,t.currentTime=0,t.play().catch(s=>{console.error("Tercer intento de reproducci\xF3n fall\xF3:",s),console.log("Reiniciando sistema de audio..."),this.soundEnabled=!1,setTimeout(()=>{this.soundEnabled=!0,this.initAudio()},1e3)})},300)})},200)})}"vibrate"in navigator&&navigator.vibrate([200,100,200]),_t.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"success",title:"Nuevo plato listo",text:"Un plato ha sido marcado como listo para servir"});let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(this.notificationsEnabled&&!e&&Notification.permission==="granted"){let t=new Notification("Nuevo plato listo",{body:"Un plato ha sido marcado como listo para servir",icon:"/assets/icons/bell-svgrepo-com.svg"});setTimeout(()=>t.close(),5e3)}}startAudioResetInterval(){let e=setInterval(()=>{if(this.soundEnabled&&this.notificationSound){console.log("Mantenimiento programado del sistema de audio");let t=this.notificationSound.nativeElement;t.pause(),t.currentTime=0,t.load()}},3e5);this.audioResetInterval=e}audioResetInterval;extractAllItems(){let e=[];return this.getFilteredDates().forEach(r=>{(this.filteredGroupedOrders.get(r)||[]).forEach(s=>{if(s.customer&&s.customer.name!=="Cliente de Tienda"&&s.items&&Array.isArray(s.items)){let o=s.items.map(a=>Te(fe({},a),{orderId:s.id,orderDate:s.date,customerName:s.customer.name,tableInfo:s.tables?s.tables.join(", "):"No especificada"}));e.push(...o)}})}),e}getItemsByStatus(e){return this.extractAllItems().filter(r=>(r.status||"En espera")===e)}getOrderById(e){for(let t of this.filteredGroupedOrders.values()){let r=t.find(i=>i.id===e);if(r)return r}for(let t of this.groupedOrders.values()){let r=t.find(i=>i.id===e);if(r)return r}return null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-home"]],viewQuery:function(t,r){if(t&1&&_o(gte,5),t&2){let i;ws(i=bs())&&(r.notificationSound=i.first)}},standalone:!0,features:[Jt],decls:141,vars:89,consts:[["notificationSound",""],["dateInput",""],[1,"container","mx-auto","px-2","py-3"],["preload","auto"],["src","assets/sound/notification.mp3","type","audio/mpeg"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","mb-4","mt-2","gap-2"],[1,"bg-white","rounded-lg","shadow-sm","flex","flex-wrap","overflow-hidden"],[1,"px-3","py-2","text-xs","font-medium","transition-colors",3,"click"],[1,"flex","items-center","px-2"],["type","date",1,"bg-transparent","border-none","text-xs","p-1","focus:outline-none",3,"change","value"],[1,"flex","space-x-2"],[1,"inline-flex","items-center","justify-center","p-2.5","rounded-full","bg-white","shadow-md","text-gray-700","hover:bg-gray-100","active:bg-gray-200",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],[1,"bg-white","rounded-lg","shadow-md"],[1,"flex","items-center","justify-between","px-4","py-3","bg-white","border-b","border-gray-200"],[1,"text-lg","font-medium","text-gray-800"],[1,"flex","justify-between","p-3","bg-gray-50"],[1,"flex-1","bg-yellow-50","rounded-lg","p-3","mx-1","shadow-sm","border","border-yellow-100"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-yellow-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","font-medium","text-yellow-800"],[1,"bg-yellow-200","text-yellow-800","text-sm","font-bold","rounded-full","h-7","w-7","flex","items-center","justify-center"],[1,"flex-1","bg-blue-50","rounded-lg","p-3","mx-1","shadow-sm","border","border-blue-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"text-xs","font-medium","text-blue-800"],[1,"bg-blue-200","text-blue-800","text-sm","font-bold","rounded-full","h-7","w-7","flex","items-center","justify-center"],[1,"flex-1","bg-green-50","rounded-lg","p-3","mx-1","shadow-sm","border","border-green-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-green-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-xs","font-medium","text-green-800"],[1,"bg-green-200","text-green-800","text-sm","font-bold","rounded-full","h-7","w-7","flex","items-center","justify-center"],[1,"flex-1","bg-indigo-50","rounded-lg","p-3","mx-1","shadow-sm","border","border-indigo-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-indigo-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-xs","font-medium","text-indigo-800"],[1,"bg-indigo-200","text-indigo-800","text-sm","font-bold","rounded-full","h-7","w-7","flex","items-center","justify-center"],[1,"flex-1","bg-purple-50","rounded-lg","p-3","mx-1","shadow-sm","border","border-purple-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1","text-purple-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"],[1,"text-xs","font-medium","text-purple-800"],[1,"bg-purple-200","text-purple-800","text-sm","font-bold","rounded-full","h-7","w-7","flex","items-center","justify-center"],[1,"p-2"],[1,"mb-3","rounded-lg","overflow-hidden","shadow-sm","border","border-gray-200"],[1,"flex","items-center","bg-yellow-100","px-4","py-3","cursor-pointer",3,"click"],[1,"w-3","h-3","rounded-full","bg-yellow-400","mr-2"],[1,"font-medium","text-yellow-800","text-sm"],[1,"ml-2","bg-yellow-200","text-yellow-800","text-xs","font-medium","px-2","py-1","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-auto","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],[1,"bg-white","p-2"],[1,"flex","items-center","bg-blue-100","px-4","py-3","cursor-pointer",3,"click"],[1,"w-3","h-3","rounded-full","bg-blue-400","mr-2"],[1,"font-medium","text-blue-800","text-sm"],[1,"ml-2","bg-blue-200","text-blue-800","text-xs","font-medium","px-2","py-1","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-auto","text-blue-600"],[1,"flex","items-center","bg-green-100","px-4","py-3","cursor-pointer",3,"click"],[1,"w-3","h-3","rounded-full","bg-green-400","mr-2"],[1,"font-medium","text-green-800","text-sm"],[1,"ml-2","bg-green-200","text-green-800","text-xs","font-medium","px-2","py-1","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-auto","text-green-600"],[1,"flex","items-center","bg-indigo-100","px-4","py-3","cursor-pointer",3,"click"],[1,"w-3","h-3","rounded-full","bg-indigo-400","mr-2"],[1,"font-medium","text-indigo-800","text-sm"],[1,"ml-2","bg-indigo-200","text-indigo-800","text-xs","font-medium","px-2","py-1","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-auto","text-indigo-600"],[1,"flex","items-center","bg-purple-100","px-4","py-3","cursor-pointer",3,"click"],[1,"w-3","h-3","rounded-full","bg-purple-400","mr-2"],[1,"font-medium","text-purple-800","text-sm"],[1,"ml-2","bg-purple-200","text-purple-800","text-xs","font-medium","px-2","py-1","rounded-full"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-auto","text-purple-600"],[1,"fixed","inset-0","bg-black","bg-opacity-60","z-50","flex","justify-center","items-center","p-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6a7.975 7.975 0 014 1.07M15 11a3.5 3.5 0 00-5 0M9.879 16.121A3 3 0 1012 12M12 12v.01"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15.414a8 8 0 1112.828 0M12 6a7.965 7.965 0 00-5.657 2.343M12 15a3 3 0 100-6 3 3 0 000 6z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 01-6 0v-1m6 0H9"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 9L4 4m0 0l5 0m-5 0l0 5M15 4l5 0m0 0l-5 5m5-5l0 5M4 15l5 5m-5 0l0-5m0 5l5 0M15 20l5-5m0 5l0-5m0 5l-5 0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"],[1,"grid","grid-cols-2","gap-2"],[1,"col-span-2","flex","flex-col","justify-center","items-center","h-20","text-gray-400","text-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","mb-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"],[1,"border","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","active:opacity-80",3,"ngStyle"],[1,"border","rounded-lg","shadow-sm","hover:shadow-md","transition-shadow","duration-200","active:opacity-80",3,"click","ngStyle"],[1,"p-3"],[1,"flex","justify-between","items-center","border-b","border-white","border-opacity-30","pb-2"],[1,"font-bold","text-gray-900","text-sm"],[1,"text-xs","text-gray-600"],[1,"text-xs","bg-white","bg-opacity-30","px-2","py-1","rounded-lg"],[1,"mt-2","flex","justify-between"],[1,"text-xs","text-gray-700","font-medium"],[1,"mt-3"],[1,"w-full","h-10","bg-indigo-500","text-white","rounded-lg","hover:bg-indigo-600","active:bg-indigo-700","flex","items-center","justify-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-1"],[1,"text-sm"],[1,"mt-2"],[1,"flex","flex-wrap","gap-1"],[1,"text-xs","px-2","py-1","rounded-full","bg-white","bg-opacity-30","text-gray-800"],[1,"text-xs","px-2","py-1","rounded-full","bg-gray-100","text-gray-600"],[1,"w-full","h-10","flex","items-center","justify-center","rounded-lg",3,"click","disabled","ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-2","space-y-1"],[1,"flex","items-center","text-xs","text-gray-700"],[1,"flex","justify-between","items-center"],[1,"mt-2","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3","mr-1"],[1,"text-xs","text-gray-700"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","bg-white","bg-opacity-30","text-gray-800","px-2","py-1","rounded-full","flex","items-center"],[1,"w-full","h-10","bg-gray-200","text-gray-800","rounded-lg","hover:bg-gray-300","active:bg-gray-400","flex","items-center","justify-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"],[1,"rounded-lg","shadow-xl","w-full","max-w-xl","max-h-[90vh]","overflow-y-auto",3,"ngStyle"],[1,"sticky","top-0","z-10","p-4","border-b","border-white","border-opacity-30","flex","justify-between","items-start","rounded-t-lg",3,"ngStyle"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","p-2","rounded-full","hover:bg-gray-100","active:bg-gray-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-4"],[1,"grid","grid-cols-2","gap-4","mb-5"],[1,"text-sm","font-medium","text-gray-500","mb-1"],[1,"text-base","font-semibold"],[1,"text-sm","text-gray-700","mt-2"],[1,"text-sm","text-gray-700"],[1,"font-medium"],[1,"flex","items-center","mt-2"],[1,"text-sm","font-medium","text-gray-700","mr-2"],[1,"inline-block","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"mt-5"],[1,"font-medium","text-gray-800","mb-2","flex","items-center"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"overflow-y-auto","max-h-64","bg-gray-50","rounded-lg","shadow-inner"],[1,"p-4","border-b","border-gray-200","last:border-0","hover:bg-gray-100","active:bg-gray-200",3,"ngClass"],[1,"mt-5","flex","justify-between","items-center","p-4","bg-gray-100","rounded-lg"],[1,"mt-5","grid","grid-cols-2","gap-3"],[1,"bg-teal-500","text-white","py-3","rounded-lg","hover:bg-teal-600","active:bg-teal-700","flex","items-center","justify-center"],[1,"bg-blue-500","text-white","py-3","rounded-lg","hover:bg-blue-600","active:bg-blue-700","flex","items-center","justify-center"],[1,"bg-red-500","text-white","py-3","rounded-lg","hover:bg-red-600","active:bg-red-700","flex","items-center","justify-center"],[1,"bg-gray-200","text-gray-800","py-3","rounded-lg","hover:bg-gray-300","active:bg-gray-400","flex","items-center","justify-center",3,"click"],[1,"flex","justify-between","gap-2"],[1,"flex-1"],[1,"flex","items-start"],[1,"text-sm","font-medium","text-gray-800","mr-2"],[1,"text-sm","font-medium","text-gray-800"],[1,"text-xs","text-gray-600","block","mt-1"],[1,"text-right","flex","flex-col","items-end"],[1,"text-sm","font-medium"],[1,"text-xs","px-2","py-1","rounded-full","mt-1",3,"ngClass"],[1,"mt-2","flex","justify-end"],[1,"text-blue-600"],[1,"px-3","py-1.5","bg-green-500","text-white","text-xs","rounded-full","hover:bg-green-600","active:bg-green-700","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"font-semibold","text-gray-700"],[1,"bg-teal-500","text-white","py-3","rounded-lg","hover:bg-teal-600","active:bg-teal-700","flex","items-center","justify-center",3,"click"],[1,"bg-blue-500","text-white","py-3","rounded-lg","hover:bg-blue-600","active:bg-blue-700","flex","items-center","justify-center",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"bg-red-500","text-white","py-3","rounded-lg","hover:bg-red-600","active:bg-red-700","flex","items-center","justify-center",3,"click"]],template:function(t,r){if(t&1){let i=ye();f(0,"div",2)(1,"audio",3,0),ae(3,"source",4),v(4," Tu navegador no soporta el elemento de audio. "),p(),f(5,"div",5)(6,"div",6)(7,"button",7),J("click",function(){return Y(i),X(r.setDateFilter("today"))}),v(8," Hoy "),p(),f(9,"button",7),J("click",function(){return Y(i),X(r.setDateFilter("yesterday"))}),v(10," Ayer "),p(),f(11,"button",7),J("click",function(){return Y(i),X(r.setDateFilter("week"))}),v(12," Semana "),p(),f(13,"button",7),J("click",function(){return Y(i),X(r.setDateFilter("all"))}),v(14," Todo "),p(),f(15,"div",8)(16,"input",9,1),ot(18,"date"),J("change",function(){Y(i);let o=wF(17);return X(r.setCustomDate(o.value))}),p()()(),f(19,"div",10)(20,"button",11),J("click",function(){return Y(i),X(r.toggleSound())}),se(21,xte,2,0,":svg:svg",12)(22,wte,2,0,":svg:svg",12),p(),f(23,"button",11),J("click",function(){return Y(i),X(r.toggleNotifications())}),se(24,bte,2,0,":svg:svg",12)(25,Ete,2,0,":svg:svg",12),p(),f(26,"button",11),J("click",function(){return Y(i),X(r.toggleFullscreen())}),se(27,Cte,2,0,":svg:svg",12)(28,Ste,2,0,":svg:svg",12),p()()(),f(29,"div",13)(30,"div",14)(31,"h2",15),se(32,Ite,3,3,"span")(33,Tte,2,0,"span")(34,Dte,2,0,"span")(35,Ate,3,3,"span")(36,kte,2,0,"span"),p()(),f(37,"div",16),Mn(38)(39)(40)(41)(42)(43),f(44,"div",17)(45,"div",18)(46,"div",19),xe(),f(47,"svg",20),ae(48,"path",21),p(),Pe(),f(49,"span",22),v(50,"En espera"),p()(),f(51,"span",23),v(52),p()()(),f(53,"div",24)(54,"div",18)(55,"div",19),xe(),f(56,"svg",25),ae(57,"path",26),p(),Pe(),f(58,"span",27),v(59,"Preparando"),p()(),f(60,"span",28),v(61),p()()(),f(62,"div",29)(63,"div",18)(64,"div",19),xe(),f(65,"svg",30),ae(66,"path",31),p(),Pe(),f(67,"span",32),v(68,"Listos para servir"),p()(),f(69,"span",33),v(70),p()()(),f(71,"div",34)(72,"div",18)(73,"div",19),xe(),f(74,"svg",35),ae(75,"path",36),p(),Pe(),f(76,"span",37),v(77,"Servido"),p()(),f(78,"span",38),v(79),p()()(),f(80,"div",39)(81,"div",18)(82,"div",19),xe(),f(83,"svg",40),ae(84,"path",41),p(),Pe(),f(85,"span",42),v(86,"Cobrado"),p()(),f(87,"span",43),v(88),p()()()(),f(89,"div",44)(90,"div",45)(91,"div",46),J("click",function(){return Y(i),X(r.toggleSection("waiting"))}),ae(92,"div",47),f(93,"h4",48),v(94,"En espera"),p(),f(95,"span",49),v(96),p(),xe(),f(97,"svg",50),ae(98,"path",51),p()(),se(99,Ote,5,2,"div",52),p(),Pe(),f(100,"div",45)(101,"div",53),J("click",function(){return Y(i),X(r.toggleSection("preparing"))}),ae(102,"div",54),f(103,"h4",55),v(104,"En preparaci\xF3n"),p(),f(105,"span",56),v(106),p(),xe(),f(107,"svg",57),ae(108,"path",51),p()(),se(109,Ute,5,2,"div",52),p(),Pe(),f(110,"div",45)(111,"div",58),J("click",function(){return Y(i),X(r.toggleSection("ready"))}),ae(112,"div",59),f(113,"h4",60),v(114,"Listos para servir"),p(),f(115,"span",61),v(116),p(),xe(),f(117,"svg",62),ae(118,"path",51),p()(),se(119,Wte,5,2,"div",52),p(),Pe(),f(120,"div",45)(121,"div",63),J("click",function(){return Y(i),X(r.toggleSection("served"))}),ae(122,"div",64),f(123,"h4",65),v(124,"Servido"),p(),f(125,"span",66),v(126),p(),xe(),f(127,"svg",67),ae(128,"path",51),p()(),se(129,Jte,5,2,"div",52),p(),Pe(),f(130,"div",45)(131,"div",68),J("click",function(){return Y(i),X(r.toggleSection("paid"))}),ae(132,"div",69),f(133,"h4",70),v(134,"Cobrado"),p(),f(135,"span",71),v(136),p(),xe(),f(137,"svg",72),ae(138,"path",51),p()(),se(139,dne,5,2,"div",52),p()()(),se(140,Cne,66,41,"div",73),p()}if(t&2){x(7),tt("bg-teal-500",r.selectedDateFilter==="today")("text-white",r.selectedDateFilter==="today")("text-gray-700",r.selectedDateFilter!=="today"),x(2),tt("bg-teal-500",r.selectedDateFilter==="yesterday")("text-white",r.selectedDateFilter==="yesterday")("text-gray-700",r.selectedDateFilter!=="yesterday"),x(2),tt("bg-teal-500",r.selectedDateFilter==="week")("text-white",r.selectedDateFilter==="week")("text-gray-700",r.selectedDateFilter!=="week"),x(2),tt("bg-teal-500",r.selectedDateFilter==="all")("text-white",r.selectedDateFilter==="all")("text-gray-700",r.selectedDateFilter!=="all"),x(2),tt("bg-teal-500",r.selectedDateFilter==="custom")("text-white",r.selectedDateFilter==="custom"),x(),tt("text-white",r.selectedDateFilter==="custom"),ee("value",ar(18,86,r.customDate,"yyyy-MM-dd")),x(4),tt("bg-teal-100",r.soundEnabled)("text-teal-700",r.soundEnabled),Za("title",r.soundEnabled?"Desactivar sonido":"Activar sonido"),x(),Se(r.soundEnabled?21:22),x(2),tt("bg-blue-100",r.notificationsEnabled)("text-blue-700",r.notificationsEnabled),Za("title",r.notificationsEnabled?"Desactivar notificaciones":"Activar notificaciones"),x(),Se(r.notificationsEnabled?24:25),x(2),tt("bg-purple-100",r.isFullscreen)("text-purple-700",r.isFullscreen),Za("title",r.isFullscreen?"Salir de pantalla completa":"Pantalla completa"),x(),Se(r.isFullscreen?27:28),x(5),Se(r.selectedDateFilter==="today"?32:r.selectedDateFilter==="yesterday"?33:r.selectedDateFilter==="week"?34:r.selectedDateFilter==="custom"?35:36);let i=r.getStatusCounts(),s=i.waitingCount,o=i.preparingCount,a=i.readyCount,c=i.servedCount,l=i.paidCount;x(20),ie(" ",s," "),x(9),ie(" ",o," "),x(9),ie(" ",a," "),x(9),ie(" ",c," "),x(9),ie(" ",l," "),x(8),ie(" ",r.getItemsByStatus("En espera").length," "),x(),tt("transform",r.sectionExpanded.waiting)("rotate-180",r.sectionExpanded.waiting),x(2),Se(r.sectionExpanded.waiting?99:-1),x(7),ie(" ",r.getItemsByStatus("En preparaci\xF3n").length," "),x(),tt("transform",r.sectionExpanded.preparing)("rotate-180",r.sectionExpanded.preparing),x(2),Se(r.sectionExpanded.preparing?109:-1),x(7),ie(" ",r.getItemsByStatus("Listos para servir").length," "),x(),tt("transform",r.sectionExpanded.ready)("rotate-180",r.sectionExpanded.ready),x(2),Se(r.sectionExpanded.ready?119:-1),x(7),ie(" ",r.getServedOrders().length," "),x(),tt("transform",r.sectionExpanded.served)("rotate-180",r.sectionExpanded.served),x(2),Se(r.sectionExpanded.served?129:-1),x(7),ie(" ",l," "),x(),tt("transform",r.sectionExpanded.paid)("rotate-180",r.sectionExpanded.paid),x(2),Se(r.sectionExpanded.paid?139:-1),x(),Se(r.selectedOrder?140:-1)}},dependencies:[nn,tr,JF,M1,_l,qy,Ur,wl],styles:['@charset "UTF-8";@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}']})};var lr=Bs(Rs());var Th=Bs(Rs());var Ul=class n{firestore=le(rn);authService=le(jn);currentUser=null;constructor(){this.authService.userData$.subscribe(e=>{this.currentUser=e})}processOrderInventory(e,t){return W(this,null,function*(){try{return yield this.processDishesInventory(e,t),yield this.processIngredientsInventory(e,t),!0}catch(r){return console.error("Error al procesar inventario:",r),Th.default.fire({icon:"warning",title:"Advertencia de Inventario",text:"Se ha registrado el pedido, pero hubo un problema al actualizar el inventario",toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3}),!1}})}processDishesInventory(e,t){return W(this,null,function*(){for(let r of t){let i=Ye(this.firestore,`menu/${r.id}`),s=yield ln(i);if(s.exists()){let o=s.data();if(o.isTracked){let a=o.stockQuantity||0,c=Math.max(0,a-r.quantity);yield St(i,{stockQuantity:c,updatedAt:new Date}),yield this.registerDishMovement({dishId:r.id,dishName:r.name,previousQuantity:a,newQuantity:c,quantity:-r.quantity,type:"salida",reason:`Pedido #${e}`,orderId:e,createdBy:this.currentUser?.name||"Sistema",createdAt:new Date}),c===0?Th.default.fire({icon:"warning",title:"Stock Agotado",text:`El plato "${r.name}" se ha agotado`,toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3}):c<5&&Th.default.fire({icon:"info",title:"Stock Bajo",text:`Quedan ${c} unidades del plato "${r.name}"`,toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3})}}}})}processIngredientsInventory(e,t){return W(this,null,function*(){let r=new Map;for(let i of t){console.log(`Procesando ingredientes para: ${i.name}`);let s=Ye(this.firestore,`menu/${i.id}`),o=yield ln(s);if(o.exists()){let c=o.data().ingredients||[];console.log("Ingredientes encontrados:",c);for(let l of c)if(console.log(`Verificando ingrediente: ${l.name}, isTracked: ${l.isTracked}`),l.isTracked){let u=l.quantity*i.quantity;console.log(`Cantidad a reducir: ${u}`);let d=r.get(l.id)||0;r.set(l.id,d+u)}}}console.log("Ingredientes a procesar:",r);for(let[i,s]of r.entries()){let o=Ye(this.firestore,`inventory/${i}`),a=yield ln(o);if(a.exists()){let c=a.data(),l=c.quantity||0,u=Math.max(0,l-s);console.log(`Actualizando stock de ${c.name}: ${l} -> ${u}`),yield St(o,{quantity:u,updatedAt:new Date}),yield this.registerInventoryMovement({itemId:i,itemName:c.name,previousQuantity:l,newQuantity:u,quantity:-s,type:"salida",reason:`Pedido #${e}`,orderId:e,createdBy:this.currentUser?.name||"Sistema",createdAt:new Date}),u===0?Th.default.fire({icon:"warning",title:"Ingrediente Agotado",text:`El ingrediente "${c.name}" se ha agotado`,toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3}):c.minStock&&u<=c.minStock&&Th.default.fire({icon:"info",title:"Stock Bajo",text:`El ingrediente "${c.name}" est\xE1 por debajo del m\xEDnimo`,toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3})}}})}restoreOrderInventory(e){return W(this,null,function*(){try{return yield this.restoreDishesFromMovements(e),yield this.restoreIngredientsFromMovements(e),!0}catch(t){return console.error("Error al restaurar inventario:",t),!1}})}restoreDishesFromMovements(e){return W(this,null,function*(){let t=it(this.firestore,"dish_movements"),r=tn(t,yn("orderId","==",e)),i=yield Tr(r);for(let s of i.docs){let o=s.data();if(o.type==="salida"){let a=Ye(this.firestore,`menu/${o.dishId}`),c=yield ln(a);if(c.exists()){let u=c.data().stockQuantity||0,d=Math.abs(o.quantity),m=u+d;yield St(a,{stockQuantity:m,updatedAt:new Date}),yield this.registerDishMovement({dishId:o.dishId,dishName:o.dishName,previousQuantity:u,newQuantity:m,quantity:d,type:"entrada",reason:`Cancelaci\xF3n de Pedido #${e}`,orderId:e,createdBy:this.currentUser?.name||"Sistema",createdAt:new Date})}}}})}restoreIngredientsFromMovements(e){return W(this,null,function*(){let t=it(this.firestore,"inventory_movements"),r=tn(t,yn("orderId","==",e)),i=yield Tr(r);for(let s of i.docs){let o=s.data();if(o.type==="salida"){let a=Ye(this.firestore,`inventory/${o.itemId}`),c=yield ln(a);if(c.exists()){let u=c.data().quantity||0,d=Math.abs(o.quantity),m=u+d;yield St(a,{quantity:m,updatedAt:new Date}),yield this.registerInventoryMovement({itemId:o.itemId,itemName:o.itemName,previousQuantity:u,newQuantity:m,quantity:d,type:"entrada",reason:`Cancelaci\xF3n de Pedido #${e}`,orderId:e,createdBy:this.currentUser?.name||"Sistema",createdAt:new Date})}}}})}checkInventoryAvailability(e){return W(this,null,function*(){try{let t=yield this.checkDishesAvailability(e);if(t)return t;let r=yield this.checkIngredientsAvailability(e);return r||null}catch(t){return console.error("Error al verificar inventario:",t),"Error al verificar disponibilidad de inventario"}})}checkDishesAvailability(e){return W(this,null,function*(){for(let t of e){let r=Ye(this.firestore,`menu/${t.id}`),i=yield ln(r);if(i.exists()){let s=i.data();if(s.isTracked){let o=s.stockQuantity||0;if(o<t.quantity)return`No hay suficiente stock del plato "${t.name}". Disponible: ${o}, Solicitado: ${t.quantity}`}}}return null})}checkIngredientsAvailability(e){return W(this,null,function*(){let t=new Map;for(let r of e){let i=Ye(this.firestore,`menu/${r.id}`),s=yield ln(i);if(s.exists()){let a=s.data().ingredients||[];for(let c of a)if(c.isTracked){let l=c.quantity*r.quantity,u=t.get(c.id);u?t.set(c.id,{name:c.name,quantity:u.quantity+l}):t.set(c.id,{name:c.name,quantity:l})}}}for(let[r,i]of t.entries()){let s=Ye(this.firestore,`inventory/${r}`),o=yield ln(s);if(o.exists()){let a=o.data(),c=a.quantity||0;if(c<i.quantity)return`No hay suficiente stock del ingrediente "${i.name}". Disponible: ${c} ${a.unit}, Necesario: ${i.quantity} ${a.unit}`}else return`El ingrediente "${i.name}" no se encuentra en el inventario`}return null})}registerDishMovement(e){return W(this,null,function*(){let t=it(this.firestore,"dish_movements");yield yr(t,e)})}registerInventoryMovement(e){return W(this,null,function*(){let t=it(this.firestore,"inventory_movements");yield yr(t,e)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sne=["notificationSound"],ML=(n,e)=>e.id+"-"+(e.selectedOption||"")+"-"+(e.quantity||"1"),Ine=(n,e)=>e.id+"-"+(e.selectedOption||"")+"-"+(e.quantity||"1")+"-"+n,Tne=(n,e)=>({"border-green-400":n,"border-indigo-400":e}),Dne=(n,e)=>({"bg-green-500":n,"bg-indigo-500":e});function Ane(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",35),p())}function kne(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",36),p())}function Mne(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",15),p())}function Rne(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",37),p())}function Pne(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",38),p())}function Fne(n,e){n&1&&(xe(),f(0,"svg",8),ae(1,"path",39),p())}function One(n,e){n&1&&(f(0,"div",29),xe(),f(1,"svg",40),ae(2,"path",41),p(),Pe(),f(3,"p",42),v(4,"No hay platos en espera"),p()())}function Nne(n,e){if(n&1&&(f(0,"p",48),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Lne(n,e){if(n&1){let t=ye();f(0,"div",30)(1,"div",43)(2,"span",44),v(3),p()(),f(4,"div",45)(5,"div",46)(6,"p",47),v(7),p(),se(8,Nne,2,1,"p",48),f(9,"div",49)(10,"p"),v(11),p(),f(12,"p"),v(13),ot(14,"date"),p()()(),f(15,"div",50)(16,"button",51),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.updateItemStatus(i,"En preparaci\xF3n"))}),v(17," Preparar "),p()()()()}if(n&2){let t=e.$implicit,r=R();x(3),ie(" Mesa ",t.tableInfo," "),x(4),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?8:-1),x(3),ie("Cliente: ",t.customerName,""),x(2),De(ar(14,7,t.orderDate,"dd/MM HH:mm")),x(3),ee("disabled",r.isItemFromPastDate(t))}}function Vne(n,e){n&1&&(f(0,"div",29),xe(),f(1,"svg",40),ae(2,"path",52),p(),Pe(),f(3,"p",42),v(4,"No hay platos en preparaci\xF3n"),p()())}function Bne(n,e){if(n&1&&(f(0,"p",48),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Une(n,e){if(n&1){let t=ye();f(0,"div",32)(1,"div",43)(2,"span",53),v(3),p()(),f(4,"div",54)(5,"div",55)(6,"p",47),v(7),p(),se(8,Bne,2,1,"p",48),f(9,"div",49)(10,"p"),v(11),p(),f(12,"p"),v(13),ot(14,"date"),p()()(),f(15,"div",56)(16,"button",57),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.updateItemStatus(i,"En espera"))}),v(17," Regresar "),p(),f(18,"button",58),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.updateItemStatus(i,"Listos para servir"))}),v(19," Listo "),p()()()()}if(n&2){let t=e.$implicit,r=R();x(3),ie(" Mesa ",t.tableInfo," "),x(4),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?8:-1),x(3),ie("Cliente: ",t.customerName,""),x(2),De(ar(14,8,t.orderDate,"dd/MM HH:mm")),x(3),ee("disabled",r.isItemFromPastDate(t)),x(2),ee("disabled",r.isItemFromPastDate(t))}}function jne(n,e){n&1&&(f(0,"div",29),xe(),f(1,"svg",40),ae(2,"path",59),p(),Pe(),f(3,"p",42),v(4,"No hay platos completados"),p()())}function $ne(n,e){if(n&1&&(f(0,"p",48),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.selectedOption," ")}}function Hne(n,e){n&1&&(f(0,"p",61),v(1,"Estado: Servido"),p())}function zne(n,e){if(n&1){let t=ye();f(0,"button",51),J("click",function(){Y(t);let i=R().$implicit,s=R();return X(s.updateItemStatus(i,"En preparaci\xF3n"))}),v(1," Reabrir "),p()}if(n&2){let t=R().$implicit,r=R();ee("disabled",r.isItemFromPastDate(t))}}function Wne(n,e){if(n&1&&(f(0,"div",34)(1,"div",43)(2,"span",60),v(3),p()(),f(4,"div",45)(5,"div",46)(6,"p",47),v(7),p(),se(8,$ne,2,1,"p",48),f(9,"div",49)(10,"p"),v(11),p(),f(12,"p"),v(13),ot(14,"date"),p(),se(15,Hne,2,0,"p",61),p()(),f(16,"div",50),se(17,zne,2,1,"button",62),p()()()),n&2){let t=e.$implicit;ee("ngClass",vn(13,Tne,(t.status||"")==="Listos para servir",(t.status||"")==="Servido")),x(2),ee("ngClass",vn(16,Dne,(t.status||"")==="Listos para servir",(t.status||"")==="Servido")),x(),ie(" Mesa ",t.tableInfo," "),x(4),gn("",t.quantity,"x ",t.name,""),x(),Se(t.selectedOption?8:-1),x(3),ie("Cliente: ",t.customerName,""),x(2),De(ar(14,10,t.orderDate,"dd/MM HH:mm")),x(2),Se((t.status||"")==="Servido"?15:-1),x(2),Se((t.status||"")==="Listos para servir"||(t.status||"")==="Servido"?17:-1)}}var Qy=class n{notificationSound;firestore=le(rn);inventoryService=le(Ul);ngZone=le($t);cdr=le(Ji);subscriptions=[];allItems=[];filteredItems=[];searchQuery="";showPastDates=!1;currentDate=new Date;hasNewItems=!1;lastItemCount=0;soundEnabled=!1;notificationsEnabled=!1;isFullscreen=!1;refreshInterval;audioResetInterval;excludedCategoryIds=["JWXmTEO143llfKM5PmkU","p4r4p8ofhtPIOrf4M14c","UmMtTqxhOZETuKr7tVMd"];ngOnInit(){this.loadOrders(),this.startAudioResetInterval(),setInterval(()=>{this.currentDate=new Date,this.applyFilters()},6e4);let e=localStorage.getItem("kitchenSoundEnabled");this.soundEnabled=e==="true";let t=localStorage.getItem("kitchenNotificationsEnabled");this.notificationsEnabled=t==="true",this.refreshInterval=setInterval(()=>{this.loadOrders()},3e4),this.adjustContainerHeight(),window.addEventListener("resize",this.adjustContainerHeight),document.addEventListener("fullscreenchange",this.handleFullscreenChange.bind(this)),setTimeout(()=>{this.soundEnabled&&this.initAudio()},1e3)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe()),clearInterval(this.refreshInterval),clearInterval(this.audioResetInterval),window.removeEventListener("resize",this.adjustContainerHeight),document.removeEventListener("fullscreenchange",this.handleFullscreenChange.bind(this))}adjustContainerHeight(){let e=window.innerHeight,t=220;document.documentElement.style.setProperty("--kanban-height",`${e-t}px`),document.documentElement.style.setProperty("--cards-container-height",`${e-t-55}px`)}handleFullscreenChange(){this.isFullscreen=!!document.fullscreenElement}toggleSound(){this.soundEnabled=!this.soundEnabled,localStorage.setItem("kitchenSoundEnabled",this.soundEnabled.toString()),this.soundEnabled?this.initAudio():lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Sonido desactivado"})}toggleNotifications(){this.notificationsEnabled=!this.notificationsEnabled,localStorage.setItem("kitchenNotificationsEnabled",this.notificationsEnabled.toString()),this.notificationsEnabled?Notification.permission!=="granted"?Notification.requestPermission().then(e=>{e==="granted"?lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones activadas"}):(this.notificationsEnabled=!1,localStorage.setItem("kitchenNotificationsEnabled","false"),lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"warning",title:"Permiso denegado",text:"No se pudo activar las notificaciones"}))}):lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones activadas"}):lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Notificaciones desactivadas"})}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen().then(()=>{this.isFullscreen=!1,lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"info",title:"Saliendo de pantalla completa"})}).catch(e=>{console.error("Error al salir de pantalla completa:",e)}):document.documentElement.requestFullscreen().then(()=>{this.isFullscreen=!0,lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Modo pantalla completa activado"})}).catch(e=>{console.error("Error al entrar en pantalla completa:",e),lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"No se pudo activar pantalla completa"})})}initAudio(){if(!this.notificationSound){console.warn("Elemento de audio no disponible");return}this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,this.notificationSound.nativeElement.load(),this.notificationSound.nativeElement.volume=.01;let e=this.notificationSound.nativeElement.play();e!==void 0&&e.then(()=>{setTimeout(()=>{this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,this.notificationSound.nativeElement.volume=1,lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones sonoras activadas"})},100)}).catch(t=>{console.warn("Error al inicializar audio:",t),lr.default.fire({title:"Habilitar sonido",text:'Toque "Aceptar" para activar las notificaciones sonoras',icon:"info",confirmButtonText:"Aceptar",heightAuto:!1}).then(r=>{r.isConfirmed&&(this.notificationSound.nativeElement.volume=1,this.notificationSound.nativeElement.play().then(()=>{this.notificationSound.nativeElement.pause(),this.notificationSound.nativeElement.currentTime=0,lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,icon:"success",title:"Notificaciones sonoras activadas"})}).catch(i=>{console.error("No se pudo activar el audio:",i),this.soundEnabled=!1,localStorage.setItem("kitchenSoundEnabled","false"),lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,icon:"warning",title:"No se pudo activar el sonido",text:"Revise la configuraci\xF3n de su dispositivo"})}))})})}startAudioResetInterval(){let e=setInterval(()=>{if(this.soundEnabled&&this.notificationSound){console.log("Mantenimiento programado del sistema de audio");let t=this.notificationSound.nativeElement;t.pause(),t.currentTime=0,t.load()}},3e5);this.audioResetInterval=e}playNotificationSound(){if(this.soundEnabled&&this.notificationSound){let t=this.notificationSound.nativeElement;t.pause(),t.currentTime=0,t.volume=.8,t.play().catch(r=>{console.warn("Primer intento de reproducci\xF3n fall\xF3:",r),setTimeout(()=>{t.currentTime=0,t.play().catch(i=>{console.error("Segundo intento de reproducci\xF3n fall\xF3:",i),setTimeout(()=>{t.volume=.5,t.currentTime=0,t.play().catch(s=>{console.error("Tercer intento de reproducci\xF3n fall\xF3:",s),console.log("Reiniciando sistema de audio..."),this.soundEnabled=!1,setTimeout(()=>{this.soundEnabled=!0,this.initAudio()},1e3)})},300)})},200)})}"vibrate"in navigator&&navigator.vibrate([200,100,200]),lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,icon:"success",title:"Nuevo pedido recibido",text:"\xA1Se ha recibido un nuevo pedido en la cocina!"});let e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(this.notificationsEnabled&&!e&&Notification.permission==="granted"){let t=new Notification("Nuevo pedido recibido",{body:"\xA1Se ha recibido un nuevo pedido en la cocina!",icon:"/assets/icons/bell-svgrepo-com.svg"});setTimeout(()=>t.close(),5e3)}}loadOrders(){let e=it(this.firestore,"orders"),t=tn(e,Un("date","desc")),r=Vr(t,{idField:"id"}).pipe(je(i=>i.map(s=>{let o=s;return o.status||(o.status="En espera"),o.items&&Array.isArray(o.items)&&(o.items=o.items.map(a=>Te(fe({},a),{status:a.status||"En espera"}))),Te(fe({},o),{date:o.date?.toDate()})}))).subscribe(i=>{this.extractAllItems(i),this.applyFilters(),this.checkForNewItems(),this.ngZone.run(()=>{setTimeout(()=>{this.cdr.markForCheck(),this.cdr.detectChanges()},0)})});this.subscriptions.push(r)}extractAllItems(e){let t=this.allItems.length;this.allItems=[],e.forEach(r=>{if(r.items&&Array.isArray(r.items)){let i=r.items.filter(s=>!this.excludedCategoryIds.includes(s.categoryId||"")).map(s=>Te(fe({},s),{orderId:r.id,orderDate:r.date,customerName:r.customer.name,tableInfo:r.tables?r.tables.join(", "):"No especificada"}));this.allItems.push(...i)}}),this.allItems.sort((r,i)=>r.orderDate&&i.orderDate?i.orderDate.getTime()-r.orderDate.getTime():r.orderDate?-1:i.orderDate?1:0),this.allItems.length>t&&t>0&&(this.hasNewItems=!0,this.notifyNewItems(),this.soundEnabled&&this.playNotificationSound()),this.lastItemCount=this.allItems.length}notifyNewItems(){lr.default.fire({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:"info",title:"\xA1Nuevos pedidos recibidos!",width:"300px"})}applyFilters(){if(this.filteredItems=[...this.allItems],!this.showPastDates){let e=new Date(this.currentDate);e.setHours(0,0,0,0),this.filteredItems=this.filteredItems.filter(t=>{if(!t.orderDate)return!1;let r=new Date(t.orderDate);return r.setHours(0,0,0,0),r.getTime()>=e.getTime()})}if(this.searchQuery&&this.searchQuery.trim()!==""){let e=this.searchQuery.toLowerCase().trim();this.filteredItems=this.filteredItems.filter(t=>t.name?.toLowerCase().includes(e)||!1||t.customerName?.toLowerCase().includes(e)||!1||t.selectedOption?.toLowerCase().includes(e)||!1||t.tableInfo?.toLowerCase().includes(e)||!1)}}filterItems(){this.applyFilters()}getFilteredItemsByStatus(e){return this.filteredItems.filter(t=>(t.status||"En espera")===e)}getItemCountByStatus(e){return this.getFilteredItemsByStatus(e).length}isItemFromPastDate(e){if(!e.orderDate)return!1;let t=new Date(e.orderDate),r=new Date(this.currentDate);return t.setHours(0,0,0,0)<r.setHours(0,0,0,0)}updateItemStatus(e,t){if(this.isItemFromPastDate(e)){lr.default.fire({icon:"warning",title:"No se puede modificar",text:"No se pueden modificar pedidos de fechas pasadas",toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,width:"350px"});return}let r=Ye(this.firestore,`orders/${e.orderId}`);ln(r).then(i=>{if(i.exists()){let o=i.data().items||[],a="",c=o.map(l=>l.id===e.id&&l.name===e.name&&l.selectedOption===e.selectedOption?(a=l.status||"En espera",Te(fe({},l),{status:t})):l);lr.default.fire({title:"Actualizando...",didOpen:()=>{lr.default.showLoading()},allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,backdrop:!0}),St(r,{items:c}).then(()=>{lr.default.close(),e.status=t,this.applyFilters(),a!=="Listos para servir"&&t==="Listos para servir"?this.processInventoryForCompletedItem(e):a==="Listos para servir"&&t!=="Listos para servir"&&this.restoreInventoryForReopenedItem(e),this.updateOrderStatusIfNeeded(e.orderId);let l="",u="";switch(t){case"En preparaci\xF3n":l=`${e.name} ha pasado a preparaci\xF3n`,u="info";break;case"Listos para servir":l=`${e.name} est\xE1 listo`,u="success";break;case"En espera":l=`${e.name} ha vuelto a la lista de espera`,u="warning";break}lr.default.fire({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,icon:u,title:l,width:"350px"})}).catch(l=>{console.error("Error al actualizar el estado del \xEDtem:",l),lr.default.fire({title:"Error",text:"No se pudo actualizar el estado del \xEDtem",icon:"error",confirmButtonText:"OK",confirmButtonColor:"#2196F3"})})}})}processInventoryForCompletedItem(e){return W(this,null,function*(){try{let t=[Te(fe({},e),{categoryId:e.categoryId||"",categoryName:e.categoryName||""})];console.log("Procesando inventario para \xEDtem completado:",t),yield this.inventoryService.processOrderInventory(e.orderId||"",t),console.log("Inventario actualizado para \xEDtem completado")}catch(t){console.error("Error al procesar inventario para \xEDtem completado:",t)}})}restoreInventoryForReopenedItem(e){return W(this,null,function*(){try{console.log("Restaurando inventario para \xEDtem reabierto:",e);let t="ingredientes";try{let i=Ye(this.firestore,`menu/${e.id}`),s=yield ln(i);if(s.exists()){let o=s.data();o.ingredients&&o.ingredients.length>0&&(t=o.ingredients[0].name||"ingredientes")}}catch(i){console.error("Error al obtener ingredientes del plato:",i)}let r=[Te(fe({},e),{categoryId:e.categoryId||"",categoryName:e.categoryName||""})];yield this.inventoryService.restoreOrderInventory(e.orderId||""),console.log("Inventario restaurado para \xEDtem reabierto"),lr.default.fire({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,icon:"info",title:"Inventario actualizado",text:`Se ha restaurado ${t} al inventario`,width:"350px"})}catch(t){console.error("Error al restaurar inventario para \xEDtem reabierto:",t),lr.default.fire({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,icon:"warning",title:"Error al restaurar inventario",width:"350px"})}})}updateOrderStatusIfNeeded(e){if(!e){console.warn("Se intent\xF3 actualizar un estado de pedido con un ID indefinido");return}let r=this.allItems.filter(s=>s.orderId===e).map(s=>s.status||"En espera");if(new Set(r).size===1){let s=r[0],o=Ye(this.firestore,`orders/${e}`);St(o,{status:s}).then(()=>{console.log(`Estado del pedido ${e} actualizado a ${s}`)}).catch(a=>{console.error("Error al actualizar el estado general del pedido:",a)})}else if(r.every(s=>s==="Listos para servir"||s==="En preparaci\xF3n")){let s=Ye(this.firestore,`orders/${e}`);St(s,{status:"En preparaci\xF3n"}).then(()=>{console.log(`Estado del pedido ${e} actualizado a En preparaci\xF3n`)}).catch(o=>{console.error("Error al actualizar el estado general del pedido:",o)})}}checkForNewItems(){this.allItems.filter(t=>(t.status||"En espera")==="En espera"&&!this.isItemFromPastDate(t)).length>0&&this.hasNewItems&&(this.notifyNewItems(),this.soundEnabled&&this.playNotificationSound(),this.hasNewItems=!1)}getReadyAndServedItems(){return this.filteredItems.filter(e=>(e.status||"En espera")==="Listos para servir"||(e.status||"En espera")==="Servido")}getReadyAndServedItemCount(){return this.getReadyAndServedItems().length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-kitchen"]],viewQuery:function(t,r){if(t&1&&_o(Sne,5),t&2){let i;ws(i=bs())&&(r.notificationSound=i.first)}},standalone:!0,features:[Jt],decls:76,vars:31,consts:[["notificationSound",""],[1,"container","mx-auto","px-3","sm:px-4","py-4"],["preload","auto"],["src","assets/sound/notification.mp3","type","audio/mpeg"],[1,"relative","mb-4","bg-blue-500","rounded-xl","p-4","shadow-lg"],[1,"flex","items-center","justify-between"],[1,"ml-auto","flex","space-x-2"],[1,"inline-flex","items-center","justify-center","p-2.5","rounded-full","bg-white","shadow-md","text-gray-700","hover:bg-gray-100","active:bg-gray-200",3,"click","title"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],[1,"mb-4","bg-white","rounded-xl","shadow-sm","p-4","flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3"],[1,"flex","items-center","space-x-2"],[1,"px-2","py-1","rounded-full","text-sm",3,"ngClass"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6a7.975 7.975 0 014 1.07M15 11a3.5 3.5 0 00-5 0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"flex","flex-wrap","gap-2"],[1,"bg-yellow-100","text-yellow-800","px-3","py-1.5","rounded-full","text-sm","flex","items-center"],[1,"w-2","h-2","bg-yellow-500","rounded-full","mr-1.5"],[1,"bg-blue-100","text-blue-800","px-3","py-1.5","rounded-full","text-sm","flex","items-center"],[1,"w-2","h-2","bg-blue-500","rounded-full","mr-1.5"],[1,"bg-green-100","text-green-800","px-3","py-1.5","rounded-full","text-sm","flex","items-center"],[1,"w-2","h-2","bg-green-500","rounded-full","mr-1.5"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","h-[calc(100vh-220px)]"],[1,"bg-yellow-500","py-3","px-4","sticky","top-0","z-10"],[1,"font-bold","text-lg","text-white","flex","items-center","justify-between"],[1,"bg-white","bg-opacity-30","text-white","text-sm","px-2","py-1","rounded-full"],[1,"p-3","overflow-y-auto","h-[calc(100vh-275px)]","bg-gray-50"],[1,"text-center","py-6","text-gray-500"],[1,"bg-white","p-4","rounded-lg","shadow-sm","mb-3","border-l-4","border-yellow-400","relative","overflow-hidden"],[1,"bg-blue-500","py-3","px-4","sticky","top-0","z-10"],[1,"bg-white","p-4","rounded-lg","shadow-sm","mb-3","border-l-4","border-blue-400","relative","overflow-hidden"],[1,"bg-green-500","py-3","px-4","sticky","top-0","z-10"],[1,"bg-white","p-4","rounded-lg","shadow-sm","mb-3","border-l-4","relative","overflow-hidden",3,"ngClass"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15.536 8.464a5 5 0 010 7.072M12 6a7.975 7.975 0 014 1.07M15 11a3.5 3.5 0 00-5 0M9.879 16.121A3 3 0 1012 12M12 12v.01"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5.586 15.414a8 8 0 1112.828 0M12 6a7.965 7.965 0 00-5.657 2.343M12 15a3 3 0 100-6 3 3 0 000 6z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 01-6 0v-1m6 0H9"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 9L4 4m0 0l5 0m-5 0l0 5M15 4l5 0m0 0l-5 5m5-5l0 5M4 15l5 5m-5 0l0-5m0 5l5 0M15 20l5-5m0 5l0-5m0 5l-5 0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","mx-auto","text-gray-300","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],[1,"text-base"],[1,"absolute","top-0","right-0"],[1,"bg-yellow-500","text-white","text-sm","font-bold","px-3","py-1","rounded-bl-lg"],[1,"flex","justify-between","items-start","mt-6"],[1,"pr-2"],[1,"font-bold","text-base"],[1,"text-sm","text-blue-600","mt-1"],[1,"mt-2","text-xs","text-gray-500"],[1,"mt-3"],[1,"bg-blue-500","text-white","text-sm","px-5","py-2.5","rounded-lg","w-full",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"bg-blue-500","text-white","text-sm","font-bold","px-3","py-1","rounded-bl-lg"],[1,"flex","justify-between","items-start","mt-6","flex-col"],[1,"pr-2","w-full"],[1,"flex","justify-between","w-full","mt-3","gap-2"],[1,"flex-1","bg-yellow-500","text-white","text-sm","px-3","py-2.5","rounded-lg",3,"click","disabled"],[1,"flex-1","bg-green-500","text-white","text-sm","px-3","py-2.5","rounded-lg",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-white","text-sm","font-bold","px-3","py-1","rounded-bl-lg",3,"ngClass"],[1,"text-indigo-600","font-medium"],[1,"bg-blue-500","text-white","text-sm","px-5","py-2.5","rounded-lg","w-full",3,"disabled"]],template:function(t,r){if(t&1){let i=ye();f(0,"div",1)(1,"audio",2,0),ae(3,"source",3),v(4," Your browser does not support the audio element. "),p(),f(5,"div",4)(6,"div",5)(7,"div",6)(8,"button",7),J("click",function(){return Y(i),X(r.toggleSound())}),se(9,Ane,2,0,":svg:svg",8)(10,kne,2,0,":svg:svg",8),p(),f(11,"button",7),J("click",function(){return Y(i),X(r.toggleNotifications())}),se(12,Mne,2,0,":svg:svg",8)(13,Rne,2,0,":svg:svg",8),p(),f(14,"button",7),J("click",function(){return Y(i),X(r.toggleFullscreen())}),se(15,Pne,2,0,":svg:svg",8)(16,Fne,2,0,":svg:svg",8),p()()()(),f(17,"div",9)(18,"div",10)(19,"span",11)(20,"span",12),xe(),f(21,"svg",13),ae(22,"path",14),p(),v(23),p()(),Pe(),f(24,"span",11)(25,"span",12),xe(),f(26,"svg",13),ae(27,"path",15),p(),v(28),p()()(),Pe(),f(29,"div",16)(30,"div",17),ae(31,"span",18),f(32,"span"),v(33),p()(),f(34,"div",19),ae(35,"span",20),f(36,"span"),v(37),p()(),f(38,"div",21),ae(39,"span",22),f(40,"span"),v(41),p()()()(),f(42,"div",23)(43,"div",24)(44,"div",25)(45,"h2",26)(46,"span"),v(47,"En Espera"),p(),f(48,"span",27),v(49),p()()(),f(50,"div",28),se(51,One,5,0,"div",29),Xt(52,Lne,18,10,"div",30,ML),p()(),f(54,"div",24)(55,"div",31)(56,"h2",26)(57,"span"),v(58,"En Preparaci\xF3n"),p(),f(59,"span",27),v(60),p()()(),f(61,"div",28),se(62,Vne,5,0,"div",29),Xt(63,Une,20,11,"div",32,ML),p()(),f(65,"div",24)(66,"div",33)(67,"h2",26)(68,"span"),v(69,"Listos para servir"),p(),f(70,"span",27),v(71),p()()(),f(72,"div",28),se(73,jne,5,0,"div",29),Xt(74,Wne,18,19,"div",34,Ine),p()()()()}t&2&&(x(8),tt("bg-teal-100",r.soundEnabled)("text-teal-700",r.soundEnabled),Za("title",r.soundEnabled?"Desactivar sonido":"Activar sonido"),x(),Se(r.soundEnabled?9:10),x(2),tt("bg-blue-100",r.notificationsEnabled)("text-blue-700",r.notificationsEnabled),Za("title",r.notificationsEnabled?"Desactivar notificaciones":"Activar notificaciones"),x(),Se(r.notificationsEnabled?12:13),x(2),tt("bg-purple-100",r.isFullscreen)("text-purple-700",r.isFullscreen),Za("title",r.isFullscreen?"Salir de pantalla completa":"Pantalla completa"),x(),Se(r.isFullscreen?15:16),x(4),ee("ngClass",r.soundEnabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),x(4),ie(" ",r.soundEnabled?"Sonido ON":"Sonido OFF"," "),x(),ee("ngClass",r.notificationsEnabled?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-500"),x(4),ie(" ",r.notificationsEnabled?"Notificaciones ON":"Notificaciones OFF"," "),x(5),ie("Espera: ",r.getItemCountByStatus("En espera"),""),x(4),ie("Prep: ",r.getItemCountByStatus("En preparaci\xF3n"),""),x(4),ie("Listo: ",r.getItemCountByStatus("Listos para servir"),""),x(8),ie(" ",r.getItemCountByStatus("En espera")," "),x(2),Se(r.getFilteredItemsByStatus("En espera").length===0?51:-1),x(),Zt(r.getFilteredItemsByStatus("En espera")),x(8),ie(" ",r.getItemCountByStatus("En preparaci\xF3n")," "),x(2),Se(r.getFilteredItemsByStatus("En preparaci\xF3n").length===0?62:-1),x(),Zt(r.getFilteredItemsByStatus("En preparaci\xF3n")),x(8),ie(" ",r.getReadyAndServedItemCount()," "),x(2),Se(r.getReadyAndServedItems().length===0?73:-1),x(),Zt(r.getReadyAndServedItems()))},dependencies:[nn,tr,_l,Ur],styles:['.animate-pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.past-date-card[_ngcontent-%COMP%]{position:relative}.past-date-card[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background-color:#0000000d;pointer-events:none}.transition-colors[_ngcontent-%COMP%]{transition:background-color .3s,color .3s}.date-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;background-color:#fff;padding:.5rem 0}']})};var $n=Bs(Rs());var Yy=(n,e)=>e.id;function qne(n,e){return this.isObject(e)?e.name:e}var Gne=(n,e)=>e.id+(e.selectedOption||""),Kne=(n,e)=>({"bg-teal-500 text-white":n,"bg-gray-100 text-gray-700 hover:bg-gray-200":e}),Qne=(n,e)=>({"bg-purple-500 text-white":n,"bg-gray-100 text-gray-700 hover:bg-gray-200":e}),Yne=(n,e)=>({"bg-teal-50 text-teal-700 font-medium":n,"hover:bg-gray-50 text-gray-700":e}),Xne=(n,e,t)=>({"bg-green-100 text-green-800":n,"bg-yellow-100 text-yellow-800":e,"bg-red-100 text-red-800":t});function Zne(n,e){if(n&1){let t=ye();f(0,"div")(1,"label",5),v(2,"C\xE9dula:"),p(),f(3,"input",40),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.customer.idNumber,i)||(s.customer.idNumber=i),X(i)}),J("input",function(){Y(t);let i=R();return X(i.validateCustomer())}),p()(),f(4,"div")(5,"label",5),v(6,"Nombre:"),p(),f(7,"input",41),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.customer.name,i)||(s.customer.name=i),X(i)}),p()()}if(n&2){let t=R();x(3),$e("ngModel",t.customer.idNumber),x(4),$e("ngModel",t.customer.name)}}function Jne(n,e){if(n&1){let t=ye();f(0,"div")(1,"label",5),v(2,"Nombre para el pedido:"),p(),f(3,"input",41),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.customer.name,i)||(s.customer.name=i),X(i)}),p()()}if(n&2){let t=R();x(3),$e("ngModel",t.customer.name)}}function ere(n,e){if(n&1){let t=ye();f(0,"button",42),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.toggleTable(i.id))}),v(1),p()}if(n&2){let t=e.$implicit,r=R();ee("ngClass",vn(2,Kne,r.isTableSelected(t.id),!r.isTableSelected(t.id))),x(),ie(" Mesa ",t.id," ")}}function tre(n,e){if(n&1){let t=ye();f(0,"button",42),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.toggleTable(i.id))}),v(1),p()}if(n&2){let t=e.$implicit,r=R();ee("ngClass",vn(2,Qne,r.isTableSelected(t.id),!r.isTableSelected(t.id))),x(),ie(" ",t.id," ")}}function nre(n,e){if(n&1){let t=ye();f(0,"button",43),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.selectCategory(i))}),v(1),p()}if(n&2){let t=e.$implicit,r=R();ee("ngClass",vn(2,Yne,(r.selectedCategory==null?null:r.selectedCategory.id)===t.id,(r.selectedCategory==null?null:r.selectedCategory.id)!==t.id)),x(),ie(" ",t.name," ")}}function rre(n,e){if(n&1){let t=ye();f(0,"button",44),J("click",function(){Y(t);let i=R();return i.searchQuery="",X(i.filterMenu())}),xe(),f(1,"svg",38),ae(2,"path",45),p()()}}function ire(n,e){if(n&1&&(f(0,"span",47),v(1),p()),n&2){let t=R(2);x(),ie('"',t.searchQuery,'"')}}function sre(n,e){if(n&1&&(f(0,"p",53),v(1),p()),n&2){let t=R().$implicit;x(),De(t.description)}}function ore(n,e){if(n&1&&(f(0,"span",54),v(1),p()),n&2){let t=R().$implicit;ee("ngClass",gl(2,Xne,t.stockQuantity>5,t.stockQuantity>0&&t.stockQuantity<=5,t.stockQuantity<=0)),x(),ie(" Stock: ",t.stockQuantity," ")}}function are(n,e){if(n&1){let t=ye();f(0,"div",55)(1,"button",57),J("click",function(){Y(t);let i=R().$implicit,s=R(2);return X(s.removeFromOrder(i))}),v(2," - "),p(),f(3,"span",58),v(4),p(),f(5,"button",59),J("click",function(){Y(t);let i=R().$implicit,s=R(2);return X(s.addToOrderNoOptions(i))}),v(6," + "),p()()}if(n&2){let t=R().$implicit,r=R(2);x(4),De(r.getItemQuantity(t.id))}}function cre(n,e){if(n&1&&(f(0,"span",66),v(1),p()),n&2){let t=R().$implicit;x(),ie(" +$",t.price.toFixed(2)," ")}}function lre(n,e){if(n&1){let t=ye();f(0,"div",63)(1,"div",64)(2,"div")(3,"p",65),v(4),se(5,cre,2,1,"span",66),p()(),f(6,"div",55)(7,"button",67),J("click",function(){let i=Y(t).$implicit,s=R(2).$implicit,o=R(2);return X(o.removeFromOrder(o.createItemWithOption(s,o.isObject(i)?i.name:i)))}),v(8," - "),p(),f(9,"span",68),v(10),p(),f(11,"button",69),J("click",function(){let i=Y(t).$implicit,s=R(2).$implicit,o=R(2);return X(o.addItemWithOption(s,o.isObject(i)?i.name:i))}),v(12," + "),p()()()()}if(n&2){let t=e.$implicit,r=R(2).$implicit,i=R(2);x(4),ie(" ",i.isObject(t)?t.name:t," "),x(),Se(i.isObject(t)&&t.price&&t.price>0?5:-1),x(5),ie(" ",i.getItemQuantity(r.id,i.isObject(t)?t.name:t)," ")}}function ure(n,e){if(n&1&&(f(0,"div",56)(1,"div",60)(2,"span",61),v(3,"Opciones disponibles"),p()(),f(4,"div",62),Xt(5,lre,13,3,"div",63,qne,!0),p()()),n&2){let t=R().$implicit;x(5),Zt(t.options)}}function dre(n,e){if(n&1&&(f(0,"div",49)(1,"div",9)(2,"h3",51),v(3),p(),f(4,"p",52),v(5),p(),se(6,sre,2,1,"p",53)(7,ore,2,6,"span",54),p(),se(8,are,7,1,"div",55)(9,ure,7,0,"div",56),p()),n&2){let t=e.$implicit;x(3),De(t.name),x(2),ie("$",t.price.toFixed(2),""),x(),Se(t.description?6:-1),x(),Se(t.isTracked&&t.stockQuantity!==void 0?7:-1),x(),Se(t.options!=null&&t.options.length?-1:8),x(),Se(t.options&&t.options.length>0?9:-1)}}function fre(n,e){if(n&1){let t=ye();f(0,"button",74),J("click",function(){Y(t);let i=R(3);return i.searchQuery="",X(i.filterMenu())}),v(1," Limpiar b\xFAsqueda "),p()}}function hre(n,e){if(n&1&&(f(0,"div",50),xe(),f(1,"svg",70),ae(2,"path",71),p(),Pe(),f(3,"p",72),v(4,"No se encontraron productos que coincidan con tu b\xFAsqueda."),p(),se(5,fre,2,0,"button",73),p()),n&2){let t=R(2);x(5),Se(t.searchQuery?5:-1)}}function pre(n,e){if(n&1&&(f(0,"h2",46)(1,"span"),v(2),p(),se(3,ire,2,1,"span",47),p(),f(4,"div",48),Xt(5,dre,10,6,"div",49,Yy),p(),se(7,hre,6,1,"div",50)),n&2){let t=R();x(2),De(t.searchQuery?"Resultados de b\xFAsqueda":t.selectedCategory==null?null:t.selectedCategory.name),x(),Se(t.searchQuery?3:-1),x(2),Zt(t.getFilteredItems()),x(2),Se(t.getFilteredItems().length===0?7:-1)}}function mre(n,e){n&1&&(f(0,"div",27),xe(),f(1,"svg",70),ae(2,"path",75),p(),Pe(),f(3,"p",76),v(4,"Selecciona una categor\xEDa o busca un producto para comenzar."),p()())}function gre(n,e){if(n&1){let t=ye();f(0,"button",77),J("click",function(){Y(t);let i=R();return X(i.clearCart())}),xe(),f(1,"svg",38),ae(2,"path",78),p(),v(3," Vaciar "),p()}}function vre(n,e){if(n&1&&(f(0,"span",88),v(1),p()),n&2){let t=R(2).$implicit,r=R(2);x(),ie(" (+$",r.getOptionPrice(t.selectedOption,t).toFixed(2),") ")}}function _re(n,e){if(n&1&&(f(0,"div",82),v(1),se(2,vre,2,1,"span",88),p()),n&2){let t=R().$implicit,r=R(2);x(),ie(" ",t.selectedOption," "),x(),Se(r.getOptionPrice(t.selectedOption,t)>0?2:-1)}}function yre(n,e){if(n&1){let t=ye();f(0,"div",79)(1,"div",80)(2,"p",81),v(3),p(),se(4,_re,3,2,"div",82),f(5,"p",83),v(6),p()(),f(7,"div",84)(8,"p",85),v(9),p(),f(10,"div",86)(11,"button",67),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.removeFromOrder(i))}),v(12," - "),p(),f(13,"span",87),v(14),p(),f(15,"button",69),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(i.selectedOption?s.addItemWithOption(i,i.selectedOption):s.addToOrderNoOptions(i))}),v(16," + "),p()()()()}if(n&2){let t=e.$implicit,r=R(2);x(3),De(t.name),x(),Se(t.selectedOption?4:-1),x(2),De(t.categoryName),x(3),ie("$",(r.calculateItemPrice(t)*t.quantity).toFixed(2),""),x(5),De(t.quantity)}}function xre(n,e){if(n&1&&(f(0,"div",32),Xt(1,yre,17,5,"div",79,Gne),p()),n&2){let t=R();x(),Zt(t.prepareItemsForSummary())}}function wre(n,e){n&1&&(f(0,"div",27),xe(),f(1,"svg",89),ae(2,"path",90),p(),Pe(),f(3,"p",76),v(4,"La comanda est\xE1 vac\xEDa."),p()())}function bre(n,e){n&1&&(xe(),f(0,"svg",38),ae(1,"path",91),p())}function Ere(n,e){n&1&&(xe(),f(0,"svg",39),ae(1,"circle",92)(2,"path",93),p())}var Xy=class n{searchQuery="";selectedTables=[];isConsumidorFinal=!1;customer={name:"",idNumber:""};orderItems=[];storeCategories=[];selectedCategory=null;isEditing=!1;editOrderId=null;originalOrderItems=[];isProcessingOrder=!1;loadingCategories=!0;loadingMenu=!0;subscriptions=[];tableGroups=[{name:"Mesas num\xE9ricas",tables:[{id:1,type:"regular"},{id:2,type:"regular"},{id:3,type:"regular"},{id:4,type:"regular"},{id:5,type:"regular"},{id:6,type:"regular"},{id:7,type:"regular"},{id:8,type:"regular"},{id:9,type:"regular"},{id:10,type:"regular"},{id:11,type:"regular"},{id:12,type:"regular"},{id:13,type:"regular"},{id:14,type:"regular"},{id:15,type:"regular"},{id:16,type:"regular"},{id:17,type:"regular"},{id:18,type:"regular"},{id:19,type:"regular"},{id:20,type:"regular"},{id:21,type:"regular"},{id:24,type:"regular"},{id:25,type:"regular"}]},{name:"Mesas especiales",tables:[{id:"S1",type:"special"},{id:"S2",type:"special"},{id:"Madera",type:"special"},{id:"Pl\xE1stico",type:"special"},{id:"Rustica",type:"special"},{id:"Corona",type:"special"},{id:"Club",type:"special"},{id:"Heineken",type:"special"},{id:"Modelo",type:"special"}]}];firestore=le(rn);router=le(Ht);route=le(ts);inventoryService=le(Ul);ngOnInit(){this.setClientType(!0),this.loadCategoriesAndMenu();let e=this.route.queryParams.subscribe(t=>{t.mode==="edit"&&t.orderId&&(this.isEditing=!0,this.editOrderId=t.orderId,this.editOrderId&&this.loadExistingOrder(this.editOrderId))});this.subscriptions.push(e)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}toggleTable(e){let t=this.selectedTables.indexOf(e);t===-1?this.selectedTables.push(e):this.selectedTables.splice(t,1)}getNumericTables(){return this.tableGroups[0].tables}getSpecialTables(){return this.tableGroups[1].tables}isTableSelected(e){return this.selectedTables.includes(e)}isObject(e){return e!==null&&typeof e=="object"&&"name"in e}getOptionValue(e){return this.isObject(e)?e.name:e}getOptionDisplay(e){return this.isObject(e)?e.name:e}loadExistingOrder(e){$n.default.fire({title:"Cargando pedido",text:"Por favor espera...",allowOutsideClick:!1,didOpen:()=>{$n.default.showLoading()}});let t=Ye(this.firestore,"orders",e);ln(t).then(r=>{if(r.exists()){let i=r.data();this.customer=i.customer||{name:"",idNumber:""},this.isConsumidorFinal=i.isConsumidorFinal||!1,this.selectedTables=i.tables||[],this.originalOrderItems=JSON.parse(JSON.stringify(i.items||[])).map(o=>Te(fe({},o),{originalQuantity:o.quantity})),new Promise(o=>{if(this.storeCategories.length>0){o();return}let a=setTimeout(()=>o(),5e3),c=setInterval(()=>{this.storeCategories.length>0&&(clearTimeout(a),clearInterval(c),o())},100)}).then(()=>{$n.default.close(),this.orderItems=[],this.originalOrderItems.forEach(o=>{let a=this.findMenuItemById(o.id);if(a){let c=Te(fe({},a),{quantity:o.quantity,selectedOption:o.selectedOption||void 0,status:o.status||"En espera"});if(o.selectedOption)for(let l=0;l<o.quantity;l++)this.addItemWithOption(c,o.selectedOption);else for(let l=0;l<o.quantity;l++)this.addToOrderNoOptions(c)}else this.orderItems.push(fe({},o))}),$n.default.fire({title:"Pedido cargado",text:"Puedes a\xF1adir m\xE1s items al pedido",icon:"info",timer:2e3,showConfirmButton:!1})})}else $n.default.close(),$n.default.fire({title:"Error",text:"No se encontr\xF3 el pedido",icon:"error",confirmButtonText:"Entendido"}),this.router.navigate(["/"])}).catch(r=>{$n.default.close(),$n.default.fire({title:"Error",text:"No se pudo cargar el pedido",icon:"error",confirmButtonText:"Entendido"}),console.error("Error loading order:",r),this.router.navigate(["/"])})}findMenuItemById(e){for(let t of this.storeCategories){let r=t.items.find(i=>i.id===e);if(r)return r}}setClientType(e){this.isConsumidorFinal=e,e?this.customer.idNumber="9999999999":(this.customer.idNumber="",this.customer.name="")}selectCategory(e){this.selectedCategory=e,this.searchQuery=""}getFilteredItems(){if(this.searchQuery){let e=this.searchQuery.toLowerCase();return this.storeCategories.flatMap(t=>t.items).filter(t=>t.name.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}else if(this.selectedCategory)return this.selectedCategory.items;return[]}loadCategoriesAndMenu(){this.loadingCategories=!0,this.loadingMenu=!0;let e=it(this.firestore,"categories"),t=tn(e,yn("active","==",!0),Un("order","asc")),r=Vr(t,{idField:"id"}).subscribe(i=>{this.loadingCategories=!1;let s=new Map;i.forEach(l=>{s.set(l.id,{id:l.id,name:l.name,items:[]})});let o=it(this.firestore,"menu"),a=tn(o,yn("active","==",!0)),c=Vr(a,{idField:"id"}).subscribe(l=>{this.loadingMenu=!1,l.forEach(u=>{let d=u.categoryId;if(d&&s.has(d)){let m=[];u.options&&Array.isArray(u.options)&&(m=u.options.map(w=>typeof w=="object"&&w!==null&&"name"in w?{name:w.name,price:w.price||0}:String(w)));let g={id:u.id,name:u.name,price:Number(u.price)||0,quantity:0,description:u.description||"",options:m,isTracked:u.isTracked||!1,stockQuantity:u.stockQuantity||0,categoryId:d,categoryName:u.categoryName||s.get(d)?.name||""};s.get(d)?.items.push(g)}}),this.storeCategories=Array.from(s.values()).filter(u=>u.items.length>0),this.storeCategories.length>0&&!this.selectedCategory&&(this.selectedCategory=this.storeCategories[0])},l=>{this.loadingMenu=!1,$n.default.fire({title:"Error",text:"No se pudo cargar el men\xFA",icon:"error",confirmButtonText:"Entendido"}),console.error("Error loading menu:",l)});this.subscriptions.push(c)},i=>{this.loadingCategories=!1,$n.default.fire({title:"Error",text:"No se pudo cargar las categor\xEDas",icon:"error",confirmButtonText:"Entendido"}),console.error("Error loading categories:",i)});this.subscriptions.push(r)}filterMenu(){}clearCart(){this.orderItems.length!==0&&$n.default.fire({title:"\xBFLimpiar carrito?",text:"\xBFEst\xE1s seguro de que deseas vaciar el carrito?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, vaciar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.orderItems=[],$n.default.fire({icon:"success",title:"Carrito vac\xEDo",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}))})}addItemWithOption(e,t){let r=Te(fe({},e),{selectedOption:t}),i=this.orderItems.findIndex(s=>s.id===r.id&&s.selectedOption===t);i!==-1?this.orderItems[i].quantity+=1:(r.quantity=1,this.orderItems.push(r)),"vibrate"in navigator&&navigator.vibrate(50)}addToOrder(e){if(!e.options||e.options.length===0){this.addToOrderNoOptions(e);return}if(!this.orderItems.some(r=>r.id===e.id&&r.selectedOption)&&e.options.length>1)$n.default.fire({icon:"info",title:"Selecciona una opci\xF3n",text:"Este producto tiene opciones disponibles",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});else if(e.options.length===1){let r=e.options[0],i=this.isObject(r)?r.name:r;this.addItemWithOption(e,i)}}addToOrderNoOptions(e){let t=Te(fe({},e),{selectedOption:void 0}),r=this.orderItems.findIndex(i=>i.id===t.id&&!i.selectedOption);r!==-1?this.orderItems[r].quantity+=1:(t.quantity=1,this.orderItems.push(t)),"vibrate"in navigator&&navigator.vibrate(50)}removeFromOrder(e){let t=this.orderItems.findIndex(r=>r.id===e.id&&r.selectedOption===e.selectedOption);t!==-1&&(this.orderItems[t].quantity-=1,this.orderItems[t].quantity===0&&this.orderItems.splice(t,1),"vibrate"in navigator&&navigator.vibrate([30,30,30]))}validateCustomer(){if(this.isConsumidorFinal)return;if(!/^[0-9]{10}$/.test(this.customer.idNumber)){this.customer.name="";return}let t=Ye(this.firestore,`client/${this.customer.idNumber}`);ln(t).then(r=>{if(r.exists()){let i=r.data();this.customer.name=i.name,$n.default.fire({toast:!0,position:"top-end",icon:"success",title:"Cliente Encontrado",text:`Bienvenido, ${i.name}`,showConfirmButton:!1,timer:3e3})}else this.customer.name=""}).catch(r=>{console.error("Error validating customer:",r)})}confirmOrder(){return W(this,null,function*(){if(this.orderItems.length===0){$n.default.fire("Error","El carrito est\xE1 vac\xEDo. Agrega productos para continuar.","error");return}if(!this.customer.name){$n.default.fire("Error","Debes ingresar un nombre para el pedido","error");return}if(this.selectedTables.length===0){$n.default.fire("Error","Debes seleccionar al menos una mesa","error");return}if(!this.isProcessingOrder){this.isProcessingOrder=!0;try{$n.default.fire({title:"Procesando pedido",text:"Por favor espera...",allowOutsideClick:!1,didOpen:()=>{$n.default.showLoading()}});let e=this.prepareItemsForSummary().map(t=>{let r={id:t.id,name:t.name,price:t.price,quantity:t.quantity,status:t.status||"En espera"};return t.selectedOption&&(r.selectedOption=t.selectedOption),t.description&&(r.description=t.description),t.isTracked!==void 0&&(r.isTracked=t.isTracked),t.stockQuantity!==void 0&&(r.stockQuantity=t.stockQuantity),t.categoryId&&(r.categoryId=t.categoryId),t.categoryName&&(r.categoryName=t.categoryName),r});if(this.isEditing&&this.editOrderId){let t=Ye(this.firestore,"orders",this.editOrderId),r=yield ln(t);if(r.exists()){let s=r.data().items||[],o=[];s.forEach(a=>{this.orderItems.some(l=>l.id===a.id&&l.selectedOption===a.selectedOption)||o.push(a)}),e.forEach(a=>{let c=s.find(l=>l.id===a.id&&l.selectedOption===a.selectedOption);if(c){let l=Te(fe({},a),{status:c.status||"En espera"});o.push(l)}else o.push(Te(fe({},a),{status:"En espera"}))}),e=o}yield St(t,{customer:this.customer,isConsumidorFinal:this.isConsumidorFinal,tables:this.selectedTables,items:e,total:this.getTotal(),updatedAt:new Date}),$n.default.close(),$n.default.fire({title:"Pedido Actualizado",text:"El pedido ha sido actualizado correctamente",icon:"success",confirmButtonText:"OK"}).then(()=>{this.router.navigate(["/"])})}else{let t=it(this.firestore,"orders"),r=Ye(this.firestore,`client/${this.customer.idNumber}`),i={customer:this.customer,isConsumidorFinal:this.isConsumidorFinal,tables:this.selectedTables,items:e,total:this.getTotal(),status:"En espera",hasInvoice:!1,date:new Date},s=yield yr(t,i);$n.default.close(),$n.default.fire({title:"Pedido Confirmado",text:"El pedido ha sido registrado correctamente",icon:"success",confirmButtonText:"OK"}).then(()=>{this.isConsumidorFinal||ln(r).then(o=>{o.exists()||ya(r,this.customer).then(()=>{console.log("Cliente guardado")}).catch(a=>console.error("Error guardando cliente:",a))}),this.resetForm()})}}catch(e){console.error("Error al confirmar el pedido:",e),$n.default.close(),$n.default.fire("Error","No se pudo confirmar el pedido","error")}finally{this.isProcessingOrder=!1}}})}getNewOrModifiedItems(e){let t=[];return e.forEach(r=>{let i=this.originalOrderItems.find(s=>s.id===r.id&&s.selectedOption===r.selectedOption);i?r.quantity>i.quantity&&t.push(Te(fe({},r),{quantity:r.quantity-i.quantity})):t.push(r)}),t}getTotal(){let e=0;for(let t of this.orderItems){let r=this.calculateItemPrice(t);e+=r*t.quantity}return e}getOptionPrice(e,t){if(!e)return 0;if(t.options&&t.options.length>0){let r=t.options.find(i=>this.isObject(i)&&i.name===e);if(r&&this.isObject(r)&&r.price)return r.price}return 0}isItemInCart(e,t){return this.orderItems.some(r=>r.id===e&&r.selectedOption===t)}getItemQuantity(e,t){let r=this.orderItems.find(i=>i.id===e&&i.selectedOption===t);return r?r.quantity:0}getItemKey(e){return`${e.id}_${e.selectedOption||"default"}`}prepareItemsForSummary(){let e=new Map;return this.orderItems.forEach(t=>{let r=this.getItemKey(t);if(e.has(r)){let i=e.get(r);i.quantity+=t.quantity}else e.set(r,fe({},t))}),Array.from(e.values())}resetForm(){this.selectedTables=[],this.orderItems=[],this.isConsumidorFinal=!1,this.customer={name:"",idNumber:""},this.isEditing=!1,this.editOrderId=null,this.originalOrderItems=[]}goToHome(){this.router.navigate(["/"])}calculateItemPrice(e){let t=e.price;if(e.selectedOption&&e.options&&e.options.length>0){let r=e.options.find(i=>this.isObject(i)&&i.name===e.selectedOption);r&&this.isObject(r)&&r.price&&(t+=r.price)}return t}formatCurrency(e){return e.toFixed(2)}createItemWithOption(e,t){return{id:e.id,name:e.name,price:e.price,quantity:e.quantity,description:e.description,options:e.options,selectedOption:t,isTracked:e.isTracked,stockQuantity:e.stockQuantity,categoryId:e.categoryId,categoryName:e.categoryName}}getItemDisplayName(e){return e.selectedOption?`${e.name} (${e.selectedOption})`:e.name}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-order"]],standalone:!0,features:[Jt],decls:68,vars:24,consts:[[1,"container","mx-auto","px-3","py-2"],[1,"grid","grid-cols-1","sm:grid-cols-12","gap-3","mb-3"],[1,"sm:col-span-6","bg-white","p-4","rounded-xl","shadow-sm","border","border-gray-100"],[1,"text-lg","font-semibold","mb-3","text-gray-700"],[1,"grid","grid-cols-1","gap-3"],[1,"block","text-gray-700","text-sm","font-medium","mb-2"],[1,"flex","gap-2"],[1,"border","border-gray-200","p-4","rounded-lg","cursor-pointer","text-center","flex-1",3,"click"],[1,"flex","flex-col","gap-3"],[1,"mb-3"],[1,"text-sm","font-medium","text-gray-500","mb-2"],[1,"grid","grid-cols-5","gap-2"],["type","button",1,"p-3","rounded-lg","text-sm","flex","items-center","justify-center",3,"ngClass"],[1,"grid","grid-cols-3","gap-2"],[1,"grid","grid-cols-1","sm:grid-cols-12","gap-3"],[1,"sm:col-span-2","bg-white","p-3","rounded-xl","shadow-sm","border","border-gray-100","max-h-[calc(100vh-240px)]","overflow-y-auto"],[1,"text-lg","font-semibold","mb-3","text-gray-700","pb-2","border-b","border-gray-100"],[1,"space-y-1"],[1,"w-full","text-left","p-3","rounded-lg","transition-all","duration-200",3,"ngClass"],[1,"sm:col-span-6","bg-white","p-4","rounded-xl","shadow-sm","border","border-gray-100","max-h-[calc(100vh-240px)]","overflow-y-auto"],[1,"mb-4"],[1,"relative"],["type","text","placeholder","Buscar productos...",1,"w-full","p-3","pr-10","pl-12","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-1","focus:ring-teal-500","text-base",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-teal-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","text-gray-400","hover:text-teal-500"],[1,"text-center","py-10"],[1,"sm:col-span-4","bg-white","p-4","rounded-xl","shadow-sm","border","border-gray-100","flex","flex-col","max-h-[calc(100vh-240px)]"],[1,"text-lg","font-semibold","mb-3","text-gray-700","flex","justify-between","items-center"],[1,"text-sm","text-red-500","hover:text-red-700","flex","items-center","gap-1","p-2","rounded-lg","hover:bg-red-50"],[1,"overflow-y-auto","flex-grow"],[1,"space-y-3"],[1,"mt-3","pt-3","border-t","border-gray-100"],[1,"flex","justify-between","mb-4","items-center"],[1,"font-bold","text-xl","text-gray-800"],[1,"font-bold","text-xl","text-teal-600"],[1,"w-full","py-4","rounded-lg","flex","items-center","justify-center","gap-2","text-white","text-lg","font-medium",3,"click","disabled","ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white"],["type","text","placeholder","N\xFAmero de C\xE9dula","pattern","^[0-9]*$","minlength","10","maxlength","10","inputmode","numeric",1,"w-full","p-3","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-1","focus:ring-teal-500","text-base",3,"ngModelChange","input","ngModel"],["type","text","placeholder","Nombre",1,"w-full","p-3","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-1","focus:ring-teal-500","text-base",3,"ngModelChange","ngModel"],["type","button",1,"p-3","rounded-lg","text-sm","flex","items-center","justify-center",3,"click","ngClass"],[1,"w-full","text-left","p-3","rounded-lg","transition-all","duration-200",3,"click","ngClass"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-4","text-gray-400","hover:text-teal-500",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-lg","font-semibold","mb-3","text-gray-700","flex","items-center"],[1,"ml-2","text-sm","text-teal-500"],[1,"grid","grid-cols-2","gap-3"],[1,"bg-white","p-3","rounded-xl","border","border-gray-100","shadow-sm","flex","flex-col","h-full"],[1,"text-center","py-8"],[1,"font-medium","text-gray-800","text-base","mb-1"],[1,"text-teal-600","font-medium"],[1,"text-xs","text-gray-500","mt-1"],[1,"inline-block","mt-2","text-xs","px-2","py-1","rounded-full",3,"ngClass"],[1,"flex","items-center"],[1,"mt-2"],[1,"bg-red-400","text-white","w-10","h-10","rounded-full","flex","items-center","justify-center","hover:bg-red-500","text-lg",3,"click"],[1,"mx-3","w-8","text-center","text-lg"],[1,"bg-teal-500","text-white","w-10","h-10","rounded-full","flex","items-center","justify-center","hover:bg-teal-600","text-lg",3,"click"],[1,"py-2","px-3","bg-teal-50","text-left","rounded-lg","mb-3"],[1,"text-sm","font-medium","text-teal-700"],[1,"space-y-2"],[1,"border","border-gray-200","p-3","rounded-lg","bg-gray-50"],[1,"flex","justify-between","items-center"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-teal-600","ml-1"],[1,"bg-red-400","text-white","w-8","h-8","rounded-full","flex","items-center","justify-center","hover:bg-red-500",3,"click"],[1,"mx-3","w-6","text-center"],[1,"bg-teal-500","text-white","w-8","h-8","rounded-full","flex","items-center","justify-center","hover:bg-teal-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","mx-auto","text-teal-300","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-gray-500"],[1,"mt-3","text-teal-500","hover:text-teal-700","text-base","px-4","py-2"],[1,"mt-3","text-teal-500","hover:text-teal-700","text-base","px-4","py-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M4 6h16M4 12h16M4 18h7"],[1,"text-gray-500","text-lg"],[1,"text-sm","text-red-500","hover:text-red-700","flex","items-center","gap-1","p-2","rounded-lg","hover:bg-red-50",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"flex","justify-between","bg-gray-50","p-3","rounded-lg"],[1,"flex-grow","pr-2"],[1,"text-base","font-medium","text-gray-800"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500"],[1,"flex","flex-col","items-end"],[1,"text-base","font-medium","text-teal-600"],[1,"flex","items-center","mt-2"],[1,"mx-2","w-6","text-center"],[1,"text-teal-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-20","w-20","mx-auto","text-teal-300","mb-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),v(4,"Datos del Cliente"),p(),f(5,"div",4)(6,"div")(7,"label",5),v(8,"Tipo de cliente:"),p(),f(9,"div",6)(10,"div",7),J("click",function(){return r.setClientType(!1)}),v(11," Con Datos "),p(),f(12,"div",7),J("click",function(){return r.setClientType(!0)}),v(13," C. Final "),p()()(),f(14,"div",8),se(15,Zne,8,2)(16,Jne,4,1,"div"),p()()(),f(17,"div",2)(18,"h2",3),v(19,"Seleccionar Mesas"),p(),f(20,"div",9)(21,"h3",10),v(22,"Mesas num\xE9ricas"),p(),f(23,"div",11),Xt(24,ere,2,5,"button",12,Yy),p()(),f(26,"div")(27,"h3",10),v(28,"Mesas especiales"),p(),f(29,"div",13),Xt(30,tre,2,5,"button",12,Yy),p()()()(),f(32,"div",14)(33,"div",15)(34,"h2",16),v(35,"Categor\xEDas"),p(),f(36,"div",17),Xt(37,nre,2,5,"button",18,Yy),p()(),f(39,"div",19)(40,"div",20)(41,"div",21)(42,"input",22),He("ngModelChange",function(s){return ze(r.searchQuery,s)||(r.searchQuery=s),s}),J("input",function(){return r.filterMenu()}),p(),f(43,"div",23),xe(),f(44,"svg",24),ae(45,"path",25),p()(),se(46,rre,3,0,"button",26),p()(),se(47,pre,8,3)(48,mre,5,0,"div",27),p(),Pe(),f(49,"div",28)(50,"h2",29)(51,"span"),v(52,"Comanda"),p(),se(53,gre,4,0,"button",30),p(),f(54,"div",31),se(55,xre,3,0,"div",32)(56,wre,5,0,"div",27),p(),f(57,"div",33)(58,"div",34)(59,"p",35),v(60,"Total:"),p(),f(61,"p",36),v(62),p()(),f(63,"button",37),J("click",function(){return r.confirmOrder()}),f(64,"span"),v(65),p(),se(66,bre,2,0,":svg:svg",38)(67,Ere,3,0,":svg:svg",39),p()()()()()),t&2&&(x(10),tt("bg-teal-500",!r.isConsumidorFinal)("text-white",!r.isConsumidorFinal)("text-gray-700",r.isConsumidorFinal),x(2),tt("bg-teal-500",r.isConsumidorFinal)("text-white",r.isConsumidorFinal)("text-gray-700",!r.isConsumidorFinal),x(3),Se(r.isConsumidorFinal?16:15),x(9),Zt(r.getNumericTables()),x(6),Zt(r.getSpecialTables()),x(7),Zt(r.storeCategories),x(5),$e("ngModel",r.searchQuery),x(4),Se(r.searchQuery?46:-1),x(),Se(r.selectedCategory||r.searchQuery?47:-1),x(),Se(!r.selectedCategory&&!r.searchQuery?48:-1),x(5),Se(r.orderItems.length>0?53:-1),x(2),Se(r.orderItems.length>0?55:56),x(7),ie("$",r.getTotal().toFixed(2),""),x(),ee("disabled",r.orderItems.length===0||r.isProcessingOrder||r.selectedTables.length===0||!r.customer.name)("ngClass",r.orderItems.length===0||r.isProcessingOrder||r.selectedTables.length===0||!r.customer.name?"bg-gray-300 cursor-not-allowed":"bg-teal-500 hover:bg-teal-600"),x(2),De(r.isProcessingOrder?"Procesando...":"Confirmar Pedido"),x(),Se(r.isProcessingOrder?67:66))},dependencies:[Ur,xr,Br,aD,cD,lD,pi,nn,tr],styles:[".restaurant-layout[_ngcontent-%COMP%]{min-height:400px;background-color:#f9f9f9}.mesa-circular[_ngcontent-%COMP%], .mesa-rectangular[_ngcontent-%COMP%]{transition:all .3s ease}"]})};var Fn=Bs(Rs());var Cre=(n,e,t)=>({"bg-yellow-100 text-yellow-800":n,"bg-blue-100 text-blue-800":e,"bg-green-100 text-green-800":t}),Sre=(n,e)=>({"bg-green-500 hover:bg-green-600":n,"bg-gray-400 cursor-not-allowed":e}),Ire=(n,e)=>({"text-green-600":n,"text-red-600":e}),Tre=(n,e)=>({"bg-green-50":n,"bg-white":e}),RL=(n,e)=>({"bg-blue-500 text-white":n,"bg-gray-200 text-gray-700":e}),PL=(n,e)=>({"text-blue-100":n,"text-gray-500":e}),Dre=(n,e)=>({"bg-green-50 border-green-200":n,"bg-white":e});function Are(n,e){n&1&&(f(0,"div",8),ae(1,"div",9),p())}function kre(n,e){if(n&1&&(f(0,"div",10)(1,"p"),v(2),p()()),n&2){let t=R();x(2),De(t.error)}}function Mre(n,e){if(n&1&&(f(0,"p",25),v(1),p()),n&2){let t=R(2);x(),ie(" Mesas: ",t.order.tables.join(", ")," ")}}function Rre(n,e){if(n&1&&(f(0,"option",38),v(1),p()),n&2){let t=e.$implicit;ee("value",t),x(),De(t)}}function Pre(n,e){n&1&&(f(0,"p",43),v(1," El monto recibido es menor que el total a pagar "),p())}function Fre(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",29)(2,"label",39),v(3,"Monto recibido:"),p(),f(4,"input",40),He("ngModelChange",function(i){Y(t);let s=R(3);return ze(s.amountReceived,i)||(s.amountReceived=i),X(i)}),J("ngModelChange",function(){Y(t);let i=R(3);return X(i.calculateChange())}),p()(),f(5,"div",29)(6,"label",30),v(7,"Cambio a entregar:"),p(),f(8,"div",41),v(9),p(),se(10,Pre,2,0,"p",42),p()()}if(n&2){let t=R(3);x(4),$e("ngModel",t.amountReceived),x(4),ee("ngClass",vn(4,Ire,t.change>0,t.amountReceived<t.order.total)),x(),ie(" $",t.change.toFixed(2)," "),x(),ee("ngIf",t.amountReceived<t.order.total)}}function Ore(n,e){if(n&1){let t=ye();f(0,"div",44)(1,"div")(2,"label",45),v(3,"Banco:"),p(),f(4,"input",46),He("ngModelChange",function(i){Y(t);let s=R(3);return ze(s.bankName,i)||(s.bankName=i),X(i)}),p()(),f(5,"div")(6,"label",47),v(7,"C\xF3digo de transacci\xF3n:"),p(),f(8,"input",48),He("ngModelChange",function(i){Y(t);let s=R(3);return ze(s.transactionCode,i)||(s.transactionCode=i),X(i)}),p()()()}if(n&2){let t=R(3);x(4),$e("ngModel",t.bankName),x(4),$e("ngModel",t.transactionCode)}}function Nre(n,e){if(n&1){let t=ye();f(0,"div",44)(1,"div")(2,"label",49),v(3,"C\xF3digo de transacci\xF3n:"),p(),f(4,"input",50),He("ngModelChange",function(i){Y(t);let s=R(3);return ze(s.transactionCode,i)||(s.transactionCode=i),X(i)}),p()()()}if(n&2){let t=R(3);x(4),$e("ngModel",t.transactionCode)}}function Lre(n,e){if(n&1){let t=ye();f(0,"div",44)(1,"div")(2,"label",51),v(3,"C\xF3digo de transacci\xF3n:"),p(),f(4,"input",52),He("ngModelChange",function(i){Y(t);let s=R(3);return ze(s.transactionCode,i)||(s.transactionCode=i),X(i)}),p()()()}if(n&2){let t=R(3);x(4),$e("ngModel",t.transactionCode)}}function Vre(n,e){if(n&1){let t=ye();f(0,"div")(1,"label",53),v(2,"Atajos r\xE1pidos:"),p(),f(3,"div",54)(4,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(i.order.total))}),v(5," Monto exacto "),p(),f(6,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(i.Math.ceil(i.order.total)))}),v(7," Redondear arriba "),p(),f(8,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(5*i.Math.ceil(i.order.total/5)))}),v(9," Billete de $5 "),p(),f(10,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(10*i.Math.ceil(i.order.total/10)))}),v(11," Billete de $10 "),p(),f(12,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(20*i.Math.ceil(i.order.total/20)))}),v(13," Billete de $20 "),p(),f(14,"button",55),J("click",function(){Y(t);let i=R(3);return X(i.setQuickAmount(50*i.Math.ceil(i.order.total/50)))}),v(15," Billete de $50 "),p()()()}}function Bre(n,e){if(n&1){let t=ye();f(0,"div",26)(1,"h3",27),v(2,"C\xE1lculo de Vuelto"),p(),f(3,"div",28)(4,"div")(5,"div",29)(6,"label",30),v(7,"Total a pagar:"),p(),f(8,"div",31),v(9),p()(),f(10,"div",29)(11,"label",30),v(12,"M\xE9todo de pago:"),p(),f(13,"select",32),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.paymentMethod,i)||(s.paymentMethod=i),X(i)}),se(14,Rre,2,2,"option",33),p()(),se(15,Fre,11,7,"div",24)(16,Ore,9,2,"div",34)(17,Nre,5,1,"div",34)(18,Lre,5,1,"div",34),p(),se(19,Vre,16,0,"div",24),p(),f(20,"div",35)(21,"button",36),J("click",function(){Y(t);let i=R(2);return X(i.cancelChangeCalculator())}),v(22," Cancelar "),p(),f(23,"button",37),J("click",function(){Y(t);let i=R(2);return X(i.confirmPayment())}),v(24," Confirmar Pago "),p()()()}if(n&2){let t=R(2);x(9),ie("$",t.order.total.toFixed(2),""),x(4),$e("ngModel",t.paymentMethod),x(),ee("ngForOf",t.paymentMethods),x(),ee("ngIf",t.paymentMethod==="Efectivo"),x(),ee("ngIf",t.paymentMethod==="Transferencia"),x(),ee("ngIf",t.paymentMethod==="Ahorita"),x(),ee("ngIf",t.paymentMethod==="De una"),x(),ee("ngIf",t.paymentMethod==="Efectivo"),x(4),ee("disabled",t.paymentMethod==="Efectivo"&&t.amountReceived<t.order.total||t.paymentMethod==="Transferencia"&&(!t.bankName||!t.transactionCode)||(t.paymentMethod==="Ahorita"||t.paymentMethod==="De una")&&!t.transactionCode)("ngClass",vn(10,Sre,t.isPaymentFormValid(),!t.isPaymentFormValid()))}}function Ure(n,e){if(n&1&&(f(0,"span",69),v(1),p()),n&2){let t=R().$implicit;x(),ie(" (",t.selectedOption,") ")}}function jre(n,e){if(n&1&&(f(0,"div",64)(1,"div")(2,"span",65),v(3),se(4,Ure,2,1,"span",66),p()(),f(5,"div",67)(6,"p",68),v(7),p()()()),n&2){let t=e.$implicit;ee("ngClass",vn(5,Tre,t.status==="Listos para servir",t.status!=="Listos para servir")),x(3),gn(" ",t.quantity,"x ",t.name," "),x(),ee("ngIf",t.selectedOption),x(3),ie("$",(t.quantity*t.price).toFixed(2),"")}}function $re(n,e){if(n&1){let t=ye();f(0,"div")(1,"h3",27),v(2,"Detalle del Pedido"),p(),f(3,"div",56),se(4,jre,8,8,"div",57),p(),f(5,"div",58)(6,"p",59),v(7,"Total:"),p(),f(8,"p",60),v(9),p()(),f(10,"div",61)(11,"button",62),J("click",function(){Y(t);let i=R(2);return X(i.processFullPayment())}),f(12,"span"),v(13,"\u{1F4B0}"),p(),v(14," Cobrar Completo "),p(),f(15,"button",63),J("click",function(){Y(t);let i=R(2);return X(i.startSplitBill())}),f(16,"span"),v(17,"\u2702\uFE0F"),p(),v(18," Dividir Cuenta "),p()()()}if(n&2){let t=R(2);x(4),ee("ngForOf",t.order.items),x(5),ie("$",t.order.total.toFixed(2),"")}}function Hre(n,e){if(n&1&&(f(0,"span",76),v(1),p()),n&2){let t=R().$implicit;x(),ie(" $",t.total.toFixed(2)," ")}}function zre(n,e){n&1&&(f(0,"span",102),v(1," Pagado "),p())}function Wre(n,e){if(n&1){let t=ye();f(0,"button",103),J("click",function(){Y(t);let i=R().index,s=R(4);return X(s.processSplitPayment(i))}),v(1," Cobrar "),p()}}function qre(n,e){if(n&1){let t=ye();f(0,"div",96)(1,"div")(2,"input",97),He("ngModelChange",function(i){let s=Y(t).$implicit;return ze(s.name,i)||(s.name=i),X(i)}),p(),f(3,"p",98),se(4,Hre,2,1,"span",99)(5,zre,2,0,"span",100),p()(),se(6,Wre,2,0,"button",101),p()}if(n&2){let t=e.$implicit;ee("ngClass",vn(5,Dre,t.total===0,t.total>0)),x(2),$e("ngModel",t.name),x(2),ee("ngIf",t.total>0),x(),ee("ngIf",t.total===0),x(),ee("ngIf",t.total>0)}}function Gre(n,e){if(n&1&&(f(0,"div",87)(1,"h4",88),v(2,"Monto por persona:"),p(),f(3,"div",28)(4,"div",89)(5,"div",90)(6,"p",91),v(7,"Total a dividir"),p(),f(8,"p",31),v(9),p()(),f(10,"div",92)(11,"p",91),v(12,"Monto por persona"),p(),f(13,"p",93),v(14),p()()(),f(15,"div",94),se(16,qre,7,8,"div",95),p()()()),n&2){let t=R(3);x(9),ie("$",t.order.total.toFixed(2),""),x(5),ie("$",(t.order.total/t.numberOfParts).toFixed(2)," "),x(2),ee("ngForOf",t.splitParts)}}function Kre(n,e){if(n&1&&(f(0,"span",69),v(1),p()),n&2){let t=R().$implicit;x(),ie(" (",t.selectedOption,") ")}}function Qre(n,e){n&1&&(f(0,"span",114),v(1," Unidad individual "),p())}function Yre(n,e){if(n&1){let t=ye();f(0,"div",110)(1,"div")(2,"p",68),v(3),se(4,Kre,2,1,"span",66)(5,Qre,2,0,"span",111),p(),f(6,"p",112),v(7),p()(),f(8,"button",113),J("click",function(){let i=Y(t).$implicit,s=R(4);return X(s.showAssignMenu(i))}),v(9," Asignar "),p()()}if(n&2){let t=e.$implicit;x(3),ie(" ",t.name," "),x(),ee("ngIf",t.selectedOption),x(),ee("ngIf",t.originalId),x(2),ie("$",t.price.toFixed(2),"")}}function Xre(n,e){n&1&&(f(0,"div",115),v(1," Todos los items han sido asignados "),p())}function Zre(n,e){if(n&1&&(f(0,"span",69),v(1),p()),n&2){let t=R().$implicit;x(),ie(" (",t.selectedOption,") ")}}function Jre(n,e){n&1&&(f(0,"span",114),v(1," Unidad individual "),p())}function eie(n,e){if(n&1){let t=ye();f(0,"div",123)(1,"span",98),v(2),se(3,Zre,2,1,"span",66)(4,Jre,2,0,"span",111),p(),f(5,"div",124)(6,"span",98),v(7),p(),f(8,"button",125),J("click",function(){let i=Y(t).index,s=R().index,o=R(4);return X(o.removeItemFromPart(s,i))}),v(9," \u2715 "),p()()()}if(n&2){let t=e.$implicit;x(2),ie(" ",t.name," "),x(),ee("ngIf",t.selectedOption),x(),ee("ngIf",t.originalId),x(3),ie("$",t.price.toFixed(2),"")}}function tie(n,e){n&1&&(f(0,"div",126),v(1," Sin items asignados "),p())}function nie(n,e){if(n&1){let t=ye();f(0,"button",127),J("click",function(){Y(t);let i=R().index,s=R(4);return X(s.processSplitPayment(i))}),v(1),p()}if(n&2){let t=R().$implicit;x(),ie(" Cobrar a ",t.name," ")}}function rie(n,e){if(n&1){let t=ye();f(0,"div",116)(1,"div",117)(2,"div",79)(3,"input",97),He("ngModelChange",function(i){let s=Y(t).$implicit;return ze(s.name,i)||(s.name=i),X(i)}),p()(),f(4,"p",118),v(5),p()(),f(6,"div",119),se(7,eie,10,4,"div",120)(8,tie,2,0,"div",121),p(),se(9,nie,2,1,"button",122),p()}if(n&2){let t=e.$implicit;x(3),$e("ngModel",t.name),x(2),ie("$",t.total.toFixed(2),""),x(2),ee("ngForOf",t.items),x(),ee("ngIf",t.items.length===0),x(),ee("ngIf",t.items.length>0)}}function iie(n,e){if(n&1&&(f(0,"div",104)(1,"div",89)(2,"h4",105),v(3,"Items sin asignar"),p(),f(4,"div",106),se(5,Yre,10,4,"div",107)(6,Xre,2,0,"div",108),p()(),f(7,"div"),se(8,rie,10,5,"div",109),p()()),n&2){let t=R(3);x(5),ee("ngForOf",t.unassignedItems),x(),ee("ngIf",t.unassignedItems.length===0),x(2),ee("ngForOf",t.splitParts)}}function sie(n,e){if(n&1){let t=ye();f(0,"div")(1,"h3",27),v(2,"Dividir Cuenta"),p(),f(3,"div",70)(4,"h4",71),v(5,"Selecciona c\xF3mo quieres dividir la cuenta:"),p(),f(6,"div",72)(7,"button",73),J("click",function(){Y(t);let i=R(2);return X(i.changeSplitMode("items"))}),f(8,"div",74)(9,"span",75),v(10,"\u2702\uFE0F"),p(),f(11,"span",76),v(12,"Por Platos"),p(),f(13,"span",77),v(14," Asignar platos espec\xEDficos "),p()()(),f(15,"button",73),J("click",function(){Y(t);let i=R(2);return X(i.changeSplitMode("equal"))}),f(16,"div",74)(17,"span",75),v(18,"\u{1F504}"),p(),f(19,"span",76),v(20,"Reparto Equitativo"),p(),f(21,"span",77),v(22," Dividir el total entre personas "),p()()()()(),f(23,"div",78)(24,"label",53),v(25,"N\xFAmero de personas:"),p(),f(26,"div",79)(27,"button",80),J("click",function(){Y(t);let i=R(2);return i.numberOfParts=i.Math.max(2,i.numberOfParts-1),X(i.initializeSplitParts())}),v(28,"-"),p(),f(29,"span",81),v(30),p(),f(31,"button",82),J("click",function(){Y(t);let i=R(2);return i.numberOfParts=i.Math.min(10,i.numberOfParts+1),X(i.initializeSplitParts())}),v(32,"+"),p()()(),se(33,Gre,17,3,"div",83)(34,iie,9,3,"div",84),f(35,"div",35)(36,"button",85),J("click",function(){Y(t);let i=R(2);return X(i.cancelSplitBill())}),v(37," Cancelar Divisi\xF3n "),p(),f(38,"button",86),J("click",function(){Y(t);let i=R(2);return X(i.finalizeSplitBill())}),v(39," Finalizar Todo "),p()()()}if(n&2){let t=R(2);x(7),ee("ngClass",vn(7,RL,t.splitMode==="items",t.splitMode!=="items")),x(6),ee("ngClass",vn(10,PL,t.splitMode==="items",t.splitMode!=="items")),x(2),ee("ngClass",vn(13,RL,t.splitMode==="equal",t.splitMode!=="equal")),x(6),ee("ngClass",vn(16,PL,t.splitMode==="equal",t.splitMode!=="equal")),x(9),De(t.numberOfParts),x(3),ee("ngIf",t.splitMode==="equal"),x(),ee("ngIf",t.splitMode==="items")}}function oie(n,e){if(n&1){let t=ye();f(0,"div",11)(1,"div",12)(2,"div",13)(3,"div")(4,"h2",14),v(5),p(),f(6,"p",15),v(7),p(),se(8,Mre,2,1,"p",16),p(),f(9,"p",17),v(10),ot(11,"date"),p()(),f(12,"div",18)(13,"span",19),v(14),p(),f(15,"button",20),J("click",function(){Y(t);let i=R();return X(i.viewPayments())}),xe(),f(16,"svg",21),ae(17,"path",22),p(),v(18," Ver pagos "),p()()(),se(19,Bre,25,13,"div",23)(20,$re,19,2,"div",24)(21,sie,40,19,"div",24),p()}if(n&2){let t=R();x(5),ie(" ",t.order.customer.name," "),x(2),ie(" ID: ",t.order.customer.idNumber," "),x(),ee("ngIf",t.order.tables),x(2),ie(" ",ar(11,9,t.order.date,"dd/MM/yyyy HH:mm")," "),x(3),ee("ngClass",gl(12,Cre,t.order.status==="En espera",t.order.status==="En preparaci\xF3n",t.order.status==="Listos para servir")),x(),ie(" ",t.order.status," "),x(5),ee("ngIf",t.showChangeCalculator),x(),ee("ngIf",!t.isSplittingBill&&!t.showChangeCalculator),x(),ee("ngIf",t.isSplittingBill)}}function aie(n,e){if(n&1){let t=ye();f(0,"button",135),J("click",function(){let i=Y(t).index,s=R(2);return X(s.assignItemToPart(s.selectedItemForAssignment,i))}),v(1),p()}if(n&2){let t=e.$implicit;x(),ie(" ",t.name," ")}}function cie(n,e){if(n&1){let t=ye();f(0,"div",128),J("click",function(){Y(t);let i=R();return X(i.hideAssignMenu())}),f(1,"div",129),J("click",function(i){return Y(t),X(i.stopPropagation())}),f(2,"h4",130),v(3,"Asignar a:"),p(),f(4,"div",131),se(5,aie,2,1,"button",132),p(),f(6,"div",133)(7,"button",134),J("click",function(){Y(t);let i=R();return X(i.hideAssignMenu())}),v(8," Cancelar "),p()()()()}if(n&2){let t=R();x(5),ee("ngForOf",t.splitParts)}}var lm=class n{firestore=le(rn);route=le(ts);router=le(Ht);cashRegisterService=le(ba);Math=Math;order=null;loading=!0;error=null;isSplittingBill=!1;splitMode="items";numberOfParts=2;splitParts=[];unassignedItems=[];amountReceived=0;change=0;showChangeCalculator=!1;paymentMethod="Efectivo";paymentMethods=["Efectivo","Transferencia","Ahorita","De una"];bankName="";transactionCode="";selectedItemForAssignment=null;showAssignmentMenu=!1;ngOnInit(){this.route.params.subscribe(e=>{let t=e.id;t?this.loadOrder(t):(this.error="No se proporcion\xF3 un ID de pedido v\xE1lido",this.loading=!1)})}processSplitPayment(e){if(!this.order)return;let t=this.splitParts[e];if(t.items.length===0){Fn.default.fire("Error","No hay items asignados a esta parte","error");return}let r=`
      <div class="text-left mb-4">
        <p class="mb-2"><strong>Total a pagar:</strong> $${t.total.toFixed(2)}</p>
        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700 mb-1">M\xE9todo de pago:</label>
          <select id="swal-payment-method" class="w-full px-3 py-2 border border-gray-300 rounded-md">
            ${this.paymentMethods.map(i=>`<option value="${i}">${i}</option>`).join("")}
          </select>
        </div>
        
        <!-- Contenedor para campos din\xE1micos -->
        <div id="payment-fields-container" class="mb-3">
          <!-- Por defecto mostramos el campo de efectivo -->
          <div id="efectivo-fields">
            <label class="block text-sm font-medium text-gray-700 mb-1">Monto recibido:</label>
            <input id="swal-amount" type="number" step="0.01" min="${t.total}" value="${t.total}" 
                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
          </div>
          
          <!-- Campos para transferencia (inicialmente ocultos) -->
          <div id="transferencia-fields" style="display:none;">
            <div class="mb-2">
              <label class="block text-sm font-medium text-gray-700 mb-1">Banco:</label>
              <input id="swal-bank" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Nombre del banco">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-1">C\xF3digo de transacci\xF3n:</label>
              <input id="swal-transfer-code" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="C\xF3digo de la transferencia">
            </div>
          </div>
          
          <!-- Campos para Ahorita y De una (inicialmente ocultos) -->
          <div id="code-fields" style="display:none;">
            <label class="block text-sm font-medium text-gray-700 mb-1">C\xF3digo de transacci\xF3n:</label>
            <input id="swal-code" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="C\xF3digo de transacci\xF3n">
          </div>
        </div>
      </div>
    `;Fn.default.fire({title:`Cobrar a ${t.name}`,html:r,focusConfirm:!1,showCancelButton:!0,confirmButtonText:"Cobrar",cancelButtonText:"Cancelar",didOpen:()=>{let i=document.getElementById("swal-payment-method"),s=document.getElementById("efectivo-fields"),o=document.getElementById("transferencia-fields"),a=document.getElementById("code-fields");i.addEventListener("change",function(){let c=this.value;s&&(s.style.display="none"),o&&(o.style.display="none"),a&&(a.style.display="none"),c==="Efectivo"&&s?s.style.display="block":c==="Transferencia"&&o?o.style.display="block":(c==="Ahorita"||c==="De una")&&a&&(a.style.display="block")})},preConfirm:()=>{let s=document.getElementById("swal-payment-method").value;if(s==="Efectivo"){let o=document.getElementById("swal-amount"),a=parseFloat(o.value);return isNaN(a)||a<t.total?(Fn.default.showValidationMessage("El monto recibido debe ser mayor o igual al total"),!1):{method:s,amountReceived:a,change:a-t.total}}else if(s==="Transferencia"){let o=document.getElementById("swal-bank"),a=document.getElementById("swal-transfer-code");return o.value.trim()?a.value.trim()?{method:s,bankName:o.value.trim(),transactionCode:a.value.trim()}:(Fn.default.showValidationMessage("Debe ingresar el c\xF3digo de transacci\xF3n"),!1):(Fn.default.showValidationMessage("Debe ingresar el nombre del banco"),!1)}else if(s==="Ahorita"||s==="De una"){let o=document.getElementById("swal-code");return o.value.trim()?{method:s,transactionCode:o.value.trim()}:(Fn.default.showValidationMessage("Debe ingresar el c\xF3digo de transacci\xF3n"),!1)}return!1}}).then(i=>{if(i.isConfirmed&&i.value){let s=i.value;s.method==="Efectivo"&&s.change>0?Fn.default.fire({title:"Cambio",html:`
              <p>Entregar cambio de:</p>
              <p class="text-2xl font-bold">$${s.change.toFixed(2)}</p>
            `,icon:"success",confirmButtonText:"Completar"}).then(()=>this.completeSplitPayment(e,s)):this.completeSplitPayment(e,s)}})}completeSplitPayment(e,t){if(!this.order)return;let r=this.splitParts[e];if(this.order){let i=[...r.items],s=new Map;this.order?.items?.forEach(o=>{s.set(o.id,o)}),i.forEach(o=>{let a=o.originalId?o.originalId.split("-split-")[0]:o.id,c=s.get(a);c&&this.countSplitItemsInPaidParts(a)>=c.quantity&&(c.status="Servido")}),this.registerSplitPayment(r,t),this.registerSplitPaymentInCashRegister(r,t)}}registerSplitPaymentInCashRegister(e,t){this.order&&this.cashRegisterService.getCurrentCashRegister().subscribe({next:r=>{if(!r){console.warn("No hay una caja abierta. El pago se registr\xF3 pero no se actualiz\xF3 la caja"),Fn.default.fire({icon:"warning",title:"Pago registrado",text:"El pago se ha registrado correctamente, pero no se pudo actualizar la caja porque est\xE1 cerrada.",confirmButtonText:"Entendido"});return}if(e.items&&e.items.length>0){if(e.items.forEach(o=>{let a=o.originalId?o.originalId.split("-split-")[0]:o.id,c=this.order.items.find(l=>l.id===a);c&&(c.status="Servido")}),!this.order)return;let s=Ye(this.firestore,`orders/${this.order.id}`);St(s,{items:this.order.items}).catch(o=>{console.error("Error al actualizar estado de \xEDtems a servido:",o)})}let i=this.order?`Pago parcial (${e.name}) - Pedido #${this.order.id} - Cliente: ${this.order.customer.name}`:"Pago parcial";this.cashRegisterService.registerPayment({orderId:this.order?.id??"",amount:e.total,paymentMethod:t.method,description:i}).subscribe({next:s=>{s||console.warn("El pago parcial se registr\xF3 en el sistema pero no se pudo actualizar la caja")},error:s=>{console.error("Error al registrar pago parcial en caja:",s)}})},error:r=>{console.error("Error al verificar el estado de la caja:",r)}})}registerSplitPayment(e,t){return W(this,null,function*(){if(this.order)try{let r=it(this.firestore,`orders/${this.order.id}/payments`),i=fe({amount:e.total,partName:e.name,items:e.items,timestamp:new Date,splitMode:this.splitMode,isEqualSplit:this.splitMode==="equal",totalParts:this.numberOfParts},t);yield yr(r,i),e.items=[],e.total=0,this.updateOrderItems(),this.checkSplitStatus();let s=`Se ha cobrado a ${e.name}`;t.method==="Transferencia"?s+=` (Banco: ${t.bankName}, C\xF3digo: ${t.transactionCode})`:(t.method==="Ahorita"||t.method==="De una")&&(s+=` (C\xF3digo: ${t.transactionCode})`),Fn.default.fire({title:"Cobrado",text:s,icon:"success",confirmButtonText:"Continuar"})}catch(r){console.error("Error al registrar el pago dividido:",r),Fn.default.fire({title:"Error",text:"No se pudo registrar el pago",icon:"error"})}})}isPaymentFormValid(){switch(this.paymentMethod){case"Efectivo":return this.amountReceived>=(this.order?.total||0);case"Transferencia":return!!this.bankName&&!!this.transactionCode;case"Ahorita":case"De una":return!!this.transactionCode;default:return!1}}loadOrder(e){let t=Ye(this.firestore,"orders",e);ln(t).then(r=>{if(r.exists()){let i=r.data();this.order={id:e,customer:i.customer,date:i.date.toDate(),status:i.status,total:i.total,items:i.items.map(s=>Te(fe({},s),{splitAssigned:!1})),tables:i.tables},this.loading=!1}else this.error="El pedido no existe",this.loading=!1}).catch(r=>{console.error("Error al cargar el pedido:",r),this.error="Error al cargar el pedido",this.loading=!1})}processFullPayment(){if(!this.order){Fn.default.fire("Error","No hay un pedido para cobrar","error");return}this.cashRegisterService.getCurrentCashRegister().subscribe({next:e=>{if(!e){Fn.default.fire({icon:"warning",title:"Caja Cerrada",text:"No hay una caja abierta. Puedes continuar con el cobro, pero no se registrar\xE1 en la caja.",showCancelButton:!0,confirmButtonText:"Continuar con el cobro",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&(this.showChangeCalculator=!0,this.amountReceived=this.order?.total??0)});return}this.showChangeCalculator=!0,this.amountReceived=this.order?.total??0},error:e=>{console.error("Error al verificar estado de caja:",e),Fn.default.fire("Error","No se pudo verificar el estado de la caja","error")}})}confirmPayment(){if(!this.order)return;if(!this.isPaymentFormValid()){let t="";switch(this.paymentMethod){case"Efectivo":t="El monto recibido es menor que el total a pagar";break;case"Transferencia":t="Debe ingresar el banco y el c\xF3digo de transacci\xF3n";break;case"Ahorita":case"De una":t="Debe ingresar el c\xF3digo de transacci\xF3n";break}Fn.default.fire("Error",t,"error");return}this.change=this.paymentMethod==="Efectivo"?this.amountReceived-this.order.total:0;let e=`
      <div class="text-left">
        <p><strong>Total a pagar:</strong> $${this.order.total.toFixed(2)}</p>
        <p><strong>M\xE9todo de pago:</strong> ${this.paymentMethod}</p>
    `;this.paymentMethod==="Efectivo"?e+=`
        <p><strong>Monto recibido:</strong> $${this.amountReceived.toFixed(2)}</p>
        <p><strong>Cambio a entregar:</strong> $${this.change.toFixed(2)}</p>
      `:this.paymentMethod==="Transferencia"?e+=`
        <p><strong>Banco:</strong> ${this.bankName}</p>
        <p><strong>C\xF3digo de transacci\xF3n:</strong> ${this.transactionCode}</p>
      `:(this.paymentMethod==="Ahorita"||this.paymentMethod==="De una")&&(e+=`
        <p><strong>C\xF3digo de transacci\xF3n:</strong> ${this.transactionCode}</p>
      `),e+="</div>",Fn.default.fire({title:"Confirmar pago",html:e,icon:"question",showCancelButton:!0,confirmButtonText:"Confirmar pago",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed&&this.order){this.order?.items?.forEach(i=>{i.status="Servido"}),this.order.paymentMethod=this.paymentMethod;let r={method:this.paymentMethod};this.paymentMethod==="Efectivo"?(r.amountReceived=this.amountReceived,r.change=this.change):this.paymentMethod==="Transferencia"?(r.bankName=this.bankName,r.transactionCode=this.transactionCode):(this.paymentMethod==="Ahorita"||this.paymentMethod==="De una")&&(r.transactionCode=this.transactionCode),this.order.paymentDetails=r,this.registerPayment(this.order.id,r),this.finalizeOrder(this.order.id)}})}registerPayment(e,t){return W(this,null,function*(){if(this.order)try{let r=it(this.firestore,`orders/${e}/payments`);yield yr(r,Te(fe({amount:this.order?.total??0},t),{timestamp:new Date,partName:"Pago completo",splitMode:"complete"}))}catch(r){console.error("Error al registrar el pago:",r)}})}resetPaymentFields(){this.bankName="",this.transactionCode=""}cancelChangeCalculator(){this.showChangeCalculator=!1,this.amountReceived=0,this.change=0,this.resetPaymentFields()}calculateChange(){this.order&&(this.amountReceived>=this.order.total?this.change=this.amountReceived-this.order.total:this.change=0)}finalizeOrder(e){let t=Ye(this.firestore,"orders",e),r={status:"Cobrado",paidAt:new Date,paymentMethod:this.paymentMethod};this.paymentMethod==="Transferencia"?(r.bankName=this.bankName,r.transactionCode=this.transactionCode):(this.paymentMethod==="Ahorita"||this.paymentMethod==="De una")&&(r.transactionCode=this.transactionCode),St(t,r).then(()=>{this.registerPaymentInCashRegister(e);let i=`El pedido ha sido cobrado correctamente con ${this.paymentMethod}`;this.paymentMethod==="Transferencia"?i+=` (Banco: ${this.bankName}, C\xF3digo: ${this.transactionCode})`:(this.paymentMethod==="Ahorita"||this.paymentMethod==="De una")&&(i+=` (C\xF3digo: ${this.transactionCode})`),Fn.default.fire({title:"\xA1Cobrado!",text:i,icon:"success",confirmButtonText:"Volver al inicio"}).then(()=>{this.router.navigate(["/"])})}).catch(i=>{console.error("Error al cobrar el pedido:",i),Fn.default.fire("Error","No se pudo cobrar el pedido","error")})}registerPaymentInCashRegister(e){this.order&&this.cashRegisterService.getCurrentCashRegister().subscribe({next:t=>{if(!t){console.warn("No hay una caja abierta. El pago se registr\xF3 pero no se actualiz\xF3 la caja"),Fn.default.fire({icon:"warning",title:"Pago registrado",text:"El pago se ha registrado correctamente, pero no se pudo actualizar la caja porque est\xE1 cerrada.",confirmButtonText:"Entendido"});return}if(!(this.order?.items?.every(s=>s.status==="Servido")??!1)){if(console.warn("Algunos \xEDtems no han sido servidos antes del cobro"),this.order?.items?.forEach(o=>{o.status="Servido"}),!this.order)return;let s=Ye(this.firestore,"orders",this.order.id);St(s,{items:this.order.items}).catch(o=>{console.error("Error al actualizar estado de \xEDtems a servido:",o)})}let i=`Pago de pedido #${e} - Cliente: ${this.order?.customer?.name||"Desconocido"}`;this.cashRegisterService.registerPayment({orderId:e,amount:this.order?.total??0,paymentMethod:this.paymentMethod,description:i}).subscribe({next:s=>{s||console.warn("El pago se registr\xF3 en el sistema pero no se pudo actualizar la caja")},error:s=>{console.error("Error al registrar pago en caja:",s)}})},error:t=>{console.error("Error al verificar el estado de la caja:",t)}})}startSplitBill(){this.isSplittingBill=!0,this.splitMode="items",this.initializeSplitParts()}changeSplitMode(e){this.splitMode=e,this.initializeSplitParts()}initializeSplitParts(){this.splitParts=[];for(let e=0;e<this.numberOfParts;e++)this.splitParts.push({name:`Persona ${e+1}`,items:[],total:0});this.order?(this.unassignedItems=[],this.order.items.forEach(e=>{if(e.quantity>1)for(let t=0;t<e.quantity;t++)this.unassignedItems.push(Te(fe({},e),{quantity:1,splitAssigned:!1,originalId:e.id,id:`${e.id}-split-${t}`}));else this.unassignedItems.push(Te(fe({},e),{splitAssigned:!1}))})):this.unassignedItems=[]}showAssignMenu(e){this.selectedItemForAssignment=e,this.showAssignmentMenu=!0}hideAssignMenu(){setTimeout(()=>{this.showAssignmentMenu=!1,this.selectedItemForAssignment=null},200)}assignItemToPart(e,t){e.splitAssigned=!0,this.splitParts[t].items.push(e),this.splitParts[t].total+=e.price*e.quantity,this.unassignedItems=this.unassignedItems.filter(r=>r.id!==e.id),this.hideAssignMenu()}removeItemFromPart(e,t){let r=this.splitParts[e].items[t];this.splitParts[e].total-=r.price*r.quantity,this.splitParts[e].items.splice(t,1),r.splitAssigned=!1,this.unassignedItems.push(r)}countSplitItemsInPaidParts(e){let t=0,r=this.order.items.filter(i=>i.id===e&&i.status==="Listos para servir");return r.length>0&&(t=r.reduce((i,s)=>i+s.quantity,0)),this.splitParts.forEach(i=>{if(i.items.length===0){let s=i.items.filter(o=>o.originalId&&o.originalId.split("-split-")[0]===e||o.id===e);t+=s.length}}),t}viewPayments(){return W(this,null,function*(){if(this.order)try{let e=it(this.firestore,`orders/${this.order.id}/payments`),t=yield Tr(e);if(t.empty){Fn.default.fire("Sin pagos","Este pedido a\xFAn no tiene pagos registrados","info");return}let r=t.docs.map(s=>{let o=s.data();return{id:s.id,partName:o.partName||"Desconocido",amount:o.amount||0,amountReceived:o.amountReceived,change:o.change,paymentMethod:o.paymentMethod||"Desconocido",timestamp:o.timestamp?.toDate()||new Date,splitMode:o.splitMode||"complete",items:o.items||[],isEqualSplit:o.isEqualSplit,totalParts:o.totalParts}}),i='<div class="space-y-4">';r.forEach(s=>{i+=`
          <div class="border rounded p-3">
            <div class="font-bold">${s.partName}</div>
            <div>Monto: ${s.amount.toFixed(2)}</div>
            <div>M\xE9todo: ${s.paymentMethod}</div>
            <div>Fecha: ${s.timestamp.toLocaleString()}</div>
          </div>
        `}),i+="</div>",Fn.default.fire({title:"Historial de Pagos",html:i,width:"600px"})}catch(e){console.error("Error al obtener pagos:",e),Fn.default.fire("Error","No se pudieron cargar los pagos","error")}})}updateOrderItems(){if(!this.order)return;let e=Ye(this.firestore,"orders",this.order.id);St(e,{items:this.order.items}).catch(t=>{console.error("Error al actualizar los items:",t),Fn.default.fire("Error","No se pudieron actualizar los items del pedido","error")})}checkSplitStatus(){this.order&&(this.splitMode==="equal"?this.splitParts.every(t=>t.total===0)&&Fn.default.fire({title:"Pedido completado",text:"Todas las partes han sido pagadas. \xBFDesea finalizar el pedido?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, finalizar",cancelButtonText:"No, continuar"}).then(t=>{t.isConfirmed&&this.order&&(this.order.items.forEach(r=>{r.status="Listos para servir"}),this.finalizeOrder(this.order.id))}):this.unassignedItems.length===0&&this.order.items.every(r=>r.status==="Listos para servir")&&Fn.default.fire({title:"Pedido completado",text:"Todos los \xEDtems han sido pagados. \xBFDesea finalizar el pedido?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, finalizar",cancelButtonText:"No, continuar"}).then(r=>{r.isConfirmed&&this.order&&this.finalizeOrder(this.order.id)}))}finalizeSplitBill(){this.order&&(this.unassignedItems.length>0?Fn.default.fire({title:"\xCDtems sin asignar",text:"Hay \xEDtems que no han sido asignados a ninguna persona. \xBFDesea continuar y cobrarlos todos juntos?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, cobrar todo",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.markAllItemsAsPaid()}):this.isAllItemsPaid()?this.finalizeOrder(this.order.id):Fn.default.fire({title:"\xCDtems sin pagar",text:"Hay \xEDtems que han sido asignados pero no han sido pagados. \xBFDesea continuar y marcarlos como pagados?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, marcar como pagados",cancelButtonText:"Cancelar"}).then(t=>{t.isConfirmed&&this.markAllItemsAsPaid()}))}isAllItemsPaid(){return!this.splitParts.some(t=>t.items.length>0)&&this.unassignedItems.length===0}markAllItemsAsPaid(){this.order&&(this.order.items.forEach(e=>{e.status="Servido"}),this.updateOrderItems(),this.finalizeOrder(this.order.id))}cancelSplitBill(){this.isSplittingBill=!1,this.splitParts=[],this.unassignedItems=[]}goBack(){this.router.navigate(["/"])}setQuickAmount(e){this.order&&(this.amountReceived=e,this.calculateChange())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-payment"]],standalone:!0,features:[Jt],decls:10,vars:4,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-start","mb-4"],[1,"bg-gray-500","text-white","rounded-lg","py-2","px-4","shadow-md","hover:bg-gray-600","flex","items-center","gap-2",3,"click"],[1,"font-bold","text-2xl","lg:text-3xl","mb-6","text-center","text-gray-800"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mb-4",4,"ngIf"],["class","bg-white rounded-lg shadow-md p-6",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",3,"click",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],[1,"bg-red-100","border-l-4","border-red-500","text-red-700","p-4","mb-4"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"mb-6","border-b","pb-4"],[1,"flex","justify-between","items-start","flex-wrap"],[1,"font-bold","text-xl","break-words","text-gray-900"],[1,"text-sm","text-gray-600","break-words"],["class","text-sm text-gray-600",4,"ngIf"],[1,"text-sm","text-gray-500","whitespace-nowrap"],[1,"mt-2","flex","justify-between","items-center"],[1,"px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"text-blue-500","hover:text-blue-700","text-sm","flex","items-center","gap-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["class","bg-gray-50 p-6 rounded-lg mb-6 border border-gray-200",4,"ngIf"],[4,"ngIf"],[1,"text-sm","text-gray-600"],[1,"bg-gray-50","p-6","rounded-lg","mb-6","border","border-gray-200"],[1,"text-lg","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-2xl","font-bold","text-gray-800"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-between","mt-6"],[1,"bg-gray-500","text-white","py-2","px-6","rounded","hover:bg-gray-600",3,"click"],[1,"text-white","py-2","px-6","rounded",3,"click","disabled","ngClass"],[3,"value"],["for","amountReceived",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","number","id","amountReceived","min","0","step","0.01",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"text-2xl","font-bold",3,"ngClass"],["class","text-red-500 text-sm mt-1",4,"ngIf"],[1,"text-red-500","text-sm","mt-1"],[1,"space-y-4"],["for","bankName",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","bankName","placeholder","Nombre del banco",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","transactionCode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","transactionCode","placeholder","C\xF3digo de la transferencia",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","ahoritaCode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","ahoritaCode","placeholder","C\xF3digo de Ahorita",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],["for","deunaCode",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","id","deunaCode","placeholder","C\xF3digo de De una",1,"w-full","px-4","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"grid","grid-cols-2","gap-2"],[1,"bg-gray-200","hover:bg-gray-300","py-2","rounded",3,"click"],[1,"space-y-2","mb-6"],["class","p-3 rounded-md flex justify-between items-center border-b",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","py-4","border-t","border-b","mb-6"],[1,"font-bold","text-lg","text-gray-800"],[1,"text-xl","font-bold","text-gray-800"],[1,"flex","gap-4","justify-center"],[1,"bg-green-500","text-white","py-3","px-6","rounded-lg","hover:bg-green-600","flex","items-center","justify-center","gap-2","flex-1",3,"click"],[1,"bg-blue-500","text-white","py-3","px-6","rounded-lg","hover:bg-blue-600","flex","items-center","justify-center","gap-2","flex-1",3,"click"],[1,"p-3","rounded-md","flex","justify-between","items-center","border-b",3,"ngClass"],[1,"text-sm","font-medium","text-gray-700"],["class","text-gray-500",4,"ngIf"],[1,"text-right"],[1,"text-sm","font-medium"],[1,"text-gray-500"],[1,"mb-6","bg-gray-50","p-4","rounded-lg"],[1,"font-medium","text-gray-700","mb-3"],[1,"flex","gap-3"],[1,"px-4","py-2","rounded-lg","flex-1",3,"click","ngClass"],[1,"flex","flex-col","items-center"],[1,"text-lg","mb-1"],[1,"font-medium"],[1,"text-xs",3,"ngClass"],[1,"mb-6"],[1,"flex","items-center"],[1,"bg-gray-200","px-3","py-1","rounded-l","hover:bg-gray-300",3,"click"],[1,"px-4","py-1","bg-gray-100","text-center"],[1,"bg-gray-200","px-3","py-1","rounded-r","hover:bg-gray-300",3,"click"],["class","bg-white border rounded-lg p-4 mb-6",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",4,"ngIf"],[1,"bg-gray-500","text-white","py-2","px-4","rounded","hover:bg-gray-600",3,"click"],[1,"bg-green-500","text-white","py-2","px-4","rounded","hover:bg-green-600",3,"click"],[1,"bg-white","border","rounded-lg","p-4","mb-6"],[1,"font-medium","text-gray-800","mb-3"],[1,"bg-gray-50","p-4","rounded-lg"],[1,"text-center","mb-4"],[1,"text-sm","text-gray-500"],[1,"text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"space-y-3"],["class","flex justify-between items-center p-3 rounded-lg border",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","p-3","rounded-lg","border",3,"ngClass"],[1,"border-b","border-gray-300","bg-transparent","focus:outline-none","focus:border-blue-500","px-1",3,"ngModelChange","ngModel"],[1,"text-sm"],["class","font-medium",4,"ngIf"],["class","text-green-600 font-medium",4,"ngIf"],["class","bg-green-500 text-white py-1 px-3 rounded hover:bg-green-600 text-sm",3,"click",4,"ngIf"],[1,"text-green-600","font-medium"],[1,"bg-green-500","text-white","py-1","px-3","rounded","hover:bg-green-600","text-sm",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"font-medium","mb-3","text-gray-700"],[1,"space-y-2","max-h-96","overflow-y-auto"],["class","p-3 bg-white rounded-md shadow-sm flex justify-between items-center",4,"ngFor","ngForOf"],["class","text-center py-4 text-gray-500",4,"ngIf"],["class","mb-4 bg-white p-4 rounded-lg shadow-sm",4,"ngFor","ngForOf"],[1,"p-3","bg-white","rounded-md","shadow-sm","flex","justify-between","items-center"],["class","ml-1 text-xs bg-blue-100 text-blue-700 px-1 py-0.5 rounded",4,"ngIf"],[1,"text-xs","text-gray-500"],[1,"bg-blue-500","text-white","px-3","py-1","rounded","text-sm","hover:bg-blue-600",3,"click"],[1,"ml-1","text-xs","bg-blue-100","text-blue-700","px-1","py-0.5","rounded"],[1,"text-center","py-4","text-gray-500"],[1,"mb-4","bg-white","p-4","rounded-lg","shadow-sm"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-bold"],[1,"space-y-2","max-h-40","overflow-y-auto"],["class","p-2 bg-gray-50 rounded flex justify-between items-center",4,"ngFor","ngForOf"],["class","text-center py-2 text-gray-500 text-sm",4,"ngIf"],["class","mt-3 w-full bg-green-500 text-white py-2 rounded hover:bg-green-600 text-sm",3,"click",4,"ngIf"],[1,"p-2","bg-gray-50","rounded","flex","justify-between","items-center"],[1,"flex","items-center","gap-2"],[1,"text-red-500","hover:text-red-700",3,"click"],[1,"text-center","py-2","text-gray-500","text-sm"],[1,"mt-3","w-full","bg-green-500","text-white","py-2","rounded","hover:bg-green-600","text-sm",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-30","flex","items-center","justify-center","z-50",3,"click"],[1,"bg-white","rounded-lg","shadow-xl","p-4","max-w-xs","w-full",3,"click"],[1,"font-medium","mb-2","text-gray-800"],[1,"space-y-2"],["class","w-full text-left px-4 py-2 hover:bg-gray-100 rounded transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"mt-4","text-right"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"w-full","text-left","px-4","py-2","hover:bg-gray-100","rounded","transition-colors",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"button",2),J("click",function(){return r.goBack()}),v(3," \u2190 Volver "),p()(),f(4,"h1",3),v(5," \u{1F4B0} Cobrar Pedido "),p(),se(6,Are,2,0,"div",4)(7,kre,3,1,"div",5)(8,oie,22,16,"div",6)(9,cie,9,1,"div",7),p()),t&2&&(x(6),ee("ngIf",r.loading),x(),ee("ngIf",r.error),x(),ee("ngIf",!r.loading&&!r.error&&r.order),x(),ee("ngIf",r.showAssignmentMenu&&r.selectedItemForAssignment))},dependencies:[nn,tr,qs,sa,_l,Ur,Qs,Ys,xr,Do,ss,Br,Ao,pi],encapsulation:2})};var Ea=Bs(Rs());var lie=(n,e,t,r)=>({"bg-purple-100 text-purple-800":n,"bg-blue-100 text-blue-800":e,"bg-orange-100 text-orange-800":t,"bg-green-100 text-green-800":r});function uie(n,e){if(n&1){let t=ye();f(0,"tr")(1,"td",22)(2,"div",23),v(3),p()(),f(4,"td",22)(5,"div",24),v(6),p()(),f(7,"td",22)(8,"span",25),v(9),p()(),f(10,"td",26)(11,"button",27),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.editUser(i))}),v(12," Editar "),p(),f(13,"button",28),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.deleteUser(i))}),v(14," Eliminar "),p()()()}if(n&2){let t=e.$implicit,r=R();x(3),De(t.displayName),x(3),De(t.email),x(2),ee("ngClass",ju(4,lie,t.role==="admin",t.role==="mesero",t.role==="cocinero",t.role==="cobrador")),x(),ie(" ",r.getRoleName(t.role)," ")}}var Zy=class n{firestore=le(rn);auth=le(gc);users=[];newUser={displayName:"",email:"",password:"",role:"mesero"};ngOnInit(){this.loadUsers()}loadUsers(){let e=it(this.firestore,"users");Vr(e,{idField:"uid"}).subscribe(t=>{this.users=t})}createUser(){return W(this,null,function*(){try{if(!this.newUser.displayName||!this.newUser.email||!this.newUser.password){Ea.default.fire("Error","Todos los campos son obligatorios","error");return}let e=yield PN(this.auth,this.newUser.email,this.newUser.password);yield ya(Ye(this.firestore,`users/${e.user.uid}`),{uid:e.user.uid,email:this.newUser.email,displayName:this.newUser.displayName,role:this.newUser.role,createdAt:new Date}),Ea.default.fire("\xC9xito","Usuario creado correctamente","success"),this.newUser={displayName:"",email:"",password:"",role:"mesero"}}catch(e){console.error("Error al crear usuario:",e),Ea.default.fire("Error",e.message,"error")}})}editUser(e){Ea.default.fire({title:"Editar Usuario",html:`
        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
          <input id="swal-name" class="w-full px-3 py-2 border border-gray-300 rounded-md" 
                 value="${e.displayName}">
        </div>
        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
          <select id="swal-role" class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <option value="admin" ${e.role==="admin"?"selected":""}>Administrador</option>
            <option value="mesero" ${e.role==="mesero"?"selected":""}>Mesero</option>
            <option value="cocinero" ${e.role==="cocinero"?"selected":""}>Cocinero</option>
            <option value="cobrador" ${e.role==="cobrador"?"selected":""}>Cobrador</option>
          </select>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Guardar",cancelButtonText:"Cancelar",preConfirm:()=>{let t=document.getElementById("swal-name"),r=document.getElementById("swal-role");return{displayName:t.value,role:r.value}}}).then(t=>W(this,null,function*(){if(t.isConfirmed){let r=t.value;try{yield ya(Ye(this.firestore,`users/${e.uid}`),Te(fe({},e),{displayName:r.displayName,role:r.role,updatedAt:new Date}),{merge:!0}),Ea.default.fire("\xC9xito","Usuario actualizado correctamente","success")}catch(i){console.error("Error al actualizar usuario:",i),Ea.default.fire("Error","No se pudo actualizar el usuario","error")}}}))}deleteUser(e){Ea.default.fire({title:"\xBFEst\xE1s seguro?",text:`\xBFDeseas eliminar al usuario ${e.displayName}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(t=>W(this,null,function*(){if(t.isConfirmed)try{yield _a(Ye(this.firestore,`users/${e.uid}`)),Ea.default.fire("Eliminado","El usuario ha sido eliminado","success")}catch(r){console.error("Error al eliminar usuario:",r),Ea.default.fire("Error","No se pudo eliminar el usuario","error")}}))}getRoleName(e){switch(e){case"admin":return"Administrador";case"mesero":return"Mesero";case"cocinero":return"Cocinero";case"cobrador":return"Cobrador";default:return""}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-user-management"]],standalone:!0,features:[Jt],decls:50,vars:5,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"text-2xl","font-bold","mb-6"],[1,"bg-white","p-6","rounded-lg","shadow-md","mb-8"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["type","email",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["type","password",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md",3,"ngModelChange","ngModel"],["value","admin"],["value","mesero"],["value","cocinero"],["value","cobrador"],[1,"bg-blue-500","text-white","py-2","px-4","rounded","hover:bg-blue-600",3,"click"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],[1,"px-6","py-4","whitespace-nowrap"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-900","mr-3",3,"click"],[1,"text-red-600","hover:text-red-900",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"h1",1),v(2,"Administraci\xF3n de Usuarios"),p(),f(3,"div",2)(4,"h2",3),v(5,"Crear Nuevo Usuario"),p(),f(6,"div",4)(7,"div")(8,"label",5),v(9,"Nombre"),p(),f(10,"input",6),He("ngModelChange",function(s){return ze(r.newUser.displayName,s)||(r.newUser.displayName=s),s}),p()(),f(11,"div")(12,"label",5),v(13,"Correo Electr\xF3nico"),p(),f(14,"input",7),He("ngModelChange",function(s){return ze(r.newUser.email,s)||(r.newUser.email=s),s}),p()(),f(15,"div")(16,"label",5),v(17,"Contrase\xF1a"),p(),f(18,"input",8),He("ngModelChange",function(s){return ze(r.newUser.password,s)||(r.newUser.password=s),s}),p()(),f(19,"div")(20,"label",5),v(21,"Rol"),p(),f(22,"select",9),He("ngModelChange",function(s){return ze(r.newUser.role,s)||(r.newUser.role=s),s}),f(23,"option",10),v(24,"Administrador"),p(),f(25,"option",11),v(26,"Mesero"),p(),f(27,"option",12),v(28,"Cocinero"),p(),f(29,"option",13),v(30,"Cobrador"),p()()()(),f(31,"button",14),J("click",function(){return r.createUser()}),v(32," Crear Usuario "),p()(),f(33,"div",15)(34,"h2",3),v(35,"Usuarios Existentes"),p(),f(36,"div",16)(37,"table",17)(38,"thead",18)(39,"tr")(40,"th",19),v(41," Nombre "),p(),f(42,"th",19),v(43," Correo "),p(),f(44,"th",19),v(45," Rol "),p(),f(46,"th",19),v(47," Acciones "),p()()(),f(48,"tbody",20),se(49,uie,15,9,"tr",21),p()()()()()),t&2&&(x(10),$e("ngModel",r.newUser.displayName),x(4),$e("ngModel",r.newUser.email),x(4),$e("ngModel",r.newUser.password),x(4),$e("ngModel",r.newUser.role),x(27),ee("ngForOf",r.users))},dependencies:[tr,nn,qs,Ur,Qs,Ys,xr,ss,Br,pi]})};var die=(n,e)=>e.title,fie=n=>({"border-2 border-blue-500":n});function hie(n,e){if(n&1){let t=ye();f(0,"div",6),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.navigateTo(i.route))}),f(1,"div",7)(2,"div",8),v(3),p(),f(4,"h2",9),v(5),p(),f(6,"p",10),v(7),p()(),f(8,"div",11)(9,"div",12)(10,"span",13),v(11,"Gestionar \u2192"),p()()()()}if(n&2){let t=e.$implicit;ee("ngClass",Uu(4,fie,t.highlight)),x(3),De(t.icon),x(2),De(t.title),x(2),De(t.description)}}var Jy=class n{authService=le(jn);router=le(Ht);isAdmin$=this.authService.isAdmin$;adminMenuItems=[{title:"Categor\xEDas",description:"Administrar categor\xEDas de Productos",icon:"\u{1F4CB}",route:"/admin/categorias"},{title:"Productos",description:"Administrar productos",icon:"\u{1F37D}\uFE0F",route:"/admin/productos",highlight:!0},{title:"Inventario",description:"Gestionar stock y disponibilidad",icon:"\u{1F4E6}",route:"/admin/inventario"},{title:"Reportes",description:"Ver reportes y estad\xEDsticas",icon:"\u{1F4CA}",route:"/admin/reportes"},{title:"Usuarios",description:"Administrar usuarios del sistema",icon:"\u{1F465}",route:"/users"}];constructor(){this.isAdmin$.subscribe(e=>{e||this.router.navigate(["/login"])})}navigateTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-admin-dashboard"]],standalone:!0,features:[Jt],decls:9,vars:0,consts:[[1,"container","mx-auto","px-4","py-8"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-2xl","lg:text-3xl","font-bold","text-gray-800"],["routerLink","/",1,"bg-blue-500","text-white","py-2","px-4","rounded","hover:bg-blue-600","transition-colors"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","cursor-pointer",3,"ngClass"],[1,"bg-white","rounded-lg","shadow-md","hover:shadow-lg","transition-shadow","cursor-pointer",3,"click","ngClass"],[1,"p-6"],[1,"text-3xl","mb-4"],[1,"text-xl","font-bold","text-gray-800","mb-2"],[1,"text-gray-600"],[1,"px-6","py-2","bg-gray-50","rounded-b-lg","border-t"],[1,"flex","justify-end"],[1,"text-blue-500","font-medium"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1",2),v(3,"Panel de Administraci\xF3n"),p(),f(4,"button",3),v(5," Volver al Inicio "),p()(),f(6,"div",4),Xt(7,hie,12,6,"div",5,die),p()()),t&2&&(x(7),Zt(r.adminMenuItems))},dependencies:[nn,tr,wl,Qf]})};var ko=Bs(Rs());function pie(n,e){if(n&1){let t=ye();f(0,"button",21),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),v(1," Cancelar "),p()}}function mie(n,e){if(n&1){let t=ye();f(0,"button",22),J("click",function(){Y(t);let i=R();return X(i.createCategory())}),v(1," Crear Categor\xEDa "),p()}}function gie(n,e){if(n&1){let t=ye();f(0,"button",23),J("click",function(){Y(t);let i=R();return X(i.updateCategory())}),v(1," Actualizar Categor\xEDa "),p()}}function vie(n,e){n&1&&(f(0,"div",19),ae(1,"div",24),p())}function _ie(n,e){if(n&1&&(f(0,"div",20)(1,"span",25),v(2),p()()),n&2){let t=R();x(2),De(t.error)}}function yie(n,e){if(n&1){let t=ye();f(0,"tr")(1,"td",40)(2,"div",41),v(3),p()(),f(4,"td",42)(5,"div",43),v(6),p()(),f(7,"td",40)(8,"span",44),v(9),p()(),f(10,"td",45)(11,"span",46),v(12),p()(),f(13,"td",47)(14,"button",48),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.editCategory(i))}),v(15," Editar "),p(),f(16,"button",49),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.toggleCategoryStatus(i))}),v(17),p(),f(18,"button",50),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.deleteCategory(i))}),v(19," Eliminar "),p()()()}if(n&2){let t=e.$implicit,r=e.$index;tt("bg-gray-50",!t.active),x(3),De(t.name),x(3),ie(" ",t.description||"Sin descripci\xF3n"," "),x(2),pl(t.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),x(),ie(" ",t.active?"Activa":"Inactiva"," "),x(3),De(t.order||r+1),x(4),pl(t.active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),x(),ie(" ",t.active?"Desactivar":"Activar"," ")}}function xie(n,e){n&1&&(f(0,"tr")(1,"td",51),v(2," No hay categor\xEDas disponibles "),p()())}function wie(n,e){if(n&1){let t=ye();f(0,"div",26)(1,"h2",27),v(2,"Categor\xEDas Existentes"),p(),f(3,"div",28)(4,"label",29)(5,"input",30),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.showInactive,i)||(s.showInactive=i),X(i)}),p(),f(6,"span",31),v(7,"Mostrar inactivas"),p()()()(),f(8,"div",32)(9,"table",33)(10,"thead",34)(11,"tr")(12,"th",35),v(13," Nombre "),p(),f(14,"th",35),v(15," Descripci\xF3n "),p(),f(16,"th",35),v(17," Estado "),p(),f(18,"th",36),v(19," Orden "),p(),f(20,"th",37),v(21," Acciones "),p()()(),f(22,"tbody",38),Xt(23,yie,20,11,"tr",39,ml,!1,xie,3,0,"tr"),p()()()}if(n&2){let t=R();x(5),$e("ngModel",t.showInactive),x(18),Zt(t.getFilteredCategories())}}var ex=class n{firestore=le(rn);authService=le(jn);router=le(Ht);categories=[];loading=!0;error=null;isEditing=!1;currentCategory=this.resetCategoryForm();showInactive=!1;constructor(){this.authService.isAdmin$.subscribe(e=>{e||this.router.navigate(["/login"])})}ngOnInit(){this.loadCategories()}loadCategories(){this.loading=!0;let e=it(this.firestore,"categories"),t=tn(e,Un("order","asc"),Un("name","asc"));Vr(t,{idField:"id"}).subscribe({next:r=>{this.categories=r.map(i=>Te(fe({},i),{createdAt:i.createdAt?.toDate(),updatedAt:i.updatedAt?.toDate()})),this.loading=!1},error:r=>{console.error("Error al cargar categor\xEDas:",r),this.error="Error al cargar categor\xEDas. Intente nuevamente.",this.loading=!1}})}getFilteredCategories(){return this.categories.filter(e=>this.showInactive||e.active)}createCategory(){if(!this.validateForm())return;let e=Te(fe({},this.currentCategory),{createdAt:new Date,updatedAt:new Date,order:this.getNextOrder()}),t=it(this.firestore,"categories");yr(t,e).then(()=>{ko.default.fire("\xA1\xC9xito!","Categor\xEDa creada correctamente","success"),this.resetForm()}).catch(r=>{console.error("Error al crear categor\xEDa:",r),ko.default.fire("Error","No se pudo crear la categor\xEDa","error")})}editCategory(e){this.isEditing=!0,this.currentCategory=fe({},e),setTimeout(()=>{document.getElementById("categoryForm")?.scrollIntoView({behavior:"smooth"})},100)}updateCategory(){if(!this.validateForm()||!this.currentCategory.id)return;let e=Ye(this.firestore,`categories/${this.currentCategory.id}`),t=Te(fe({},this.currentCategory),{updatedAt:new Date});St(e,t).then(()=>{ko.default.fire("\xA1\xC9xito!","Categor\xEDa actualizada correctamente","success"),this.resetForm()}).catch(r=>{console.error("Error al actualizar categor\xEDa:",r),ko.default.fire("Error","No se pudo actualizar la categor\xEDa","error")})}deleteCategory(e){ko.default.fire({title:"\xBFEst\xE1s seguro?",text:`\xBFQuieres eliminar la categor\xEDa "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed&&e.id){let r=Ye(this.firestore,`categories/${e.id}`);_a(r).then(()=>{ko.default.fire("\xA1Eliminada!","La categor\xEDa ha sido eliminada","success")}).catch(i=>{console.error("Error al eliminar categor\xEDa:",i),ko.default.fire("Error","No se pudo eliminar la categor\xEDa","error")})}})}toggleCategoryStatus(e){if(!e.id)return;let t=Ye(this.firestore,`categories/${e.id}`),r=!e.active;St(t,{active:r,updatedAt:new Date}).then(()=>{let i=r?"activada":"desactivada";ko.default.fire("\xA1Actualizada!",`La categor\xEDa ha sido ${i}`,"success")}).catch(i=>{console.error("Error al cambiar estado de categor\xEDa:",i),ko.default.fire("Error","No se pudo cambiar el estado de la categor\xEDa","error")})}resetForm(){this.isEditing=!1,this.currentCategory=this.resetCategoryForm()}validateForm(){return!this.currentCategory.name||this.currentCategory.name.trim()===""?(ko.default.fire("Error","El nombre de la categor\xEDa es obligatorio","error"),!1):!0}resetCategoryForm(){return{id:"",name:"",description:"",active:!0,items:[]}}getNextOrder(){return this.categories.length===0?1:Math.max(...this.categories.map(t=>t.order||0))+1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-category-management"]],standalone:!0,features:[Jt],decls:32,vars:11,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","lg:text-3xl","font-bold","text-gray-800"],["id","categoryForm",1,"bg-white","rounded-lg","shadow-md","p-6","mb-8"],[1,"text-xl","font-semibold","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","placeholder","Ej: Entradas, Productos Principales, Postres...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","mt-3"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-11","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-4","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],[1,"ml-3","text-sm","font-medium","text-gray-900"],[1,"md:col-span-2"],["rows","3","placeholder","Descripci\xF3n breve de la categor\xEDa...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-3"],[1,"px-4","py-2","border","border-gray-300","rounded-md","hover:bg-gray-100"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600"],[1,"flex","justify-center","py-8"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-6"],[1,"px-4","py-2","border","border-gray-300","rounded-md","hover:bg-gray-100",3,"click"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600",3,"click"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600",3,"click"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],[1,"block","sm:inline"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold"],[1,"flex","items-center"],[1,"inline-flex","items-center","mr-2"],["type","checkbox",1,"rounded","text-blue-600","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"ml-2","text-sm","text-gray-700"],[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-6","py-3","text-xs","font-medium","text-gray-500","uppercase","tracking-wider","text-center"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[3,"bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"font-medium","text-gray-900"],[1,"px-6","py-4"],[1,"text-sm","text-gray-500","overflow-hidden","text-ellipsis",2,"max-width","300px"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"px-6","py-4","whitespace-nowrap","text-center"],[1,"text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-900","mr-3",3,"click"],[1,"mr-3",3,"click"],[1,"text-red-600","hover:text-red-900",3,"click"],["colspan","5",1,"px-6","py-4","text-center","text-gray-500"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1",2),v(3,"Gesti\xF3n de Categor\xEDas"),p()(),f(4,"div",3)(5,"h2",4),v(6),p(),f(7,"div",5)(8,"div")(9,"label",6),v(10,"Nombre de la Categor\xEDa *"),p(),f(11,"input",7),He("ngModelChange",function(s){return ze(r.currentCategory.name,s)||(r.currentCategory.name=s),s}),p()(),f(12,"div")(13,"label",6),v(14,"Estado"),p(),f(15,"div",8)(16,"label",9)(17,"input",10),He("ngModelChange",function(s){return ze(r.currentCategory.active,s)||(r.currentCategory.active=s),s}),p(),ae(18,"div",11),f(19,"span",12),v(20),p()()()(),f(21,"div",13)(22,"label",6),v(23,"Descripci\xF3n"),p(),f(24,"textarea",14),He("ngModelChange",function(s){return ze(r.currentCategory.description,s)||(r.currentCategory.description=s),s}),p()()(),f(25,"div",15),se(26,pie,2,0,"button",16)(27,mie,2,0,"button",17)(28,gie,2,0,"button",18),p()(),se(29,vie,2,0,"div",19)(30,_ie,3,1,"div",20)(31,wie,26,2),p()),t&2&&(x(6),ie(" ",r.isEditing?"Editar Categor\xEDa":"Crear Nueva Categor\xEDa"," "),x(5),$e("ngModel",r.currentCategory.name),x(6),$e("ngModel",r.currentCategory.active),x(3),De(r.currentCategory.active?"Activa":"Inactiva"),x(4),$e("ngModel",r.currentCategory.description),x(2),Se(r.isEditing?26:-1),x(),Se(r.isEditing?-1:27),x(),Se(r.isEditing?28:-1),x(),Se(r.loading?29:-1),x(),Se(r.error?30:-1),x(),Se(!r.loading&&!r.error?31:-1))},dependencies:[nn,Ur,xr,bc,Br,pi]})};var Ri=Bs(Rs());var FL=(n,e)=>e.id;function bie(n,e){if(n&1&&(f(0,"option",8),v(1),p()),n&2){let t=e.$implicit;ee("value",t.id),x(),ie(" ",t.name," ")}}function Eie(n,e){if(n&1){let t=ye();f(0,"div")(1,"label",4),v(2,"Cantidad en Stock *"),p(),f(3,"input",53),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.currentDish.stockQuantity,i)||(s.currentDish.stockQuantity=i),X(i)}),p()()}if(n&2){let t=R();x(3),$e("ngModel",t.currentDish.stockQuantity)}}function Cie(n,e){if(n&1&&(f(0,"span",58),v(1),p()),n&2){let t=R().$implicit;x(),ie("(+$",t.price.toFixed(2),")")}}function Sie(n,e){if(n&1){let t=ye();f(0,"li",56)(1,"span",57),v(2),se(3,Cie,2,1,"span",58),p(),f(4,"button",59),J("click",function(){let i=Y(t).$index,s=R(2);return X(s.removeOption(i))}),xe(),f(5,"svg",60),ae(6,"path",61),p()()()}if(n&2){let t=e.$implicit;x(2),ie(" ",t.name," "),x(),Se(t.price&&t.price>0?3:-1)}}function Iie(n,e){if(n&1&&(f(0,"div",36)(1,"h4",54),v(2,"Opciones a\xF1adidas:"),p(),f(3,"ul",55),Xt(4,Sie,7,2,"li",56,ml),p()()),n&2){let t=R();x(4),Zt(t.currentDish.options)}}function Tie(n,e){if(n&1&&(f(0,"option",8),v(1),p()),n&2){let t=e.$implicit;ee("value",t.id),x(),gn(" ",t.name," (",t.unit,") ")}}function Die(n,e){if(n&1){let t=ye();f(0,"li",56)(1,"span",57),v(2),f(3,"span",62),v(4),p()(),f(5,"button",59),J("click",function(){let i=Y(t).$index,s=R(2);return X(s.removeIngredient(i))}),xe(),f(6,"svg",60),ae(7,"path",61),p()()()}if(n&2){let t=e.$implicit;x(2),ie(" ",t.name," "),x(2),gn(" ",t.quantity," ",t.unit," ")}}function Aie(n,e){if(n&1&&(f(0,"div",36)(1,"h4",54),v(2,"Ingredientes a\xF1adidos:"),p(),f(3,"ul",55),Xt(4,Die,8,3,"li",56,ml),p()()),n&2){let t=R();x(4),Zt(t.currentDish.ingredients)}}function kie(n,e){if(n&1){let t=ye();f(0,"button",63),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),v(1," Cancelar "),p()}}function Mie(n,e){if(n&1){let t=ye();f(0,"button",64),J("click",function(){Y(t);let i=R();return X(i.createDish())}),xe(),f(1,"svg",34),ae(2,"path",65),p(),v(3," Crear producto "),p()}}function Rie(n,e){if(n&1){let t=ye();f(0,"button",66),J("click",function(){Y(t);let i=R();return X(i.updateDish())}),xe(),f(1,"svg",34),ae(2,"path",67),p(),v(3," Actualizar producto "),p()}}function Pie(n,e){n&1&&(f(0,"div",68),ae(1,"div",69),p())}function Fie(n,e){if(n&1&&(f(0,"div",70)(1,"div",14),xe(),f(2,"svg",71),ae(3,"path",72),p(),Pe(),f(4,"span",57),v(5),p()()()),n&2){let t=R();x(5),De(t.error)}}function Oie(n,e){if(n&1&&(f(0,"option",8),v(1),p()),n&2){let t=e.$implicit;ee("value",t.id),x(),ie(" ",t.name," ")}}function Nie(n,e){if(n&1&&(f(0,"div",110),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.description.length>50?t.description.substring(0,50)+"...":t.description," ")}}function Lie(n,e){if(n&1&&(f(0,"div",111),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.options.length," opciones ")}}function Vie(n,e){n&1&&(f(0,"span",115),v(1," Agotado "),p())}function Bie(n,e){n&1&&(f(0,"span",116),v(1," Bajo "),p())}function Uie(n,e){if(n&1&&(f(0,"div",14)(1,"span",112),v(2),p(),se(3,Vie,2,0,"span",113)(4,Bie,2,0,"span",114),p()),n&2){let t=R().$implicit;x(2),De(t.stockQuantity),x(),ee("ngIf",t.stockQuantity===0),x(),ee("ngIf",t.stockQuantity&&t.stockQuantity>0&&t.stockQuantity<5)}}function jie(n,e){n&1&&(f(0,"div",111),v(1," No rastreado "),p())}function $ie(n,e){n&1&&(f(0,"span",117),v(1," Destacado "),p())}function Hie(n,e){if(n&1){let t=ye();f(0,"tr",95)(1,"td",96)(2,"div",14)(3,"div")(4,"div",97),v(5),p(),se(6,Nie,2,1,"div",98),p()()(),f(7,"td",96)(8,"div",99),v(9),p()(),f(10,"td",96)(11,"div",99),v(12),p(),se(13,Lie,2,1,"div",100),p(),f(14,"td",96),se(15,Uie,5,3,"div",101)(16,jie,2,0,"div",100),p(),f(17,"td",96)(18,"div",102)(19,"span",103),v(20),p(),se(21,$ie,2,0,"span",104),p()(),f(22,"td",105)(23,"div",106)(24,"button",107),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.editDish(i))}),v(25," Editar "),p(),f(26,"button",108),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.toggleDishStatus(i))}),v(27),p(),f(28,"button",109),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.deleteDish(i))}),v(29," Eliminar "),p()()()()}if(n&2){let t=e.$implicit;tt("bg-gray-50",!t.active),x(5),De(t.name),x(),ee("ngIf",t.description),x(3),De(t.categoryName),x(3),ie("$",t.price.toFixed(2),""),x(),ee("ngIf",t.options&&t.options.length>0),x(2),ee("ngIf",t.isTracked),x(),ee("ngIf",!t.isTracked),x(3),tt("bg-green-100",t.active)("text-green-800",t.active)("bg-red-100",!t.active)("text-red-800",!t.active),x(),ie(" ",t.active?"Activo":"Inactivo"," "),x(),ee("ngIf",t.featured),x(5),tt("text-red-600",t.active)("hover:text-red-800",t.active)("text-green-600",!t.active)("hover:text-green-800",!t.active),x(),ie(" ",t.active?"Desactivar":"Activar"," ")}}function zie(n,e){if(n&1){let t=ye();f(0,"button",123),J("click",function(){Y(t);let i=R(3);return i.searchTerm="",X(i.selectedCategory="all")}),v(1," Limpiar filtros "),p()}}function Wie(n,e){if(n&1&&(f(0,"tr")(1,"td",118)(2,"div",119),xe(),f(3,"svg",120),ae(4,"path",121),p(),Pe(),f(5,"p"),v(6,"No hay productos disponibles con los filtros seleccionados"),p(),se(7,zie,2,0,"button",122),p()()()),n&2){let t=R(2);x(7),ee("ngIf",t.searchTerm||t.selectedCategory!=="all")}}function qie(n,e){if(n&1&&(f(0,"option",8),v(1),p()),n&2){let t=e.$implicit;ee("value",t),x(),ie("",t," ")}}function Gie(n,e){if(n&1){let t=ye();f(0,"button",142),J("click",function(){Y(t);let i=R().$implicit,s=R(3);return X(s.onPageChange(+i))}),v(1),p()}if(n&2){let t=R().$implicit,r=R(3);tt("bg-blue-50",t===r.currentPage)("text-blue-600",t===r.currentPage)("border-blue-500",t===r.currentPage)("bg-white",t!==r.currentPage)("text-gray-700",t!==r.currentPage)("border-gray-300",t!==r.currentPage),x(),ie(" ",t," ")}}function Kie(n,e){n&1&&(f(0,"span",143),v(1," ... "),p())}function Qie(n,e){if(n&1&&(m2(0),se(1,Gie,2,13,"button",140)(2,Kie,2,0,"span",141),g2()),n&2){let t=e.$implicit;x(),ee("ngIf",t!=="..."),x(),ee("ngIf",t==="...")}}function Yie(n,e){if(n&1){let t=ye();f(0,"div",124)(1,"div",125)(2,"button",126),J("click",function(){Y(t);let i=R(2);return X(i.onPageChange(i.currentPage-1))}),v(3," Anterior "),p(),f(4,"button",127),J("click",function(){Y(t);let i=R(2);return X(i.onPageChange(i.currentPage+1))}),v(5," Siguiente "),p()(),f(6,"div",128)(7,"div")(8,"p",129),v(9," Mostrando "),f(10,"span",57),v(11),p(),v(12," a "),f(13,"span",57),v(14),p(),v(15," de "),f(16,"span",57),v(17),p(),v(18," resultados "),p()(),f(19,"div")(20,"div",130)(21,"div",14)(22,"span",131),v(23,"Mostrar:"),p(),f(24,"select",132),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.itemsPerPage,i)||(s.itemsPerPage=i),X(i)}),J("change",function(){Y(t);let i=R(2);return X(i.onItemsPerPageChange(i.itemsPerPage))}),se(25,qie,2,2,"option",77),p()(),f(26,"nav",133)(27,"button",134),J("click",function(){Y(t);let i=R(2);return X(i.onPageChange(i.currentPage-1))}),f(28,"span",135),v(29,"Anterior"),p(),xe(),f(30,"svg",60),ae(31,"path",136),p()(),se(32,Qie,3,2,"ng-container",137),Pe(),f(33,"button",138),J("click",function(){Y(t);let i=R(2);return X(i.onPageChange(i.currentPage+1))}),f(34,"span",135),v(35,"Siguiente"),p(),xe(),f(36,"svg",60),ae(37,"path",139),p()()()()()()()}if(n&2){let t=R(2);x(2),tt("opacity-50",t.currentPage===1)("cursor-not-allowed",t.currentPage===1),ee("disabled",t.currentPage===1),x(2),tt("opacity-50",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount())("cursor-not-allowed",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount()),ee("disabled",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount()),x(7),De((t.currentPage-1)*t.itemsPerPage+1),x(3),De(t.Math.min(t.currentPage*t.itemsPerPage,t.getTotalFilteredCount())),x(3),De(t.getTotalFilteredCount()),x(7),$e("ngModel",t.itemsPerPage),x(),ee("ngForOf",t.pageSizeOptions),x(2),tt("opacity-50",t.currentPage===1)("cursor-not-allowed",t.currentPage===1),ee("disabled",t.currentPage===1),x(5),ee("ngForOf",t.getPaginationNumbers()),x(),tt("opacity-50",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount())("cursor-not-allowed",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount()),ee("disabled",t.currentPage*t.itemsPerPage>=t.getTotalFilteredCount())}}function Xie(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",73)(2,"div",74)(3,"div")(4,"label",4),v(5,"Filtrar por categor\xEDa"),p(),f(6,"select",75),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.selectedCategory,i)||(s.selectedCategory=i),X(i)}),J("change",function(){Y(t);let i=R();return X(i.onCategoryChange())}),f(7,"option",76),v(8,"Todas las categor\xEDas"),p(),se(9,Oie,2,2,"option",77),p()(),f(10,"div")(11,"label",4),v(12,"Buscar producto"),p(),f(13,"div",9)(14,"div",78),xe(),f(15,"svg",79),ae(16,"path",80),p()(),Pe(),f(17,"input",81),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.searchTerm,i)||(s.searchTerm=i),X(i)}),J("input",function(){Y(t);let i=R();return X(i.onSearchChange())}),p()()(),f(18,"div",82)(19,"label",83)(20,"input",84),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.showInactive,i)||(s.showInactive=i),X(i)}),J("change",function(){Y(t);let i=R();return X(i.onShowInactiveChange())}),p(),f(21,"span",85),v(22,"Mostrar inactivos"),p()()()()(),f(23,"div",86)(24,"div",87)(25,"table",88)(26,"thead",89)(27,"tr")(28,"th",90),v(29," producto "),p(),f(30,"th",90),v(31," Categor\xEDa "),p(),f(32,"th",90),v(33," Precio "),p(),f(34,"th",90),v(35," Stock "),p(),f(36,"th",90),v(37," Estado "),p(),f(38,"th",91),v(39," Acciones "),p()()(),f(40,"tbody",92),se(41,Hie,30,28,"tr",93)(42,Wie,8,1,"tr",52),p()(),se(43,Yie,38,26,"div",94),p()()()}if(n&2){let t=R();x(6),$e("ngModel",t.selectedCategory),x(3),ee("ngForOf",t.categories),x(8),$e("ngModel",t.searchTerm),x(3),$e("ngModel",t.showInactive),x(21),ee("ngForOf",t.getFilteredDishes()),x(),ee("ngIf",t.getFilteredDishes().length===0),x(),ee("ngIf",t.getTotalFilteredCount()>0)}}var tx=class n{firestore=le(rn);authService=le(jn);router=le(Ht);currentPage=1;itemsPerPage=10;pageSizeOptions=[5,10,25,50];dishes=[];categories=[];ingredients=[];loading=!0;error=null;isEditing=!1;currentDish=this.resetDishForm();newOption={name:"",price:0};newIngredient={id:"",name:"",quantity:0,unit:"unidad",isTracked:!1};selectedCategory="all";showInactive=!1;searchTerm="";constructor(){this.authService.isAdmin$.subscribe(e=>{e||this.router.navigate(["/login"])})}clearFilters(){this.selectedCategory="all",this.searchTerm="",this.currentPage=1}ngOnInit(){this.loadCategories().then(()=>{this.loadDishes()}),this.loadInventoryItems()}loadCategories(){return W(this,null,function*(){let e=it(this.firestore,"categories"),t=tn(e,yn("active","==",!0),Un("order","asc"));return new Promise(r=>{Vr(t,{idField:"id"}).subscribe({next:i=>{this.categories=i,r()},error:i=>{console.error("Error al cargar categor\xEDas:",i),this.error="Error al cargar categor\xEDas",r()}})})})}getFilteredDishes(){let e=this.dishes.filter(r=>!(!this.showInactive&&!r.active||this.selectedCategory!=="all"&&r.categoryId!==this.selectedCategory||this.searchTerm&&!r.name.toLowerCase().includes(this.searchTerm.toLowerCase()))),t=(this.currentPage-1)*this.itemsPerPage;return e.slice(t,t+this.itemsPerPage)}getTotalFilteredCount(){return this.dishes.filter(e=>!(!this.showInactive&&!e.active||this.selectedCategory!=="all"&&e.categoryId!==this.selectedCategory||this.searchTerm&&!e.name.toLowerCase().includes(this.searchTerm.toLowerCase()))).length}onPageChange(e){let t=Math.ceil(this.getTotalFilteredCount()/this.itemsPerPage);e<1?this.currentPage=1:e>t?this.currentPage=t>0?t:1:this.currentPage=e}onItemsPerPageChange(e){this.itemsPerPage=e,this.currentPage=1}loadDishes(){this.loading=!0,this.currentPage=1;let e=it(this.firestore,"menu"),t=tn(e,Un("name","asc"));Vr(t,{idField:"id"}).subscribe({next:r=>{this.dishes=r.map(i=>{let s=this.categories.find(o=>o.id===i.categoryId);return Te(fe({},i),{categoryName:s?.name||"Sin categor\xEDa",createdAt:i.createdAt?.toDate(),updatedAt:i.updatedAt?.toDate(),options:i.options||[],ingredients:i.ingredients||[],isTracked:i.isTracked||!1})}),this.loading=!1},error:r=>{console.error("Error al cargar productos:",r),this.error="Error al cargar productos. Intente nuevamente.",this.loading=!1}})}loadInventoryItems(){return W(this,null,function*(){let e=it(this.firestore,"inventory"),t=tn(e,yn("active","==",!0),Un("name","asc"));try{let r=yield Tr(t);this.ingredients=r.docs.map(i=>fe({id:i.id},i.data()))}catch(r){console.error("Error al cargar ingredientes:",r)}})}Math=Math;getPaginationNumbers(){let e=Math.ceil(this.getTotalFilteredCount()/this.itemsPerPage);if(e<=7)return Array.from({length:e},(t,r)=>r+1);{let t=[];return t.push(1),this.currentPage<=3?t.push(2,3,4,"...",e):this.currentPage>=e-2?t.push("...",e-3,e-2,e-1,e):t.push("...",this.currentPage-1,this.currentPage,this.currentPage+1,"...",e),t}}onCategoryChange(){this.currentPage=1}onSearchChange(){this.currentPage=1}onShowInactiveChange(){this.currentPage=1}addOption(){if(!this.newOption.name){Ri.default.fire("Error","El nombre de la opci\xF3n es obligatorio","error");return}this.currentDish.options||(this.currentDish.options=[]),this.currentDish.options.push(fe({},this.newOption)),this.newOption={name:"",price:0}}removeOption(e){this.currentDish.options&&this.currentDish.options.splice(e,1)}addIngredient(){if(!this.newIngredient.id||this.newIngredient.quantity<=0){Ri.default.fire("Error","Debe seleccionar un ingrediente y una cantidad v\xE1lida","error");return}this.currentDish.ingredients||(this.currentDish.ingredients=[]);let e=this.ingredients.find(t=>t.id===this.newIngredient.id);if(e){this.newIngredient.name=e.name,this.newIngredient.unit=e.unit||"unidad",this.newIngredient.isTracked=!0;let t=this.currentDish.ingredients.findIndex(r=>r.id===this.newIngredient.id);t>=0?this.currentDish.ingredients[t].quantity+=this.newIngredient.quantity:this.currentDish.ingredients.push(fe({},this.newIngredient)),this.newIngredient={id:"",name:"",quantity:0,unit:"unidad",isTracked:!1}}}removeIngredient(e){this.currentDish.ingredients&&this.currentDish.ingredients.splice(e,1)}createDish(){if(!this.validateForm())return;let e=this.currentDish.options?this.currentDish.options.map(i=>({name:i.name,price:i.price||0})):[],t=Te(fe({},this.currentDish),{options:e,createdAt:new Date,updatedAt:new Date});console.log("Saving dish with options:",t.options),t.isTracked||delete t.stockQuantity;let r=it(this.firestore,"menu");yr(r,t).then(i=>{console.log("Dish saved with ID:",i.id),Ri.default.fire("\xA1\xC9xito!","Plato creado correctamente","success"),this.resetForm()}).catch(i=>{console.error("Error al crear plato:",i),Ri.default.fire("Error","No se pudo crear el plato","error")})}editDish(e){this.isEditing=!0,this.currentDish=fe({},e),this.currentDish.options||(this.currentDish.options=[]),this.currentDish.ingredients||(this.currentDish.ingredients=[]),setTimeout(()=>{document.getElementById("dishForm")?.scrollIntoView({behavior:"smooth"})},100)}updateDish(){if(!this.validateForm()||!this.currentDish.id)return;let e=this.currentDish.options?this.currentDish.options.map(i=>({name:i.name,price:i.price||0})):[],t=Ye(this.firestore,`menu/${this.currentDish.id}`),r=Te(fe({},this.currentDish),{options:e,updatedAt:new Date});console.log("Updating dish with options:",r.options),r.isTracked||delete r.stockQuantity,St(t,r).then(()=>{Ri.default.fire("\xA1\xC9xito!","Plato actualizado correctamente","success"),this.resetForm()}).catch(i=>{console.error("Error al actualizar plato:",i),Ri.default.fire("Error","No se pudo actualizar el plato","error")})}deleteDish(e){Ri.default.fire({title:"\xBFEst\xE1s seguro?",text:`\xBFQuieres eliminar el plato "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed&&e.id){let r=Ye(this.firestore,`menu/${e.id}`);_a(r).then(()=>{Ri.default.fire("\xA1Eliminado!","El plato ha sido eliminado","success")}).catch(i=>{console.error("Error al eliminar plato:",i),Ri.default.fire("Error","No se pudo eliminar el plato","error")})}})}toggleDishStatus(e){if(!e.id)return;let t=Ye(this.firestore,`menu/${e.id}`),r=!e.active;St(t,{active:r,updatedAt:new Date}).then(()=>{let i=r?"activado":"desactivado";Ri.default.fire("\xA1Actualizado!",`El plato ha sido ${i}`,"success")}).catch(i=>{console.error("Error al cambiar estado del plato:",i),Ri.default.fire("Error","No se pudo cambiar el estado del plato","error")})}resetForm(){this.isEditing=!1,this.currentDish=this.resetDishForm(),this.newOption={name:"",price:0},this.newIngredient={id:"",name:"",quantity:0,unit:"unidad",isTracked:!1}}validateForm(){return!this.currentDish.name||this.currentDish.name.trim()===""?(Ri.default.fire("Error","El nombre del plato es obligatorio","error"),!1):!this.currentDish.price||this.currentDish.price<=0?(Ri.default.fire("Error","El precio debe ser mayor que 0","error"),!1):this.currentDish.categoryId?this.currentDish.isTracked&&(!this.currentDish.stockQuantity||this.currentDish.stockQuantity<0)?(Ri.default.fire("Error","Para productos rastreados, debe especificar la cantidad en stock","error"),!1):!0:(Ri.default.fire("Error","Debe seleccionar una categor\xEDa","error"),!1)}resetDishForm(){return{name:"",description:"",price:0,categoryId:"",options:[],ingredients:[],isTracked:!1,active:!0,featured:!1}}getIngredientName(e){let t=this.ingredients.find(r=>r.id===e);return t?t.name:"Desconocido"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-dish-management"]],standalone:!0,features:[Jt],decls:125,vars:27,consts:[[1,"container","mx-auto","px-4","py-6"],["id","dishForm",1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-6","mb-8"],[1,"text-xl","font-semibold","mb-6","pb-2","border-b","border-gray-100"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6","mb-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],["type","text","placeholder","Ej: Chuleta de Cerdo, Ensalada C\xE9sar...",1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],[3,"value"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],[1,"text-gray-500"],["type","number","min","0","step","0.01",1,"w-full","pl-8","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"flex","items-center","space-x-8"],[1,"flex","items-center"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-11","h-6","bg-gray-200","rounded-full","peer","peer-focus:ring-2","peer-focus:ring-blue-300","peer-checked:after:translate-x-full","after:content-['']","after:absolute","after:top-0.5","after:left-0.5","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-500"],[1,"ml-3","text-sm","font-medium","text-gray-700"],[1,"relative","w-11","h-6","bg-gray-200","rounded-full","peer","peer-focus:ring-2","peer-focus:ring-yellow-300","peer-checked:after:translate-x-full","after:content-['']","after:absolute","after:top-0.5","after:left-0.5","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-yellow-400"],[1,"md:col-span-2"],["rows","3","placeholder","Descripci\xF3n detallada del producto...",1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"md:col-span-2","pt-4","border-t","border-gray-100"],[1,"font-medium","text-gray-800","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"relative","w-11","h-6","bg-gray-200","rounded-full","peer","peer-focus:ring-2","peer-focus:ring-green-300","peer-checked:after:translate-x-full","after:content-['']","after:absolute","after:top-0.5","after:left-0.5","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-green-500"],[1,"text-xs","text-gray-500","mt-2"],[1,"text-sm","text-gray-500","mb-4"],[1,"flex","flex-wrap","md:flex-nowrap","gap-3","mb-5"],[1,"w-full","md:w-1/2"],["type","text","placeholder","Nombre de la opci\xF3n",1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-full","md:w-1/4"],["type","number","min","0","step","0.01","placeholder","Precio adicional",1,"w-full","pl-8","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"w-full","bg-blue-500","hover:bg-blue-600","text-white","py-2","px-4","rounded-lg","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"bg-gray-50","p-4","rounded-lg","border","border-gray-100","mb-3"],[1,"w-full","md:w-2/5"],[1,"w-full","md:w-1/5"],["type","number","min","0.01","step","0.01","placeholder","Cantidad",1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],["value","unidad"],["value","gramos"],["value","kg"],["value","ml"],["value","litro"],["value","porci\xF3n"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-100"],["class","px-5 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",3,"click",4,"ngIf"],["class","px-5 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center gap-2",3,"click",4,"ngIf"],["class","px-5 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center gap-2",3,"click",4,"ngIf"],["class","flex justify-center py-8",4,"ngIf"],["class","bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg mb-6","role","alert",4,"ngIf"],[4,"ngIf"],["type","number","min","0",1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"font-medium","text-gray-700","mb-3"],[1,"space-y-2"],[1,"flex","justify-between","items-center","p-3","bg-white","rounded-lg","border","border-gray-100"],[1,"font-medium"],[1,"ml-2","text-blue-500","text-sm"],[1,"text-gray-400","hover:text-red-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"ml-2","text-gray-500"],[1,"px-5","py-2","bg-gray-100","text-gray-700","rounded-lg","hover:bg-gray-200","transition-colors",3,"click"],[1,"px-5","py-2","bg-green-500","text-white","rounded-lg","hover:bg-green-600","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"px-5","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"],[1,"flex","justify-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],["role","alert",1,"bg-red-50","border","border-red-200","text-red-700","px-6","py-4","rounded-lg","mb-6"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-5","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-5"],[1,"w-full","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","appearance-none",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Nombre del producto...",1,"w-full","pl-10","px-4","py-2","bg-white","border","border-gray-200","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent",3,"ngModelChange","input","ngModel"],[1,"flex","items-end"],[1,"inline-flex","items-center"],["type","checkbox",1,"w-4","h-4","rounded","text-blue-600","focus:ring-blue-500","border-gray-300",3,"ngModelChange","change","ngModel"],[1,"ml-2","text-sm","text-gray-700"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","overflow-hidden"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-100"],["class","hover:bg-gray-50 transition-colors",3,"bg-gray-50",4,"ngFor","ngForOf"],["class","mt-4 px-6 py-3 flex items-center justify-between border-t border-gray-200 bg-white",4,"ngIf"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-6","py-4","whitespace-nowrap"],[1,"font-medium","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"text-sm","text-gray-900"],["class","text-xs text-gray-500",4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"flex","items-center","space-x-2"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-medium","rounded-full"],["class","px-2 py-1 inline-flex text-xs leading-5 font-medium rounded-full bg-yellow-100 text-yellow-800",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm"],[1,"flex","justify-end","space-x-3"],[1,"text-blue-600","hover:text-blue-800","transition-colors",3,"click"],[3,"click"],[1,"text-red-600","hover:text-red-800","transition-colors",3,"click"],[1,"text-sm","text-gray-500"],[1,"text-xs","text-gray-500"],[1,"text-sm","font-medium"],["class","ml-2 px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-800",4,"ngIf"],["class","ml-2 px-2 py-0.5 rounded-full text-xs bg-yellow-100 text-yellow-800",4,"ngIf"],[1,"ml-2","px-2","py-0.5","rounded-full","text-xs","bg-red-100","text-red-800"],[1,"ml-2","px-2","py-0.5","rounded-full","text-xs","bg-yellow-100","text-yellow-800"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-medium","rounded-full","bg-yellow-100","text-yellow-800"],["colspan","6",1,"px-6","py-10","text-center","text-gray-500"],[1,"flex","flex-col","items-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-10","w-10","text-gray-300","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],["class","mt-2 text-blue-500 hover:text-blue-700 text-sm",3,"click",4,"ngIf"],[1,"mt-2","text-blue-500","hover:text-blue-700","text-sm",3,"click"],[1,"mt-4","px-6","py-3","flex","items-center","justify-between","border-t","border-gray-200","bg-white"],[1,"flex-1","flex","justify-between","sm:hidden"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click","disabled"],[1,"ml-3","relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","text-sm","font-medium","rounded-md","text-gray-700","bg-white","hover:bg-gray-50",3,"click","disabled"],[1,"hidden","sm:flex-1","sm:flex","sm:items-center","sm:justify-between"],[1,"text-sm","text-gray-700"],[1,"flex","items-center","space-x-4"],[1,"text-sm","text-gray-700","mr-2"],[1,"border","border-gray-300","text-sm","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","change","ngModel"],["aria-label","Pagination",1,"relative","z-0","inline-flex","rounded-md","shadow-sm","-space-x-px"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-l-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],[1,"sr-only"],["fill-rule","evenodd","d","M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule","evenodd"],[4,"ngFor","ngForOf"],[1,"relative","inline-flex","items-center","px-2","py-2","rounded-r-md","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-500","hover:bg-gray-50",3,"click","disabled"],["fill-rule","evenodd","d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule","evenodd"],["class","relative inline-flex items-center px-4 py-2 border text-sm font-medium",3,"bg-blue-50","text-blue-600","border-blue-500","bg-white","text-gray-700","border-gray-300","click",4,"ngIf"],["class","relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",4,"ngIf"],[1,"relative","inline-flex","items-center","px-4","py-2","border","text-sm","font-medium",3,"click"],[1,"relative","inline-flex","items-center","px-4","py-2","border","border-gray-300","bg-white","text-sm","font-medium","text-gray-700"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h2",2),v(3),p(),f(4,"div",3)(5,"div")(6,"label",4),v(7,"Nombre del producto *"),p(),f(8,"input",5),He("ngModelChange",function(s){return ze(r.currentDish.name,s)||(r.currentDish.name=s),s}),p()(),f(9,"div")(10,"label",4),v(11,"Categor\xEDa *"),p(),f(12,"select",6),He("ngModelChange",function(s){return ze(r.currentDish.categoryId,s)||(r.currentDish.categoryId=s),s}),f(13,"option",7),v(14,"Seleccionar categor\xEDa"),p(),Xt(15,bie,2,2,"option",8,FL),p()(),f(17,"div")(18,"label",4),v(19,"Precio *"),p(),f(20,"div",9)(21,"div",10)(22,"span",11),v(23,"$"),p()(),f(24,"input",12),He("ngModelChange",function(s){return ze(r.currentDish.price,s)||(r.currentDish.price=s),s}),p()()(),f(25,"div",13)(26,"div")(27,"label",4),v(28,"Estado"),p(),f(29,"div",14)(30,"label",15)(31,"input",16),He("ngModelChange",function(s){return ze(r.currentDish.active,s)||(r.currentDish.active=s),s}),p(),ae(32,"div",17),f(33,"span",18),v(34),p()()()(),f(35,"div")(36,"label",4),v(37,"Destacado"),p(),f(38,"div",14)(39,"label",15)(40,"input",16),He("ngModelChange",function(s){return ze(r.currentDish.featured,s)||(r.currentDish.featured=s),s}),p(),ae(41,"div",19),f(42,"span",18),v(43),p()()()()(),f(44,"div",20)(45,"label",4),v(46,"Descripci\xF3n"),p(),f(47,"textarea",21),He("ngModelChange",function(s){return ze(r.currentDish.description,s)||(r.currentDish.description=s),s}),p()(),f(48,"div",22)(49,"h3",23),v(50,"Control de Inventario"),p(),f(51,"div",24)(52,"div")(53,"label",4),v(54,"Rastrear como unidad completa"),p(),f(55,"div",14)(56,"label",15)(57,"input",16),He("ngModelChange",function(s){return ze(r.currentDish.isTracked,s)||(r.currentDish.isTracked=s),s}),p(),ae(58,"div",25),f(59,"span",18),v(60),p()()(),f(61,"p",26),v(62," Activa esta opci\xF3n si el producto se controla como unidades completas (ej: chuletones) "),p()(),se(63,Eie,4,1,"div"),p()(),f(64,"div",22)(65,"h3",23),v(66,"Opciones del producto"),p(),f(67,"p",27),v(68," A\xF1ade variantes que el cliente puede seleccionar (ej: T\xE9rmino de cocci\xF3n, Tipo de salsa, etc) "),p(),f(69,"div",28)(70,"div",29)(71,"input",30),He("ngModelChange",function(s){return ze(r.newOption.name,s)||(r.newOption.name=s),s}),p()(),f(72,"div",31)(73,"div",9)(74,"div",10)(75,"span",11),v(76,"$"),p()(),f(77,"input",32),He("ngModelChange",function(s){return ze(r.newOption.price,s)||(r.newOption.price=s),s}),p()()(),f(78,"div",31)(79,"button",33),J("click",function(){return r.addOption()}),xe(),f(80,"svg",34),ae(81,"path",35),p(),v(82," A\xF1adir Opci\xF3n "),p()()(),se(83,Iie,6,0,"div",36),p(),Pe(),f(84,"div",22)(85,"h3",23),v(86,"Ingredientes del producto"),p(),f(87,"p",27),v(88," Selecciona los ingredientes que se utilizan para este producto (se reducir\xE1n del inventario) "),p(),f(89,"div",28)(90,"div",37)(91,"select",6),He("ngModelChange",function(s){return ze(r.newIngredient.id,s)||(r.newIngredient.id=s),s}),f(92,"option",7),v(93,"Seleccionar ingrediente"),p(),Xt(94,Tie,2,3,"option",8,FL),p()(),f(96,"div",38)(97,"input",39),He("ngModelChange",function(s){return ze(r.newIngredient.quantity,s)||(r.newIngredient.quantity=s),s}),p()(),f(98,"div",38)(99,"select",6),He("ngModelChange",function(s){return ze(r.newIngredient.unit,s)||(r.newIngredient.unit=s),s}),f(100,"option",40),v(101,"Unidad"),p(),f(102,"option",41),v(103,"Gramos"),p(),f(104,"option",42),v(105,"Kilogramos"),p(),f(106,"option",43),v(107,"Mililitros"),p(),f(108,"option",44),v(109,"Litros"),p(),f(110,"option",45),v(111,"Porci\xF3n"),p()()(),f(112,"div",38)(113,"button",33),J("click",function(){return r.addIngredient()}),xe(),f(114,"svg",34),ae(115,"path",35),p(),v(116," A\xF1adir "),p()()(),se(117,Aie,6,0,"div",36),p()(),Pe(),f(118,"div",46),se(119,kie,2,0,"button",47)(120,Mie,4,0,"button",48)(121,Rie,4,0,"button",49),p()(),se(122,Pie,2,0,"div",50)(123,Fie,6,1,"div",51)(124,Xie,44,7,"div",52),p()),t&2&&(x(3),ie(" ",r.isEditing?"Editar Producto":"Crear Nuevo Producto"," "),x(5),$e("ngModel",r.currentDish.name),x(4),$e("ngModel",r.currentDish.categoryId),x(),ee("value",""),x(2),Zt(r.categories),x(9),$e("ngModel",r.currentDish.price),x(7),$e("ngModel",r.currentDish.active),x(3),De(r.currentDish.active?"Activo":"Inactivo"),x(6),$e("ngModel",r.currentDish.featured),x(3),De(r.currentDish.featured?"Destacado":"Normal"),x(4),$e("ngModel",r.currentDish.description),x(10),$e("ngModel",r.currentDish.isTracked),x(3),De(r.currentDish.isTracked?"S\xED":"No"),x(3),Se(r.currentDish.isTracked?63:-1),x(8),$e("ngModel",r.newOption.name),x(6),$e("ngModel",r.newOption.price),x(6),Se(r.currentDish.options&&r.currentDish.options.length>0?83:-1),x(8),$e("ngModel",r.newIngredient.id),x(),ee("value",""),x(2),Zt(r.ingredients),x(3),$e("ngModel",r.newIngredient.quantity),x(2),$e("ngModel",r.newIngredient.unit),x(18),Se(r.currentDish.ingredients&&r.currentDish.ingredients.length>0?117:-1),x(2),ee("ngIf",r.isEditing),x(),ee("ngIf",!r.isEditing),x(),ee("ngIf",r.isEditing),x(),ee("ngIf",r.loading),x(),ee("ngIf",r.error),x(),ee("ngIf",!r.loading&&!r.error))},dependencies:[nn,qs,sa,Ur,Qs,Ys,xr,Do,bc,ss,Br,Ao,pi]})};var Pt=Bs(Rs());var nx=class n{firestore=le(rn);balanceDocId="global_balance";constructor(){}getBalance(){let e=Ye(this.firestore,`balance/${this.balanceDocId}`);return Ot(ln(e)).pipe(je(t=>{if(t.exists()){let r=t.data();return Te(fe({},r),{lastUpdated:r.lastUpdated instanceof Date?r.lastUpdated:r.lastUpdated.toDate()})}else return{id:this.balanceDocId,currentBalance:0,initialBalance:0,lastUpdated:new Date,updatedBy:"Sistema"}}),pr(t=>(console.error("Error al obtener el saldo:",t),Ke({id:this.balanceDocId,currentBalance:0,initialBalance:0,lastUpdated:new Date,updatedBy:"Sistema"}))))}setInitialBalance(e,t){return W(this,null,function*(){let r=Ye(this.firestore,`balance/${this.balanceDocId}`),i=yield ln(r);if(i.exists()){let s=i.data(),o=e-s.initialBalance;yield St(r,{initialBalance:e,currentBalance:s.currentBalance+o,lastUpdated:new Date,updatedBy:t}),yield this.registerTransaction({previousBalance:s.currentBalance,newBalance:s.currentBalance+o,amount:o,type:"ajuste",description:"Ajuste de saldo inicial",createdAt:new Date,createdBy:t})}else yield ya(r,{id:this.balanceDocId,currentBalance:e,initialBalance:e,lastUpdated:new Date,updatedBy:t}),yield this.registerTransaction({previousBalance:0,newBalance:e,amount:e,type:"entrada",description:"Configuraci\xF3n inicial de saldo",createdAt:new Date,createdBy:t})})}registerTransaction(e){return W(this,null,function*(){let t=it(this.firestore,"balance_transactions");yield yr(t,e)})}updateBalance(e,t,r,i,s,o){return W(this,null,function*(){try{let a=Ye(this.firestore,`balance/${this.balanceDocId}`),c=yield ln(a);if(!c.exists())throw new Error("No existe un saldo configurado");let l=c.data(),u;if(t==="entrada")u=l.currentBalance+e;else if(u=l.currentBalance-e,u<0)return!1;return yield St(a,{currentBalance:u,lastUpdated:new Date,updatedBy:i}),yield this.registerTransaction({previousBalance:l.currentBalance,newBalance:u,amount:t==="entrada"?e:-e,type:t,description:r,relatedItemId:s,relatedItemName:o,createdAt:new Date,createdBy:i}),!0}catch(a){return console.error("Error al actualizar el saldo:",a),!1}})}getTransactions(e=20){let t=it(this.firestore,"balance_transactions"),r=tn(t,Un("createdAt","desc"));return Vr(r,{idField:"id"}).pipe(je(i=>i.slice(0,e).map(s=>Te(fe({},s),{createdAt:s.createdAt instanceof Date?s.createdAt:s.createdAt.toDate()}))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Xe({token:n,factory:n.\u0275fac,providedIn:"root"})};var Jie=(n,e,t)=>({"text-green-600":n,"text-red-600":e,"text-gray-600":t}),ese=(n,e)=>({"text-green-600":n,"text-red-600":e});function tse(n,e){if(n&1){let t=ye();f(0,"button",43),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),v(1," Cancelar "),p()}}function nse(n,e){if(n&1){let t=ye();f(0,"button",43),J("click",function(){Y(t);let i=R();return X(i.showMovementForm=!1)}),v(1," Cancelar "),p()}}function rse(n,e){if(n&1){let t=ye();f(0,"button",44),J("click",function(){Y(t);let i=R();return X(i.openMovementForm())}),v(1," + Movimiento "),p()}}function ise(n,e){if(n&1){let t=ye();f(0,"button",45),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),v(1," + Art\xEDculo "),p()}}function sse(n,e){if(n&1){let t=ye();f(0,"button",44),J("click",function(){Y(t);let i=R();return X(i.updateItem())}),v(1," Actualizar "),p()}}function ose(n,e){if(n&1){let t=ye();f(0,"button",44),J("click",function(){Y(t);let i=R();return X(i.handleMovement())}),v(1," Guardar "),p()}}function ase(n,e){if(n&1){let t=ye();f(0,"button",45),J("click",function(){Y(t);let i=R();return X(i.createItem())}),v(1," Crear Art\xEDculo "),p()}}function cse(n,e){if(n&1&&(f(0,"option",51),v(1),p()),n&2){let t=e.$implicit;ee("value",t),x(),ie(" ",t||"Sin categor\xEDa"," ")}}function lse(n,e){if(n&1){let t=ye();f(0,"div",46)(1,"div",47)(2,"div")(3,"label",48),v(4,"Categor\xEDa"),p(),f(5,"select",49),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.selectedCategory,i)||(s.selectedCategory=i),X(i)}),f(6,"option",50),v(7,"Todas las categor\xEDas"),p(),Xt(8,cse,2,2,"option",51,vF),p()(),f(10,"div",52)(11,"div",53)(12,"label",54)(13,"input",55),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.showInactive,i)||(s.showInactive=i),X(i)}),p(),f(14,"span",56),v(15,"Mostrar inactivos"),p()(),ae(16,"br"),f(17,"label",54)(18,"input",55),He("ngModelChange",function(i){Y(t);let s=R();return ze(s.showLowStock,i)||(s.showLowStock=i),X(i)}),p(),f(19,"span",56),v(20,"Solo stock bajo"),p()()()()()()}if(n&2){let t=R();x(5),$e("ngModel",t.selectedCategory),x(3),Zt(t.uniqueCategories),x(5),$e("ngModel",t.showInactive),x(5),$e("ngModel",t.showLowStock)}}function use(n,e){n&1&&(f(0,"div",57),ae(1,"div",58),p())}function dse(n,e){if(n&1&&(f(0,"div",59)(1,"span",60),v(2),p()()),n&2){let t=R();x(2),De(t.error)}}function fse(n,e){if(n&1&&(f(0,"option",51),v(1),p()),n&2){let t=e.$implicit;ee("value",t.id),x(),_2(" ",t.name," (",t.quantity," ",t.unit,") ")}}function hse(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",66)(2,"div")(3,"label",48),v(4,"Art\xEDculo *"),p(),f(5,"select",67),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newMovement.itemId,i)||(s.newMovement.itemId=i),X(i)}),f(6,"option",68),v(7,"Seleccionar art\xEDculo"),p(),se(8,fse,2,4,"option",69),p()(),f(9,"div",70)(10,"div")(11,"label",48),v(12,"Tipo *"),p(),f(13,"select",67),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newMovement.type,i)||(s.newMovement.type=i),X(i)}),f(14,"option",71),v(15,"Entrada (Agregar)"),p(),f(16,"option",72),v(17,"Salida (Restar)"),p(),f(18,"option",73),v(19,"Ajuste (Fijar valor)"),p()()(),f(20,"div")(21,"label",48),v(22,"Cantidad *"),p(),f(23,"input",74),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newMovement.quantity,i)||(s.newMovement.quantity=i),X(i)}),p()()(),f(24,"div")(25,"label",48),v(26,"Motivo"),p(),f(27,"textarea",75),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newMovement.reason,i)||(s.newMovement.reason=i),X(i)}),p()()(),f(28,"div",76)(29,"button",77),J("click",function(){Y(t);let i=R(2);return X(i.showMovementForm=!1)}),v(30," Cancelar "),p(),f(31,"button",78),J("click",function(){Y(t);let i=R(2);return X(i.handleMovement())}),v(32," Registrar Movimiento "),p()()()}if(n&2){let t=R(2);x(5),$e("ngModel",t.newMovement.itemId),x(),ee("value",""),x(2),ee("ngForOf",t.inventoryItems),x(5),$e("ngModel",t.newMovement.type),x(10),$e("ngModel",t.newMovement.quantity),x(4),$e("ngModel",t.newMovement.reason)}}function pse(n,e){if(n&1){let t=ye();f(0,"button",77),J("click",function(){Y(t);let i=R(3);return X(i.resetForm())}),v(1," Cancelar "),p()}}function mse(n,e){if(n&1){let t=ye();f(0,"button",124),J("click",function(){Y(t);let i=R(3);return X(i.createItem())}),v(1," Crear Art\xEDculo "),p()}}function gse(n,e){if(n&1){let t=ye();f(0,"button",78),J("click",function(){Y(t);let i=R(3);return X(i.updateItem())}),v(1," Actualizar Art\xEDculo "),p()}}function vse(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",66)(2,"div")(3,"label",48),v(4,"Nombre del Art\xEDculo *"),p(),f(5,"input",79),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.name,i)||(s.currentItem.name=i),X(i)}),p()(),f(6,"div",70)(7,"div")(8,"label",48),v(9,"Categor\xEDa"),p(),f(10,"input",80),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.category,i)||(s.currentItem.category=i),X(i)}),p()(),f(11,"div")(12,"label",48),v(13,"Estado"),p(),f(14,"div",81)(15,"label",82)(16,"input",83),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.active,i)||(s.currentItem.active=i),X(i)}),p(),ae(17,"div",84),f(18,"span",85),v(19),p()()()()(),f(20,"div",70)(21,"div")(22,"label",48),v(23,"Cantidad *"),p(),f(24,"input",86),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.quantity,i)||(s.currentItem.quantity=i),X(i)}),p()(),f(25,"div")(26,"label",48),v(27,"Unidad *"),p(),f(28,"select",67),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.unit,i)||(s.currentItem.unit=i),X(i)}),f(29,"option",87),v(30,"Unidad"),p(),f(31,"option",88),v(32,"Gramos"),p(),f(33,"option",89),v(34,"Kilogramos"),p(),f(35,"option",90),v(36,"Mililitros"),p(),f(37,"option",91),v(38,"Litros"),p(),f(39,"option",92),v(40,"Porci\xF3n"),p(),f(41,"option",93),v(42,"Libra"),p(),f(43,"option",94),v(44,"Quintal"),p(),f(45,"option",95),v(46,"Arroba"),p(),f(47,"option",96),v(48,"Onza"),p(),f(49,"option",97),v(50,"Gal\xF3n"),p(),f(51,"option",98),v(52,"Caja"),p(),f(53,"option",99),v(54,"Saco"),p(),f(55,"option",100),v(56,"Atado"),p(),f(57,"option",101),v(58,"Racimo"),p(),f(59,"option",102),v(60,"Funda"),p(),f(61,"option",103),v(62,"Bulto"),p(),f(63,"option",104),v(64,"Canasta"),p(),f(65,"option",105),v(66,"Botella"),p(),f(67,"option",106),v(68,"Cubeta"),p(),f(69,"option",107),v(70,"Lata"),p(),f(71,"option",108),v(72,"Frasco"),p(),f(73,"option",109),v(74,"Gaveta"),p(),f(75,"option",110),v(76,"Paquete"),p(),f(77,"option",111),v(78,"Metro"),p(),f(79,"option",112),v(80,"Cent\xEDmetro"),p(),f(81,"option",113),v(82,"Docena"),p(),f(83,"option",114),v(84,"Par"),p()()()(),f(85,"div",70)(86,"div")(87,"label",48),v(88,"Stock M\xEDnimo"),p(),f(89,"input",86),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.minStock,i)||(s.currentItem.minStock=i),X(i)}),p(),f(90,"p",115),v(91," Se alertar\xE1 cuando el stock est\xE9 por debajo de este valor "),p()(),f(92,"div")(93,"label",48),v(94,"Costo Unitario"),p(),f(95,"div",9)(96,"div",10)(97,"span",116),v(98,"$"),p()(),f(99,"input",117),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.cost,i)||(s.currentItem.cost=i),X(i)}),p()()()(),f(100,"div",70)(101,"div")(102,"label",48),v(103,"Ubicaci\xF3n"),p(),f(104,"input",118),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.location,i)||(s.currentItem.location=i),X(i)}),p()(),f(105,"div")(106,"label",48),v(107,"Proveedor"),p(),f(108,"input",119),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.supplier,i)||(s.currentItem.supplier=i),X(i)}),p()()(),f(109,"div")(110,"label",48),v(111,"Descripci\xF3n"),p(),f(112,"textarea",120),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.currentItem.description,i)||(s.currentItem.description=i),X(i)}),p()()(),f(113,"div",76),se(114,pse,2,0,"button",121)(115,mse,2,0,"button",122)(116,gse,2,0,"button",123),p()()}if(n&2){let t=R(2);x(5),$e("ngModel",t.currentItem.name),x(5),$e("ngModel",t.currentItem.category),x(6),$e("ngModel",t.currentItem.active),x(3),De(t.currentItem.active?"Activo":"Inactivo"),x(5),$e("ngModel",t.currentItem.quantity),x(4),$e("ngModel",t.currentItem.unit),x(61),$e("ngModel",t.currentItem.minStock),x(10),$e("ngModel",t.currentItem.cost),x(5),$e("ngModel",t.currentItem.location),x(4),$e("ngModel",t.currentItem.supplier),x(4),$e("ngModel",t.currentItem.description),x(2),ee("ngIf",t.isEditing),x(),ee("ngIf",!t.isEditing||t.activeTab==="newItem"),x(),ee("ngIf",t.isEditing)}}function _se(n,e){if(n&1){let t=ye();f(0,"div",61)(1,"h2",62)(2,"button",63),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),xe(),f(3,"svg",64),ae(4,"path",65),p()(),v(5),p(),se(6,hse,33,6,"div",23)(7,vse,117,14,"div",23),p()}if(n&2){let t=R();x(5),ie(" ",t.isEditing?"Editar Art\xEDculo":t.showMovementForm?"Registrar Movimiento":"Crear Art\xEDculo"," "),x(),ee("ngIf",t.showMovementForm),x(),ee("ngIf",!t.showMovementForm&&(t.isEditing||t.activeTab==="newItem"))}}function yse(n,e){n&1&&(f(0,"div",127),ae(1,"div",128),p())}function xse(n,e){if(n&1&&(f(0,"span",158),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Art\xEDculo: ",t.relatedItemName," ")}}function wse(n,e){if(n&1&&(f(0,"tr")(1,"td",153),v(2),p(),f(3,"td",154),v(4),se(5,xse,2,1,"span",155),p(),f(6,"td",156),v(7),p(),f(8,"td",157),v(9),p()()),n&2){let t=e.$implicit,r=R(3);x(2),De(r.formatDate(t.createdAt)),x(2),ie(" ",t.description," "),x(),ee("ngIf",t.relatedItemName),x(),ee("ngClass",vn(7,ese,t.amount>0,t.amount<0)),x(),gn(" ",t.amount>0?"+":"","$",t.amount.toFixed(2)," "),x(2),ie("$",t.newBalance.toFixed(2),"")}}function bse(n,e){n&1&&(f(0,"tr")(1,"td",159),v(2," No hay transacciones registradas "),p()())}function Ese(n,e){if(n&1){let t=ye();f(0,"div",160)(1,"button",35),J("click",function(){Y(t);let i=R(3);return X(i.loadMoreTransactions())}),v(2," Cargar m\xE1s transacciones "),p()()}}function Cse(n,e){if(n&1){let t=ye();f(0,"div",129)(1,"div",130)(2,"div",131)(3,"div")(4,"h3",132),v(5,"Saldo Inicial"),p(),f(6,"p",133),v(7),p()(),f(8,"div")(9,"h3",132),v(10,"Saldo Actual"),p(),f(11,"p",134),v(12),p()()(),f(13,"div",135),v(14),p()(),f(15,"div")(16,"h3",136),v(17,"Configurar Saldo"),p(),f(18,"div",137)(19,"div")(20,"label",48),v(21,"Saldo Inicial"),p(),f(22,"div",9)(23,"div",10)(24,"span",116),v(25,"$"),p()(),f(26,"input",117),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newInitialBalance,i)||(s.newInitialBalance=i),X(i)}),p()()(),f(27,"div",138)(28,"button",78),J("click",function(){Y(t);let i=R(2);return X(i.updateInitialBalance())}),v(29," Actualizar Saldo Inicial "),p()()(),f(30,"div",139)(31,"div")(32,"label",48),v(33,"Tipo"),p(),f(34,"select",67),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newBalanceTransaction.type,i)||(s.newBalanceTransaction.type=i),X(i)}),f(35,"option",71),v(36,"Entrada (Agregar)"),p(),f(37,"option",72),v(38,"Salida (Restar)"),p()()(),f(39,"div")(40,"label",48),v(41,"Monto"),p(),f(42,"div",9)(43,"div",10)(44,"span",116),v(45,"$"),p()(),f(46,"input",140),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newBalanceTransaction.amount,i)||(s.newBalanceTransaction.amount=i),X(i)}),p()()(),f(47,"div",138)(48,"button",141),J("click",function(){Y(t);let i=R(2);return X(i.addBalanceTransaction())}),v(49," Registrar Transacci\xF3n "),p()()(),f(50,"div",142)(51,"label",48),v(52,"Descripci\xF3n"),p(),f(53,"textarea",143),He("ngModelChange",function(i){Y(t);let s=R(2);return ze(s.newBalanceTransaction.description,i)||(s.newBalanceTransaction.description=i),X(i)}),p()()(),f(54,"div")(55,"h3",136),v(56,"Historial de Transacciones"),p(),f(57,"div",144)(58,"table",145)(59,"thead",146)(60,"tr")(61,"th",147),v(62,"Fecha "),p(),f(63,"th",148),v(64," Descripci\xF3n"),p(),f(65,"th",148),v(66,"Monto"),p(),f(67,"th",149),v(68,"Saldo "),p()()(),f(69,"tbody",150),se(70,wse,10,10,"tr",151)(71,bse,3,0,"tr",23),p()()(),se(72,Ese,3,0,"div",152),p()()}if(n&2){let t,r,i,s=R(2);x(7),ie("$",((t=s.balanceInfo==null?null:s.balanceInfo.initialBalance)!==null&&t!==void 0?t:0).toFixed(2),""),x(4),ee("ngClass",gl(11,Jie,s.balanceInfo&&s.balanceInfo.currentBalance>0,((r=s.balanceInfo==null?null:s.balanceInfo.currentBalance)!==null&&r!==void 0?r:0)<0,(s.balanceInfo==null?null:s.balanceInfo.currentBalance)===0)),x(),ie("$",(i=s.balanceInfo==null||s.balanceInfo.currentBalance==null?null:s.balanceInfo.currentBalance.toFixed(2))!==null&&i!==void 0?i:"0.00",""),x(2),ie(" \xDAltima actualizaci\xF3n: ",s.formatDate(s.balanceInfo==null?null:s.balanceInfo.lastUpdated)," "),x(12),$e("ngModel",s.newInitialBalance),x(8),$e("ngModel",s.newBalanceTransaction.type),x(12),$e("ngModel",s.newBalanceTransaction.amount),x(7),$e("ngModel",s.newBalanceTransaction.description),x(17),ee("ngForOf",s.balanceTransactions),x(),ee("ngIf",s.balanceTransactions.length===0),x(),ee("ngIf",s.balanceTransactions.length>10)}}function Sse(n,e){if(n&1&&(f(0,"div")(1,"div",61)(2,"h2",62),v(3,"Gesti\xF3n de Saldo"),p(),se(4,yse,2,0,"div",125)(5,Cse,73,15,"div",126),p()()),n&2){let t=R();x(4),ee("ngIf",t.loading),x(),ee("ngIf",!t.loading)}}function Ise(n,e){if(n&1&&(f(0,"span",191),v(1),p()),n&2){let t=R().$implicit,r=R(2);ee("ngClass",r.getStockStatusClass(t)),x(),ie(" ",t.quantity<=0?"Agotado":t.quantity<=t.minStock?"Bajo":"OK"," ")}}function Tse(n,e){if(n&1&&(f(0,"div",192),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Categor\xEDa: ",t.category," ")}}function Dse(n,e){n&1&&(xe(),f(0,"svg",64),ae(1,"path",193),p())}function Ase(n,e){n&1&&(xe(),f(0,"svg",64),ae(1,"path",194),p())}function kse(n,e){if(n&1&&(f(0,"div",195),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.description.length>100?t.description.substring(0,100)+"...":t.description," ")}}function Mse(n,e){if(n&1&&(f(0,"span",198),v(1),p()),n&2){let t=R(2).$implicit;x(),ie("Prov: ",t.supplier,"")}}function Rse(n,e){if(n&1&&(f(0,"span"),v(1),p()),n&2){let t=R(2).$implicit;x(),ie("Ubic: ",t.location,"")}}function Pse(n,e){if(n&1&&(f(0,"div",196),se(1,Mse,2,1,"span",197)(2,Rse,2,1,"span",23),p()),n&2){let t=R().$implicit;x(),ee("ngIf",t.supplier),x(),ee("ngIf",t.location)}}function Fse(n,e){if(n&1){let t=ye();f(0,"div",176)(1,"div",177)(2,"h3",39),v(3),p(),f(4,"span",178),v(5),p()(),f(6,"div",179)(7,"div")(8,"div",180)(9,"span",39),v(10),p(),se(11,Ise,2,2,"span",181),p(),se(12,Tse,2,1,"div",182),p(),f(13,"div",183)(14,"button",184),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.openMovementForm(i))}),xe(),f(15,"svg",64),ae(16,"path",185),p()(),Pe(),f(17,"button",184),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.editItem(i))}),xe(),f(18,"svg",64),ae(19,"path",186),p()(),Pe(),f(20,"button",187),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.toggleItemStatus(i))}),se(21,Dse,2,0,"svg",188)(22,Ase,2,0,"svg",188),p()()(),se(23,kse,2,1,"div",189)(24,Pse,3,2,"div",190),p()}if(n&2){let t,r=e.$implicit;tt("border-green-500",r.active&&(r.quantity>((t=r.minStock)!==null&&t!==void 0?t:0)||!r.minStock))("border-yellow-500",r.active&&r.minStock&&r.quantity<=r.minStock&&r.quantity>0)("border-red-500",r.quantity<=0)("border-gray-300",!r.active),x(3),De(r.name),x(),tt("bg-green-100",r.active)("text-green-800",r.active)("bg-red-100",!r.active)("text-red-800",!r.active),x(),ie(" ",r.active?"Activo":"Inactivo"," "),x(5),gn("",r.quantity," ",r.unit,""),x(),ee("ngIf",r.minStock),x(),ee("ngIf",r.category),x(8),tt("text-red-600",r.active)("text-green-600",!r.active),x(),ee("ngIf",r.active),x(),ee("ngIf",!r.active),x(),ee("ngIf",r.description),x(),ee("ngIf",r.supplier||r.location)}}function Ose(n,e){if(n&1){let t=ye();f(0,"div",199),xe(),f(1,"svg",200),ae(2,"path",201),p(),Pe(),f(3,"p",202),v(4,"No hay art\xEDculos disponibles con los filtros seleccionados"),p(),f(5,"button",203),J("click",function(){Y(t);let i=R(2);return X(i.resetForm())}),v(6," Crear Nuevo Art\xEDculo "),p()()}}function Nse(n,e){if(n&1&&(f(0,"div",216),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.description.length>50?t.description.substring(0,50)+"...":t.description," ")}}function Lse(n,e){if(n&1&&(f(0,"div",192),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Proveedor: ",t.supplier," ")}}function Vse(n,e){if(n&1&&(f(0,"span",191),v(1),p()),n&2){let t=R().$implicit,r=R(2);ee("ngClass",r.getStockStatusClass(t)),x(),ie(" ",t.quantity<=0?"Agotado":t.quantity<=t.minStock?"Bajo":"OK"," ")}}function Bse(n,e){if(n&1&&(f(0,"div",192),v(1),p()),n&2){let t=R().$implicit;x(),gn(" Costo: $",t.cost.toFixed(2),"/",t.unit," ")}}function Use(n,e){if(n&1&&(f(0,"div",192),v(1),p()),n&2){let t=R().$implicit,r=R(2);x(),ie(" \xDAltima reposici\xF3n: ",r.formatDate(t.lastRestocked)," ")}}function jse(n,e){if(n&1&&(f(0,"div",192),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Ubicaci\xF3n: ",t.location," ")}}function $se(n,e){if(n&1){let t=ye();f(0,"tr")(1,"td",204)(2,"div",205)(3,"div")(4,"div",206),v(5),p(),se(6,Nse,2,1,"div",207)(7,Lse,2,1,"div",182),p()()(),f(8,"td",208)(9,"div",205)(10,"span",209),v(11),p(),se(12,Vse,2,2,"span",181),p(),se(13,Bse,2,2,"div",182)(14,Use,2,1,"div",182),p(),f(15,"td",208)(16,"span",210),v(17),p(),se(18,jse,2,1,"div",182),p(),f(19,"td",208)(20,"span",211),v(21),p()(),f(22,"td",212)(23,"button",213),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.openMovementForm(i))}),v(24," Mov. "),p(),f(25,"button",213),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.editItem(i))}),v(26," Editar "),p(),f(27,"button",214),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.toggleItemStatus(i))}),v(28),p(),f(29,"button",215),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.deleteItem(i))}),v(30," Eliminar "),p()()()}if(n&2){let t=e.$implicit;tt("bg-gray-50",!t.active),x(5),ie("",t.name," "),x(),ee("ngIf",t.description),x(),ee("ngIf",t.supplier),x(4),gn("",t.quantity," ",t.unit,""),x(),ee("ngIf",t.minStock),x(),ee("ngIf",t.cost),x(),ee("ngIf",t.lastRestocked),x(3),De(t.category||"Sin categor\xEDa"),x(),ee("ngIf",t.location),x(2),tt("bg-green-100",t.active)("text-green-800",t.active)("bg-red-100",!t.active)("text-red-800",!t.active),x(),ie(" ",t.active?"Activo":"Inactivo"," "),x(6),tt("text-red-600",t.active)("hover:text-red-900",t.active)("text-green-600",!t.active)("hover:text-green-900",!t.active),x(),ie(" ",t.active?"Desactivar":"Activar"," ")}}function Hse(n,e){n&1&&(f(0,"tr")(1,"td",217),v(2," No hay art\xEDculos disponibles con los filtros seleccionados "),p()())}function zse(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",161)(2,"h2",162),v(3,"Inventario"),p(),f(4,"div",163)(5,"button",164),J("click",function(){Y(t);let i=R();return X(i.activeTab="balance")}),v(6),p(),f(7,"button",165),J("click",function(){Y(t);let i=R();return X(i.resetForm())}),v(8," + Art\xEDculo "),p(),f(9,"button",166),J("click",function(){Y(t);let i=R();return X(i.openMovementForm())}),v(10," + Movimiento "),p()()(),f(11,"div",167),se(12,Fse,25,30,"div",168)(13,Ose,7,0,"div",169),p(),f(14,"div",170)(15,"table",171)(16,"thead",146)(17,"tr")(18,"th",172),v(19," Art\xEDculo "),p(),f(20,"th",172),v(21," Stock "),p(),f(22,"th",172),v(23," Categor\xEDa "),p(),f(24,"th",172),v(25," Estado "),p(),f(26,"th",173),v(27," Acciones "),p()()(),f(28,"tbody",174),se(29,$se,31,30,"tr",175)(30,Hse,3,0,"tr",23),p()()()()}if(n&2){let t,r=R();x(6),ie(" Saldo: $",(t=r.balanceInfo==null||r.balanceInfo.currentBalance==null?null:r.balanceInfo.currentBalance.toFixed(2))!==null&&t!==void 0?t:"0.00"," "),x(6),ee("ngForOf",r.getFilteredInventory()),x(),ee("ngIf",r.getFilteredInventory().length===0),x(16),ee("ngForOf",r.getFilteredInventory()),x(),ee("ngIf",r.getFilteredInventory().length===0)}}function Wse(n,e){if(n&1&&(f(0,"div",228),v(1),p()),n&2){let t=R().$implicit;x(),ie(" Precio: $",t.price.toFixed(2)," ")}}function qse(n,e){if(n&1&&(f(0,"div",195),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.description.length>80?t.description.substring(0,80)+"...":t.description," ")}}function Gse(n,e){if(n&1){let t=ye();f(0,"div",223)(1,"div",224)(2,"div")(3,"h3",39),v(4),p(),f(5,"div",225)(6,"span"),v(7,"Stock: "),p(),f(8,"span",191),v(9),p()(),se(10,Wse,2,1,"div",226),p(),f(11,"div",183)(12,"button",227),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.updateDishStock(i))}),v(13," Actualizar "),p()()(),se(14,qse,2,1,"div",189),p()}if(n&2){let t=e.$implicit,r=R(2);x(4),De(t.name),x(4),ee("ngClass",r.getDishStockClass(t)),x(),ie(" ",t.stockQuantity||0," "),x(),ee("ngIf",t.price),x(4),ee("ngIf",t.description)}}function Kse(n,e){n&1&&(f(0,"div",229),xe(),f(1,"svg",200),ae(2,"path",230),p(),Pe(),f(3,"p",202),v(4,"No hay platos rastreados como inventario"),p(),f(5,"p",231),v(6," Configure platos como unidades de inventario desde la gesti\xF3n de platos "),p()())}function Qse(n,e){if(n&1&&(f(0,"div")(1,"h2",218)(2,"span"),v(3,"Platos con Inventario"),p(),f(4,"span",219),v(5),p()(),f(6,"div",220),se(7,Gse,15,5,"div",221)(8,Kse,7,0,"div",222),p()()),n&2){let t=R();x(5),ie("(",t.trackedDishes.length,")"),x(2),ee("ngForOf",t.trackedDishes),x(),ee("ngIf",t.trackedDishes.length===0)}}function Yse(n,e){if(n&1&&(f(0,"div",195),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.reason," ")}}function Xse(n,e){if(n&1&&(f(0,"div",234)(1,"div",224)(2,"div")(3,"div",39),v(4),p(),f(5,"div",180)(6,"span"),v(7),p(),f(8,"span",235),v(9),p()()(),f(10,"span",236),v(11),p()(),se(12,Yse,2,1,"div",189),f(13,"div",237)(14,"span"),v(15),p(),f(16,"span"),v(17),p()()()),n&2){let t=e.$implicit,r=R(2);tt("border-green-500",t.type==="entrada")("border-red-500",t.type==="salida")("border-blue-500",t.type==="ajuste"),x(4),De(t.itemName),x(3),gn("",t.previousQuantity," \u2192 ",t.newQuantity,""),x(),tt("text-green-600",t.quantity>0)("text-red-600",t.quantity<0),x(),gn(" (",t.quantity>0?"+":"","",t.quantity,") "),x(),ee("ngClass",r.getMovementTypeClass(t.type)),x(),ie(" ",t.type," "),x(),ee("ngIf",t.reason),x(3),De(r.formatDate(t.createdAt)),x(2),De(t.createdBy)}}function Zse(n,e){if(n&1){let t=ye();f(0,"div",199),xe(),f(1,"svg",200),ae(2,"path",238),p(),Pe(),f(3,"p",202),v(4,"No hay movimientos registrados"),p(),f(5,"button",203),J("click",function(){Y(t);let i=R(2);return X(i.openMovementForm())}),v(6," Registrar Movimiento "),p()()}}function Jse(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",232)(2,"h2",162),v(3,"Movimientos Recientes"),p(),f(4,"button",227),J("click",function(){Y(t);let i=R();return X(i.openMovementForm())}),v(5," Nuevo Movimiento "),p()(),f(6,"div",37),se(7,Xse,18,20,"div",233)(8,Zse,7,0,"div",169),p()()}if(n&2){let t=R();x(7),ee("ngForOf",t.getFilteredMovements()),x(),ee("ngIf",t.movements.length===0)}}function eoe(n,e){if(n&1){let t=ye();f(0,"div",239)(1,"div",240)(2,"div")(3,"div",209),v(4),p(),f(5,"div",241)(6,"span"),v(7,"Stock: "),p(),f(8,"span",242),v(9),p()()(),f(10,"button",243),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.updateDishStock(i))}),v(11," Actualizar "),p()()()}if(n&2){let t=e.$implicit,r=R();x(4),De(t.name),x(4),ee("ngClass",r.getDishStockClass(t)),x(),ie(" ",t.stockQuantity||0," ")}}function toe(n,e){n&1&&(f(0,"div",244),v(1," No hay platos rastreados "),p())}function noe(n,e){if(n&1){let t=ye();f(0,"div",245)(1,"button",35),J("click",function(){Y(t);let i=R();return X(i.activeTab="dishes")}),v(2),p()()}if(n&2){let t=R();x(2),ie(" Ver todos (",t.trackedDishes.length,") ")}}function roe(n,e){if(n&1&&(f(0,"div"),v(1),p()),n&2){let t=R().$implicit;x(),De(t.reason)}}function ioe(n,e){if(n&1&&(f(0,"div",239)(1,"div",224)(2,"div")(3,"div",209),v(4),p(),f(5,"div",246),v(6),f(7,"span"),v(8),p()()(),f(9,"span",247),v(10),p()(),f(11,"div",248),se(12,roe,2,1,"div",23),f(13,"div"),v(14),p()()()),n&2){let t=e.$implicit,r=R();x(4),ie("",t.itemName," "),x(2),gn(" ",t.previousQuantity," \u2192 ",t.newQuantity," "),x(),tt("text-green-600",t.quantity>0)("text-red-600",t.quantity<0),x(),gn(" (",t.quantity>0?"+":"","",t.quantity,") "),x(),ee("ngClass",r.getMovementTypeClass(t.type)),x(),ie(" ",t.type," "),x(2),ee("ngIf",t.reason),x(2),De(r.formatDate(t.createdAt))}}function soe(n,e){n&1&&(f(0,"div",244),v(1," No hay movimientos recientes "),p())}var rx=class n{constructor(e){this.balanceService=e;this.authService.isAdmin$.subscribe(t=>{t||this.router.navigate(["/login"])}),this.authService.userData$.subscribe(t=>{this.currentUser=t})}firestore=le(rn);authService=le(jn);router=le(Ht);inventoryItems=[];trackedDishes=[];movements=[];loading=!0;error=null;currentUser=null;isEditing=!1;currentItem=this.resetItemForm();activeTab="inventory";showFilters=!1;uniqueCategories=[];showMovementForm=!1;newMovement={itemId:"",quantity:0,type:"entrada",reason:"",monetaryValue:0};selectedCategory="all";showInactive=!1;searchTerm="";showLowStock=!1;movementsLimit=10;showAllMovements=!1;balanceInfo=null;balanceTransactions=[];newInitialBalance=0;newBalanceTransaction={type:"entrada",amount:0,description:""};transactionsLimit=10;ngOnInit(){this.loadInventory(),this.loadTrackedDishes(),this.loadRecentMovements(),this.loadBalanceInfo(),this.loadBalanceTransactions()}loadBalanceInfo(){this.balanceService.getBalance().subscribe({next:e=>{this.balanceInfo=e,this.newInitialBalance=e.initialBalance},error:e=>{console.error("Error al cargar informaci\xF3n de saldo:",e)}})}loadBalanceTransactions(){this.balanceService.getTransactions(this.transactionsLimit).subscribe({next:e=>{this.balanceTransactions=e},error:e=>{console.error("Error al cargar transacciones:",e)}})}getUniqueCategories(){if(this.uniqueCategories.length>0)return this.uniqueCategories;let e=this.inventoryItems.map(t=>t.category||"Sin categor\xEDa").filter((t,r,i)=>i.indexOf(t)===r).sort();return this.uniqueCategories=e,e}updateInitialBalance(){if(this.newInitialBalance<0){Pt.default.fire("Error","El saldo inicial no puede ser negativo","error");return}Pt.default.fire({title:"\xBFActualizar saldo inicial?",text:`El saldo inicial se establecer\xE1 en $${this.newInitialBalance.toFixed(2)}`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, actualizar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.balanceService.setInitialBalance(this.newInitialBalance,this.currentUser?.name||"Administrador").then(()=>{Pt.default.fire("\xA1\xC9xito!","Saldo inicial actualizado correctamente","success"),this.loadBalanceInfo(),this.loadBalanceTransactions()}).catch(t=>{console.error("Error al actualizar saldo inicial:",t),Pt.default.fire("Error","No se pudo actualizar el saldo inicial","error")})})}addBalanceTransaction(){if(this.newBalanceTransaction.amount<=0){Pt.default.fire("Error","El monto debe ser mayor que cero","error");return}if(!this.newBalanceTransaction.description.trim()){Pt.default.fire("Error","Debe ingresar una descripci\xF3n para la transacci\xF3n","error");return}Pt.default.fire({title:"\xBFRegistrar transacci\xF3n?",text:`Se ${this.newBalanceTransaction.type==="entrada"?"a\xF1adir\xE1n":"restar\xE1n"} $${this.newBalanceTransaction.amount.toFixed(2)} al saldo`,icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, registrar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.balanceService.updateBalance(this.newBalanceTransaction.amount,this.newBalanceTransaction.type,this.newBalanceTransaction.description,this.currentUser?.name||"Administrador").then(t=>{t?(Pt.default.fire("\xA1\xC9xito!","Transacci\xF3n registrada correctamente","success"),this.loadBalanceInfo(),this.loadBalanceTransactions(),this.newBalanceTransaction={type:"entrada",amount:0,description:""}):Pt.default.fire("Error","Saldo insuficiente para esta operaci\xF3n","error")}).catch(t=>{console.error("Error al registrar transacci\xF3n:",t),Pt.default.fire("Error","No se pudo registrar la transacci\xF3n","error")})})}loadMoreTransactions(){this.transactionsLimit+=10,this.loadBalanceTransactions()}getLowStockCount(){return this.inventoryItems.filter(e=>e.active&&e.minStock&&e.quantity<=e.minStock&&e.quantity>0).length}getOutOfStockCount(){return this.inventoryItems.filter(e=>e.active&&e.quantity<=0).length}getInactiveCount(){return this.inventoryItems.filter(e=>!e.active).length}getStockStatusClass(e){return e.quantity<=0?"bg-red-100 text-red-800":e.minStock&&e.quantity<=e.minStock?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}getDishStockClass(e){let t=e.stockQuantity||0;return t<=0?"bg-red-100 text-red-800":t<5?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}getMovementTypeClass(e){switch(e){case"entrada":return"bg-green-100 text-green-800";case"salida":return"bg-red-100 text-red-800";case"ajuste":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}}formatDate(e){return e?(e.toDate&&(e=e.toDate()),typeof e=="string"&&(e=new Date(e)),e.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})):""}loadInventory(){this.loading=!0;let e=it(this.firestore,"inventory"),t=tn(e,Un("name","asc"));Vr(t,{idField:"id"}).subscribe({next:r=>{this.inventoryItems=r.map(i=>Te(fe({},i),{lastRestocked:i.lastRestocked?.toDate(),createdAt:i.createdAt?.toDate(),updatedAt:i.updatedAt?.toDate()})),this.loading=!1},error:r=>{console.error("Error al cargar inventario:",r),this.error="Error al cargar inventario. Intente nuevamente.",this.loading=!1}})}loadTrackedDishes(){return W(this,null,function*(){let e=it(this.firestore,"menu"),t=tn(e,yn("isTracked","==",!0),yn("active","==",!0));try{let r=yield Tr(t);this.trackedDishes=r.docs.map(i=>fe({id:i.id},i.data()))}catch(r){console.error("Error al cargar platos rastreados:",r)}})}loadRecentMovements(){let e=it(this.firestore,"inventory_movements"),t=tn(e,Un("createdAt","desc"));Vr(t,{idField:"id"}).subscribe({next:r=>{this.movements=r.map(i=>Te(fe({},i),{createdAt:i.createdAt?.toDate()}))},error:r=>{console.error("Error al cargar movimientos:",r)}})}getFilteredInventory(){return this.inventoryItems.filter(e=>!(!this.showInactive&&!e.active||this.selectedCategory!=="all"&&e.category!==this.selectedCategory||this.searchTerm&&!e.name.toLowerCase().includes(this.searchTerm.toLowerCase())||this.showLowStock&&(!e.minStock||e.quantity>e.minStock)))}getFilteredMovements(){let e=[...this.movements];return this.showAllMovements||(e=e.slice(0,this.movementsLimit)),e}createItem(){if(!this.validateForm())return;let e=Te(fe({},this.currentItem),{createdAt:new Date,updatedAt:new Date,lastRestocked:new Date}),t=it(this.firestore,"inventory"),r=e.cost&&e.cost>0&&e.quantity>0,i=r?(e.cost??0)*e.quantity:0;r?this.balanceService.getBalance().subscribe(s=>{s.currentBalance<i?Pt.default.fire({title:"Saldo Insuficiente",text:`El costo inicial ($${i.toFixed(2)}) excede el saldo disponible ($${s.currentBalance.toFixed(2)})`,icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar de todos modos",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&this.finalizeItemCreation(e,i)}):this.finalizeItemCreation(e,i)}):this.finalizeItemCreation(e,0)}finalizeItemCreation(e,t){let r=it(this.firestore,"inventory");yr(r,e).then(i=>{this.registerMovement({itemId:i.id,itemName:e.name,previousQuantity:0,newQuantity:e.quantity,quantity:e.quantity,type:"entrada",reason:"Creaci\xF3n inicial de art\xEDculo",createdBy:this.currentUser?.name||"Administrador",createdAt:new Date}),t>0&&this.balanceService.updateBalance(t,"salida",`Inversi\xF3n inicial en ${e.name} (${e.quantity} ${e.unit})`,this.currentUser?.name||"Administrador",i.id,e.name),Pt.default.fire("\xA1\xC9xito!","Art\xEDculo creado correctamente","success"),this.resetForm(),this.loadBalanceInfo(),this.loadBalanceTransactions()}).catch(i=>{console.error("Error al crear art\xEDculo:",i),Pt.default.fire("Error","No se pudo crear el art\xEDculo","error")})}editItem(e){this.isEditing=!0,this.currentItem=fe({},e),setTimeout(()=>{document.getElementById("inventoryForm")?.scrollIntoView({behavior:"smooth"})},100)}updateItem(){if(!this.validateForm()||!this.currentItem.id)return;let e=this.inventoryItems.find(s=>s.id===this.currentItem.id);if(!e){Pt.default.fire("Error","No se pudo encontrar la informaci\xF3n original del art\xEDculo","error");return}let t=e.quantity||0,r=this.currentItem.quantity-t,i=0;r>0&&this.currentItem.cost&&(i=r*this.currentItem.cost),i>0?this.balanceService.getBalance().subscribe(s=>{s.currentBalance<i?Pt.default.fire({title:"Saldo Insuficiente",text:`El aumento de inventario tiene un costo ($${i.toFixed(2)}) que excede el saldo disponible ($${s.currentBalance.toFixed(2)})`,icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar de todos modos",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&this.finalizeItemUpdate(e,i)}):this.finalizeItemUpdate(e,i)}):this.finalizeItemUpdate(e,i)}finalizeItemUpdate(e,t){let r=Ye(this.firestore,`inventory/${this.currentItem.id}`),i=Te(fe({},this.currentItem),{updatedAt:new Date});St(r,i).then(()=>{e.quantity!==this.currentItem.quantity&&(this.registerMovement({itemId:this.currentItem.id,itemName:this.currentItem.name,previousQuantity:e.quantity,newQuantity:this.currentItem.quantity,quantity:this.currentItem.quantity-e.quantity,type:"ajuste",reason:"Actualizaci\xF3n manual",createdBy:this.currentUser?.name||"Administrador",createdAt:new Date}),t>0&&this.balanceService.updateBalance(t,"salida",`Ajuste de inventario: ${this.currentItem.name} (+${this.currentItem.quantity-e.quantity} ${this.currentItem.unit})`,this.currentUser?.name||"Administrador",this.currentItem.id,this.currentItem.name)),Pt.default.fire("\xA1\xC9xito!","Art\xEDculo actualizado correctamente","success"),this.resetForm(),this.loadBalanceInfo(),this.loadBalanceTransactions()}).catch(s=>{console.error("Error al actualizar art\xEDculo:",s),Pt.default.fire("Error","No se pudo actualizar el art\xEDculo","error")})}deleteItem(e){Pt.default.fire({title:"\xBFEst\xE1s seguro?",text:`\xBFQuieres eliminar el art\xEDculo "${e.name}"?`,icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, eliminar",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed&&e.id){let r=Ye(this.firestore,`inventory/${e.id}`),i=(e.cost||0)*e.quantity;_a(r).then(()=>{i>0&&this.balanceService.updateBalance(i,"salida",`Baja de inventario: ${e.name} (${e.quantity} ${e.unit})`,this.currentUser?.name||"Administrador",e.id,e.name),Pt.default.fire("\xA1Eliminado!","El art\xEDculo ha sido eliminado","success"),this.loadBalanceInfo(),this.loadBalanceTransactions()}).catch(s=>{console.error("Error al eliminar art\xEDculo:",s),Pt.default.fire("Error","No se pudo eliminar el art\xEDculo","error")})}})}toggleItemStatus(e){if(!e.id)return;let t=Ye(this.firestore,`inventory/${e.id}`),r=!e.active;St(t,{active:r,updatedAt:new Date}).then(()=>{let i=r?"activado":"desactivado";Pt.default.fire("\xA1Actualizado!",`El art\xEDculo ha sido ${i}`,"success")}).catch(i=>{console.error("Error al cambiar estado del art\xEDculo:",i),Pt.default.fire("Error","No se pudo cambiar el estado del art\xEDculo","error")})}openMovementForm(e=null){this.showMovementForm=!0,this.newMovement={itemId:e?.id||"",quantity:0,type:"entrada",reason:"",monetaryValue:0},setTimeout(()=>{document.getElementById("movementForm")?.scrollIntoView({behavior:"smooth"})},100)}updateDishStock(e){e.id&&Pt.default.fire({title:"Actualizar Stock",text:`Stock actual: ${e.stockQuantity||0}`,input:"number",inputAttributes:{min:"0",step:"1"},inputValue:e.stockQuantity?.toString()||"0",showCancelButton:!0,confirmButtonText:"Actualizar",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:t=>{if(t==="")return Pt.default.showValidationMessage("Debe ingresar un valor"),!1;let r=parseInt(t);return isNaN(r)||r<0?(Pt.default.showValidationMessage("Debe ingresar un n\xFAmero v\xE1lido mayor o igual a 0"),!1):r}}).then(t=>{if(t.isConfirmed&&e.id){let r=t.value,i=Ye(this.firestore,`menu/${e.id}`);St(i,{stockQuantity:r,updatedAt:new Date}).then(()=>{let s=it(this.firestore,"dish_movements");yr(s,{dishId:e.id,dishName:e.name,previousQuantity:e.stockQuantity||0,newQuantity:r,quantity:r-(e.stockQuantity||0),type:"ajuste",reason:"Actualizaci\xF3n manual",createdBy:this.currentUser?.name||"Administrador",createdAt:new Date}),Pt.default.fire("\xA1Actualizado!","Stock actualizado correctamente","success"),this.loadTrackedDishes()}).catch(s=>{console.error("Error al actualizar stock:",s),Pt.default.fire("Error","No se pudo actualizar el stock","error")})}})}registerMovement(e){let t=it(this.firestore,"inventory_movements");return yr(t,e).then(()=>{this.loadRecentMovements()}).catch(r=>{console.error("Error al registrar movimiento:",r)})}getCalculatedValue(){if(!this.newMovement.itemId||this.newMovement.quantity<=0)return"0.00";let e=this.inventoryItems.find(r=>r.id===this.newMovement.itemId);return!e||!e.cost?"Sin costo unitario definido":(e.cost*this.newMovement.quantity).toFixed(2)}handleMovement(){if(!this.validateMovementForm())return;let e=this.inventoryItems.find(i=>i.id===this.newMovement.itemId);if(!e){Pt.default.fire("Error","Art\xEDculo no encontrado","error");return}let t;if(this.newMovement.type==="entrada")t=e.quantity+this.newMovement.quantity;else if(this.newMovement.type==="salida"){if(t=e.quantity-this.newMovement.quantity,t<0){Pt.default.fire("Error","No hay suficiente stock para esta salida","error");return}}else t=this.newMovement.quantity;let r=0;e.cost&&e.cost>0?(r=e.cost*this.newMovement.quantity,this.newMovement.monetaryValue=r):this.newMovement.monetaryValue>0&&(r=this.newMovement.monetaryValue),this.balanceService.getBalance().subscribe(i=>{this.newMovement.type==="entrada"&&r>0&&i.currentBalance<r?Pt.default.fire({title:"Saldo Insuficiente",text:`No hay suficiente saldo para esta compra. Saldo actual: $${i.currentBalance.toFixed(2)}`,icon:"warning",showCancelButton:!0,confirmButtonText:"Continuar de todos modos",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&this.processInventoryMovementWithBalance(e,t,r)}):this.processInventoryMovementWithBalance(e,t,r)})}processInventoryMovementWithBalance(e,t,r){let i=Ye(this.firestore,`inventory/${e.id}`),s=e.quantity;St(i,fe({quantity:t,updatedAt:new Date},this.newMovement.type==="entrada"?{lastRestocked:new Date}:{})).then(()=>{let o=this.newMovement.type==="ajuste"?t-e.quantity:this.newMovement.type==="entrada"?this.newMovement.quantity:-this.newMovement.quantity;this.registerMovement({itemId:e.id,itemName:e.name,previousQuantity:s,newQuantity:t,quantity:o,type:this.newMovement.type,reason:this.newMovement.reason||"Sin raz\xF3n especificada",createdBy:this.currentUser?.name||"Administrador",createdAt:new Date,monetaryValue:r}).then(()=>{if(r>0){let a=this.newMovement.type==="entrada"?"salida":"entrada";this.balanceService.updateBalance(r,a,`${this.newMovement.type==="entrada"?"Compra":"Venta"} de ${e.name} (${this.newMovement.quantity} ${e.unit})`,this.currentUser?.name||"Administrador",e.id,e.name).then(()=>{if(this.newMovement.type==="entrada"&&this.newMovement.monetaryValue>0&&(!e.cost||e.cost===0)){let c=this.newMovement.monetaryValue/this.newMovement.quantity;St(i,{cost:c})}Pt.default.fire("\xA1\xC9xito!","Movimiento registrado correctamente","success"),this.showMovementForm=!1,this.newMovement={itemId:"",quantity:0,type:"entrada",reason:"",monetaryValue:0},this.loadInventory(),this.loadBalanceInfo(),this.loadBalanceTransactions()})}else Pt.default.fire("\xA1\xC9xito!","Movimiento registrado correctamente","success"),this.showMovementForm=!1,this.newMovement={itemId:"",quantity:0,type:"entrada",reason:"",monetaryValue:0},this.loadInventory()})}).catch(o=>{console.error("Error al actualizar inventario:",o),Pt.default.fire("Error","No se pudo registrar el movimiento","error")})}validateMovementForm(){return this.newMovement.itemId?this.newMovement.quantity<=0?(Pt.default.fire("Error","La cantidad debe ser mayor que 0","error"),!1):!0:(Pt.default.fire("Error","Debe seleccionar un art\xEDculo","error"),!1)}resetForm(){this.isEditing=!1,this.showMovementForm=!1,this.currentItem=this.resetItemForm(),this.activeTab="newItem"}validateForm(){return!this.currentItem.name||this.currentItem.name.trim()===""?(Pt.default.fire("Error","El nombre del art\xEDculo es obligatorio","error"),!1):this.currentItem.quantity<0?(Pt.default.fire("Error","La cantidad no puede ser negativa","error"),!1):!this.currentItem.unit||this.currentItem.unit.trim()===""?(Pt.default.fire("Error","La unidad de medida es obligatoria","error"),!1):!0}resetItemForm(){return{name:"",description:"",quantity:0,unit:"unidad",minStock:0,cost:0,category:"",location:"",supplier:"",active:!0}}getStockLevel(e){return e.minStock?e.quantity<=0?"cr\xEDtico":e.quantity<=e.minStock?"bajo":"normal":"normal"}updateMonetaryValue(){if(!this.newMovement.itemId||this.newMovement.quantity<=0){this.newMovement.monetaryValue=0;return}let e=this.inventoryItems.find(t=>t.id===this.newMovement.itemId);e&&e.cost&&(this.newMovement.monetaryValue=e.cost*this.newMovement.quantity)}static \u0275fac=function(t){return new(t||n)(Qe(nx))};static \u0275cmp=Yt({type:n,selectors:[["app-inventory-management"]],standalone:!0,features:[Jt],decls:83,vars:51,consts:[[1,"container","mx-auto","px-3","py-4","max-w-7xl"],[1,"md:hidden","fixed","bottom-0","left-0","right-0","bg-white","shadow-lg","border-t","z-10","p-3","flex","space-x-2"],["class","flex-1 px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-700 font-medium shadow-sm",3,"click",4,"ngIf"],["class","flex-1 px-3 py-2 bg-blue-500 text-white rounded-md font-medium shadow-sm",3,"click",4,"ngIf"],["class","flex-1 px-3 py-2 bg-green-500 text-white rounded-md font-medium shadow-sm",3,"click",4,"ngIf"],[1,"flex-1","py-3","px-1","text-center",3,"click"],[1,"md:hidden","mb-4","border-b"],[1,"flex","text-sm","font-medium"],[1,"sticky","top-0","z-10","bg-gray-50","mb-4","rounded-lg","shadow-sm","p-3"],[1,"relative"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-gray-400"],["fill-rule","evenodd","d","M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule","evenodd"],["type","text","placeholder","Buscar art\xEDculo...",1,"w-full","pl-10","pr-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"mt-3"],[1,"flex","items-center","text-sm","text-gray-600","w-full","justify-between",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"w-4","h-4","transition-transform"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],["class","mt-2 space-y-2 text-sm bg-white p-3 rounded-md shadow-sm",4,"ngIf"],["class","flex justify-center py-8",4,"ngIf"],["class","bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4","role","alert",4,"ngIf"],[1,"pb-20","md:pb-0"],["class","bg-white rounded-lg shadow p-4 mb-6",4,"ngIf"],[4,"ngIf"],[1,"hidden","lg:grid","lg:grid-cols-7","lg:gap-6","mt-6"],[1,"lg:col-span-5"],[1,"lg:col-span-2","space-y-4"],[1,"bg-white","rounded-lg","shadow-md","p-4"],[1,"font-semibold","text-gray-800","mb-3"],[1,"space-y-2","max-h-60","overflow-y-auto"],["class","p-2 border rounded-lg",4,"ngFor","ngForOf"],["class","text-center py-3 text-gray-500 text-sm",4,"ngIf"],["class","text-center mt-2",4,"ngIf"],[1,"flex","justify-between","items-center","mb-3"],[1,"font-semibold","text-gray-800"],[1,"text-blue-600","text-sm",3,"click"],[1,"space-y-2","max-h-80","overflow-y-auto"],[1,"space-y-3"],[1,"flex","justify-between","text-sm"],[1,"font-medium"],[1,"font-medium","text-yellow-600"],[1,"font-medium","text-red-600"],[1,"font-medium","text-gray-600"],[1,"flex-1","px-3","py-2","border","border-gray-300","rounded-md","bg-white","text-gray-700","font-medium","shadow-sm",3,"click"],[1,"flex-1","px-3","py-2","bg-blue-500","text-white","rounded-md","font-medium","shadow-sm",3,"click"],[1,"flex-1","px-3","py-2","bg-green-500","text-white","rounded-md","font-medium","shadow-sm",3,"click"],[1,"mt-2","space-y-2","text-sm","bg-white","p-3","rounded-md","shadow-sm"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"w-full","px-3","py-2","text-sm","border","border-gray-300","rounded-md","bg-white",3,"ngModelChange","ngModel"],["value","all"],[3,"value"],[1,"flex","flex-col","justify-end"],[1,"space-y-2"],[1,"inline-flex","items-center"],["type","checkbox",1,"rounded","text-blue-600","focus:ring-blue-500","w-4","h-4",3,"ngModelChange","ngModel"],[1,"ml-2","text-sm","text-gray-700"],[1,"flex","justify-center","py-8"],[1,"animate-spin","rounded-full","h-12","w-12","border-t-2","border-b-2","border-blue-500"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded-lg","mb-4"],[1,"block","sm:inline"],[1,"bg-white","rounded-lg","shadow","p-4","mb-6"],[1,"text-lg","font-semibold","mb-4"],[1,"mr-2","text-gray-500","md:hidden",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"space-y-4"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500","bg-white",3,"ngModelChange","ngModel"],["disabled","","selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["value","entrada"],["value","salida"],["value","ajuste"],["type","number","min","0.01","step","0.01",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["rows","2","placeholder","Raz\xF3n del movimiento...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"hidden","md:flex","justify-end","space-x-3","mt-4"],[1,"px-4","py-2","border","border-gray-300","rounded-md","hover:bg-gray-100",3,"click"],[1,"px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600",3,"click"],["type","text","placeholder","Ej: Carne de res, Tomate, Aceite...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Carnes, Verduras, L\xE1cteos...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"flex","items-center","mt-1"],[1,"inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"ngModelChange","ngModel"],[1,"relative","w-10","h-6","bg-gray-200","peer-focus:outline-none","peer-focus:ring-2","peer-focus:ring-blue-300","rounded-full","peer","peer-checked:after:translate-x-full","rtl:peer-checked:after:-translate-x-full","peer-checked:after:border-white","after:content-['']","after:absolute","after:top-[2px]","after:left-[2px]","after:bg-white","after:border-gray-300","after:border","after:rounded-full","after:h-5","after:w-5","after:transition-all","peer-checked:bg-blue-600"],[1,"ml-2","text-sm","font-medium","text-gray-700"],["type","number","min","0","step","0.01",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["value","unidad"],["value","gramos"],["value","kg"],["value","ml"],["value","litro"],["value","porci\xF3n"],["value","libra"],["value","quintal"],["value","arroba"],["value","onza"],["value","gal\xF3n"],["value","caja"],["value","saco"],["value","atado"],["value","racimo"],["value","funda"],["value","bulto"],["value","canasta"],["value","botella"],["value","cubeta"],["value","lata"],["value","frasco"],["value","gaveta"],["value","paquete"],["value","metro"],["value","cent\xEDmetro"],["value","docena"],["value","par"],[1,"text-xs","text-gray-500","mt-1"],[1,"text-gray-500"],["type","number","min","0","step","0.01",1,"w-full","pl-7","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Estante A, Refrigerador 2...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Distribuidor X, Proveedor Y...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["rows","2","placeholder","Descripci\xF3n detallada del art\xEDculo...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],["class","px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100",3,"click",4,"ngIf"],["class","px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",3,"click",4,"ngIf"],["class","px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",3,"click",4,"ngIf"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600",3,"click"],["class","py-4 flex justify-center",4,"ngIf"],["class","space-y-6",4,"ngIf"],[1,"py-4","flex","justify-center"],[1,"animate-spin","rounded-full","h-8","w-8","border-t-2","border-b-2","border-blue-500"],[1,"space-y-6"],[1,"bg-gray-50","p-4","rounded-lg"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-2xl","font-bold"],[1,"text-2xl","font-bold",3,"ngClass"],[1,"mt-3","text-xs","text-gray-500"],[1,"text-md","font-medium","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"flex","items-end"],[1,"mt-4","grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","number","min","0.01","step","0.01",1,"w-full","pl-7","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"px-4","py-2","bg-green-500","text-white","rounded-md","hover:bg-green-600","w-full",3,"click"],[1,"mt-2"],["rows","2","placeholder","Motivo de la transacci\xF3n...",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"overflow-hidden","shadow","ring-1","ring-black","ring-opacity-5","md:rounded-lg"],[1,"min-w-full","divide-y","divide-gray-300"],[1,"bg-gray-50"],["scope","col",1,"py-3.5","pl-4","pr-3","text-left","text-sm","font-semibold","text-gray-900"],["scope","col",1,"px-3","py-3.5","text-left","text-sm","font-semibold","text-gray-900"],["scope","col",1,"px-3","py-3.5","text-right","text-sm","font-semibold","text-gray-900"],[1,"divide-y","divide-gray-200","bg-white"],[4,"ngFor","ngForOf"],["class","mt-3 text-center",4,"ngIf"],[1,"whitespace-nowrap","py-2","pl-4","pr-3","text-sm","text-gray-500"],[1,"px-3","py-2","text-sm","text-gray-900"],["class","text-xs text-gray-500 block",4,"ngIf"],[1,"px-3","py-2","text-sm","font-medium",3,"ngClass"],[1,"px-3","py-2","text-sm","text-gray-500","text-right"],[1,"text-xs","text-gray-500","block"],["colspan","4",1,"px-3","py-4","text-sm","text-center","text-gray-500"],[1,"mt-3","text-center"],[1,"hidden","md:flex","justify-between","mb-4"],[1,"text-lg","font-semibold"],[1,"flex","space-x-2"],[1,"bg-yellow-500","text-white","py-2","px-4","rounded","hover:bg-yellow-600",3,"click"],[1,"bg-green-500","text-white","py-2","px-4","rounded","hover:bg-green-600",3,"click"],[1,"bg-blue-500","text-white","py-2","px-4","rounded","hover:bg-blue-600",3,"click"],[1,"md:hidden","space-y-3"],["class","bg-white rounded-lg shadow p-3 border-l-4",3,"border-green-500","border-yellow-500","border-red-500","border-gray-300",4,"ngFor","ngForOf"],["class","bg-white rounded-lg shadow p-6 text-center",4,"ngIf"],[1,"hidden","md:block","bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],["scope","col",1,"px-4","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-4","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[3,"bg-gray-50",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow","p-3","border-l-4"],[1,"flex","justify-between"],[1,"px-2","py-1","text-xs","rounded-full"],[1,"flex","justify-between","mt-2"],[1,"text-sm","flex","items-center"],["class","ml-2 px-2 py-0.5 rounded text-xs",3,"ngClass",4,"ngIf"],["class","text-xs text-gray-500",4,"ngIf"],[1,"flex"],[1,"p-2","text-blue-600",3,"click"],["fill-rule","evenodd","d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule","evenodd"],["d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"],[1,"p-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5","viewBox","0 0 20 20","fill","currentColor",4,"ngIf"],["class","mt-2 text-sm text-gray-600",4,"ngIf"],["class","mt-2 flex flex-wrap text-xs text-gray-500",4,"ngIf"],[1,"ml-2","px-2","py-0.5","rounded","text-xs",3,"ngClass"],[1,"text-xs","text-gray-500"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"mt-2","text-sm","text-gray-600"],[1,"mt-2","flex","flex-wrap","text-xs","text-gray-500"],["class","mr-2",4,"ngIf"],[1,"mr-2"],[1,"bg-white","rounded-lg","shadow","p-6","text-center"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293L10 14.414l-2.414 2.414a1 1 0 01-.707.293H6"],[1,"mt-4","text-gray-600"],[1,"mt-4","px-4","py-2","bg-blue-500","text-white","rounded-md","hover:bg-blue-600",3,"click"],[1,"px-4","py-3"],[1,"flex","items-center"],[1,"font-medium","text-gray-900"],["class","text-sm text-gray-500",4,"ngIf"],[1,"px-4","py-3","whitespace-nowrap"],[1,"text-sm","font-medium"],[1,"text-sm","text-gray-900"],[1,"px-2","py-1","inline-flex","text-xs","leading-5","font-semibold","rounded-full"],[1,"px-4","py-3","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-blue-600","hover:text-blue-900","mr-3",3,"click"],[1,"mr-3",3,"click"],[1,"text-red-600","hover:text-red-900",3,"click"],[1,"text-sm","text-gray-500"],["colspan","5",1,"px-6","py-4","text-center","text-gray-500"],[1,"text-lg","font-semibold","mb-4","flex","items-center"],[1,"ml-2","text-sm","text-gray-500"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-3"],["class","bg-white p-4 rounded-lg shadow",4,"ngFor","ngForOf"],["class","bg-white rounded-lg shadow p-6 text-center md:col-span-3",4,"ngIf"],[1,"bg-white","p-4","rounded-lg","shadow"],[1,"flex","justify-between","items-start"],[1,"text-sm","flex","items-center","mt-1"],["class","text-sm text-gray-500 mt-1",4,"ngIf"],[1,"px-3","py-1","bg-blue-500","text-white","text-sm","rounded","hover:bg-blue-600",3,"click"],[1,"text-sm","text-gray-500","mt-1"],[1,"bg-white","rounded-lg","shadow","p-6","text-center","md:col-span-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"mt-2","text-sm","text-gray-500"],[1,"flex","justify-between","items-center","mb-4"],["class","bg-white p-4 rounded-lg shadow border-l-4",3,"border-green-500","border-red-500","border-blue-500",4,"ngFor","ngForOf"],[1,"bg-white","p-4","rounded-lg","shadow","border-l-4"],[1,"ml-1"],[1,"px-2","py-1","text-xs","rounded-full",3,"ngClass"],[1,"mt-2","text-xs","text-gray-500","flex","justify-between"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"p-2","border","rounded-lg"],[1,"flex","justify-between","items-center"],[1,"text-xs","flex","items-center"],[1,"ml-1","px-1","py-0.5","rounded","text-xs",3,"ngClass"],[1,"px-2","py-1","bg-blue-500","text-white","text-xs","rounded","hover:bg-blue-600",3,"click"],[1,"text-center","py-3","text-gray-500","text-sm"],[1,"text-center","mt-2"],[1,"text-xs","text-gray-600"],[1,"px-1.5","py-0.5","text-xs","rounded-full",3,"ngClass"],[1,"mt-1","text-xs","text-gray-500"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1),se(2,tse,2,0,"button",2)(3,nse,2,0,"button",2)(4,rse,2,0,"button",3)(5,ise,2,0,"button",4)(6,sse,2,0,"button",3)(7,ose,2,0,"button",3)(8,ase,2,0,"button",4),f(9,"button",5),J("click",function(){return r.activeTab="balance"}),v(10," Saldo "),p()(),f(11,"div",6)(12,"div",7)(13,"button",5),J("click",function(){return r.activeTab="inventory"}),v(14," Inventario "),p(),f(15,"button",5),J("click",function(){return r.activeTab="dishes"}),v(16," Platos "),p(),f(17,"button",5),J("click",function(){return r.activeTab="movements"}),v(18," Movimientos "),p()()(),f(19,"div",8)(20,"div",9)(21,"div",10),xe(),f(22,"svg",11),ae(23,"path",12),p()(),Pe(),f(24,"input",13),He("ngModelChange",function(s){return ze(r.searchTerm,s)||(r.searchTerm=s),s}),p()(),f(25,"div",14)(26,"button",15),J("click",function(){return r.showFilters=!r.showFilters}),f(27,"span"),v(28,"Filtros"),p(),xe(),f(29,"svg",16),ae(30,"path",17),p()(),se(31,lse,21,3,"div",18),p()(),se(32,use,2,0,"div",19)(33,dse,3,1,"div",20),Pe(),f(34,"div",21),se(35,_se,8,3,"div",22)(36,Sse,6,2,"div",23)(37,zse,31,5,"div",23)(38,Qse,9,3,"div",23)(39,Jse,9,2,"div",23),f(40,"div",24),ae(41,"div",25),f(42,"div",26)(43,"div",27)(44,"h3",28),v(45,"Platos con Inventario"),p(),f(46,"div",29),se(47,eoe,12,3,"div",30)(48,toe,2,0,"div",31)(49,noe,3,1,"div",32),p()(),f(50,"div",27)(51,"div",33)(52,"h3",34),v(53,"Movimientos Recientes"),p(),f(54,"button",35),J("click",function(){return r.activeTab="movements"}),v(55," Ver todos "),p()(),f(56,"div",36),se(57,ioe,15,13,"div",30)(58,soe,2,0,"div",31),p()(),f(59,"div",27)(60,"h3",28),v(61,"Resumen de Inventario"),p(),f(62,"div",37)(63,"div",38)(64,"span"),v(65,"Total art\xEDculos:"),p(),f(66,"span",39),v(67),p()(),f(68,"div",38)(69,"span"),v(70,"Stock bajo:"),p(),f(71,"span",40),v(72),p()(),f(73,"div",38)(74,"span"),v(75,"Agotados:"),p(),f(76,"span",41),v(77),p()(),f(78,"div",38)(79,"span"),v(80,"Inactivos:"),p(),f(81,"span",42),v(82),p()()()()()()()()),t&2&&(x(2),ee("ngIf",r.isEditing),x(),ee("ngIf",r.showMovementForm),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm&&r.activeTab!=="newItem"),x(),ee("ngIf",r.isEditing),x(),ee("ngIf",r.showMovementForm),x(),ee("ngIf",r.activeTab==="newItem"&&!r.isEditing&&!r.showMovementForm),x(),tt("border-b-2",r.activeTab==="balance")("border-blue-500",r.activeTab==="balance")("text-blue-600",r.activeTab==="balance"),x(4),tt("border-b-2",r.activeTab==="inventory")("border-blue-500",r.activeTab==="inventory")("text-blue-600",r.activeTab==="inventory"),x(2),tt("border-b-2",r.activeTab==="dishes")("border-blue-500",r.activeTab==="dishes")("text-blue-600",r.activeTab==="dishes"),x(2),tt("border-b-2",r.activeTab==="movements")("border-blue-500",r.activeTab==="movements")("text-blue-600",r.activeTab==="movements"),x(7),$e("ngModel",r.searchTerm),x(5),tt("rotate-180",r.showFilters),x(2),ee("ngIf",r.showFilters),x(),ee("ngIf",r.loading),x(),ee("ngIf",r.error),x(2),ee("ngIf",(r.isEditing||r.showMovementForm||r.activeTab==="newItem")&&!(r.loading||r.error)),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm&&r.activeTab==="balance"),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm&&(r.activeTab==="inventory"||!r.activeTab)&&r.activeTab!=="newItem"||r.activeTab===void 0&&!r.isEditing&&!r.showMovementForm&&r.activeTab!=="newItem"),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm&&r.activeTab==="dishes"),x(),ee("ngIf",!r.isEditing&&!r.showMovementForm&&r.activeTab==="movements"),x(8),ee("ngForOf",r.trackedDishes.slice(0,5)),x(),ee("ngIf",r.trackedDishes.length===0),x(),ee("ngIf",r.trackedDishes.length>5),x(8),ee("ngForOf",r.movements.slice(0,5)),x(),ee("ngIf",r.movements.length===0),x(9),De(r.inventoryItems.length),x(5),De(r.getLowStockCount()),x(5),De(r.getOutOfStockCount()),x(5),De(r.getInactiveCount()))},dependencies:[nn,tr,qs,sa,Ur,Qs,Ys,xr,Do,bc,ss,Br,Ao,pi]})};var Mo=Bs(Rs());var ooe=(n,e)=>({"bg-blue-500":n,"bg-gray-300 cursor-not-allowed":e}),aoe=(n,e)=>({"bg-gray-100":n,"bg-gray-100 opacity-50 cursor-not-allowed":e});function coe(n,e){if(n&1){let t=ye();f(0,"button",27),J("click",function(){Y(t);let i=R();return i.searchQuery="",X(i.filterProducts())}),xe(),f(1,"svg",28),ae(2,"path",29),p()()}}function loe(n,e){if(n&1){let t=ye();f(0,"button",35),J("click",function(){Y(t);let i=R(2);return i.searchQuery="",X(i.filterProducts())}),v(1," Limpiar b\xFAsqueda "),p()}}function uoe(n,e){if(n&1&&(f(0,"div",30),xe(),f(1,"svg",31),ae(2,"path",32),p(),Pe(),f(3,"p",33),v(4,"No se encontraron productos"),p(),se(5,loe,2,0,"button",34),p()),n&2){let t=R();x(5),ee("ngIf",t.searchQuery)}}function doe(n,e){if(n&1&&(f(0,"p",50),v(1),p()),n&2){let t=R().$implicit;x(),ie(" ",t.description,"")}}function foe(n,e){n&1&&(f(0,"span",54),v(1," Agotado "),p())}function hoe(n,e){if(n&1&&(f(0,"div",51)(1,"span",52),v(2),p(),se(3,foe,2,0,"span",53),p()),n&2){let t=R().$implicit;x(2),ie("Stock: ",t.stockQuantity!==void 0?t.stockQuantity:"N/A",""),x(),ee("ngIf",t.stockQuantity!==void 0&&t.stockQuantity===0)}}function poe(n,e){if(n&1){let t=ye();f(0,"div",40)(1,"div",41)(2,"h4",42),v(3),p(),se(4,doe,2,1,"p",43)(5,hoe,4,2,"div",44),p(),f(6,"div",45)(7,"span",46),v(8),p(),f(9,"button",47),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.addToCart(i))}),xe(),f(10,"svg",48),ae(11,"path",49),p()()()()}if(n&2){let t=e.$implicit;x(3),De(t.name),x(),ee("ngIf",t.description),x(),ee("ngIf",t.isTracked),x(3),ie("$",t.price.toFixed(2),""),x(),ee("disabled",t.isTracked&&t.stockQuantity!==void 0&&t.stockQuantity===0)("ngClass",vn(6,ooe,!(t.isTracked&&t.stockQuantity!==void 0&&t.stockQuantity===0),t.isTracked&&t.stockQuantity!==void 0&&t.stockQuantity===0))}}function moe(n,e){if(n&1&&(f(0,"div",36)(1,"div",22)(2,"h3",37),v(3),p()(),f(4,"div",25)(5,"div",38),se(6,poe,12,9,"div",39),p()()()),n&2){let t=e.$implicit;x(3),De(t.name),x(3),ee("ngForOf",t.items)}}function goe(n,e){if(n&1&&(f(0,"span",55),v(1),p()),n&2){let t=R();x(),ie(" ",t.cart.length," ")}}function voe(n,e){n&1&&(f(0,"div",30),xe(),f(1,"svg",31),ae(2,"path",32),p(),Pe(),f(3,"p",56),v(4,"Tu carrito est\xE1 vac\xEDo"),p()())}function _oe(n,e){if(n&1){let t=ye();f(0,"div",66)(1,"div",67)(2,"h4",42),v(3),p(),f(4,"p",68),v(5),p(),f(6,"p",69),v(7),p()(),f(8,"div",70)(9,"div",71)(10,"button",72),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.removeFromCart(i))}),v(11," - "),p(),f(12,"input",73),He("ngModelChange",function(i){let s=Y(t).$implicit;return ze(s.quantity,i)||(s.quantity=i),X(i)}),J("change",function(){let i=Y(t).$implicit,s=R(2);return X(s.updateCartItemQuantity(i,i.quantity))}),p(),f(13,"button",74),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.addToCart(i))}),v(14," + "),p()(),f(15,"div",45)(16,"p",75),v(17),p(),f(18,"button",76),J("click",function(){let i=Y(t).$implicit,s=R(2);return X(s.updateCartItemQuantity(i,0))}),xe(),f(19,"svg",77),ae(20,"path",78),p()()()()()}if(n&2){let t=e.$implicit;x(3),De(t.name),x(2),De(t.categoryName),x(2),ie("$",t.price.toFixed(2),""),x(5),$e("ngModel",t.quantity),ia("max",t.isTracked&&t.stockQuantity!==void 0?t.stockQuantity:999),x(),ee("disabled",t.isTracked&&t.stockQuantity!==void 0&&t.quantity>=t.stockQuantity)("ngClass",vn(8,aoe,!(t.isTracked&&t.stockQuantity!==void 0&&t.quantity>=t.stockQuantity),t.isTracked&&t.stockQuantity!==void 0&&t.quantity>=t.stockQuantity)),x(4),ie("$",t.subtotal.toFixed(2),"")}}function yoe(n,e){if(n&1){let t=ye();f(0,"div")(1,"div",57),se(2,_oe,21,11,"div",58),p(),f(3,"div",59)(4,"div",60)(5,"span",61),v(6,"Total:"),p(),f(7,"span",62),v(8),p()(),f(9,"div",63)(10,"button",64),J("click",function(){Y(t);let i=R();return X(i.processPayment())}),v(11),p(),f(12,"button",65),J("click",function(){Y(t);let i=R();return X(i.clearCart())}),v(13," Vaciar carrito "),p()()()()}if(n&2){let t=R();x(2),ee("ngForOf",t.cart),x(6),ie("$",t.totalAmount.toFixed(2),""),x(2),ee("disabled",t.isProcessingOrder),x(),ie(" ",t.isProcessingOrder?"Procesando...":"Ir a pagar"," ")}}var ix=class n{firestore=le(rn);router=le(Ht);inventoryService=le(Ul);cashRegisterService=le(ba);searchQuery="";storeCategories=[];filteredCategories=[];cart=[];totalAmount=0;isProcessingOrder=!1;storeCategoryIds=["JWXmTEO143llfKM5PmkU","p4r4p8ofhtPIOrf4M14c","UmMtTqxhOZETuKr7tVMd"];ngOnInit(){this.loadStoreCategories()}loadStoreCategories(){let e=it(this.firestore,"categories"),t=tn(e,yn("active","==",!0),Un("order","asc"));Vr(t,{idField:"id"}).subscribe(r=>{let i=new Map;r.filter(c=>this.storeCategoryIds.includes(c.id)).forEach(c=>{i.set(c.id,{id:c.id,name:c.name,items:[]})});let o=it(this.firestore,"menu"),a=tn(o,yn("active","==",!0));Vr(a,{idField:"id"}).subscribe(c=>{c.forEach(l=>{let u=l.categoryId;if(u&&i.has(u)){let d={id:l.id,name:l.name,price:Number(l.price)||0,quantity:0,description:l.description||"",isTracked:l.isTracked||!1,stockQuantity:l.stockQuantity||0,categoryId:u,categoryName:i.get(u)?.name||""};i.get(u)?.items.push(d)}}),this.storeCategories=Array.from(i.values()).filter(l=>l.items.length>0),this.filteredCategories=[...this.storeCategories],this.storeCategories.length===0&&Mo.default.fire("Tienda sin productos","No hay productos configurados para la tienda","info")},c=>{Mo.default.fire("Error","No se pudo cargar los productos","error"),console.error("Error loading products:",c)})},r=>{Mo.default.fire("Error","No se pudo cargar las categor\xEDas","error"),console.error("Error loading categories:",r)})}filterProducts(){let e=this.searchQuery.toLowerCase();this.filteredCategories=this.storeCategories.map(t=>Te(fe({},t),{items:t.items.filter(r=>r.name.toLowerCase().includes(e))})).filter(t=>t.items.length>0)}addToCart(e){if(e.isTracked&&typeof e.stockQuantity=="number"){let r=this.cart.find(s=>s.id===e.id),i=r?r.quantity:0;if(e.stockQuantity<=i){Mo.default.fire({icon:"error",title:"Stock insuficiente",text:`Solo hay ${e.stockQuantity} unidades disponibles de "${e.name}"`,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});return}}let t=this.cart.findIndex(r=>r.id===e.id);if(t!==-1)this.cart[t].quantity+=1,this.cart[t].subtotal=this.cart[t].price*this.cart[t].quantity;else{let r=Te(fe({},e),{quantity:1,subtotal:e.price});this.cart.push(r)}this.updateCartTotal(),Mo.default.fire({icon:"success",title:"Agregado al carrito",text:`${e.name} agregado al carrito`,toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3})}removeFromCart(e){let t=this.cart.findIndex(r=>r.id===e.id);t!==-1&&(this.cart[t].quantity-=1,this.cart[t].quantity<=0?this.cart.splice(t,1):this.cart[t].subtotal=this.cart[t].price*this.cart[t].quantity,this.updateCartTotal())}updateCartItemQuantity(e,t){e.isTracked&&typeof e.stockQuantity=="number"&&t>e.stockQuantity&&(Mo.default.fire({icon:"error",title:"Stock insuficiente",text:`Solo hay ${e.stockQuantity} unidades disponibles de "${e.name}"`,toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),t=e.stockQuantity);let r=this.cart.findIndex(i=>i.id===e.id);r!==-1&&(t<=0?this.cart.splice(r,1):(this.cart[r].quantity=t,this.cart[r].subtotal=this.cart[r].price*t),this.updateCartTotal())}clearCart(){this.cart.length!==0&&Mo.default.fire({title:"\xBFLimpiar carrito?",text:"\xBFEst\xE1s seguro de que deseas vaciar el carrito?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, vaciar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.cart=[],this.updateCartTotal(),Mo.default.fire({icon:"success",title:"Carrito vac\xEDo",toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3}))})}updateCartTotal(){this.totalAmount=this.cart.reduce((e,t)=>e+t.subtotal,0)}processPayment(){return W(this,null,function*(){if(this.cart.length===0){Mo.default.fire("Carrito vac\xEDo","Agrega productos al carrito antes de continuar","warning");return}if(!this.isProcessingOrder){this.isProcessingOrder=!0;try{let e={items:this.cart.map(i=>({id:i.id,name:i.name,price:i.price,quantity:i.quantity,categoryId:i.categoryId,categoryName:i.categoryName,subtotal:i.subtotal,status:"Listos para servir"})),total:this.totalAmount,date:new Date,type:"store",status:"Listos para servir",customer:{name:"Cliente de Tienda"},tables:["Tienda"]},t=it(this.firestore,"orders"),r=yield yr(t,e);this.isProcessingOrder=!1,this.router.navigate(["/cobrar",r.id])}catch(e){console.error("Error al procesar la venta:",e),Mo.default.fire("Error","No se pudo completar la venta","error"),this.isProcessingOrder=!1}}})}goBack(){this.router.navigate(["/"])}getItemInCart(e){return this.cart.find(t=>t.id===e)}getItemQuantityInCart(e){let t=this.getItemInCart(e);return t?t.quantity:0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-store"]],standalone:!0,features:[Jt],decls:36,vars:7,consts:[[1,"container","mx-auto","px-4","py-6"],[1,"bg-blue-500","rounded-xl","p-6","mb-6","shadow-md"],[1,"flex","justify-between","items-center"],[1,"text-2xl","lg:text-3xl","font-bold","text-white"],[1,"text-white","text-opacity-90","mt-3"],[1,"text-center","mb-6","text-sm","text-gray-600","bg-blue-50","p-4","rounded-xl","border","border-blue-100"],[1,"font-medium"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6"],[1,"lg:col-span-2"],[1,"bg-white","rounded-xl","shadow-md","p-6","mb-6"],[1,"text-xl","font-semibold","text-gray-800","mb-4"],[1,"mb-6"],[1,"relative"],["type","text","placeholder","Buscar productos...",1,"w-full","px-4","py-3","pl-12","border","border-gray-300","rounded-xl","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","input","ngModel"],[1,"absolute","inset-y-0","left-0","pl-4","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["class","absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-gray-700",3,"click",4,"ngIf"],["class","text-center py-8",4,"ngIf"],["class","bg-white rounded-xl shadow-md overflow-hidden mb-6",4,"ngFor","ngForOf"],[1,"lg:col-span-1"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","sticky","top-4"],[1,"bg-blue-500","py-3","px-6"],[1,"text-lg","font-semibold","text-white","flex","justify-between","items-center"],["class","bg-white text-blue-600 text-xs px-2 py-1 rounded-full",4,"ngIf"],[1,"p-6"],[4,"ngIf"],[1,"absolute","inset-y-0","right-0","pr-4","flex","items-center","text-gray-500","hover:text-gray-700",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-center","py-8"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-16","w-16","mx-auto","text-gray-300","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","1.5","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"text-gray-500","mb-2"],["class","mt-2 text-blue-500 hover:underline",3,"click",4,"ngIf"],[1,"mt-2","text-blue-500","hover:underline",3,"click"],[1,"bg-white","rounded-xl","shadow-md","overflow-hidden","mb-6"],[1,"text-lg","font-semibold","text-white"],[1,"space-y-4"],["class","flex justify-between items-center p-4 border border-gray-100 rounded-lg hover:bg-gray-50",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","p-4","border","border-gray-100","rounded-lg","hover:bg-gray-50"],[1,"flex-grow"],[1,"font-medium","text-gray-800"],["class","text-sm text-gray-600 mt-1 line-clamp-1",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"flex","items-center"],[1,"text-lg","font-semibold","text-gray-700","mr-4"],[1,"text-white","py-2","px-4","rounded-lg",3,"click","disabled","ngClass"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"text-sm","text-gray-600","mt-1","line-clamp-1"],[1,"mt-2"],[1,"text-xs","text-gray-500"],["class","ml-1 px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-800",4,"ngIf"],[1,"ml-1","px-2","py-0.5","rounded-full","text-xs","bg-red-100","text-red-800"],[1,"bg-white","text-blue-600","text-xs","px-2","py-1","rounded-full"],[1,"text-gray-500"],[1,"max-h-96","overflow-y-auto","mb-6"],["class","flex justify-between items-start py-4 border-b border-gray-100 last:border-b-0",4,"ngFor","ngForOf"],[1,"border-t","border-gray-200","pt-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"font-medium","text-gray-700"],[1,"text-xl","font-bold","text-gray-800"],[1,"flex","flex-col","space-y-3"],[1,"bg-green-500","text-white","py-3","px-4","rounded-lg","disabled:bg-green-300","disabled:cursor-not-allowed",3,"click","disabled"],[1,"text-red-600","text-sm","text-center","py-2",3,"click"],[1,"flex","justify-between","items-start","py-4","border-b","border-gray-100","last:border-b-0"],[1,"flex-grow","pr-4"],[1,"text-sm","text-gray-500","mt-1"],[1,"text-gray-700","mt-1"],[1,"flex","flex-col","items-end"],[1,"flex","items-center","mb-2","border","border-gray-200","rounded-lg","overflow-hidden"],[1,"bg-gray-100","text-gray-700","px-3","py-1",3,"click"],["type","number","min","1",1,"w-10","text-center","border-0","py-1","focus:outline-none","text-sm",3,"ngModelChange","change","ngModel"],[1,"text-gray-700","px-3","py-1",3,"click","disabled","ngClass"],[1,"text-sm","font-medium"],[1,"ml-2","text-red-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),v(4,"Tienda"),p()(),f(5,"p",4),v(6," Productos disponibles para compra directa, sin pasar por cocina "),p()(),f(7,"div",5)(8,"p"),v(9,"Esta secci\xF3n muestra exclusivamente productos de: "),f(10,"span",6),v(11,"Piscina, Tienda y Helader\xEDa"),p()()(),f(12,"div",7)(13,"div",8)(14,"div",9)(15,"h2",10),v(16,"Productos Disponibles"),p(),f(17,"div",11)(18,"div",12)(19,"input",13),He("ngModelChange",function(s){return ze(r.searchQuery,s)||(r.searchQuery=s),s}),J("input",function(){return r.filterProducts()}),p(),f(20,"div",14),xe(),f(21,"svg",15),ae(22,"path",16),p()(),se(23,coe,3,0,"button",17),p()(),se(24,uoe,6,1,"div",18),p(),se(25,moe,7,2,"div",19),p(),Pe(),f(26,"div",20)(27,"div",21)(28,"div",22)(29,"h2",23)(30,"span"),v(31,"Mi Carrito"),p(),se(32,goe,2,1,"span",24),p()(),f(33,"div",25),se(34,voe,5,0,"div",18)(35,yoe,14,4,"div",26),p()()()()()),t&2&&(x(19),$e("ngModel",r.searchQuery),x(4),ee("ngIf",r.searchQuery),x(),ee("ngIf",r.filteredCategories.length===0),x(),ee("ngForOf",r.filteredCategories),x(7),ee("ngIf",r.cart.length>0),x(2),ee("ngIf",r.cart.length===0),x(),ee("ngIf",r.cart.length>0))},dependencies:[nn,tr,qs,sa,Ur,xr,Do,Br,Ao,pi],styles:['@charset "UTF-8";@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}.pulse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1s ease-in-out}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}button[disabled][_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.low-stock[_ngcontent-%COMP%]{transition:all .3s ease}.low-stock[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.product-card[_ngcontent-%COMP%]{transition:all .2s ease}.product-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}']})};function fm(n){return n+.5|0}var jl=(n,e,t)=>Math.max(Math.min(n,t),e);function um(n){return jl(fm(n*2.55),0,255)}function $l(n){return jl(fm(n*255),0,255)}function Ec(n){return jl(fm(n/2.55)/100,0,1)}function OL(n){return jl(fm(n*100),0,100)}var Xs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hD=[..."0123456789ABCDEF"],xoe=n=>hD[n&15],woe=n=>hD[(n&240)>>4]+hD[n&15],sx=n=>(n&240)>>4===(n&15),boe=n=>sx(n.r)&&sx(n.g)&&sx(n.b)&&sx(n.a);function Eoe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Xs[n[1]]*17,g:255&Xs[n[2]]*17,b:255&Xs[n[3]]*17,a:e===5?Xs[n[4]]*17:255}:(e===7||e===9)&&(t={r:Xs[n[1]]<<4|Xs[n[2]],g:Xs[n[3]]<<4|Xs[n[4]],b:Xs[n[5]]<<4|Xs[n[6]],a:e===9?Xs[n[7]]<<4|Xs[n[8]]:255})),t}var Coe=(n,e)=>n<255?e(n):"";function Soe(n){var e=boe(n)?xoe:woe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Coe(n.a,e):void 0}var Ioe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function BL(n,e,t){let r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Toe(n,e,t){let r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Doe(n,e,t){let r=BL(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Aoe(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function pD(n){let t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=Aoe(t,r,i,u,s),c=c*60+.5),[c|0,l||0,a]}function mD(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map($l)}function gD(n,e,t){return mD(BL,n,e,t)}function koe(n,e,t){return mD(Doe,n,e,t)}function Moe(n,e,t){return mD(Toe,n,e,t)}function UL(n){return(n%360+360)%360}function Roe(n){let e=Ioe.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?um(+e[5]):$l(+e[5]));let i=UL(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=koe(i,s,o):e[1]==="hsv"?r=Moe(i,s,o):r=gD(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function Poe(n,e){var t=pD(n);t[0]=UL(t[0]+e),t=gD(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Foe(n){if(!n)return;let e=pD(n),t=e[0],r=OL(e[1]),i=OL(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${Ec(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var NL={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},LL={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ooe(){let n={},e=Object.keys(LL),t=Object.keys(NL),r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<t.length;i++)s=t[i],a=a.replace(s,NL[s]);s=parseInt(LL[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var ox;function Noe(n){ox||(ox=Ooe(),ox.transparent=[0,0,0,0]);let e=ox[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Loe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Voe(n){let e=Loe.exec(n),t=255,r,i,s;if(e){if(e[7]!==r){let o=+e[7];t=e[8]?um(o):jl(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?um(r):jl(r,0,255)),i=255&(e[4]?um(i):jl(i,0,255)),s=255&(e[6]?um(s):jl(s,0,255)),{r,g:i,b:s,a:t}}}function Boe(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ec(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var fD=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Dh=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Uoe(n,e,t){let r=Dh(Ec(n.r)),i=Dh(Ec(n.g)),s=Dh(Ec(n.b));return{r:$l(fD(r+t*(Dh(Ec(e.r))-r))),g:$l(fD(i+t*(Dh(Ec(e.g))-i))),b:$l(fD(s+t*(Dh(Ec(e.b))-s))),a:n.a+t*(e.a-n.a)}}function ax(n,e,t){if(n){let r=pD(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=gD(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function jL(n,e){return n&&Object.assign(e||{},n)}function VL(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=$l(n[3]))):(e=jL(n,{r:0,g:0,b:0,a:1}),e.a=$l(e.a)),e}function joe(n){return n.charAt(0)==="r"?Voe(n):Roe(n)}var dm=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=VL(e):t==="string"&&(r=Eoe(e)||Noe(e)||joe(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=jL(this._rgb);return e&&(e.a=Ec(e.a)),e}set rgb(e){this._rgb=VL(e)}rgbString(){return this._valid?Boe(this._rgb):void 0}hexString(){return this._valid?Soe(this._rgb):void 0}hslString(){return this._valid?Foe(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,r.r=255&l*r.r+s*i.r+.5,r.g=255&l*r.g+s*i.g+.5,r.b=255&l*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Uoe(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=$l(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=fm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ax(this._rgb,2,e),this}darken(e){return ax(this._rgb,2,-e),this}saturate(e){return ax(this._rgb,1,e),this}desaturate(e){return ax(this._rgb,1,-e),this}rotate(e){return Poe(this._rgb,e),this}};function Ia(){}var ZL=(()=>{let n=0;return()=>n++})();function Nt(n){return n==null}function Hn(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ur(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function as(n,e){return ur(n)?n:e}function bt(n,e){return typeof n>"u"?e:n}var JL=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,xD=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function On(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function mn(n,e,t,r){let i,s,o;if(Hn(n))if(s=n.length,r)for(i=s-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<s;i++)e.call(t,n[i],i);else if(Bt(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)e.call(t,n[o[i]],o[i])}function mm(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function dx(n){if(Hn(n))return n.map(dx);if(Bt(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=dx(n[t[i]]);return e}return n}function eV(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function $oe(n,e,t,r){if(!eV(n))return;let i=e[n],s=t[n];Bt(i)&&Bt(s)?kh(i,s,r):e[n]=dx(s)}function kh(n,e,t){let r=Hn(e)?e:[e],i=r.length;if(!Bt(n))return n;t=t||{};let s=t.merger||$oe,o;for(let a=0;a<i;++a){if(o=r[a],!Bt(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function Rh(n,e){return kh(n,e,{merger:Hoe})}function Hoe(n,e,t){if(!eV(n))return;let r=e[n],i=t[n];Bt(r)&&Bt(i)?Rh(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=dx(i))}var $L={"":n=>n,x:n=>n.x,y:n=>n.y};function zoe(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function Woe(n){let e=zoe(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function Ic(n,e){return($L[e]||($L[e]=Woe(e)))(n)}function mx(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Ph=n=>typeof n<"u",Cc=n=>typeof n=="function",wD=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function tV(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var zn=Math.PI,Wn=2*zn,qoe=Wn+zn,fx=Number.POSITIVE_INFINITY,Goe=zn/180,wr=zn/2,xd=zn/4,HL=zn*2/3,Sc=Math.log10,Ro=Math.sign;function Fh(n,e,t){return Math.abs(n-e)<t}function bD(n){let e=Math.round(n);n=Fh(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Sc(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function nV(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function Koe(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Ed(n){return!Koe(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function rV(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function ED(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Zs(n){return n*(zn/180)}function gx(n){return n*(180/zn)}function CD(n){if(!ur(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function SD(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),s=Math.atan2(r,t);return s<-.5*zn&&(s+=Wn),{angle:s,distance:i}}function hx(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Qoe(n,e){return(n-e+qoe)%Wn-zn}function os(n){return(n%Wn+Wn)%Wn}function Oh(n,e,t,r){let i=os(n),s=os(e),o=os(t),a=os(s-i),c=os(o-i),l=os(i-s),u=os(i-o);return i===s||i===o||r&&s===o||a>c&&l<u}function Xr(n,e,t){return Math.max(e,Math.min(t,n))}function iV(n){return Xr(n,-32768,32767)}function Ta(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function vx(n,e,t){t=t||(o=>n[o]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}var Ca=(n,e,t,r)=>vx(n,t,r?i=>{let s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),sV=(n,e,t)=>vx(n,t,r=>n[r][e]>=t);function oV(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var aV=["push","pop","shift","splice","unshift"];function cV(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),aV.forEach(t=>{let r="_onData"+mx(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function ID(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(aV.forEach(s=>{delete n[s]}),delete n._chartjs)}function TD(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var DD=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function AD(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,DD.call(window,()=>{r=!1,n.apply(e,t)}))}}function lV(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var _x=n=>n==="start"?"left":n==="end"?"right":"center",mi=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,uV=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function kD(n,e,t){let r=e.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:m,minDefined:g,maxDefined:w}=o.getUserBounds();if(g){if(i=Math.min(Ca(c,u,d).lo,t?r:Ca(e,u,o.getPixelForValue(d)).lo),l){let y=c.slice(0,i+1).reverse().findIndex(E=>!Nt(E[a.axis]));i-=Math.max(0,y)}i=Xr(i,0,r-1)}if(w){let y=Math.max(Ca(c,o.axis,m,!0).hi+1,t?0:Ca(e,u,o.getPixelForValue(m),!0).hi+1);if(l){let E=c.slice(y-1).findIndex(M=>!Nt(M[a.axis]));y+=Math.max(0,E)}s=Xr(y,i,r)-i}else s=r-i}return{start:i,count:s}}function MD(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}var cx=n=>n===0||n===1,zL=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Wn/t)),WL=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Wn/t)+1,Ah={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*wr)+1,easeOutSine:n=>Math.sin(n*wr),easeInOutSine:n=>-.5*(Math.cos(zn*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>cx(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>cx(n)?n:zL(n,.075,.3),easeOutElastic:n=>cx(n)?n:WL(n,.075,.3),easeInOutElastic(n){return cx(n)?n:n<.5?.5*zL(n*2,.1125,.45):.5+.5*WL(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ah.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ah.easeInBounce(n*2)*.5:Ah.easeOutBounce(n*2-1)*.5+.5};function RD(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function PD(n){return RD(n)?n:new dm(n)}function vD(n){return RD(n)?n:new dm(n).saturate(.5).darken(.1).hexString()}var Yoe=["x","y","borderWidth","radius","tension"],Xoe=["color","borderColor","backgroundColor"];function Zoe(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Xoe},numbers:{type:"number",properties:Yoe}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Joe(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var qL=new Map;function eae(n,e){e=e||{};let t=n+JSON.stringify(e),r=qL.get(t);return r||(r=new Intl.NumberFormat(n,e),qL.set(t,r)),r}function Nh(n,e,t){return eae(e,t).format(n)}var dV={values(n){return Hn(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),s=tae(n,t)}let o=Sc(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Nh(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(Sc(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?dV.numeric.call(this,n,e,t):""}};function tae(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var gm={formatters:dV};function nae(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:gm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var zl=Object.create(null),yx=Object.create(null);function hm(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function _D(n,e,t){return typeof e=="string"?kh(hm(n,e),t):kh(hm(n,""),e)}var yD=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>vD(i.backgroundColor),this.hoverBorderColor=(r,i)=>vD(i.borderColor),this.hoverColor=(r,i)=>vD(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return _D(this,e,t)}get(e){return hm(this,e)}describe(e,t){return _D(yx,e,t)}override(e,t){return _D(zl,e,t)}route(e,t,r,i){let s=hm(this,e),o=hm(this,r),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[i];return Bt(c)?Object.assign({},l,c):bt(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Kn=new yD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zoe,Joe,nae]);function rae(n){return!n||Nt(n.size)||Nt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function pm(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function fV(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,m;for(c=0;c<a;c++)if(d=t[c],d!=null&&!Hn(d))o=pm(n,i,s,o,d);else if(Hn(d))for(l=0,u=d.length;l<u;l++)m=d[l],m!=null&&!Hn(m)&&(o=pm(n,i,s,o,m));n.restore();let g=s.length/2;if(g>t.length){for(c=0;c<g;c++)delete i[s[c]];s.splice(0,g)}return o}function Wl(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function FD(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function xx(n,e,t,r){OD(n,e,t,r,null)}function OD(n,e,t,r,i){let s,o,a,c,l,u,d,m,g=e.pointStyle,w=e.rotation,y=e.radius,E=(w||0)*Goe;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(E),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(y)||y<=0)){switch(n.beginPath(),g){default:i?n.ellipse(t,r,i/2,y,0,0,Wn):n.arc(t,r,y,0,Wn),n.closePath();break;case"triangle":u=i?i/2:y,n.moveTo(t+Math.sin(E)*u,r-Math.cos(E)*y),E+=HL,n.lineTo(t+Math.sin(E)*u,r-Math.cos(E)*y),E+=HL,n.lineTo(t+Math.sin(E)*u,r-Math.cos(E)*y),n.closePath();break;case"rectRounded":l=y*.516,c=y-l,o=Math.cos(E+xd)*c,d=Math.cos(E+xd)*(i?i/2-l:c),a=Math.sin(E+xd)*c,m=Math.sin(E+xd)*(i?i/2-l:c),n.arc(t-d,r-a,l,E-zn,E-wr),n.arc(t+m,r-o,l,E-wr,E),n.arc(t+d,r+a,l,E,E+wr),n.arc(t-m,r+o,l,E+wr,E+zn),n.closePath();break;case"rect":if(!w){c=Math.SQRT1_2*y,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}E+=xd;case"rectRot":d=Math.cos(E)*(i?i/2:y),o=Math.cos(E)*y,a=Math.sin(E)*y,m=Math.sin(E)*(i?i/2:y),n.moveTo(t-d,r-a),n.lineTo(t+m,r-o),n.lineTo(t+d,r+a),n.lineTo(t-m,r+o),n.closePath();break;case"crossRot":E+=xd;case"cross":d=Math.cos(E)*(i?i/2:y),o=Math.cos(E)*y,a=Math.sin(E)*y,m=Math.sin(E)*(i?i/2:y),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+m,r-o),n.lineTo(t-m,r+o);break;case"star":d=Math.cos(E)*(i?i/2:y),o=Math.cos(E)*y,a=Math.sin(E)*y,m=Math.sin(E)*(i?i/2:y),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+m,r-o),n.lineTo(t-m,r+o),E+=xd,d=Math.cos(E)*(i?i/2:y),o=Math.cos(E)*y,a=Math.sin(E)*y,m=Math.sin(E)*(i?i/2:y),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+m,r-o),n.lineTo(t-m,r+o);break;case"line":o=i?i/2:Math.cos(E)*y,a=Math.sin(E)*y,n.moveTo(t-o,r-a),n.lineTo(t+o,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(E)*(i?i/2:y),r+Math.sin(E)*y);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Sa(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function vm(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function _m(n){n.restore()}function hV(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function pV(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function iae(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Nt(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function sae(n,e,t,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function oae(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function ql(n,e,t,r,i,s={}){let o=Hn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=i.string,iae(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&oae(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Nt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,r,s.maxWidth)),n.fillText(l,t,r,s.maxWidth),sae(n,t,r,l,s),r+=Number(i.lineHeight);n.restore()}function Lh(n,e){let{x:t,y:r,w:i,h:s,radius:o}=e;n.arc(t+o.topLeft,r+o.topLeft,o.topLeft,1.5*zn,zn,!0),n.lineTo(t,r+s-o.bottomLeft),n.arc(t+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,zn,wr,!0),n.lineTo(t+i-o.bottomRight,r+s),n.arc(t+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,wr,0,!0),n.lineTo(t+i,r+o.topRight),n.arc(t+i-o.topRight,r+o.topRight,o.topRight,0,-wr,!0),n.lineTo(t+o.topLeft,r)}var aae=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,cae=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lae(n,e){let t=(""+n).match(aae);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var uae=n=>+n||0;function wx(n,e){let t={},r=Bt(e),i=r?Object.keys(e):e,s=Bt(n)?r?o=>bt(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of i)t[o]=uae(s(o));return t}function ND(n){return wx(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Gl(n){return wx(n,["topLeft","topRight","bottomLeft","bottomRight"])}function gi(n){let e=ND(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function jr(n,e){n=n||{},e=e||Kn.font;let t=bt(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=bt(n.style,e.style);r&&!(""+r).match(cae)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:bt(n.family,e.family),lineHeight:lae(bt(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:bt(n.weight,e.weight),string:""};return i.string=rae(i),i}function Vh(n,e,t,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&Hn(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function mV(n,e,t){let{min:r,max:i}=n,s=xD(e,(i-r)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Tc(n,e){return Object.assign(Object.create(n),e)}function bx(n,e=[""],t,r,i=()=>n[0]){let s=t||n;typeof r>"u"&&(r=_V("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>bx([a,...n],e,s,r)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return gV(a,c,()=>_ae(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return KL(a).includes(c)},ownKeys(a){return KL(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function bd(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:LD(n,r),setContext:s=>bd(n,s,t,r),override:s=>bd(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return gV(s,o,()=>fae(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function LD(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:Cc(t)?t:()=>t,isIndexable:Cc(r)?r:()=>r}}var dae=(n,e)=>n?n+mx(e):e,VD=(n,e)=>Bt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function gV(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function fae(n,e,t){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[e];return Cc(a)&&o.isScriptable(e)&&(a=hae(e,a,n,t)),Hn(a)&&a.length&&(a=pae(e,a,n,o.isIndexable)),VD(e,a)&&(a=bd(a,i,s&&s[e],o)),a}function hae(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||r);return a.delete(n),VD(n,c)&&(c=BD(i._scopes,i,n,c)),c}function pae(n,e,t,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(Bt(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=BD(l,i,n,u);e.push(bd(d,s,o&&o[n],a))}}return e}function vV(n,e,t){return Cc(n)?n(e,t):n}var mae=(n,e)=>n===!0?e:typeof n=="string"?Ic(e,n):void 0;function gae(n,e,t,r,i){for(let s of e){let o=mae(t,s);if(o){n.add(o);let a=vV(o._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(o===!1&&typeof r<"u"&&t!==r)return null}return!1}function BD(n,e,t,r){let i=e._rootScopes,s=vV(e._fallback,t,r),o=[...n,...i],a=new Set;a.add(r);let c=GL(a,o,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=GL(a,o,s,c,r),c===null)?!1:bx(Array.from(a),[""],i,s,()=>vae(e,t,r))}function GL(n,e,t,r,i){for(;t;)t=gae(n,e,t,r,i);return t}function vae(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return Hn(i)&&Bt(t)?t:i||{}}function _ae(n,e,t,r){let i;for(let s of e)if(i=_V(dae(s,n),t),typeof i<"u")return VD(n,i)?BD(t,r,n,i):i}function _V(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function KL(n){let e=n._keys;return e||(e=n._keys=yae(n._scopes)),e}function yae(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function UD(n,e,t,r){let{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=e[l],o[a]={r:i.parse(Ic(u,s),l)};return o}var xae=Number.EPSILON||1e-14,Mh=(n,e)=>e<n.length&&!n[e].skip&&n[e],yV=n=>n==="x"?"y":"x";function wae(n,e,t,r){let i=n.skip?e:n,s=e,o=t.skip?e:t,a=hx(s,i),c=hx(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=r*l,m=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+m*(o.x-i.x),y:s.y+m*(o.y-i.y)}}}function bae(n,e,t){let r=n.length,i,s,o,a,c,l=Mh(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Mh(n,u+1),!(!c||!l)){if(Fh(e[u],0,xae)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=i*o*e[u],t[u+1]=s*o*e[u])}}function Eae(n,e,t="x"){let r=yV(t),i=n.length,s,o,a,c=Mh(n,0);for(let l=0;l<i;++l){if(o=a,a=c,c=Mh(n,l+1),!a)continue;let u=a[t],d=a[r];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${r}`]=d-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${r}`]=d+s*e[l])}}function Cae(n,e="x"){let t=yV(e),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,c,l=Mh(n,0);for(o=0;o<r;++o)if(a=c,c=l,l=Mh(n,o+1),!!c){if(l){let u=l[e]-c[e];i[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?Ro(i[o-1])!==Ro(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}bae(n,i,s),Eae(n,s,e)}function lx(n,e,t){return Math.max(Math.min(n,t),e)}function Sae(n,e){let t,r,i,s,o,a=Sa(n[0],e);for(t=0,r=n.length;t<r;++t)o=s,s=a,a=t<r-1&&Sa(n[t+1],e),s&&(i=n[t],o&&(i.cp1x=lx(i.cp1x,e.left,e.right),i.cp1y=lx(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=lx(i.cp2x,e.left,e.right),i.cp2y=lx(i.cp2y,e.top,e.bottom)))}function xV(n,e,t,r,i){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Cae(n,i);else{let l=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=wae(l,a,n[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&Sae(n,t)}function Ex(){return typeof window<"u"&&typeof document<"u"}function Cx(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function px(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var Sx=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Iae(n,e){return Sx(n).getPropertyValue(e)}var Tae=["top","right","bottom","left"];function wd(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let s=Tae[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var Dae=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Aae(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,c;if(Dae(i,s,n.target))a=i,c=s;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Kl(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=Sx(t),s=i.boxSizing==="border-box",o=wd(i,"padding"),a=wd(i,"border","width"),{x:c,y:l,box:u}=Aae(n,t),d=o.left+(u&&a.left),m=o.top+(u&&a.top),{width:g,height:w}=e;return s&&(g-=o.width+a.width,w-=o.height+a.height),{x:Math.round((c-d)/g*t.width/r),y:Math.round((l-m)/w*t.height/r)}}function kae(n,e,t){let r,i;if(e===void 0||t===void 0){let s=n&&Cx(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=Sx(s),c=wd(a,"border","width"),l=wd(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,r=px(a.maxWidth,s,"clientWidth"),i=px(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||fx,maxHeight:i||fx}}var ux=n=>Math.round(n*10)/10;function wV(n,e,t,r){let i=Sx(n),s=wd(i,"margin"),o=px(i.maxWidth,n,"clientWidth")||fx,a=px(i.maxHeight,n,"clientHeight")||fx,c=kae(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let m=wd(i,"border","width"),g=wd(i,"padding");l-=g.width+m.width,u-=g.height+m.height}return l=Math.max(0,l-s.width),u=Math.max(0,r?l/r:u-s.height),l=ux(Math.min(l,o,c.maxWidth)),u=ux(Math.min(u,a,c.maxHeight)),l&&!u&&(u=ux(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=ux(Math.floor(u*r))),{width:l,height:u}}function jD(n,e,t){let r=e||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var bV=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};Ex()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function $D(n,e){let t=Iae(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Hl(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function EV(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function CV(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Hl(n,i,t),a=Hl(i,s,t),c=Hl(s,e,t),l=Hl(o,a,t),u=Hl(a,c,t);return Hl(l,u,t)}var Mae=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Rae=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Cd(n,e,t){return n?Mae(e,t):Rae()}function HD(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function zD(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function SV(n){return n==="angle"?{between:Oh,compare:Qoe,normalize:os}:{between:Ta,compare:(e,t)=>e-t,normalize:e=>e}}function QL({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Pae(n,e,t){let{property:r,start:i,end:s}=t,{between:o,normalize:a}=SV(r),c=e.length,{start:l,end:u,loop:d}=n,m,g;if(d){for(l+=c,u+=c,m=0,g=c;m<g&&o(a(e[l%c][r]),i,s);++m)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:n.style}}function WD(n,e,t){if(!t)return[n];let{property:r,start:i,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=SV(r),{start:u,end:d,loop:m,style:g}=Pae(n,e,t),w=[],y=!1,E=null,M,k,O,K=()=>c(i,O,M)&&a(i,O)!==0,Q=()=>a(s,M)===0||c(s,O,M),te=()=>y||K(),D=()=>!y||Q();for(let T=u,A=u;T<=d;++T)k=e[T%o],!k.skip&&(M=l(k[r]),M!==O&&(y=c(M,i,s),E===null&&te()&&(E=a(M,i)===0?T:A),E!==null&&D()&&(w.push(QL({start:E,end:T,loop:m,count:o,style:g})),E=null),A=T,O=M));return E!==null&&w.push(QL({start:E,end:d,loop:m,count:o,style:g})),w}function qD(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let s=WD(r[i],n.points,e);s.length&&t.push(...s)}return t}function Fae(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function Oae(n,e,t,r){let i=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function IV(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=Fae(t,i,s,r);if(r===!0)return YL(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+i:a,l=!!n._fullLoop&&o===0&&a===i-1;return YL(n,Oae(t,o,c,l),t,e)}function YL(n,e,t,r){return!r||!r.setContext||!t?e:Nae(n,e,t,r)}function Nae(n,e,t,r){let i=n._chart.getContext(),s=XL(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,d=e[0].start,m=d;function g(w,y,E,M){let k=a?-1:1;if(w!==y){for(w+=c;t[w%c].skip;)w-=k;for(;t[y%c].skip;)y+=k;w%c!==y%c&&(l.push({start:w%c,end:y%c,loop:E,style:M}),u=M,d=y%c)}}for(let w of e){d=a?d:w.start;let y=t[d%c],E;for(m=d+1;m<=w.end;m++){let M=t[m%c];E=XL(r.setContext(Tc(i,{type:"segment",p0:y,p1:M,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),Lae(E,u)&&g(d,m-1,w.loop,u),y=M,u=E}d<m-1&&g(d,m-1,w.loop,u)}return l}function XL(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Lae(n,e){if(!e)return!1;let t=[],r=function(i,s){return RD(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}var rA=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let s=t.listeners[i],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(r-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=DD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Dc=new rA,TV="transparent",Vae={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=PD(n||TV),i=r.valid&&PD(e||TV);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},iA=class{constructor(e,t,r,i){let s=t[r];i=Vh([e.to,i,s,e.from]);let o=Vh([e.from,s,i]);this._active=!0,this._fn=e.fn||Vae[e.type||typeof o],this._easing=Ah[e.easing]||Ah.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Vh([e.to,t,i,e.from]),this._from=Vh([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},Ox=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Bt(e))return;let t=Object.keys(Kn.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Bt(s))return;let o={};for(let a of t)o[a]=s[a];(Hn(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,t){let r=t.options,i=Uae(e,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&Bae(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){let r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],m=r.get(l);if(d)if(m&&d.active()){d.update(m,u,a);continue}else d.cancel();if(!m||!m.duration){e[l]=u;continue}s[l]=d=new iA(m,e,l,u),i.push(d)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return Dc.add(this._chart,r),!0}};function Bae(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function Uae(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function DV(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function jae(n,e,t){if(t===!1)return!1;let r=DV(n,t),i=DV(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function $ae(n){let e,t,r,i;return Bt(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function T6(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function AV(n,e,t,r={}){let i=n.keys,s=r.mode==="single",o,a,c,l;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===t){if(u=!0,r.all)continue;break}l=n.values[c],ur(l)&&(s||e===0||Ro(e)===Ro(l))&&(e+=l)}return!u&&!r.all?0:e}function Hae(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,u;for(c=0,l=o.length;c<l;++c)u=o[c],a[c]={[i]:u,[s]:n[u]};return a}function GD(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function zae(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function Wae(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function qae(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function kV(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function MV(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=r,c=s.axis,l=o.axis,u=zae(s,o,r),d=e.length,m;for(let g=0;g<d;++g){let w=e[g],{[c]:y,[l]:E}=w,M=w._stacks||(w._stacks={});m=M[l]=qae(i,u,y),m[a]=E,m._top=kV(m,o,!0,r.type),m._bottom=kV(m,o,!1,r.type);let k=m._visualValues||(m._visualValues={});k[a]=E}}function KD(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Gae(n,e){return Tc(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Kae(n,e,t){return Tc(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ym(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}var QD=n=>n==="reset"||n==="none",RV=(n,e)=>e?n:Object.assign({},n),Qae=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:T6(t,!0),values:null},Yl=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=GD(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ym(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(m,g,w,y)=>m==="x"?g:m==="r"?y:w,o=r.xAxisID=bt(i.xAxisID,KD(t,"x")),a=r.yAxisID=bt(i.yAxisID,KD(t,"y")),c=r.rAxisID=bt(i.rAxisID,KD(t,"r")),l=r.indexAxis,u=r.iAxisID=s(l,o,a,c),d=r.vAxisID=s(l,a,o,c);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&ID(this._data,this),t._stacked&&ym(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Bt(r)){let s=this._cachedMeta;this._data=Hae(r,s)}else if(i!==r){if(i){ID(i,this);let s=this._cachedMeta;ym(s),s._parsed=[]}r&&Object.isExtensible(r)&&cV(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=GD(r.vScale,r),r.stack!==i.stack&&(s=!0,ym(r),r.stack=i.stack),this._resyncElements(t),(s||o!==r._stacked)&&(MV(this,r._parsed),r._stacked=GD(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,c=o.axis,l=t===0&&r===s.length?!0:i._sorted,u=t>0&&i._parsed[t-1],d,m,g;if(this._parsing===!1)i._parsed=s,i._sorted=!0,g=s;else{Hn(s[t])?g=this.parseArrayData(i,s,t,r):Bt(s[t])?g=this.parseObjectData(i,s,t,r):g=this.parsePrimitiveData(i,s,t,r);let w=()=>m[c]===null||u&&m[c]<u[c];for(d=0;d<r;++d)i._parsed[d+t]=m=g[d],l&&(w()&&(l=!1),u=m);i._sorted=l}a&&MV(this,g)}parsePrimitiveData(t,r,i,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,m=new Array(s),g,w,y;for(g=0,w=s;g<w;++g)y=g+i,m[g]={[c]:d||o.parse(u[y],y),[l]:a.parse(r[y],y)};return m}parseArrayData(t,r,i,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,m;for(l=0,u=s;l<u;++l)d=l+i,m=r[d],c[l]={x:o.parse(m[0],d),y:a.parse(m[1],d)};return c}parseObjectData(t,r,i,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,m,g,w;for(d=0,m=s;d<m;++d)g=d+i,w=r[g],u[d]={x:o.parse(Ic(w,c),g),y:a.parse(Ic(w,l),g)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let s=this.chart,o=this._cachedMeta,a=r[t.axis],c={keys:T6(s,!0),values:r._stacks[t.axis]._visualValues};return AV(c,a,o.index,{mode:i})}updateRangeFromParsed(t,r,i,s){let o=i[r.axis],a=o===null?NaN:o,c=s&&i._stacks[r.axis];s&&c&&(s.values=c,a=AV(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&t===i.iScale,a=s.length,c=this._getOtherScale(t),l=Qae(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=Wae(c),g,w;function y(){w=s[g];let E=w[c.axis];return!ur(w[t.axis])||d>E||m<E}for(g=0;g<a&&!(!y()&&(this.updateRangeFromParsed(u,t,w,l),o));++g);if(o){for(g=a-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(u,t,w,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][t.axis],ur(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=$ae(bt(this.options.clip,jae(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let m=s[d];m.hidden||(m.active&&u?a.push(m):m.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=Kae(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=Gae(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=t+"-"+r,c=o[a],l=this.enableOptionSharing&&Ph(i);if(c)return RV(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),m=s?[`${t}Hover`,"hover",t,""]:[t,""],g=u.getOptionScopes(this.getDataset(),d),w=Object.keys(Kn.elements[t]),y=()=>this.getContext(i,s,r),E=u.resolveNamedOptions(g,w,y,m);return E.$shared&&(E.$shared=l,o[a]=Object.freeze(RV(E,l))),E}_resolveAnimations(t,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,r),g=d.getOptionScopes(this.getDataset(),m);l=d.createResolver(g,this.getContext(t,i,r))}let u=new Ox(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||QD(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(t,r,i,s){QD(s)?Object.assign(t,i):this._resolveAnimations(r,s).update(t,i)}updateSharedOptions(t,r,i){t&&!QD(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,s){t.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,r,i=!0){let s=this._cachedMeta,o=s.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,r),i&&this.updateElements(o,t,r,"reset")}updateElements(t,r,i,s){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(t,r);i._stacked&&ym(i,s)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,s]=t;this[r](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Yae(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=TD(r.sort((i,s)=>i-s))}return n._cache.$bar}function Xae(n){let e=n.iScale,t=Yae(e,n.type),r=e._length,i,s,o,a,c=()=>{o===32767||o===-32768||(Ph(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=t.length;i<s;++i)o=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),c();return r}function Zae(n,e,t,r){let i=t.barThickness,s,o;return Nt(i)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[n]-s/2}}function Jae(n,e,t,r){let i=e.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/r,ratio:t.barPercentage,start:l}}function ece(n,e,t,r){let i=t.parse(n[0],r),s=t.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:s,min:o,max:a}}function D6(n,e,t,r){return Hn(n)?ece(n,e,t,r):e[t.axis]=t.parse(n,r),e}function PV(n,e,t,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,c=[],l,u,d,m;for(l=t,u=t+r;l<u;++l)m=e[l],d={},d[i.axis]=a||i.parse(o[l],l),c.push(D6(m,d,s,l));return c}function YD(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function tce(n,e,t){return n!==0?Ro(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function nce(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function rce(n,e,t,r){let i=e.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=nce(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(s[FV(u,o,a,c)]=!0,i=l)),s[FV(i,o,a,c)]=!0,n.borderSkipped=s}function FV(n,e,t,r){return r?(n=ice(n,e,t),n=OV(n,t,e)):n=OV(n,e,t),n}function ice(n,e,t){return n===e?t:n===t?e:n}function OV(n,e,t){return n==="start"?e:n==="end"?t:n}function sce(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var oce=(()=>{class n extends Yl{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,s){return PV(t,r,i,s)}parseArrayData(t,r,i,s){return PV(t,r,i,s)}parseObjectData(t,r,i,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,m=[],g,w,y,E;for(g=i,w=i+s;g<w;++g)E=r[g],y={},y[o.axis]=o.parse(Ic(E,u),g),m.push(D6(Ic(E,d),y,a,g));return m}updateRangeFromParsed(t,r,i,s){super.updateRangeFromParsed(t,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(t),a=o._custom,c=YD(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:m,includeOptions:g}=this._getSharedOptions(r,s);for(let w=r;w<r+i;w++){let y=this.getParsed(w),E=o||Nt(y[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(w),M=this._calculateBarIndexPixels(w,d),k=(y._stacks||{})[c.axis],O={horizontal:u,base:E.base,enableBorderRadius:!k||YD(y._custom)||a===k._top||a===k._bottom,x:u?E.head:M.center,y:u?M.center:E.head,height:u?M.size:Math.abs(E.size),width:u?Math.abs(E.size):M.size};g&&(O.options=m||this.resolveDataElementOptions(w,t[w].active?"active":s));let K=O.options||t[w].options;rce(O,K,k,a),sce(O,K,d.ratio),this.updateElement(t[w],w,O,s)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=d=>{let m=d._parsed.find(w=>w[i.axis]===l),g=m&&m[d.vScale.axis];if(Nt(g)||isNaN(g))return!0};for(let d of s)if(!(r!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){let s=this._getStacks(t,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let c=t.barThickness;return{min:c||Xae(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,d=YD(u),m=l[r.axis],g=0,w=i?this.applyStack(r,l,i):m,y,E;w!==m&&(g=w-m,w=m),d&&(m=u.barStart,w=u.barEnd-u.barStart,m!==0&&Ro(m)!==Ro(u.barEnd)&&(g=0),g+=m);let M=!Nt(o)&&!d?o:g,k=r.getPixelForValue(M);if(this.chart.getDataVisibility(t)?y=r.getPixelForValue(g+w):y=k,E=y-k,Math.abs(E)<a){E=tce(E,r,c)*a,m===c&&(k-=E/2);let O=r.getPixelForDecimal(0),K=r.getPixelForDecimal(1),Q=Math.min(O,K),te=Math.max(O,K);k=Math.max(Math.min(k,te),Q),y=k+E,i&&!d&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(y)-r.getValueForPixel(k))}if(k===r.getPixelForValue(c)){let O=Ro(E)*r.getLineWidthForValue(c)/2;k+=O,E-=O}return{size:E,base:k,head:y,center:y+E/2}}_calculateBarIndexPixels(t,r){let i=r.scale,s=this.options,o=s.skipNull,a=bt(s.maxBarThickness,1/0),c,l;if(r.grouped){let u=o?this._getStackCount(t):r.stackCount,d=s.barThickness==="flex"?Jae(t,r,s,u):Zae(t,r,s,u),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);c=d.start+d.chunk*m+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})(),ace=(()=>{class n extends Yl{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,s){let o=super.parsePrimitiveData(t,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(t,r,i,s){let o=super.parseArrayData(t,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=bt(c[2],this.resolveDataElementOptions(a+i).radius)}return o}parseObjectData(t,r,i,s){let o=super.parseObjectData(t,r,i,s);for(let a=0;a<o.length;a++){let c=r[i+a];o[a]._custom=bt(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,s),d=a.axis,m=c.axis;for(let g=r;g<r+i;g++){let w=t[g],y=!o&&this.getParsed(g),E={},M=E[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(y[d]),k=E[m]=o?c.getBasePixel():c.getPixelForValue(y[m]);E.skip=isNaN(M)||isNaN(k),u&&(E.options=l||this.resolveDataElementOptions(g,w.active?"active":s),o&&(E.options.radius=0)),this.updateElement(w,g,E,s)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),s=super.resolveDataElementOptions(t,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=bt(i&&i._custom,o),s}}return n})();function cce(n,e,t){let r=1,i=1,s=0,o=0;if(e<Wn){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),d=Math.cos(c),m=Math.sin(c),g=(O,K,Q)=>Oh(O,a,c,!0)?1:Math.max(K,K*t,Q,Q*t),w=(O,K,Q)=>Oh(O,a,c,!0)?-1:Math.min(K,K*t,Q,Q*t),y=g(0,l,d),E=g(wr,u,m),M=w(zn,l,d),k=w(zn+wr,u,m);r=(y-M)/2,i=(E-k)/2,s=-(y+M)/2,o=-(E+k)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}var CA=(()=>{class n extends Yl{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=l=>+i[l];if(Bt(i[t])){let{key:l="value"}=this._parsing;o=u=>+Ic(i[u],l)}let a,c;for(a=t,c=t+r;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Zs(this.options.rotation-90)}_getCircumference(){return Zs(this.options.circumference)}_getRotationExtents(){let t=Wn,r=-Wn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),r=Math.max(r,o+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(JL(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:m}=this._getRotationExtents(),{ratioX:g,ratioY:w,offsetX:y,offsetY:E}=cce(m,d,l),M=(i.width-a)/g,k=(i.height-a)/w,O=Math.max(Math.min(M,k)/2,0),K=xD(this.options.radius,O),Q=Math.max(K*l,0),te=(K-Q)/this._getVisibleDatasetWeightTotal();this.offsetX=y*K,this.offsetY=E*K,s.total=this.calculateTotal(),this.outerRadius=K-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,r){let i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Wn)}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,d=(c.left+c.right)/2,m=(c.top+c.bottom)/2,g=o&&u.animateScale,w=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:E,includeOptions:M}=this._getSharedOptions(r,s),k=this._getRotation(),O;for(O=0;O<r;++O)k+=this._circumference(O,o);for(O=r;O<r+i;++O){let K=this._circumference(O,o),Q=t[O],te={x:d+this.offsetX,y:m+this.offsetY,startAngle:k,endAngle:k+K,circumference:K,outerRadius:y,innerRadius:w};M&&(te.options=E||this.resolveDataElementOptions(O,Q.active?"active":s)),k+=K,this.updateElement(Q,O,te,s)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,s;for(s=0;s<r.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?Wn*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=Nh(r._parsed[t],i.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let r=0,i=this.chart,s,o,a,c,l;if(!t){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,s=t.length;i<s;++i){let o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(bt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),lce=(()=>{class n extends Yl{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:c,count:l}=kD(r,s,a);this._drawStart=c,this._drawCount=l,MD(r)&&(c=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:m}=this._getSharedOptions(r,s),g=a.axis,w=c.axis,{spanGaps:y,segment:E}=this.options,M=Ed(y)?y:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||s==="none",O=r+i,K=t.length,Q=r>0&&this.getParsed(r-1);for(let te=0;te<K;++te){let D=t[te],T=k?D:{};if(te<r||te>=O){T.skip=!0;continue}let A=this.getParsed(te),F=Nt(A[w]),N=T[g]=a.getPixelForValue(A[g],te),V=T[w]=o||F?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,A,l):A[w],te);T.skip=isNaN(N)||isNaN(V)||F,T.stop=te>0&&Math.abs(A[g]-Q[g])>M,E&&(T.parsed=A,T.raw=u.data[te]),m&&(T.options=d||this.resolveDataElementOptions(te,D.active?"active":s)),k||this.updateElement(D,te,T,s),Q=A}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,s=t.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),A6=(()=>{class n extends Yl{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=t.legend.options;return r.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=Nh(r._parsed[t].r,i.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,r,i,s){return UD.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,s){let o=s==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,m=u.yCenter,g=u.getIndexAngle(0)-.5*zn,w=g,y,E=360/this.countVisibleElements();for(y=0;y<r;++y)w+=this._computeAngle(y,s,E);for(y=r;y<r+i;y++){let M=t[y],k=w,O=w+this._computeAngle(y,s,E),K=a.getDataVisibility(y)?u.getDistanceFromCenterForValue(this.getParsed(y).r):0;w=O,o&&(l.animateScale&&(K=0),l.animateRotate&&(k=O=g));let Q={x:d,y:m,innerRadius:0,outerRadius:K,startAngle:k,endAngle:O,options:this.resolveDataElementOptions(y,M.active?"active":s)};this.updateElement(M,y,Q,s)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?Zs(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),uce=(()=>{class n extends CA{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),dce=(()=>{class n extends Yl{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,s){return UD.bind(this)(t,r,i,s)}update(t){let r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(s,0,s.length,t)}updateElements(t,r,i,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=r;c<r+i;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":s),d=o.getPointPositionForValue(c,this.getParsed(c).r),m=a?o.xCenter:d.x,g=a?o.yCenter:d.y,w={x:m,y:g,angle:d.angle,skip:isNaN(m)||isNaN(g),options:u};this.updateElement(l,c,w,s)}}}return n})(),fce=(()=>{class n extends Yl{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled,{start:o,count:a}=kD(r,i,s);if(this._drawStart=o,this._drawCount=a,MD(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(r,s),m=this.getSharedOptions(d),g=this.includeOptions(s,m),w=a.axis,y=c.axis,{spanGaps:E,segment:M}=this.options,k=Ed(E)?E:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||o||s==="none",K=r>0&&this.getParsed(r-1);for(let Q=r;Q<r+i;++Q){let te=t[Q],D=this.getParsed(Q),T=O?te:{},A=Nt(D[y]),F=T[w]=a.getPixelForValue(D[w],Q),N=T[y]=o||A?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,D,l):D[y],Q);T.skip=isNaN(F)||isNaN(N)||A,T.stop=Q>0&&Math.abs(D[w]-K[w])>k,M&&(T.parsed=D,T.raw=u.data[Q]),g&&(T.options=m||this.resolveDataElementOptions(Q,te.active?"active":s)),O||this.updateElement(te,Q,T,s),K=D}this.updateSharedOptions(m,s,d)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}return n})(),hce=Object.freeze({__proto__:null,BarController:oce,BubbleController:ace,DoughnutController:CA,LineController:lce,PieController:uce,PolarAreaController:A6,RadarController:dce,ScatterController:fce});function Sd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var sA=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Sd()}parse(){return Sd()}format(){return Sd()}add(){return Sd()}diff(){return Sd()}startOf(){return Sd()}endOf(){return Sd()}},pce={_date:sA};function mce(n,e,t,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?sV:Ca;if(r){if(i._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){let m=l(s,e,t-d),g=l(s,e,t+d);return{lo:m.lo,hi:g.hi}}}}else{let u=l(s,e,t);if(c){let{vScale:d}=i._cachedMeta,{_parsed:m}=n,g=m.slice(0,u.lo+1).reverse().findIndex(y=>!Nt(y[d.axis]));u.lo-=Math.max(0,g);let w=m.slice(u.hi).findIndex(y=>!Nt(y[d.axis]));u.hi+=Math.max(0,w)}return u}}return{lo:0,hi:s.length-1}}function Am(n,e,t,r,i){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:m}=mce(s[a],e,o,i);for(let g=d;g<=m;++g){let w=u[g];w.skip||r(w,l,g)}}}function gce(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let s=e?Math.abs(r.x-i.x):0,o=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function XD(n,e,t,r,i){let s=[];return!i&&!n.isPointInArea(e)||Am(n,t,e,function(a,c,l){!i&&!Sa(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function vce(n,e,t,r){let i=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=SD(o,{x:e.x,y:e.y});Oh(d,l,u)&&i.push({element:o,datasetIndex:a,index:c})}return Am(n,t,e,s),i}function _ce(n,e,t,r,i,s){let o=[],a=gce(t),c=Number.POSITIVE_INFINITY;function l(u,d,m){let g=u.inRange(e.x,e.y,i);if(r&&!g)return;let w=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(w))&&!g)return;let E=a(e,w);E<c?(o=[{element:u,datasetIndex:d,index:m}],c=E):E===c&&o.push({element:u,datasetIndex:d,index:m})}return Am(n,t,e,l),o}function ZD(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?vce(n,e,t,i):_ce(n,e,t,r,i,s)}function NV(n,e,t,r,i){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return Am(n,t,e,(c,l,u)=>{c[o]&&c[o](e[t],i)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:s}var yce={evaluateInteractionItems:Am,modes:{index(n,e,t,r){let i=Kl(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?XD(n,i,s,r,o):ZD(n,i,s,!1,r,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=Kl(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?XD(n,i,s,r,o):ZD(n,i,s,!1,r,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=Kl(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return XD(n,i,s,r,o)},nearest(n,e,t,r){let i=Kl(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return ZD(n,i,s,t.intersect,r,o)},x(n,e,t,r){let i=Kl(e,n);return NV(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=Kl(e,n);return NV(n,i,"y",t.intersect,r)}}},k6=["left","top","right","bottom"];function xm(n,e){return n.filter(t=>t.pos===e)}function LV(n,e){return n.filter(t=>k6.indexOf(t.pos)===-1&&t.box.axis===e)}function wm(n,e){return n.sort((t,r)=>{let i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function xce(n){let e=[],t,r,i,s,o,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function wce(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:s}=t;if(!r||!k6.includes(i))continue;let o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function bce(n,e){let t=wce(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function Ece(n){let e=xce(n),t=wm(e.filter(l=>l.box.fullSize),!0),r=wm(xm(e,"left"),!0),i=wm(xm(e,"right")),s=wm(xm(e,"top"),!0),o=wm(xm(e,"bottom")),a=LV(e,"x"),c=LV(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:xm(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(o).concat(a)}}function VV(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function M6(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Cce(n,e,t,r){let{pos:i,box:s}=t,o=n.maxPadding;if(!Bt(i)){t.size&&(n[i]-=t.size);let d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[i]+=t.size}s.getPadding&&M6(o,s.getPadding());let a=Math.max(0,e.outerWidth-VV(o,n,"left","right")),c=Math.max(0,e.outerHeight-VV(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function Sce(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Ice(n,e){let t=e.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Cm(n,e,t,r){let i=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,Ice(a.horizontal,e));let{same:d,other:m}=Cce(e,t,a,r);l|=d&&i.length,u=u||m,c.fullSize||i.push(a)}return l&&Cm(i,e,t,r)||u}function Ix(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function BV(n,e,t,r){let i=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,m=l.size||c.height;Ph(l.start)&&(o=l.start),c.fullSize?Ix(c,i.left,o,t.outerWidth-i.right-i.left,m):Ix(c,e.left+l.placed,o,d,m),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,m=l.size||c.width;Ph(l.start)&&(s=l.start),c.fullSize?Ix(c,s,i.top,m,t.outerHeight-i.bottom-i.top):Ix(c,s,e.top+l.placed,m,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Pi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=gi(n.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(t-i.height,0),a=Ece(n.boxes),c=a.vertical,l=a.horizontal;mn(n.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});let u=c.reduce((y,E)=>E.box.options&&E.box.options.display===!1?y:y+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},i);M6(m,gi(r));let g=Object.assign({maxPadding:m,w:s,h:o,x:i.left,y:i.top},i),w=bce(c.concat(l),d);Cm(a.fullSize,g,d,w),Cm(c,g,d,w),Cm(l,g,d,w)&&Cm(c,g,d,w),Sce(g),BV(a.leftAndTop,g,d,w),g.x+=g.w,g.y+=g.h,BV(a.rightAndBottom,g,d,w),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},mn(a.chartArea,y=>{let E=y.box;Object.assign(E,n.chartArea),E.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Nx=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},oA=class extends Nx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Px="$chartjs",Tce={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},UV=n=>n===null||n==="";function Dce(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Px]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",UV(i)){let s=$D(n,"width");s!==void 0&&(n.width=s)}if(UV(r))if(n.style.height==="")n.height=n.width/(e||2);else{let s=$D(n,"height");s!==void 0&&(n.height=s)}return n}var R6=bV?{passive:!0}:!1;function Ace(n,e,t){n&&n.addEventListener(e,t,R6)}function kce(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,R6)}function Mce(n,e){let t=Tce[n.type]||n.type,{x:r,y:i}=Kl(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Lx(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Rce(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Lx(a.addedNodes,r),o=o&&!Lx(a.removedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Pce(n,e,t){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Lx(a.removedNodes,r),o=o&&!Lx(a.addedNodes,r);o&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var Im=new Map,jV=0;function P6(){let n=window.devicePixelRatio;n!==jV&&(jV=n,Im.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Fce(n,e){Im.size||window.addEventListener("resize",P6),Im.set(n,e)}function Oce(n){Im.delete(n),Im.size||window.removeEventListener("resize",P6)}function Nce(n,e,t){let r=n.canvas,i=r&&Cx(r);if(!i)return;let s=AD((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(i),Fce(n,s),o}function JD(n,e,t){t&&t.disconnect(),e==="resize"&&Oce(n)}function Lce(n,e,t){let r=n.canvas,i=AD(s=>{n.ctx!==null&&t(Mce(s,n))},n);return Ace(r,e,i),i}var aA=class extends Nx{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Dce(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[Px])return!1;let r=t[Px].initial;["height","width"].forEach(s=>{let o=r[s];Nt(o)?t.removeAttribute(s):t.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[Px],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),o={attach:Rce,detach:Pce,resize:Nce}[t]||Lce;i[t]=o(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:JD,detach:JD,resize:JD}[t]||kce)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return wV(e,t,r,i)}isAttached(e){let t=e&&Cx(e);return!!(t&&t.isConnected)}};function Vce(n){return!Ex()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?oA:aA}var Po=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return Ed(this.x)&&Ed(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Bce(n,e){let t=n.options.ticks,r=Uce(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?$ce(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>i)return Hce(e,l,s,o/i),l;let u=jce(s,e,i);if(o>0){let d,m,g=o>1?Math.round((c-a)/(o-1)):null;for(Tx(e,l,u,Nt(g)?0:a-g,a),d=0,m=o-1;d<m;d++)Tx(e,l,u,s[d],s[d+1]);return Tx(e,l,u,c,Nt(g)?e.length:c+g),l}return Tx(e,l,u),l}function Uce(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function jce(n,e,t){let r=zce(n),i=e.length/t;if(!r)return Math.max(i,1);let s=nV(r);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>i)return c}return Math.max(i,1)}function $ce(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Hce(n,e,t,r){let i=0,s=t[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(e.push(n[o]),i++,s=t[i*r])}function Tx(n,e,t,r,i){let s=bt(r,0),o=Math.min(bt(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function zce(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var Wce=n=>n==="left"?"right":n==="right"?"left":n,$V=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,HV=(n,e)=>Math.min(e||n,n);function zV(n,e){let t=[],r=n.length/e,i=n.length,s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function qce(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<s-a||c>o+a)))return c}function Gce(n,e){mn(n,t=>{let r=t.gc,i=r.length/2,s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function bm(n){return n.drawTicks?n.tickLength:0}function WV(n,e){if(!n.display)return 0;let t=jr(n.font,e),r=gi(n.padding);return(Hn(n.text)?n.text.length:1)*t.lineHeight+r.height}function Kce(n,e){return Tc(n,{scale:e,type:"scale"})}function Qce(n,e,t){return Tc(n,{tick:t,index:e,type:"tick"})}function Yce(n,e,t){let r=_x(n);return(t&&e!=="right"||!t&&e==="right")&&(r=Wce(r)),r}function Xce(n,e,t,r){let{top:i,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,m,g,w,y=o-i,E=a-s;if(n.isHorizontal()){if(g=mi(r,s,a),Bt(t)){let M=Object.keys(t)[0],k=t[M];w=u[M].getPixelForValue(k)+y-e}else t==="center"?w=(l.bottom+l.top)/2+y-e:w=$V(n,t,e);m=a-s}else{if(Bt(t)){let M=Object.keys(t)[0],k=t[M];g=u[M].getPixelForValue(k)-E+e}else t==="center"?g=(l.left+l.right)/2-E+e:g=$V(n,t,e);w=mi(r,o,i),d=t==="left"?-wr:wr}return{titleX:g,titleY:w,maxWidth:m,rotation:d}}var Td=class n extends Po{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=as(e,Number.POSITIVE_INFINITY),t=as(t,Number.NEGATIVE_INFINITY),r=as(r,Number.POSITIVE_INFINITY),i=as(i,Number.NEGATIVE_INFINITY),{min:as(e,r),max:as(t,i),minDefined:ur(e),maxDefined:ur(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,o.min)),s||(r=Math.max(r,o.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:as(t,as(r,t)),max:as(r,as(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){On(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=mV(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?zV(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Bce(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){On(this.options.afterUpdate,[this])}beforeSetDimensions(){On(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){On(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),On(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){On(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=On(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){On(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){On(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=HV(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation,o=i,a,c,l;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),d=u.widest.width,m=u.highest.height,g=Xr(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),d+6>a&&(a=g/(r-(e.offset?.5:1)),c=this.maxHeight-bm(e.grid)-t.padding-WV(e.title,this.chart.options.font),l=Math.sqrt(d*d+m*m),o=gx(Math.min(Math.asin(Xr((u.highest.height+6)/a,-1,1)),Math.asin(Xr(c/l,-1,1))-Math.asin(Xr(m/l,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){On(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){On(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=WV(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=bm(s)+c):(e.height=this.maxHeight,e.width=bm(s)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:m}=this._getLabelSizes(),g=r.padding*2,w=Zs(this.labelRotation),y=Math.cos(w),E=Math.sin(w);if(a){let M=r.mirror?0:E*d.width+y*m.height;e.height=Math.min(this.maxHeight,e.height+M+g)}else{let M=r.mirror?0:y*d.width+E*m.height;e.width=Math.min(this.maxWidth,e.width+M+g)}this._calculatePadding(l,u,E,y)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),m=0,g=0;c?l?(m=i*e.width,g=r*t.height):(m=r*e.height,g=i*t.width):s==="start"?g=t.width:s==="end"?m=e.width:s!=="inner"&&(m=e.width/2,g=t.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){On(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Nt(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=zV(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/HV(t,r)),l=0,u=0,d,m,g,w,y,E,M,k,O,K,Q;for(d=0;d<t;d+=c){if(w=e[d].label,y=this._resolveTickFontOptions(d),i.font=E=y.string,M=s[E]=s[E]||{data:{},gc:[]},k=y.lineHeight,O=K=0,!Nt(w)&&!Hn(w))O=pm(i,M.data,M.gc,O,w),K=k;else if(Hn(w))for(m=0,g=w.length;m<g;++m)Q=w[m],!Nt(Q)&&!Hn(Q)&&(O=pm(i,M.data,M.gc,O,Q),K+=k);o.push(O),a.push(K),l=Math.max(O,l),u=Math.max(K,u)}Gce(s,t);let te=o.indexOf(l),D=a.indexOf(u),T=A=>({width:o[A]||0,height:a[A]||0});return{first:T(0),last:T(t-1),widest:T(te),highest:T(D),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return iV(this._alignToPixels?Wl(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=Qce(this.getContext(),e,r))}return this.$context||(this.$context=Kce(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Zs(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),m=bm(s),g=[],w=a.setContext(this.getContext()),y=w.display?w.width:0,E=y/2,M=function(lt){return Wl(r,lt,y)},k,O,K,Q,te,D,T,A,F,N,V,U;if(o==="top")k=M(this.bottom),D=this.bottom-m,A=k-E,N=M(e.top)+E,U=e.bottom;else if(o==="bottom")k=M(this.top),N=e.top,U=M(e.bottom)-E,D=k+E,A=this.top+m;else if(o==="left")k=M(this.right),te=this.right-m,T=k-E,F=M(e.left)+E,V=e.right;else if(o==="right")k=M(this.left),F=e.left,V=M(e.right)-E,te=k+E,T=this.left+m;else if(t==="x"){if(o==="center")k=M((e.top+e.bottom)/2+.5);else if(Bt(o)){let lt=Object.keys(o)[0],ut=o[lt];k=M(this.chart.scales[lt].getPixelForValue(ut))}N=e.top,U=e.bottom,D=k+E,A=D+m}else if(t==="y"){if(o==="center")k=M((e.left+e.right)/2);else if(Bt(o)){let lt=Object.keys(o)[0],ut=o[lt];k=M(this.chart.scales[lt].getPixelForValue(ut))}te=k-E,T=te-m,F=e.left,V=e.right}let nt=bt(i.ticks.maxTicksLimit,d),Ae=Math.max(1,Math.ceil(d/nt));for(O=0;O<d;O+=Ae){let lt=this.getContext(O),ut=s.setContext(lt),Ut=a.setContext(lt),It=ut.lineWidth,Ft=ut.color,Cn=Ut.dash||[],Z=Ut.dashOffset,me=ut.tickWidth,re=ut.tickColor,ne=ut.tickBorderDash||[],we=ut.tickBorderDashOffset;K=qce(this,O,c),K!==void 0&&(Q=Wl(r,K,It),l?te=T=F=V=Q:D=A=N=U=Q,g.push({tx1:te,ty1:D,tx2:T,ty2:A,x1:F,y1:N,x2:V,y2:U,width:It,color:Ft,borderDash:Cn,borderDashOffset:Z,tickWidth:me,tickColor:re,tickBorderDash:ne,tickBorderDashOffset:we}))}return this._ticksLength=d,this._borderValue=k,g}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,m=bm(r.grid),g=m+u,w=d?-u:g,y=-Zs(this.labelRotation),E=[],M,k,O,K,Q,te,D,T,A,F,N,V,U="middle";if(i==="top")te=this.bottom-w,D=this._getXAxisLabelAlignment();else if(i==="bottom")te=this.top+w,D=this._getXAxisLabelAlignment();else if(i==="left"){let Ae=this._getYAxisLabelAlignment(m);D=Ae.textAlign,Q=Ae.x}else if(i==="right"){let Ae=this._getYAxisLabelAlignment(m);D=Ae.textAlign,Q=Ae.x}else if(t==="x"){if(i==="center")te=(e.top+e.bottom)/2+g;else if(Bt(i)){let Ae=Object.keys(i)[0],lt=i[Ae];te=this.chart.scales[Ae].getPixelForValue(lt)+g}D=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")Q=(e.left+e.right)/2-g;else if(Bt(i)){let Ae=Object.keys(i)[0],lt=i[Ae];Q=this.chart.scales[Ae].getPixelForValue(lt)}D=this._getYAxisLabelAlignment(m).textAlign}t==="y"&&(c==="start"?U="top":c==="end"&&(U="bottom"));let nt=this._getLabelSizes();for(M=0,k=a.length;M<k;++M){O=a[M],K=O.label;let Ae=s.setContext(this.getContext(M));T=this.getPixelForTick(M)+s.labelOffset,A=this._resolveTickFontOptions(M),F=A.lineHeight,N=Hn(K)?K.length:1;let lt=N/2,ut=Ae.color,Ut=Ae.textStrokeColor,It=Ae.textStrokeWidth,Ft=D;o?(Q=T,D==="inner"&&(M===k-1?Ft=this.options.reverse?"left":"right":M===0?Ft=this.options.reverse?"right":"left":Ft="center"),i==="top"?l==="near"||y!==0?V=-N*F+F/2:l==="center"?V=-nt.highest.height/2-lt*F+F:V=-nt.highest.height+F/2:l==="near"||y!==0?V=F/2:l==="center"?V=nt.highest.height/2-lt*F:V=nt.highest.height-N*F,d&&(V*=-1),y!==0&&!Ae.showLabelBackdrop&&(Q+=F/2*Math.sin(y))):(te=T,V=(1-N)*F/2);let Cn;if(Ae.showLabelBackdrop){let Z=gi(Ae.backdropPadding),me=nt.heights[M],re=nt.widths[M],ne=V-Z.top,we=0-Z.left;switch(U){case"middle":ne-=me/2;break;case"bottom":ne-=me;break}switch(D){case"center":we-=re/2;break;case"right":we-=re;break;case"inner":M===k-1?we-=re:M>0&&(we-=re/2);break}Cn={left:we,top:ne,width:re+Z.width,height:me+Z.height,color:Ae.backdropColor}}E.push({label:K,font:A,textOffset:V,options:{rotation:y,color:ut,strokeColor:Ut,strokeWidth:It,textAlign:Ft,textBaseline:U,translation:[Q,te],backdrop:Cn}})}return E}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Zs(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?i?(u=this.right+s,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+s,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(s=0,o=i.length;s<o;++s){let c=i[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,m;this.isHorizontal()?(l=Wl(e,this.left,o)-o/2,u=Wl(e,this.right,a)+a/2,d=m=c):(d=Wl(e,this.top,o)-o/2,m=Wl(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&vm(r,i);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;ql(r,l,0,u,c,a)}i&&_m(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let s=jr(r.font),o=gi(r.padding),a=r.align,c=s.lineHeight/2;t==="bottom"||t==="center"||Bt(t)?(c+=o.bottom,Hn(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:m}=Xce(this,c,t,a);ql(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:m,textAlign:Yce(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=bt(e.grid&&e.grid.z,-1),i=bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return jr(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Uh=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;ele(t)&&(r=this.register(t));let i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,Zce(e,o,r),this.override&&Kn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Kn[i]&&(delete Kn[i][r],this.override&&delete zl[r])}};function Zce(n,e,t){let r=kh(Object.create(null),[t?Kn.get(t):{},Kn.get(e),n.defaults]);Kn.set(e,r),n.defaultRoutes&&Jce(e,n.defaultRoutes),n.descriptors&&Kn.describe(e,n.descriptors)}function Jce(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");Kn.route(s,i,c,a)})}function ele(n){return"id"in n&&"defaults"in n}var cA=class{constructor(){this.controllers=new Uh(Yl,"datasets",!0),this.elements=new Uh(Po,"elements"),this.plugins=new Uh(Object,"plugins"),this.scales=new Uh(Td,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):mn(i,o=>{let a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,r){let i=mx(e);On(r["before"+i],[],r),t[e](r),On(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Aa=new cA,lA=class{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,r,i){i=i||{};for(let s of e){let o=s.plugin,a=o[r],c=[t,i,s.options];if(On(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Nt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=bt(r.options&&r.options.plugins,{}),s=tle(r);return i===!1&&!t?[]:rle(e,s,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function tle(n){let e={},t=[],r=Object.keys(Aa.plugins.items);for(let s=0;s<r.length;s++)t.push(Aa.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function nle(n,e){return!e&&n===!1?null:n===!0?{}:n}function rle(n,{plugins:e,localIds:t},r,i){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=nle(r[c],i);l!==null&&s.push({plugin:a,options:ile(n.config,{plugin:a,local:t[c]},l,o)})}return s}function ile(n,{plugin:e,local:t},r,i){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(r,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function uA(n,e){let t=Kn.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function sle(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function ole(n,e){return n===e?"_index_":"_value_"}function qV(n){if(n==="x"||n==="y"||n==="r")return n}function ale(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function dA(n,...e){if(qV(n))return n;for(let t of e){let r=t.axis||ale(t.position)||n.length>1&&qV(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function GV(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function cle(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return GV(n,"x",t[0])||GV(n,"y",t[0])}return{}}function lle(n,e){let t=zl[n.type]||{scales:{}},r=e.scales||{},i=uA(n.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Bt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=dA(o,a,cle(o,n),Kn.scales[a.type]),l=ole(c,i),u=t.scales||{};s[o]=Rh(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||uA(a,e),u=(zl[a]||{}).scales||{};Object.keys(u).forEach(d=>{let m=sle(d,c),g=o[m+"AxisID"]||m;s[g]=s[g]||Object.create(null),Rh(s[g],[{axis:m},r[g],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Rh(a,[Kn.scales[a.type],Kn.scale])}),s}function F6(n){let e=n.options||(n.options={});e.plugins=bt(e.plugins,{}),e.scales=lle(n,e)}function O6(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function ule(n){return n=n||{},n.data=O6(n.data),F6(n),n}var KV=new Map,N6=new Set;function Dx(n,e){let t=KV.get(n);return t||(t=e(),KV.set(n,t),N6.add(t)),t}var Em=(n,e,t)=>{let r=Ic(e,t);r!==void 0&&n.add(r)},fA=class{constructor(e){this._config=ule(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=O6(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),F6(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Dx(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Dx(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Dx(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return Dx(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>Em(c,e,d))),u.forEach(d=>Em(c,i,d)),u.forEach(d=>Em(c,zl[s]||{},d)),u.forEach(d=>Em(c,Kn,d)),u.forEach(d=>Em(c,yx,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),N6.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,zl[t]||{},Kn.datasets[t]||{},{type:t},Kn,yx]}resolveNamedOptions(e,t,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=QV(this._resolverCache,e,i),c=o;if(fle(o,t)){s.$shared=!1,r=Cc(r)?r():r;let l=this.createResolver(e,r,a);c=bd(o,r,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,r=[""],i){let{resolver:s}=QV(this._resolverCache,e,r);return Bt(t)?bd(s,t,void 0,i):s}};function QV(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),s=r.get(i);return s||(s={resolver:bx(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var dle=n=>Bt(n)&&Object.getOwnPropertyNames(n).some(e=>Cc(n[e]));function fle(n,e){let{isScriptable:t,isIndexable:r}=LD(n);for(let i of e){let s=t(i),o=r(i),a=(o||s)&&n[i];if(s&&(Cc(a)||dle(a))||o&&Hn(a))return!0}return!1}var hle="4.4.8",ple=["top","bottom","left","right","chartArea"];function YV(n,e){return n==="top"||n==="bottom"||ple.indexOf(n)===-1&&e==="x"}function XV(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function ZV(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),On(t&&t.onComplete,[n],e)}function mle(n){let e=n.chart,t=e.options.animation;On(t&&t.onProgress,[n],e)}function L6(n){return Ex()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Fx={},JV=n=>{let e=L6(n);return Object.values(Fx).filter(t=>t.canvas===e).pop()};function gle(n,e,t){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=e){let o=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=o)}}}function vle(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}function Ax(n,e,t){return n.options.clip?n[t]:e[t]}function _le(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:Ax(t,e,"left"),right:Ax(t,e,"right"),top:Ax(r,e,"top"),bottom:Ax(r,e,"bottom")}:e}var kc=(()=>{class n{static defaults=Kn;static instances=Fx;static overrides=zl;static registry=Aa;static version=hle;static getChart=JV;static register(...t){Aa.add(...t),e6()}static unregister(...t){Aa.remove(...t),e6()}constructor(t,r){let i=this.config=new fA(r),s=L6(t),o=JV(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Vce(s)),this.platform.updateConfig(i);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=ZL(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new lA,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lV(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],Fx[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Dc.listen(this,"complete",ZV),Dc.listen(this,"progress",mle),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return Nt(t)?r&&o?o:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Aa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jD(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return FD(this.canvas,this.ctx),this}stop(){return Dc.stop(this),this}resize(t,r){Dc.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,r,o),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,jD(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),On(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};mn(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,s=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let c=r[a],l=dA(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),mn(o,a=>{let c=a.options,l=c.id,u=dA(l,c),d=bt(c.type,a.dtype);(c.position===void 0||YV(c.position,u)!==YV(a.dposition))&&(c.position=a.dposition),s[l]=!0;let m=null;if(l in i&&i[l].type===d)m=i[l];else{let g=Aa.getScale(d);m=new g({id:l,type:d,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(c,t)}),mn(s,(a,c)=>{a||delete i[c]}),mn(i,a=>{Pi.configure(this,a,a.options),Pi.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(XV("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=o.indexAxis||uA(c,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=Aa.getController(c),{datasetElementType:u,dataElementType:d}=Kn.datasets[c];Object.assign(l,{dataElementType:Aa.getElement(d),datasetElementType:u&&Aa.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){mn(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:m}=this.getDatasetMeta(u),g=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(g),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||mn(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(XV("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){mn(this.scales,t=>{Pi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!wD(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;gle(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!wD(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pi.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],mn(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Cc(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),s={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Dc.has(this)?this.attached&&!Dc.running(this)&&Dc.start(this):(this.draw(),ZV({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i=t._clip,s=!i.disabled,o=_le(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&vm(r,{left:i.left===!1?0:o.left-i.left,right:i.right===!1?this.width:o.right+i.right,top:i.top===!1?0:o.top-i.top,bottom:i.bottom===!1?this.height:o.bottom+i.bottom}),t.controller.draw(),s&&_m(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Sa(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,s){let o=yce.modes[r];return typeof o=="function"?o(this,t,i,s):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Tc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Ph(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(o,{visible:i}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Dc.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),FD(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Fx[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};mn(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){mn(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},mn(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let s=i?"set":"remove",o,a,c,l;for(r==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!mm(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),a=o(r,t),c=i?t:o(t,r);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:s=[],options:o}=this,a=r,c=this._getActiveElements(t,s,i,a),l=tV(t),u=vle(t,this._lastEvent,i,l);i&&(this._lastEvent=null,On(o.onHover,[t,c,this],this),l&&On(o.onClick,[t,c,this],this));let d=!mm(c,s);return(d||r)&&(this._active=c,this._updateHoverStyles(c,s,r)),this._lastEvent=u,d}_getActiveElements(t,r,i,s){if(t.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function e6(){return mn(kc.instances,n=>n._plugins.invalidate())}function yle(n,e,t){let{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=i/a;n.beginPath(),n.arc(s,o,a,r-l,t+l),c>i?(l=i/c,n.arc(s,o,c,t+l,r-l,!0)):n.arc(s,o,i,t+wr,r-wr),n.closePath(),n.clip()}function xle(n){return wx(n,["outerStart","outerEnd","innerStart","innerEnd"])}function wle(n,e,t,r){let i=xle(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,r*e/2),a=c=>{let l=(t-Math.min(s,c))*r/2;return Xr(c,0,Math.min(s,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Xr(i.innerStart,0,o),innerEnd:Xr(i.innerEnd,0,o)}}function Bh(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function Vx(n,e,t,r,i,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,d=Math.max(e.outerRadius+r+t-l,0),m=u>0?u+r+t+l:0,g=0,w=i-c;if(r){let Ae=u>0?u-r:0,lt=d>0?d-r:0,ut=(Ae+lt)/2,Ut=ut!==0?w*ut/(ut+r):w;g=(w-Ut)/2}let y=Math.max(.001,w*d-t/zn)/d,E=(w-y)/2,M=c+E+g,k=i-E-g,{outerStart:O,outerEnd:K,innerStart:Q,innerEnd:te}=wle(e,m,d,k-M),D=d-O,T=d-K,A=M+O/D,F=k-K/T,N=m+Q,V=m+te,U=M+Q/N,nt=k-te/V;if(n.beginPath(),s){let Ae=(A+F)/2;if(n.arc(o,a,d,A,Ae),n.arc(o,a,d,Ae,F),K>0){let It=Bh(T,F,o,a);n.arc(It.x,It.y,K,F,k+wr)}let lt=Bh(V,k,o,a);if(n.lineTo(lt.x,lt.y),te>0){let It=Bh(V,nt,o,a);n.arc(It.x,It.y,te,k+wr,nt+Math.PI)}let ut=(k-te/m+(M+Q/m))/2;if(n.arc(o,a,m,k-te/m,ut,!0),n.arc(o,a,m,ut,M+Q/m,!0),Q>0){let It=Bh(N,U,o,a);n.arc(It.x,It.y,Q,U+Math.PI,M-wr)}let Ut=Bh(D,M,o,a);if(n.lineTo(Ut.x,Ut.y),O>0){let It=Bh(D,A,o,a);n.arc(It.x,It.y,O,M-wr,A)}}else{n.moveTo(o,a);let Ae=Math.cos(A)*d+o,lt=Math.sin(A)*d+a;n.lineTo(Ae,lt);let ut=Math.cos(F)*d+o,Ut=Math.sin(F)*d+a;n.lineTo(ut,Ut)}n.closePath()}function ble(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){Vx(n,e,t,r,c,i);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%Wn||Wn))}return Vx(n,e,t,r,c,i),n.fill(),c}function Ele(n,e,t,r,i){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:d,borderDashOffset:m}=c,g=c.borderAlign==="inner";if(!l)return;n.setLineDash(d||[]),n.lineDashOffset=m,g?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let w=e.endAngle;if(s){Vx(n,e,t,r,w,i);for(let y=0;y<s;++y)n.stroke();isNaN(a)||(w=o+(a%Wn||Wn))}g&&yle(n,e,w),s||(Vx(n,e,t,r,w,i),n.stroke())}var hA=class extends Po{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:s,distance:o}=SD(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,g=bt(d,c-a),w=Oh(s,a,c)&&a!==c,y=g>=Wn||w,E=Ta(o,l+m,u+m);return y&&E}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+s)/2,d=(o+a+l+c)/2;return{x:t+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>Wn?Math.floor(r/Wn):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(zn,r||0)),l=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,ble(e,this,l,s,o),Ele(e,this,l,s,o),e.restore()}};function V6(n,e,t=e){n.lineCap=bt(t.borderCapStyle,e.borderCapStyle),n.setLineDash(bt(t.borderDash,e.borderDash)),n.lineDashOffset=bt(t.borderDashOffset,e.borderDashOffset),n.lineJoin=bt(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=bt(t.borderWidth,e.borderWidth),n.strokeStyle=bt(t.borderColor,e.borderColor)}function Cle(n,e,t){n.lineTo(t.x,t.y)}function Sle(n){return n.stepped?hV:n.tension||n.cubicInterpolationMode==="monotone"?pV:Cle}function B6(n,e,t={}){let r=n.length,{start:i=0,end:s=r-1}=t,{start:o,end:a}=e,c=Math.max(i,o),l=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function Ile(n,e,t,r){let{points:i,options:s}=e,{count:o,start:a,loop:c,ilen:l}=B6(i,t,r),u=Sle(s),{move:d=!0,reverse:m}=r||{},g,w,y;for(g=0;g<=l;++g)w=i[(a+(m?l-g:g))%o],!w.skip&&(d?(n.moveTo(w.x,w.y),d=!1):u(n,y,w,m,s.stepped),y=w);return c&&(w=i[(a+(m?l:0))%o],u(n,y,w,m,s.stepped)),!!c}function Tle(n,e,t,r){let i=e.points,{count:s,start:o,ilen:a}=B6(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,d=0,m,g,w,y,E,M,k=K=>(o+(l?a-K:K))%s,O=()=>{y!==E&&(n.lineTo(u,E),n.lineTo(u,y),n.lineTo(u,M))};for(c&&(g=i[k(0)],n.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=i[k(m)],g.skip)continue;let K=g.x,Q=g.y,te=K|0;te===w?(Q<y?y=Q:Q>E&&(E=Q),u=(d*u+K)/++d):(O(),n.lineTo(K,Q),w=te,d=0,y=E=Q),M=Q}O()}function pA(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Tle:Ile}function Dle(n){return n.stepped?EV:n.tension||n.cubicInterpolationMode==="monotone"?CV:Hl}function Ale(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),V6(n,e.options),n.stroke(i)}function kle(n,e,t,r){let{segments:i,options:s}=e,o=pA(e);for(let a of i)V6(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var Mle=typeof Path2D=="function";function Rle(n,e,t,r){Mle&&!e.options.segment?Ale(n,e,t,r):kle(n,e,t,r)}var jx=(()=>{class n extends Po{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;xV(this._points,i,t,s,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=IV(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,s=t[r],o=this.points,a=qD(this,{property:r,start:s,end:s});if(!a.length)return;let c=[],l=Dle(i),u,d;for(u=0,d=a.length;u<d;++u){let{start:m,end:g}=a[u],w=o[m],y=o[g];if(w===y){c.push(w);continue}let E=Math.abs((s-w[r])/(y[r]-w[r])),M=l(w,y,E,i.stepped);M[r]=t[r],c.push(M)}return c.length===1?c[0]:c}pathSegment(t,r,i){return pA(this)(t,this,r,i)}path(t,r,i){let s=this.segments,o=pA(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of s)a&=o(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),Rle(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function t6(n,e,t,r){let i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}var Ple=(()=>{class n extends Po{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return t6(this,t,"x",r)}inYRange(t,r){return t6(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!Sa(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,xx(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function U6(n,e){let{x:t,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return n.horizontal?(d=o/2,a=Math.min(t,i),c=Math.max(t,i),l=r-d,u=r+d):(d=s/2,a=t-d,c=t+d,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function Ql(n,e,t,r){return n?0:Xr(e,t,r)}function Fle(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,s=ND(r);return{t:Ql(i.top,s.top,0,t),r:Ql(i.right,s.right,0,e),b:Ql(i.bottom,s.bottom,0,t),l:Ql(i.left,s.left,0,e)}}function Ole(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=Gl(i),o=Math.min(e,t),a=n.borderSkipped,c=r||Bt(i);return{topLeft:Ql(!c||a.top||a.left,s.topLeft,0,o),topRight:Ql(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Ql(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ql(!c||a.bottom||a.right,s.bottomRight,0,o)}}function Nle(n){let e=U6(n),t=e.right-e.left,r=e.bottom-e.top,i=Fle(n,t/2,r/2),s=Ole(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function eA(n,e,t,r){let i=e===null,s=t===null,a=n&&!(i&&s)&&U6(n,r);return a&&(i||Ta(e,a.left,a.right))&&(s||Ta(t,a.top,a.bottom))}function Lle(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Vle(n,e){n.rect(e.x,e.y,e.w,e.h)}function tA(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,o=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var mA=class extends Po{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Nle(this),a=Lle(o.radius)?Lh:Vle;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,tA(o,t,s)),e.clip(),a(e,tA(s,-t,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,tA(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return eA(this,e,t,r)}inXRange(e,t){return eA(this,e,null,t)}inYRange(e,t){return eA(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Ble=Object.freeze({__proto__:null,ArcElement:hA,BarElement:mA,LineElement:jx,PointElement:Ple}),gA=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],n6=gA.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function j6(n){return gA[n%gA.length]}function $6(n){return n6[n%n6.length]}function Ule(n,e){return n.borderColor=j6(e),n.backgroundColor=$6(e),++e}function jle(n,e){return n.backgroundColor=n.data.map(()=>j6(e++)),e}function $le(n,e){return n.backgroundColor=n.data.map(()=>$6(e++)),e}function Hle(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof CA?e=jle(t,e):i instanceof A6?e=$le(t,e):i&&(e=Ule(t,e))}}function r6(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function zle(n){return n&&(n.borderColor||n.backgroundColor)}function Wle(){return Kn.borderColor!=="rgba(0,0,0,0.1)"||Kn.backgroundColor!=="rgba(0,0,0,0.1)"}var qle={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:s}=i,o=r6(r)||zle(i)||s&&r6(s)||Wle();if(!t.forceOverride&&o)return;let a=Hle(n);r.forEach(a)}};function Gle(n,e,t,r,i){let s=i.samples||r;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),c=0,l=e+t-1,u=e,d,m,g,w,y;for(o[c++]=n[u],d=0;d<s-2;d++){let E=0,M=0,k,O=Math.floor((d+1)*a)+1+e,K=Math.min(Math.floor((d+2)*a)+1,t)+e,Q=K-O;for(k=O;k<K;k++)E+=n[k].x,M+=n[k].y;E/=Q,M/=Q;let te=Math.floor(d*a)+1+e,D=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:T,y:A}=n[u];for(g=w=-1,k=te;k<D;k++)w=.5*Math.abs((T-E)*(n[k].y-A)-(T-n[k].x)*(M-A)),w>g&&(g=w,m=n[k],y=k);o[c++]=m,u=y}return o[c++]=n[l],o}function Kle(n,e,t,r){let i=0,s=0,o,a,c,l,u,d,m,g,w,y,E=[],M=e+t-1,k=n[e].x,K=n[M].x-k;for(o=e;o<e+t;++o){a=n[o],c=(a.x-k)/K*r,l=a.y;let Q=c|0;if(Q===u)l<w?(w=l,d=o):l>y&&(y=l,m=o),i=(s*i+a.x)/++s;else{let te=o-1;if(!Nt(d)&&!Nt(m)){let D=Math.min(d,m),T=Math.max(d,m);D!==g&&D!==te&&E.push(Te(fe({},n[D]),{x:i})),T!==g&&T!==te&&E.push(Te(fe({},n[T]),{x:i}))}o>0&&te!==g&&E.push(n[te]),E.push(a),u=Q,s=0,w=y=l,d=m=g=o}}return E}function H6(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function i6(n){n.data.datasets.forEach(e=>{H6(e)})}function Qle(n,e){let t=e.length,r=0,i,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(r=Xr(Ca(e,s.axis,o).lo,0,t-1)),l?i=Xr(Ca(e,s.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var Yle={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){i6(n);return}let r=n.width;n.data.datasets.forEach((i,s)=>{let{_data:o,indexAxis:a}=i,c=n.getDatasetMeta(s),l=o||i.data;if(Vh([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:m}=Qle(c,l),g=t.threshold||4*r;if(m<=g){H6(i);return}Nt(o)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(y){this._data=y}}));let w;switch(t.algorithm){case"lttb":w=Gle(l,d,m,r,t);break;case"min-max":w=Kle(l,d,m,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=w})},destroy(n){i6(n)}};function Xle(n,e,t){let r=n.segments,i=n.points,s=e.points,o=[];for(let a of r){let{start:c,end:l}=a;l=SA(c,l,i);let u=vA(t,i[c],i[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[c],end:i[l]});continue}let d=qD(e,u);for(let m of d){let g=vA(t,s[m.start],s[m.end],m.loop),w=WD(a,i,g);for(let y of w)o.push({source:y,target:m,start:{[t]:s6(u,g,"start",Math.max)},end:{[t]:s6(u,g,"end",Math.min)}})}}return o}function vA(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=os(i),s=os(s)),{property:n,start:i,end:s}}function Zle(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=SA(o,a,i);let c=i[o],l=i[a];r!==null?(s.push({x:c.x,y:r}),s.push({x:l.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function SA(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function s6(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function z6(n,e){let t=[],r=!1;return Hn(n)?(r=!0,t=n):t=Zle(n,e),t.length?new jx({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function o6(n){return n&&n.fill!==!1}function Jle(n,e,t){let i=n[e].fill,s=[e],o;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ur(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function eue(n,e,t){let r=iue(n);if(Bt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ur(i)&&Math.floor(i)===i?tue(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function tue(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function nue(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Bt(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function rue(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Bt(n)?r=n.value:r=e.getBaseValue(),r}function iue(n){let e=n.options,t=e.fill,r=bt(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function sue(n){let{scale:e,index:t,line:r}=n,i=[],s=r.segments,o=r.points,a=oue(e,t);a.push(z6({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)aue(i,o[u],a)}return new jx({points:i,options:{}})}function oue(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function aue(n,e,t){let r=[];for(let i=0;i<t.length;i++){let s=t[i],{first:o,last:a,point:c}=cue(s,e,"x");if(!(!c||o&&a)){if(o)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function cue(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][t],m=o[u.end][t];if(Ta(i,d,m)){a=i===d,c=i===m;break}}return{first:a,last:c,point:r}}var Bx=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:s,radius:o}=this;return t=t||{start:0,end:Wn},e.arc(i,s,o,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function lue(n){let{chart:e,fill:t,line:r}=n;if(ur(t))return uue(e,t);if(t==="stack")return sue(n);if(t==="shape")return!0;let i=due(n);return i instanceof Bx?i:z6(i,r)}function uue(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function due(n){return(n.scale||{}).getPointPositionForValue?hue(n):fue(n)}function fue(n){let{scale:e={},fill:t}=n,r=nue(t,e);if(ur(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function hue(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=rue(t,e,s),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,s);return new Bx({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,o));return a}function nA(n,e,t){let r=lue(e),{line:i,scale:s,axis:o}=e,a=i.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:d=l}=c||{};r&&i.points.length&&(vm(n,t),pue(n,{line:i,target:r,above:u,below:d,area:t,scale:s,axis:o}),_m(n))}function pue(n,e){let{line:t,target:r,above:i,below:s,area:o,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==i&&(a6(n,r,o.top),c6(n,{line:t,target:r,color:i,scale:a,property:c}),n.restore(),n.save(),a6(n,r,o.bottom)),c6(n,{line:t,target:r,color:s,scale:a,property:c}),n.restore()}function a6(n,e,t){let{segments:r,points:i}=e,s=!0,o=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],d=i[SA(c,l,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function c6(n,e){let{line:t,target:r,property:i,color:s,scale:o}=e,a=Xle(t,r,i);for(let{source:c,target:l,start:u,end:d}of a){let{style:{backgroundColor:m=s}={}}=c,g=r!==!0;n.save(),n.fillStyle=m,mue(n,o,g&&vA(i,u,d)),n.beginPath();let w=!!t.pathSegment(n,c),y;if(g){w?n.closePath():l6(n,r,d,i);let E=!!r.pathSegment(n,l,{move:w,reverse:!0});y=w&&E,y||l6(n,r,u,i)}n.closePath(),n.fill(y?"evenodd":"nonzero"),n.restore()}}function mue(n,e,t){let{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,r,a-o,i-r),n.clip())}function l6(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var gue={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],s,o,a,c;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof jx&&(c={visible:n.isDatasetVisible(o),index:o,fill:eue(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,i.push(c);for(o=0;o<r;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=Jle(i,o,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&nA(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;o6(s)&&nA(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!o6(r)||t.drawTime!=="beforeDatasetDraw"||nA(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},u6=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},vue=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,Ux=class extends Po{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=On(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=jr(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=u6(r,s),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,d=e;s.textAlign="left",s.textBaseline="middle";let m=-1,g=-u;return this.legendItems.forEach((w,y)=>{let E=r+t/2+s.measureText(w.text).width;(y===0||l[l.length-1]+E+2*a>o)&&(d+=u,l[l.length-(y>0?0:1)]=0,g+=u,m++),c[y]={left:0,top:g,row:m,width:E,height:i},l[l.length-1]+=E+a}),d}_fitCols(e,t,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,m=0,g=0,w=0,y=0;return this.legendItems.forEach((E,M)=>{let{itemWidth:k,itemHeight:O}=_ue(r,t,s,E,i);M>0&&g+O+2*a>u&&(d+=m+a,l.push({width:m,height:g}),w+=m+a,y++,m=g=0),c[M]={left:w,top:g,col:y,width:k,height:O},m=Math.max(m,k),g+=O+a}),d+=m,l.push({width:m,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Cd(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=mi(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=mi(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+i}else{let a=0,c=mi(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=mi(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;vm(e,this),this._draw(),_m(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Kn.color,c=Cd(e.rtl,this.left,this.width),l=jr(o.font),{padding:u}=o,d=l.size,m=d/2,g;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:w,boxHeight:y,itemHeight:E}=u6(o,d),M=function(te,D,T){if(isNaN(w)||w<=0||isNaN(y)||y<0)return;i.save();let A=bt(T.lineWidth,1);if(i.fillStyle=bt(T.fillStyle,a),i.lineCap=bt(T.lineCap,"butt"),i.lineDashOffset=bt(T.lineDashOffset,0),i.lineJoin=bt(T.lineJoin,"miter"),i.lineWidth=A,i.strokeStyle=bt(T.strokeStyle,a),i.setLineDash(bt(T.lineDash,[])),o.usePointStyle){let F={radius:y*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:A},N=c.xPlus(te,w/2),V=D+m;OD(i,F,N,V,o.pointStyleWidth&&w)}else{let F=D+Math.max((d-y)/2,0),N=c.leftForLtr(te,w),V=Gl(T.borderRadius);i.beginPath(),Object.values(V).some(U=>U!==0)?Lh(i,{x:N,y:F,w,h:y,radius:V}):i.rect(N,F,w,y),i.fill(),A!==0&&i.stroke()}i.restore()},k=function(te,D,T){ql(i,T.text,te,D+E/2,l,{strikethrough:T.hidden,textAlign:c.textAlign(T.textAlign)})},O=this.isHorizontal(),K=this._computeTitleHeight();O?g={x:mi(s,this.left+u,this.right-r[0]),y:this.top+u+K,line:0}:g={x:this.left+u,y:mi(s,this.top+K+u,this.bottom-t[0].height),line:0},HD(this.ctx,e.textDirection);let Q=E+u;this.legendItems.forEach((te,D)=>{i.strokeStyle=te.fontColor,i.fillStyle=te.fontColor;let T=i.measureText(te.text).width,A=c.textAlign(te.textAlign||(te.textAlign=o.textAlign)),F=w+m+T,N=g.x,V=g.y;c.setWidth(this.width),O?D>0&&N+F+u>this.right&&(V=g.y+=Q,g.line++,N=g.x=mi(s,this.left+u,this.right-r[g.line])):D>0&&V+Q>this.bottom&&(N=g.x=N+t[g.line].width+u,g.line++,V=g.y=mi(s,this.top+K+u,this.bottom-t[g.line].height));let U=c.x(N);if(M(U,V,te),N=uV(A,N+w+m,O?N+F:this.right,e.rtl),k(c.x(N),V,te),O)g.x+=F+u;else if(typeof te.text!="string"){let nt=l.lineHeight;g.y+=W6(te,nt)+u}else g.y+=Q}),zD(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=jr(t.font),i=gi(t.padding);if(!t.display)return;let s=Cd(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,d=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+l,d=mi(e.align,d,this.right-m);else{let w=this.columnSizes.reduce((y,E)=>Math.max(y,E.height),0);u=l+mi(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}let g=mi(a,d,d+m);o.textAlign=s.textAlign(_x(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=r.string,ql(o,t.text,g,u,r)}_computeTitleHeight(){let e=this.options.title,t=jr(e.font),r=gi(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Ta(e,this.left,this.right)&&Ta(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ta(e,i.left,i.left+i.width)&&Ta(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!wue(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=vue(i,r);i&&!s&&On(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&On(t.onHover,[e,r,this],this)}else r&&On(t.onClick,[e,r,this],this)}};function _ue(n,e,t,r,i){let s=yue(r,n,e,t),o=xue(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function yue(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+r.measureText(i).width}function xue(n,e,t){let r=n;return typeof e.text!="string"&&(r=W6(e,t)),r}function W6(n,e){let t=n.text?n.text.length:0;return e*t}function wue(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var bue={id:"legend",_element:Ux,start(n,e,t){let r=n.legend=new Ux({ctx:n.ctx,options:t,chart:n});Pi.configure(n,r,t),Pi.addBox(n,r)},stop(n){Pi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;Pi.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=gi(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Tm=class extends Po{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=Hn(r.text)?r.text.length:1;this._padding=gi(r.padding);let s=i*jr(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=mi(a,r,s),d=t+e,l=s-r):(o.position==="left"?(u=r+e,d=mi(a,i,t),c=zn*-.5):(u=s-e,d=mi(a,t,i),c=zn*.5),l=i-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=jr(t.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);ql(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:_x(t.align),textBaseline:"middle",translation:[o,a]})}};function Eue(n,e){let t=new Tm({ctx:n.ctx,options:e,chart:n});Pi.configure(n,t,e),Pi.addBox(n,t),n.titleBlock=t}var Cue={id:"title",_element:Tm,start(n,e,t){Eue(n,t)},stop(n){let e=n.titleBlock;Pi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;Pi.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},kx=new WeakMap,Sue={id:"subtitle",start(n,e,t){let r=new Tm({ctx:n.ctx,options:t,chart:n});Pi.configure(n,r,t),Pi.addBox(n,r),kx.set(n,r)},stop(n){Pi.removeBox(n,kx.get(n)),kx.delete(n)},beforeUpdate(n,e,t){let r=kx.get(n);Pi.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Sm={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=hx(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Da(n,e){return e&&(Hn(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Ac(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Iue(n,e){let{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function d6(n,e){let t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=jr(e.bodyFont),l=jr(e.titleFont),u=jr(e.footerFont),d=s.length,m=i.length,g=r.length,w=gi(e.padding),y=w.height,E=0,M=r.reduce((K,Q)=>K+Q.before.length+Q.lines.length+Q.after.length,0);if(M+=n.beforeBody.length+n.afterBody.length,d&&(y+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),M){let K=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;y+=g*K+(M-g)*c.lineHeight+(M-1)*e.bodySpacing}m&&(y+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let k=0,O=function(K){E=Math.max(E,t.measureText(K).width+k)};return t.save(),t.font=l.string,mn(n.title,O),t.font=c.string,mn(n.beforeBody.concat(n.afterBody),O),k=e.displayColors?o+2+e.boxPadding:0,mn(r,K=>{mn(K.before,O),mn(K.lines,O),mn(K.after,O)}),k=0,t.font=u.string,mn(n.footer,O),t.restore(),E+=w.width,{width:E,height:y}}function Tue(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Due(n,e,t,r){let{x:i,width:s}=r,o=t.caretSize+t.caretPadding;if(n==="left"&&i+s+o>e.width||n==="right"&&i-s-o<0)return!0}function Aue(n,e,t,r){let{x:i,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=s/2?l="left":i>=o-s/2&&(l="right"),Due(l,n,e,t)&&(l="center"),l}function f6(n,e,t){let r=t.yAlign||e.yAlign||Tue(n,t);return{xAlign:t.xAlign||e.xAlign||Aue(n,e,t,r),yAlign:r}}function kue(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Mue(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function h6(n,e,t,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=i+s,{topLeft:u,topRight:d,bottomLeft:m,bottomRight:g}=Gl(o),w=kue(e,a),y=Mue(e,c,l);return c==="center"?a==="left"?w+=l:a==="right"&&(w-=l):a==="left"?w-=Math.max(u,m)+i:a==="right"&&(w+=Math.max(d,g)+i),{x:Xr(w,0,r.width-e.width),y:Xr(y,0,r.height-e.height)}}function Mx(n,e,t){let r=gi(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function p6(n){return Da([],Ac(n))}function Rue(n,e,t){return Tc(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function m6(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var q6={beforeTitle:Ia,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Ia,beforeBody:Ia,beforeLabel:Ia,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Nt(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ia,afterBody:Ia,beforeFooter:Ia,footer:Ia,afterFooter:Ia};function cs(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?q6[e].call(t,r):i}var g6=(()=>{class n extends Po{static positioners=Sm;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new Ox(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Rue(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,s=cs(i,"beforeTitle",this,t),o=cs(i,"title",this,t),a=cs(i,"afterTitle",this,t),c=[];return c=Da(c,Ac(s)),c=Da(c,Ac(o)),c=Da(c,Ac(a)),c}getBeforeBody(t,r){return p6(cs(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,s=[];return mn(t,o=>{let a={before:[],lines:[],after:[]},c=m6(i,o);Da(a.before,Ac(cs(c,"beforeLabel",this,o))),Da(a.lines,cs(c,"label",this,o)),Da(a.after,Ac(cs(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,r){return p6(cs(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,s=cs(i,"beforeFooter",this,t),o=cs(i,"footer",this,t),a=cs(i,"afterFooter",this,t),c=[];return c=Da(c,Ac(s)),c=Da(c,Ac(o)),c=Da(c,Ac(a)),c}_createItems(t){let r=this._active,i=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push(Iue(this.chart,r[l]));return t.filter&&(c=c.filter((d,m,g)=>t.filter(d,m,g,i))),t.itemSort&&(c=c.sort((d,m)=>t.itemSort(d,m,i))),mn(c,d=>{let m=m6(t.callbacks,d);s.push(cs(m,"labelColor",this,d)),o.push(cs(m,"labelPointStyle",this,d)),a.push(cs(m,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Sm[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=d6(this,i),u=Object.assign({},c,l),d=f6(this.chart,i,u),m=h6(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,s){let o=this.getCaretPosition(t,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(t,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:m}=Gl(c),{x:g,y:w}=t,{width:y,height:E}=r,M,k,O,K,Q,te;return o==="center"?(Q=w+E/2,s==="left"?(M=g,k=M-a,K=Q+a,te=Q-a):(M=g+y,k=M+a,K=Q-a,te=Q+a),O=M):(s==="left"?k=g+Math.max(l,d)+a:s==="right"?k=g+y-Math.max(u,m)-a:k=this.caretX,o==="top"?(K=w,Q=K-a,M=k-a,O=k+a):(K=w+E,Q=K+a,M=k+a,O=k-a),te=K),{x1:M,x2:k,x3:O,y1:K,y2:Q,y3:te}}drawTitle(t,r,i){let s=this.title,o=s.length,a,c,l;if(o){let u=Cd(i.rtl,this.x,this.width);for(t.x=Mx(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=jr(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,s,o){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=o,d=jr(o.bodyFont),m=Mx(this,"left",o),g=s.x(m),w=l<d.lineHeight?(d.lineHeight-l)/2:0,y=r.y+w;if(o.usePointStyle){let E={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},M=s.leftForLtr(g,u)+u/2,k=y+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,xx(t,E,M,k),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,xx(t,E,M,k)}else{t.lineWidth=Bt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let E=s.leftForLtr(g,u),M=s.leftForLtr(s.xPlus(g,1),u-2),k=Gl(a.borderRadius);Object.values(k).some(O=>O!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Lh(t,{x:E,y,w:u,h:l,radius:k}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Lh(t,{x:M,y:y+1,w:u-2,h:l-2,radius:k}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(E,y,u,l),t.strokeRect(E,y,u,l),t.fillStyle=a.backgroundColor,t.fillRect(M,y+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=i,m=jr(i.bodyFont),g=m.lineHeight,w=0,y=Cd(i.rtl,this.x,this.width),E=function(A){r.fillText(A,y.x(t.x+w),t.y+g/2),t.y+=g+o},M=y.textAlign(a),k,O,K,Q,te,D,T;for(r.textAlign=a,r.textBaseline="middle",r.font=m.string,t.x=Mx(this,M,i),r.fillStyle=i.bodyColor,mn(this.beforeBody,E),w=c&&M!=="right"?a==="center"?u/2+d:u+2+d:0,Q=0,D=s.length;Q<D;++Q){for(k=s[Q],O=this.labelTextColors[Q],r.fillStyle=O,mn(k.before,E),K=k.lines,c&&K.length&&(this._drawColorBox(r,t,Q,y,i),g=Math.max(m.lineHeight,l)),te=0,T=K.length;te<T;++te)E(K[te]),g=m.lineHeight;mn(k.after,E)}w=0,g=m.lineHeight,mn(this.afterBody,E),t.y-=o}drawFooter(t,r,i){let s=this.footer,o=s.length,a,c;if(o){let l=Cd(i.rtl,this.x,this.width);for(t.x=Mx(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=jr(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=i,{topLeft:m,topRight:g,bottomLeft:w,bottomRight:y}=Gl(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(c+m,l),a==="top"&&this.drawCaret(t,r,i,s),r.lineTo(c+u-g,l),r.quadraticCurveTo(c+u,l,c+u,l+g),a==="center"&&o==="right"&&this.drawCaret(t,r,i,s),r.lineTo(c+u,l+d-y),r.quadraticCurveTo(c+u,l+d,c+u-y,l+d),a==="bottom"&&this.drawCaret(t,r,i,s),r.lineTo(c+w,l+d),r.quadraticCurveTo(c,l+d,c,l+d-w),a==="center"&&o==="left"&&this.drawCaret(t,r,i,s),r.lineTo(c,l+m),r.quadraticCurveTo(c,l,c+m,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=Sm[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=d6(this,t),l=Object.assign({},a,this._size),u=f6(r,t,l),d=h6(t,l,u,r);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=gi(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(o,t,s,r),HD(t,r.textDirection),o.y+=a.top,this.drawTitle(o,t,r),this.drawBody(o,t,r),this.drawFooter(o,t,r),zD(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!mm(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,r,i),c=this._positionChanged(a,t),l=r||!mm(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:s,options:o}=this,a=Sm[o.position].call(this,t,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),Pue={id:"tooltip",_element:g6,positioners:Sm,afterInit(n,e,t){t&&(n.tooltip=new g6({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Te(fe({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:q6},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Fue=Object.freeze({__proto__:null,Colors:qle,Decimation:Yle,Filler:gue,Legend:bue,SubTitle:Sue,Title:Cue,Tooltip:Pue}),Oue=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Nue(n,e,t,r){let i=n.indexOf(e);if(i===-1)return Oue(n,e,t,r);let s=n.lastIndexOf(e);return i!==s?t:i}var Lue=(n,e)=>n===null?null:Xr(Math.round(n),0,e);function v6(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Vue=(()=>{class n extends Td{static id="category";static defaults={ticks:{callback:v6}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Nt(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Nue(i,t,bt(r,t),this._addedLabels),Lue(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=t===0&&r===o.length-1?o:o.slice(t,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)s.push({value:a});return s}getLabelForValue(t){return v6.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Bue(n,e){let t=[],{bounds:i,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:m}=n,g=s||1,w=u-1,{min:y,max:E}=e,M=!Nt(o),k=!Nt(a),O=!Nt(l),K=(E-y)/(d+1),Q=bD((E-y)/w/g)*g,te,D,T,A;if(Q<1e-14&&!M&&!k)return[{value:y},{value:E}];A=Math.ceil(E/Q)-Math.floor(y/Q),A>w&&(Q=bD(A*Q/w/g)*g),Nt(c)||(te=Math.pow(10,c),Q=Math.ceil(Q*te)/te),i==="ticks"?(D=Math.floor(y/Q)*Q,T=Math.ceil(E/Q)*Q):(D=y,T=E),M&&k&&s&&rV((a-o)/s,Q/1e3)?(A=Math.round(Math.min((a-o)/Q,u)),Q=(a-o)/A,D=o,T=a):O?(D=M?o:D,T=k?a:T,A=l-1,Q=(T-D)/A):(A=(T-D)/Q,Fh(A,Math.round(A),Q/1e3)?A=Math.round(A):A=Math.ceil(A));let F=Math.max(CD(Q),CD(D));te=Math.pow(10,Nt(c)?F:c),D=Math.round(D*te)/te,T=Math.round(T*te)/te;let N=0;for(M&&(m&&D!==o?(t.push({value:o}),D<o&&N++,Fh(Math.round((D+N*Q)*te)/te,o,_6(o,K,n))&&N++):D<o&&N++);N<A;++N){let V=Math.round((D+N*Q)*te)/te;if(k&&V>a)break;t.push({value:V})}return k&&m&&T!==a?t.length&&Fh(t[t.length-1].value,a,_6(a,K,n))?t[t.length-1].value=a:t.push({value:a}):(!k||T===a)&&t.push({value:T}),t}function _6(n,e,{horizontal:t,minRotation:r}){let i=Zs(r),s=(t?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var jh=class extends Td{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Nt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=c=>i=t?i:c,a=c=>s=r?s:c;if(e){let c=Ro(i),l=Ro(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(i-c)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=Bue(i,s);return e.bounds==="ticks"&&ED(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Nh(e,this.chart.options.locale,this.options.ticks.format)}},_A=class extends jh{static id="linear";static defaults={ticks:{callback:gm.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ur(e)?e:0,this.max=ur(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Zs(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Dm=n=>Math.floor(Sc(n)),Id=(n,e)=>Math.pow(10,Dm(n)+e);function y6(n){return n/Math.pow(10,Dm(n))===1}function x6(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function Uue(n,e){let t=e-n,r=Dm(t);for(;x6(n,e,r)>10;)r++;for(;x6(n,e,r)<10;)r--;return Math.min(r,Dm(n))}function jue(n,{min:e,max:t}){e=as(n.min,e);let r=[],i=Dm(e),s=Uue(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=i>s?Math.pow(10,i):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),m=as(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;m<t;)r.push({value:m,major:y6(m),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),m=Math.round((c+u+d*Math.pow(10,s))*o)/o;let g=as(n.max,m);return r.push({value:g,major:y6(g),significand:d}),r}var yA=class extends Td{static id="logarithmic";static defaults={ticks:{callback:gm.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=jh.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return ur(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ur(e)?Math.max(0,e):null,this.max=ur(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ur(this._userMin)&&(this.min=e===Id(this.min,0)?Id(this.min,-1):Id(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=e?r:a,o=a=>i=t?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Id(r,-1)),o(Id(i,1)))),r<=0&&s(Id(i,-1)),i<=0&&o(Id(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=jue(t,this);return e.bounds==="ticks"&&ED(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Nh(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Sc(e),this._valueRange=Sc(this.max)-Sc(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Sc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function xA(n){let e=n.ticks;if(e.display&&n.display){let t=gi(e.backdropPadding);return bt(e.font&&e.font.size,Kn.font.size)+t.height}return 0}function $ue(n,e,t){return t=Hn(t)?t:[t],{w:fV(n,e.string,t),h:t.length*e.lineHeight}}function w6(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Hue(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?zn/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),d=jr(l.font),m=$ue(n.ctx,d,n._pointLabels[c]);r[c]=m;let g=os(n.getIndexAngle(c)+a),w=Math.round(gx(g)),y=w6(w,u.x,m.w,0,180),E=w6(w,u.y,m.h,90,270);zue(t,e,g,y,E)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Gue(n,r,i)}function zue(n,e,t,r,i){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/o,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function Wue(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,r+i+o,s),l=Math.round(gx(os(c.angle+wr))),u=Yue(c.y,a.h,l),d=Kue(l),m=Que(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:m,top:u,right:m+a.w,bottom:u+a.h}}function que(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:s}=n;return!(Sa({x:t,y:r},e)||Sa({x:t,y:s},e)||Sa({x:i,y:r},e)||Sa({x:i,y:s},e))}function Gue(n,e,t){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:xA(s)/2,additionalAngle:o?zn/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let d=Wue(n,u,c);r.push(d),a==="auto"&&(d.visible=que(d,l),d.visible&&(l=d))}return r}function Kue(n){return n===0||n===180?"center":n<180?"left":"right"}function Que(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Yue(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Xue(n,e,t){let{left:r,top:i,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Nt(a)){let c=Gl(e.borderRadius),l=gi(e.backdropPadding);n.fillStyle=a;let u=r-l.left,d=i-l.top,m=s-r+l.width,g=o-i+l.height;Object.values(c).some(w=>w!==0)?(n.beginPath(),Lh(n,{x:u,y:d,w:m,h:g,radius:c}),n.fill()):n.fillRect(u,d,m,g)}}function Zue(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));Xue(t,o,s);let a=jr(o.font),{x:c,y:l,textAlign:u}=s;ql(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function G6(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Wn);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Jue(n,e,t,r,i){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!r||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),G6(n,t,o,r),s.closePath(),s.stroke(),s.restore())}function ede(n,e,t){return Tc(n,{label:t,index:e,type:"pointLabel"})}var wA=class extends jh{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:gm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=gi(xA(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=ur(e)&&!isNaN(e)?e:0,this.max=ur(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xA(this.options))}generateTickLabels(e){jh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=On(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?Hue(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Wn/(this._pointLabels.length||1),r=this.options.startAngle||0;return os(e*t+Zs(r))}getDistanceFromCenterForValue(e){if(Nt(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Nt(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return ede(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-wr+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),G6(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&Zue(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let m=this.getContext(d),g=i.setContext(m),w=s.setContext(m);Jue(this,g,c,o,w)}}),r.display){for(e.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:m}=u;!m||!d||(e.lineWidth=m,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=jr(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=gi(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}ql(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},$x={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ls=Object.keys($x);function b6(n,e){return n-e}function E6(n,e){if(Nt(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=e;return typeof r=="function"&&(o=r(o)),ur(o)||(o=typeof r=="string"?t.parse(o,r):t.parse(o)),o===null?null:(i&&(o=i==="week"&&(Ed(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,i)),+o)}function C6(n,e,t,r){let i=ls.length;for(let s=ls.indexOf(n);s<i-1;++s){let o=$x[ls[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=r)return ls[s]}return ls[i-1]}function tde(n,e,t,r,i){for(let s=ls.length-1;s>=ls.indexOf(t);s--){let o=ls[s];if($x[o].common&&n._adapter.diff(i,r,o)>=e-1)return o}return ls[t?ls.indexOf(t):0]}function nde(n){for(let e=ls.indexOf(n)+1,t=ls.length;e<t;++e)if($x[ls[e]].common)return ls[e]}function S6(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=vx(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function rde(n,e,t,r){let i=n._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function I6(n,e,t){let r=[],i={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!t?r:rde(n,r,i,t)}var bA=(()=>{class n extends Td{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),s=this._adapter=new pce._date(t.adapters.date);s.init(r),Rh(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:E6(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=ur(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=ur(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=oV(s,o,a);return this._unit=r.unit||(i.autoSkip?C6(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):tde(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:nde(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),I6(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?r=1-s:r=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?i=o:i=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=Xr(r,0,a),i=Xr(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||C6(o.minUnit,r,i,this._getLabelCapacity(r)),c=bt(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Ed(l)||l===!0,d={},m=r,g,w;if(u&&(m=+t.startOf(m,"isoWeek",l)),m=+t.startOf(m,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let y=s.ticks.source==="data"&&this.getDataTimestamps();for(g=m,w=0;g<i;g=+t.add(g,c,a),w++)S6(d,g,y);return(g===i||s.bounds==="ticks"||w===1)&&S6(d,g,y),Object.keys(d).sort(b6).map(E=>+E)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return On(a,[t,r,i],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],m=u&&c[u],g=i[r],w=u&&m&&g&&g.major;return this._adapter.format(t,s||(w?m:d))}generateTickLabels(t){let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r],s.label=this._tickFormatFunction(s.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,s=Zs(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:i*o+c*a,h:i*a+c*o}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(t,0,I6(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)t=t.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)t.push(E6(this,s[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return TD(t.sort(b6))}}return n})();function Rx(n,e,t){let r=0,i=n.length-1,s,o,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Ca(n,"pos",e)),{pos:s,time:a}=n[r],{pos:o,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Ca(n,"time",e)),{time:s,pos:a}=n[r],{time:o,pos:c}=n[i]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var EA=class extends bA{static id="timeseries";static defaults=bA.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Rx(t,this.min),this._tableRange=Rx(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],c=i[o-1],l=i[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Rx(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return Rx(this._table,r*this._tableRange+this._minPos,!0)}},ide=Object.freeze({__proto__:null,CategoryScale:Vue,LinearScale:_A,LogarithmicScale:yA,RadialLinearScale:wA,TimeScale:bA,TimeSeriesScale:EA}),K6=[hce,Ble,Fue,ide];var Fa=Bs(Rs());var Vm={};Vm.version="0.18.5";var Ad=1200,Zh=1252,sde=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ode={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},O8=function(n){sde.indexOf(n)!=-1&&(Zh=ode[0]=n)};function ade(){O8(1252)}var Bm=function(n){Ad=n,O8(n)};function cde(){Bm(1200),ade()}function lde(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t+1)+(n.charCodeAt(2*t)<<8));return e.join("")}var Hx=function(e){return String.fromCharCode(e)},Q6=function(e){return String.fromCharCode(e)},Nn;var Ra=null,km=!0,Zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Um(n){for(var e="",t=0,r=0,i=0,s=0,o=0,a=0,c=0,l=0;l<n.length;)t=n.charCodeAt(l++),s=t>>2,r=n.charCodeAt(l++),o=(t&3)<<4|r>>4,i=n.charCodeAt(l++),a=(r&15)<<2|i>>6,c=i&63,isNaN(r)?a=c=64:isNaN(i)&&(c=64),e+=Zl.charAt(s)+Zl.charAt(o)+Zl.charAt(a)+Zl.charAt(c);return e}function Oc(n){var e="",t=0,r=0,i=0,s=0,o=0,a=0,c=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<n.length;)s=Zl.indexOf(n.charAt(l++)),o=Zl.indexOf(n.charAt(l++)),t=s<<2|o>>4,e+=String.fromCharCode(t),a=Zl.indexOf(n.charAt(l++)),r=(o&15)<<4|a>>2,a!==64&&(e+=String.fromCharCode(r)),c=Zl.indexOf(n.charAt(l++)),i=(a&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var un=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Lc=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Md(n){return un?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function Y6(n){return un?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var No=function(e){return un?Lc(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function dw(n){if(typeof ArrayBuffer>"u")return No(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function Wm(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function ude(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var yi=un?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:Lc(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function dde(n){for(var e=[],t=0,r=n.length+250,i=Md(n.length+255),s=0;s<n.length;++s){var o=n.charCodeAt(s);if(o<128)i[t++]=o;else if(o<2048)i[t++]=192|o>>6&31,i[t++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var a=n.charCodeAt(++s)&1023;i[t++]=240|o>>8&7,i[t++]=128|o>>2&63,i[t++]=128|a>>6&15|(o&3)<<4,i[t++]=128|a&63}else i[t++]=224|o>>12&15,i[t++]=128|o>>6&63,i[t++]=128|o&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Md(65535),r=65530)}return e.push(i.slice(0,t)),yi(e)}var Gh=/\u0000/g,zx=/[\u0001-\u0006]/g;function Kh(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Lo(n,e){var t=""+n;return t.length>=e?t:br("0",e-t.length)+t}function VA(n,e){var t=""+n;return t.length>=e?t:br(" ",e-t.length)+t}function Zx(n,e){var t=""+n;return t.length>=e?t:t+br(" ",e-t.length)}function fde(n,e){var t=""+Math.round(n);return t.length>=e?t:br("0",e-t.length)+t}function hde(n,e){var t=""+n;return t.length>=e?t:br("0",e-t.length)+t}var X6=Math.pow(2,32);function $h(n,e){if(n>X6||n<-X6)return fde(n,e);var t=Math.round(n);return hde(t,e)}function Jx(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var Z6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],IA=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function pde(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "',n}var Er={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4E0A\u5348/\u4E0B\u5348 "hh"\u6642"mm"\u5206"ss"\u79D2 "'},J6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},mde={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ew(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,o=1,a=0,c=1,l=0,u=0,d=Math.floor(i);l<e&&(d=Math.floor(i),a=d*o+s,u=d*l+c,!(i-d<5e-8));)i=1/(i-d),s=o,o=a,c=l,l=u;if(u>e&&(l>e?(u=c,a=s):(u=l,a=o)),!t)return[0,r*a,u];var m=Math.floor(r*a/u);return[m,r*a-m*u,u]}function Wx(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,o=[],a={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),e&&e.date1904&&(r+=1462),a.u>.9999&&(a.u=0,++i==86400&&(a.T=i=0,++r,++a.D)),r===60)o=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)o=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),r<60&&(s=(s+6)%7),t&&(s=bde(c,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=i%60,i=Math.floor(i/60),a.M=i%60,i=Math.floor(i/60),a.H=i,a.q=s,a}var N8=new Date(1899,11,31,0,0,0),gde=N8.getTime(),vde=new Date(1900,2,1,0,0,0);function L8(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=vde&&(t+=24*60*60*1e3),(t-(gde+(n.getTimezoneOffset()-N8.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function BA(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function _de(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function yde(n){var e=n<0?12:11,t=BA(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function xde(n){var e=BA(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function wde(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=yde(n):e===10?t=n.toFixed(10).substr(0,12):t=xde(n),BA(_de(t.toUpperCase()))}function FA(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):wde(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return eu(14,L8(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function bde(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function Ede(n,e,t,r){var i="",s=0,o=0,a=t.y,c,l=0;switch(n){case 98:a=t.y+543;case 121:switch(e.length){case 1:case 2:c=a%100,l=2;break;default:c=a%1e4,l=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,l=e.length;break;case 3:return IA[t.m-1][1];case 5:return IA[t.m-1][0];default:return IA[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,l=e.length;break;case 3:return Z6[t.q][0];default:return Z6[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,l=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,l=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,l=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Lo(t.S,e.length):(r>=2?o=r===3?1e3:100:o=r===1?10:1,s=Math.round(o*(t.S+t.u)),s>=60*o&&(s=0),e==="s"?s===0?"0":""+s/o:(i=Lo(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}l=e.length===3?1:2;break;case 101:c=a,l=1;break}var u=l>0?Lo(c,l):"";return u}function Jl(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var V8=/%/g;function Cde(n,e,t){var r=e.replace(V8,""),i=e.length-r.length;return Rc(n,r,t*Math.pow(10,2*i))+br("%",i)}function Sde(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Rc(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function B8(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+B8(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var o=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,c,l,u){return c+l+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var U8=/# (\?+)( ?)\/( ?)(\d+)/;function Ide(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),o=i-s*r,a=r;return t+(s===0?"":""+s)+" "+(o===0?br(" ",n[1].length+1+n[4].length):VA(o,n[1].length)+n[2]+"/"+n[3]+Lo(a,n[4].length))}function Tde(n,e,t){return t+(e===0?"":""+e)+br(" ",n[1].length+2+n[4].length)}var j8=/^#*0*\.([0#]+)/,$8=/\).*[0#]/,H8=/\(###\) ###\\?-####/;function zi(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function e8(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function t8(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function Dde(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function Ade(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Js(n,e,t){if(n.charCodeAt(0)===40&&!e.match($8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Js("n",r,t):"("+Js("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return Sde(n,e,t);if(e.indexOf("%")!==-1)return Cde(n,e,t);if(e.indexOf("E")!==-1)return B8(e,t);if(e.charCodeAt(0)===36)return"$"+Js(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,o,a,c=Math.abs(t),l=t<0?"-":"";if(e.match(/^00+$/))return l+$h(c,e.length);if(e.match(/^[#?]+$/))return i=$h(t,0),i==="0"&&(i=""),i.length>e.length?i:zi(e.substr(0,e.length-i.length))+i;if(s=e.match(U8))return Ide(s,c,l);if(e.match(/^#+0+$/))return l+$h(c,e.length-e.indexOf("0"));if(s=e.match(j8))return i=e8(t,s[1].length).replace(/^([^\.]+)$/,"$1."+zi(s[1])).replace(/\.$/,"."+zi(s[1])).replace(/\.(\d*)$/,function(w,y){return"."+y+br("0",zi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return l+e8(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return l+Jl($h(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Js(n,e,-t):Jl(""+(Math.floor(t)+Dde(t,s[1].length)))+"."+Lo(t8(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Js(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Kh(Js(n,e.replace(/[\\-]/g,""),t)),o=0,Kh(Kh(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<i.length?i.charAt(o++):w==="0"?"0":""}));if(e.match(H8))return i=Js(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=ew(c,Math.pow(10,o)-1,!1),i=""+l,u=Rc("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=Zx(a[2],o),u.length<s[4].length&&(u=zi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=ew(c,Math.pow(10,o)-1,!0),l+(a[0]||(a[1]?"":"0"))+" "+(a[1]?VA(a[1],o)+s[2]+"/"+s[3]+Zx(a[2],o):br(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=$h(t,0),e.length<=i.length?i:zi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,m=e.length-i.length-d;return zi(e.substr(0,d)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return o=t8(t,s[1].length),t<0?"-"+Js(n,e,-t):Jl(Ade(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Lo(0,3-w.length):"")+w})+"."+Lo(o,s[1].length);switch(e){case"###,##0.00":return Js(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var g=Jl($h(c,0));return g!=="0"?l+g:"";case"###,###.00":return Js(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Js(n,"#,##0.00",t).replace(/^0\./,".");default:}throw new Error("unsupported format |"+e+"|")}function kde(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Rc(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function Mde(n,e,t){var r=e.replace(V8,""),i=e.length-r.length;return Rc(n,r,t*Math.pow(10,2*i))+br("%",i)}function z8(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+z8(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var o=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(o-t.length+s):t+="E+"+(o-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,c,l,u){return c+l+u.substr(0,(i+s)%i)+"."+u.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function ka(n,e,t){if(n.charCodeAt(0)===40&&!e.match($8)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?ka("n",r,t):"("+ka("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return kde(n,e,t);if(e.indexOf("%")!==-1)return Mde(n,e,t);if(e.indexOf("E")!==-1)return z8(e,t);if(e.charCodeAt(0)===36)return"$"+ka(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,o,a,c=Math.abs(t),l=t<0?"-":"";if(e.match(/^00+$/))return l+Lo(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:zi(e.substr(0,e.length-i.length))+i;if(s=e.match(U8))return Tde(s,c,l);if(e.match(/^#+0+$/))return l+Lo(c,e.length-e.indexOf("0"));if(s=e.match(j8))return i=(""+t).replace(/^([^\.]+)$/,"$1."+zi(s[1])).replace(/\.$/,"."+zi(s[1])),i=i.replace(/\.(\d*)$/,function(w,y){return"."+y+br("0",zi(s[1]).length-y.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return l+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return l+Jl(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+ka(n,e,-t):Jl(""+t)+"."+br("0",s[1].length);if(s=e.match(/^#,#*,#0/))return ka(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Kh(ka(n,e.replace(/[\\-]/g,""),t)),o=0,Kh(Kh(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return o<i.length?i.charAt(o++):w==="0"?"0":""}));if(e.match(H8))return i=ka(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var u="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(s[4].length,7),a=ew(c,Math.pow(10,o)-1,!1),i=""+l,u=Rc("n",s[1],a[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),i+=u+s[2]+"/"+s[3],u=Zx(a[2],o),u.length<s[4].length&&(u=zi(s[4].substr(s[4].length-u.length))+u),i+=u,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(s[1].length,s[4].length),7),a=ew(c,Math.pow(10,o)-1,!0),l+(a[0]||(a[1]?"":"0"))+" "+(a[1]?VA(a[1],o)+s[2]+"/"+s[3]+Zx(a[2],o):br(" ",2*o+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:zi(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),o=i.indexOf(".");var d=e.indexOf(".")-o,m=e.length-i.length-d;return zi(e.substr(0,d)+i+e.substr(e.length-m))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+ka(n,e,-t):Jl(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?Lo(0,3-w.length):"")+w})+"."+Lo(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Jl(""+c);return g!=="0"?l+g:"";default:if(e.match(/\.[0#?]*$/))return ka(n,e.slice(0,e.lastIndexOf(".")),t)+zi(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Rc(n,e,t){return(t|0)===t?ka(n,e,t):Js(n,e,t)}function Rde(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var W8=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function q8(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":Jx(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4E0A":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(W8))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function Pde(n,e,t,r){for(var i=[],s="",o=0,a="",c="t",l,u,d,m="H";o<n.length;)switch(a=n.charAt(o)){case"G":if(!Jx(n,o))throw new Error("unrecognized character "+a+" in "+n);i[i.length]={t:"G",v:"General"},o+=7;break;case'"':for(s="";(d=n.charCodeAt(++o))!==34&&o<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++o;break;case"\\":var g=n.charAt(++o),w=g==="("||g===")"?g:"t";i[i.length]={t:w,v:g},++o;break;case"_":i[i.length]={t:"t",v:" "},o+=2;break;case"@":i[i.length]={t:"T",v:e},++o;break;case"B":case"b":if(n.charAt(o+1)==="1"||n.charAt(o+1)==="2"){if(l==null&&(l=Wx(e,t,n.charAt(o+1)==="2"),l==null))return"";i[i.length]={t:"X",v:n.substr(o,2)},c=a,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":a=a.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||l==null&&(l=Wx(e,t),l==null))return"";for(s=a;++o<n.length&&n.charAt(o).toLowerCase()===a;)s+=a;a==="m"&&c.toLowerCase()==="h"&&(a="M"),a==="h"&&(a=m),i[i.length]={t:a,v:s},c=a;break;case"A":case"a":case"\u4E0A":var y={t:a,v:a};if(l==null&&(l=Wx(e,t)),n.substr(o,3).toUpperCase()==="A/P"?(l!=null&&(y.v=l.H>=12?"P":"A"),y.t="T",m="h",o+=3):n.substr(o,5).toUpperCase()==="AM/PM"?(l!=null&&(y.v=l.H>=12?"PM":"AM"),y.t="T",o+=5,m="h"):n.substr(o,5).toUpperCase()==="\u4E0A\u5348/\u4E0B\u5348"?(l!=null&&(y.v=l.H>=12?"\u4E0B\u5348":"\u4E0A\u5348"),y.t="T",o+=5,m="h"):(y.t="t",++o),l==null&&y.t==="T")return"";i[i.length]=y,c=a;break;case"[":for(s=a;n.charAt(o++)!=="]"&&o<n.length;)s+=n.charAt(o);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(W8)){if(l==null&&(l=Wx(e,t),l==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",q8(n)||(i[i.length]={t:"t",v:s}));break;case".":if(l!=null){for(s=a;++o<n.length&&(a=n.charAt(o))==="0";)s+=a;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=a;++o<n.length&&"0#?.,E+-%".indexOf(a=n.charAt(o))>-1;)s+=a;i[i.length]={t:"n",v:s};break;case"?":for(s=a;n.charAt(++o)===a;)s+=a;i[i.length]={t:a,v:s},c=a;break;case"*":++o,(n.charAt(o)==" "||n.charAt(o)=="*")&&++o;break;case"(":case")":i[i.length]={t:r===1?"t":a,v:a},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=a;o<n.length&&"0123456789".indexOf(n.charAt(++o))>-1;)s+=n.charAt(o);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:a,v:a},++o;break;case"$":i[i.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=\u20ACacfijklopqrtuvwxzP".indexOf(a)===-1)throw new Error("unrecognized character "+a+" in "+n);i[i.length]={t:"t",v:a},++o;break}var E=0,M=0,k;for(o=i.length-1,c="t";o>=0;--o)switch(i[o].t){case"h":case"H":i[o].t=m,c="h",E<1&&(E=1);break;case"s":(k=i[o].v.match(/\.0+$/))&&(M=Math.max(M,k[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":c=i[o].t;break;case"m":c==="s"&&(i[o].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[o].v.match(/[Hh]/)&&(E=1),E<2&&i[o].v.match(/[Mm]/)&&(E=2),E<3&&i[o].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M),l.M>=60&&(l.M=0,++l.H);break;case 2:l.u>=.5&&(l.u=0,++l.S),l.S>=60&&(l.S=0,++l.M);break}var O="",K;for(o=0;o<i.length;++o)switch(i[o].t){case"t":case"T":case" ":case"D":break;case"X":i[o].v="",i[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[o].v=Ede(i[o].t.charCodeAt(0),i[o].v,l,M),i[o].t="t";break;case"n":case"?":for(K=o+1;i[K]!=null&&((a=i[K].t)==="?"||a==="D"||(a===" "||a==="t")&&i[K+1]!=null&&(i[K+1].t==="?"||i[K+1].t==="t"&&i[K+1].v==="/")||i[o].t==="("&&(a===" "||a==="n"||a===")")||a==="t"&&(i[K].v==="/"||i[K].v===" "&&i[K+1]!=null&&i[K+1].t=="?"));)i[o].v+=i[K].v,i[K]={v:"",t:";"},++K;O+=i[o].v,o=K-1;break;case"G":i[o].t="t",i[o].v=FA(e,t);break}var Q="",te,D;if(O.length>0){O.charCodeAt(0)==40?(te=e<0&&O.charCodeAt(0)===45?-e:e,D=Rc("n",O,te)):(te=e<0&&r>1?-e:e,D=Rc("n",O,te),te<0&&i[0]&&i[0].t=="t"&&(D=D.substr(1),i[0].v="-"+i[0].v)),K=D.length-1;var T=i.length;for(o=0;o<i.length;++o)if(i[o]!=null&&i[o].t!="t"&&i[o].v.indexOf(".")>-1){T=o;break}var A=i.length;if(T===i.length&&D.indexOf("E")===-1){for(o=i.length-1;o>=0;--o)i[o]==null||"n?".indexOf(i[o].t)===-1||(K>=i[o].v.length-1?(K-=i[o].v.length,i[o].v=D.substr(K+1,i[o].v.length)):K<0?i[o].v="":(i[o].v=D.substr(0,K+1),K=-1),i[o].t="t",A=o);K>=0&&A<i.length&&(i[A].v=D.substr(0,K+1)+i[A].v)}else if(T!==i.length&&D.indexOf("E")===-1){for(K=D.indexOf(".")-1,o=T;o>=0;--o)if(!(i[o]==null||"n?".indexOf(i[o].t)===-1)){for(u=i[o].v.indexOf(".")>-1&&o===T?i[o].v.indexOf(".")-1:i[o].v.length-1,Q=i[o].v.substr(u+1);u>=0;--u)K>=0&&(i[o].v.charAt(u)==="0"||i[o].v.charAt(u)==="#")&&(Q=D.charAt(K--)+Q);i[o].v=Q,i[o].t="t",A=o}for(K>=0&&A<i.length&&(i[A].v=D.substr(0,K+1)+i[A].v),K=D.indexOf(".")+1,o=T;o<i.length;++o)if(!(i[o]==null||"n?(".indexOf(i[o].t)===-1&&o!==T)){for(u=i[o].v.indexOf(".")>-1&&o===T?i[o].v.indexOf(".")+1:0,Q=i[o].v.substr(0,u);u<i[o].v.length;++u)K<D.length&&(Q+=D.charAt(K++));i[o].v=Q,i[o].t="t",A=o}}}for(o=0;o<i.length;++o)i[o]!=null&&"n?".indexOf(i[o].t)>-1&&(te=r>1&&e<0&&o>0&&i[o-1].v==="-"?-e:e,i[o].v=Rc(i[o].t,i[o].v,te),i[o].t="t");var F="";for(o=0;o!==i.length;++o)i[o]!=null&&(F+=i[o].v);return F}var n8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function r8(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function Fde(n,e){var t=Rde(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break;case 4:break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var o=t[0].match(n8),a=t[1].match(n8);return r8(e,o)?[r,t[0]]:r8(e,a)?[r,t[1]]:[r,t[o!=null&&a!=null?2:1]]}return[r,s]}function eu(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:Er)[n],r==null&&(r=t.table&&t.table[J6[n]]||Er[J6[n]]),r==null&&(r=mde[n]||"General");break}if(Jx(r,0))return FA(e,t);e instanceof Date&&(e=L8(e,t.date1904));var i=Fde(r,e);if(Jx(i[1]))return FA(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return Pde(i[1],e,t,i[0])}function G8(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(Er[t]==null){e<0&&(e=t);continue}if(Er[t]==n){e=t;break}}e<0&&(e=391)}return Er[e]=n,e}function fw(n){for(var e=0;e!=392;++e)n[e]!==void 0&&G8(n[e],e)}function hw(){Er=pde()}var K8=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Ode(n){var e=typeof n=="number"?Er[n]:n;return e=e.replace(K8,"(\\d+)"),new RegExp("^"+e+"$")}function Nde(n,e,t){var r=-1,i=-1,s=-1,o=-1,a=-1,c=-1;(e.match(K8)||[]).forEach(function(d,m){var g=parseInt(t[m+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=g;break;case"d":s=g;break;case"h":o=g;break;case"s":c=g;break;case"m":o>=0?a=g:i=g;break}}),c>=0&&a==-1&&i>=0&&(a=i,i=-1);var l=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);l.length==7&&(l="0"+l),l.length==8&&(l="20"+l);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&a==-1&&c==-1?l:r==-1&&i==-1&&s==-1?u:l+"T"+u}var Lde=function(){var n={};n.version="1.2.0";function e(){for(var D=0,T=new Array(256),A=0;A!=256;++A)D=A,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,T[A]=D;return typeof Int32Array<"u"?new Int32Array(T):T}var t=e();function r(D){var T=0,A=0,F=0,N=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)N[F]=D[F];for(F=0;F!=256;++F)for(A=D[F],T=256+F;T<4096;T+=256)A=N[T]=A>>>8^D[A&255];var V=[];for(F=1;F!=16;++F)V[F-1]=typeof Int32Array<"u"?N.subarray(F*256,F*256+256):N.slice(F*256,F*256+256);return V}var i=r(t),s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],u=i[5],d=i[6],m=i[7],g=i[8],w=i[9],y=i[10],E=i[11],M=i[12],k=i[13],O=i[14];function K(D,T){for(var A=T^-1,F=0,N=D.length;F<N;)A=A>>>8^t[(A^D.charCodeAt(F++))&255];return~A}function Q(D,T){for(var A=T^-1,F=D.length-15,N=0;N<F;)A=O[D[N++]^A&255]^k[D[N++]^A>>8&255]^M[D[N++]^A>>16&255]^E[D[N++]^A>>>24]^y[D[N++]]^w[D[N++]]^g[D[N++]]^m[D[N++]]^d[D[N++]]^u[D[N++]]^l[D[N++]]^c[D[N++]]^a[D[N++]]^o[D[N++]]^s[D[N++]]^t[D[N++]];for(F+=15;N<F;)A=A>>>8^t[(A^D[N++])&255];return~A}function te(D,T){for(var A=T^-1,F=0,N=D.length,V=0,U=0;F<N;)V=D.charCodeAt(F++),V<128?A=A>>>8^t[(A^V)&255]:V<2048?(A=A>>>8^t[(A^(192|V>>6&31))&255],A=A>>>8^t[(A^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,U=D.charCodeAt(F++)&1023,A=A>>>8^t[(A^(240|V>>8&7))&255],A=A>>>8^t[(A^(128|V>>2&63))&255],A=A>>>8^t[(A^(128|U>>6&15|(V&3)<<4))&255],A=A>>>8^t[(A^(128|U&63))&255]):(A=A>>>8^t[(A^(224|V>>12&15))&255],A=A>>>8^t[(A^(128|V>>6&63))&255],A=A>>>8^t[(A^(128|V&63))&255]);return~A}return n.table=t,n.bstr=K,n.buf=Q,n.str=te,n}(),In=function(){var e={};e.version="1.2.1";function t(P,j){for(var B=P.split("/"),H=j.split("/"),q=0,G=0,de=Math.min(B.length,H.length);q<de;++q){if(G=B[q].length-H[q].length)return G;if(B[q]!=H[q])return B[q]<H[q]?-1:1}return B.length-H.length}function r(P){if(P.charAt(P.length-1)=="/")return P.slice(0,-1).indexOf("/")===-1?P:r(P.slice(0,-1));var j=P.lastIndexOf("/");return j===-1?P:P.slice(0,j+1)}function i(P){if(P.charAt(P.length-1)=="/")return i(P.slice(0,-1));var j=P.lastIndexOf("/");return j===-1?P:P.slice(j+1)}function s(P,j){typeof j=="string"&&(j=new Date(j));var B=j.getHours();B=B<<6|j.getMinutes(),B=B<<5|j.getSeconds()>>>1,P.write_shift(2,B);var H=j.getFullYear()-1980;H=H<<4|j.getMonth()+1,H=H<<5|j.getDate(),P.write_shift(2,H)}function o(P){var j=P.read_shift(2)&65535,B=P.read_shift(2)&65535,H=new Date,q=B&31;B>>>=5;var G=B&15;B>>>=4,H.setMilliseconds(0),H.setFullYear(B+1980),H.setMonth(G-1),H.setDate(q);var de=j&31;j>>>=5;var ve=j&63;return j>>>=6,H.setHours(j),H.setMinutes(ve),H.setSeconds(de<<1),H}function a(P){Fs(P,0);for(var j={},B=0;P.l<=P.length-4;){var H=P.read_shift(2),q=P.read_shift(2),G=P.l+q,de={};switch(H){case 21589:B=P.read_shift(1),B&1&&(de.mtime=P.read_shift(4)),q>5&&(B&2&&(de.atime=P.read_shift(4)),B&4&&(de.ctime=P.read_shift(4))),de.mtime&&(de.mt=new Date(de.mtime*1e3));break}P.l=G,j[H]=de}return j}var c;function l(){return c||(c={})}function u(P,j){if(P[0]==80&&P[1]==75)return cu(P,j);if((P[0]|32)==109&&(P[1]|32)==105)return La(P,j);if(P.length<512)throw new Error("CFB file size "+P.length+" < 512");var B=3,H=512,q=0,G=0,de=0,ve=0,ce=0,ue=[],he=P.slice(0,512);Fs(he,0);var Ie=d(he);switch(B=Ie[0],B){case 3:H=512;break;case 4:H=4096;break;case 0:if(Ie[1]==0)return cu(P,j);default:throw new Error("Major Version: Expected 3 or 4 saw "+B)}H!==512&&(he=P.slice(0,H),Fs(he,28));var Ee=P.slice(0,H);m(he,B);var qe=he.read_shift(4,"i");if(B===3&&qe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+qe);he.l+=4,de=he.read_shift(4,"i"),he.l+=4,he.chk("00100000","Mini Stream Cutoff Size: "),ve=he.read_shift(4,"i"),q=he.read_shift(4,"i"),ce=he.read_shift(4,"i"),G=he.read_shift(4,"i");for(var Me=-1,Le=0;Le<109&&(Me=he.read_shift(4,"i"),!(Me<0));++Le)ue[Le]=Me;var st=g(P,H);E(ce,G,st,H,ue);var dn=k(st,de,ue,H);dn[de].name="!Directory",q>0&&ve!==U&&(dn[ve].name="!MiniFAT"),dn[ue[0]].name="!FAT",dn.fat_addrs=ue,dn.ssz=H;var Ar={},Sn=[],Zn=[],ro=[];O(de,dn,st,Sn,q,Ar,Zn,ve),w(Zn,ro,Sn),Sn.shift();var Uo={FileIndex:Zn,FullPaths:ro};return j&&j.raw&&(Uo.raw={header:Ee,sectors:st}),Uo}function d(P){if(P[P.l]==80&&P[P.l+1]==75)return[0,0];P.chk(nt,"Header Signature: "),P.l+=16;var j=P.read_shift(2,"u");return[P.read_shift(2,"u"),j]}function m(P,j){var B=9;switch(P.l+=2,B=P.read_shift(2)){case 9:if(j!=3)throw new Error("Sector Shift: Expected 9 saw "+B);break;case 12:if(j!=4)throw new Error("Sector Shift: Expected 12 saw "+B);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+B)}P.chk("0600","Mini Sector Shift: "),P.chk("000000000000","Reserved: ")}function g(P,j){for(var B=Math.ceil(P.length/j)-1,H=[],q=1;q<B;++q)H[q-1]=P.slice(q*j,(q+1)*j);return H[B-1]=P.slice(B*j),H}function w(P,j,B){for(var H=0,q=0,G=0,de=0,ve=0,ce=B.length,ue=[],he=[];H<ce;++H)ue[H]=he[H]=H,j[H]=B[H];for(;ve<he.length;++ve)H=he[ve],q=P[H].L,G=P[H].R,de=P[H].C,ue[H]===H&&(q!==-1&&ue[q]!==q&&(ue[H]=ue[q]),G!==-1&&ue[G]!==G&&(ue[H]=ue[G])),de!==-1&&(ue[de]=H),q!==-1&&H!=ue[H]&&(ue[q]=ue[H],he.lastIndexOf(q)<ve&&he.push(q)),G!==-1&&H!=ue[H]&&(ue[G]=ue[H],he.lastIndexOf(G)<ve&&he.push(G));for(H=1;H<ce;++H)ue[H]===H&&(G!==-1&&ue[G]!==G?ue[H]=ue[G]:q!==-1&&ue[q]!==q&&(ue[H]=ue[q]));for(H=1;H<ce;++H)if(P[H].type!==0){if(ve=H,ve!=ue[ve])do ve=ue[ve],j[H]=j[ve]+"/"+j[H];while(ve!==0&&ue[ve]!==-1&&ve!=ue[ve]);ue[H]=-1}for(j[0]+="/",H=1;H<ce;++H)P[H].type!==2&&(j[H]+="/")}function y(P,j,B){for(var H=P.start,q=P.size,G=[],de=H;B&&q>0&&de>=0;)G.push(j.slice(de*V,de*V+V)),q-=V,de=Dd(B,de*4);return G.length===0?_e(0):yi(G).slice(0,P.size)}function E(P,j,B,H,q){var G=U;if(P===U){if(j!==0)throw new Error("DIFAT chain shorter than expected")}else if(P!==-1){var de=B[P],ve=(H>>>2)-1;if(!de)return;for(var ce=0;ce<ve&&(G=Dd(de,ce*4))!==U;++ce)q.push(G);E(Dd(de,H-4),j-1,B,H,q)}}function M(P,j,B,H,q){var G=[],de=[];q||(q=[]);var ve=H-1,ce=0,ue=0;for(ce=j;ce>=0;){q[ce]=!0,G[G.length]=ce,de.push(P[ce]);var he=B[Math.floor(ce*4/H)];if(ue=ce*4&ve,H<4+ue)throw new Error("FAT boundary crossed: "+ce+" 4 "+H);if(!P[he])break;ce=Dd(P[he],ue)}return{nodes:G,data:d8([de])}}function k(P,j,B,H){var q=P.length,G=[],de=[],ve=[],ce=[],ue=H-1,he=0,Ie=0,Ee=0,qe=0;for(he=0;he<q;++he)if(ve=[],Ee=he+j,Ee>=q&&(Ee-=q),!de[Ee]){ce=[];var Me=[];for(Ie=Ee;Ie>=0;){Me[Ie]=!0,de[Ie]=!0,ve[ve.length]=Ie,ce.push(P[Ie]);var Le=B[Math.floor(Ie*4/H)];if(qe=Ie*4&ue,H<4+qe)throw new Error("FAT boundary crossed: "+Ie+" 4 "+H);if(!P[Le]||(Ie=Dd(P[Le],qe),Me[Ie]))break}G[Ee]={nodes:ve,data:d8([ce])}}return G}function O(P,j,B,H,q,G,de,ve){for(var ce=0,ue=H.length?2:0,he=j[P].data,Ie=0,Ee=0,qe;Ie<he.length;Ie+=128){var Me=he.slice(Ie,Ie+128);Fs(Me,64),Ee=Me.read_shift(2),qe=gw(Me,0,Ee-ue),H.push(qe);var Le={name:qe,type:Me.read_shift(1),color:Me.read_shift(1),L:Me.read_shift(4,"i"),R:Me.read_shift(4,"i"),C:Me.read_shift(4,"i"),clsid:Me.read_shift(16),state:Me.read_shift(4,"i"),start:0,size:0},st=Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2);st!==0&&(Le.ct=K(Me,Me.l-8));var dn=Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2)+Me.read_shift(2);dn!==0&&(Le.mt=K(Me,Me.l-8)),Le.start=Me.read_shift(4,"i"),Le.size=Me.read_shift(4,"i"),Le.size<0&&Le.start<0&&(Le.size=Le.type=0,Le.start=U,Le.name=""),Le.type===5?(ce=Le.start,q>0&&ce!==U&&(j[ce].name="!StreamData")):Le.size>=4096?(Le.storage="fat",j[Le.start]===void 0&&(j[Le.start]=M(B,Le.start,j.fat_addrs,j.ssz)),j[Le.start].name=Le.name,Le.content=j[Le.start].data.slice(0,Le.size)):(Le.storage="minifat",Le.size<0?Le.size=0:ce!==U&&Le.start!==U&&j[ce]&&(Le.content=y(Le,j[ce].data,(j[ve]||{}).data))),Le.content&&Fs(Le.content,0),G[qe]=Le,de.push(Le)}}function K(P,j){return new Date((ai(P,j+4)/1e7*Math.pow(2,32)+ai(P,j)/1e7-11644473600)*1e3)}function Q(P,j){return l(),u(c.readFileSync(P),j)}function te(P,j){var B=j&&j.type;switch(B||un&&Buffer.isBuffer(P)&&(B="buffer"),B||"base64"){case"file":return Q(P,j);case"base64":return u(No(Oc(P)),j);case"binary":return u(No(P),j)}return u(P,j)}function D(P,j){var B=j||{},H=B.root||"Root Entry";if(P.FullPaths||(P.FullPaths=[]),P.FileIndex||(P.FileIndex=[]),P.FullPaths.length!==P.FileIndex.length)throw new Error("inconsistent CFB structure");P.FullPaths.length===0&&(P.FullPaths[0]=H+"/",P.FileIndex[0]={name:H,type:5}),B.CLSID&&(P.FileIndex[0].clsid=B.CLSID),T(P)}function T(P){var j="Sh33tJ5";if(!In.find(P,"/"+j)){var B=_e(4);B[0]=55,B[1]=B[3]=50,B[2]=54,P.FileIndex.push({name:j,type:2,content:B,size:4,L:69,R:69,C:69}),P.FullPaths.push(P.FullPaths[0]+j),A(P)}}function A(P,j){D(P);for(var B=!1,H=!1,q=P.FullPaths.length-1;q>=0;--q){var G=P.FileIndex[q];switch(G.type){case 0:H?B=!0:(P.FileIndex.pop(),P.FullPaths.pop());break;case 1:case 2:case 5:H=!0,isNaN(G.R*G.L*G.C)&&(B=!0),G.R>-1&&G.L>-1&&G.R==G.L&&(B=!0);break;default:B=!0;break}}if(!(!B&&!j)){var de=new Date(1987,1,19),ve=0,ce=Object.create?Object.create(null):{},ue=[];for(q=0;q<P.FullPaths.length;++q)ce[P.FullPaths[q]]=!0,P.FileIndex[q].type!==0&&ue.push([P.FullPaths[q],P.FileIndex[q]]);for(q=0;q<ue.length;++q){var he=r(ue[q][0]);H=ce[he],H||(ue.push([he,{name:i(he).replace("/",""),type:1,clsid:lt,ct:de,mt:de,content:null}]),ce[he]=!0)}for(ue.sort(function(qe,Me){return t(qe[0],Me[0])}),P.FullPaths=[],P.FileIndex=[],q=0;q<ue.length;++q)P.FullPaths[q]=ue[q][0],P.FileIndex[q]=ue[q][1];for(q=0;q<ue.length;++q){var Ie=P.FileIndex[q],Ee=P.FullPaths[q];if(Ie.name=i(Ee).replace("/",""),Ie.L=Ie.R=Ie.C=-(Ie.color=1),Ie.size=Ie.content?Ie.content.length:0,Ie.start=0,Ie.clsid=Ie.clsid||lt,q===0)Ie.C=ue.length>1?1:-1,Ie.size=0,Ie.type=5;else if(Ee.slice(-1)=="/"){for(ve=q+1;ve<ue.length&&r(P.FullPaths[ve])!=Ee;++ve);for(Ie.C=ve>=ue.length?-1:ve,ve=q+1;ve<ue.length&&r(P.FullPaths[ve])!=r(Ee);++ve);Ie.R=ve>=ue.length?-1:ve,Ie.type=1}else r(P.FullPaths[q+1]||"")==r(Ee)&&(Ie.R=q+1),Ie.type=2}}}function F(P,j){var B=j||{};if(B.fileType=="mad")return Hd(P,B);switch(A(P),B.fileType){case"zip":return Na(P,B)}var H=function(qe){for(var Me=0,Le=0,st=0;st<qe.FileIndex.length;++st){var dn=qe.FileIndex[st];if(dn.content){var Ar=dn.content.length;Ar>0&&(Ar<4096?Me+=Ar+63>>6:Le+=Ar+511>>9)}}for(var Sn=qe.FullPaths.length+3>>2,Zn=Me+7>>3,ro=Me+127>>7,Uo=Zn+Le+Sn+ro,Vs=Uo+127>>7,jo=Vs<=109?0:Math.ceil((Vs-109)/127);Uo+Vs+jo+127>>7>Vs;)jo=++Vs<=109?0:Math.ceil((Vs-109)/127);var Li=[1,jo,Vs,ro,Sn,Le,Me,0];return qe.FileIndex[0].size=Me<<6,Li[7]=(qe.FileIndex[0].start=Li[0]+Li[1]+Li[2]+Li[3]+Li[4]+Li[5])+(Li[6]+7>>3),Li}(P),q=_e(H[7]<<9),G=0,de=0;{for(G=0;G<8;++G)q.write_shift(1,Ae[G]);for(G=0;G<8;++G)q.write_shift(2,0);for(q.write_shift(2,62),q.write_shift(2,3),q.write_shift(2,65534),q.write_shift(2,9),q.write_shift(2,6),G=0;G<3;++G)q.write_shift(2,0);for(q.write_shift(4,0),q.write_shift(4,H[2]),q.write_shift(4,H[0]+H[1]+H[2]+H[3]-1),q.write_shift(4,0),q.write_shift(4,4096),q.write_shift(4,H[3]?H[0]+H[1]+H[2]-1:U),q.write_shift(4,H[3]),q.write_shift(-4,H[1]?H[0]-1:U),q.write_shift(4,H[1]),G=0;G<109;++G)q.write_shift(-4,G<H[2]?H[1]+G:-1)}if(H[1])for(de=0;de<H[1];++de){for(;G<236+de*127;++G)q.write_shift(-4,G<H[2]?H[1]+G:-1);q.write_shift(-4,de===H[1]-1?U:de+1)}var ve=function(qe){for(de+=qe;G<de-1;++G)q.write_shift(-4,G+1);qe&&(++G,q.write_shift(-4,U))};for(de=G=0,de+=H[1];G<de;++G)q.write_shift(-4,ut.DIFSECT);for(de+=H[2];G<de;++G)q.write_shift(-4,ut.FATSECT);ve(H[3]),ve(H[4]);for(var ce=0,ue=0,he=P.FileIndex[0];ce<P.FileIndex.length;++ce)he=P.FileIndex[ce],he.content&&(ue=he.content.length,!(ue<4096)&&(he.start=de,ve(ue+511>>9)));for(ve(H[6]+7>>3);q.l&511;)q.write_shift(-4,ut.ENDOFCHAIN);for(de=G=0,ce=0;ce<P.FileIndex.length;++ce)he=P.FileIndex[ce],he.content&&(ue=he.content.length,!(!ue||ue>=4096)&&(he.start=de,ve(ue+63>>6)));for(;q.l&511;)q.write_shift(-4,ut.ENDOFCHAIN);for(G=0;G<H[4]<<2;++G){var Ie=P.FullPaths[G];if(!Ie||Ie.length===0){for(ce=0;ce<17;++ce)q.write_shift(4,0);for(ce=0;ce<3;++ce)q.write_shift(4,-1);for(ce=0;ce<12;++ce)q.write_shift(4,0);continue}he=P.FileIndex[G],G===0&&(he.start=he.size?he.start-1:U);var Ee=G===0&&B.root||he.name;if(ue=2*(Ee.length+1),q.write_shift(64,Ee,"utf16le"),q.write_shift(2,ue),q.write_shift(1,he.type),q.write_shift(1,he.color),q.write_shift(-4,he.L),q.write_shift(-4,he.R),q.write_shift(-4,he.C),he.clsid)q.write_shift(16,he.clsid,"hex");else for(ce=0;ce<4;++ce)q.write_shift(4,0);q.write_shift(4,he.state||0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,0),q.write_shift(4,he.start),q.write_shift(4,he.size),q.write_shift(4,0)}for(G=1;G<P.FileIndex.length;++G)if(he=P.FileIndex[G],he.size>=4096)if(q.l=he.start+1<<9,un&&Buffer.isBuffer(he.content))he.content.copy(q,q.l,0,he.size),q.l+=he.size+511&-512;else{for(ce=0;ce<he.size;++ce)q.write_shift(1,he.content[ce]);for(;ce&511;++ce)q.write_shift(1,0)}for(G=1;G<P.FileIndex.length;++G)if(he=P.FileIndex[G],he.size>0&&he.size<4096)if(un&&Buffer.isBuffer(he.content))he.content.copy(q,q.l,0,he.size),q.l+=he.size+63&-64;else{for(ce=0;ce<he.size;++ce)q.write_shift(1,he.content[ce]);for(;ce&63;++ce)q.write_shift(1,0)}if(un)q.l=q.length;else for(;q.l<q.length;)q.write_shift(1,0);return q}function N(P,j){var B=P.FullPaths.map(function(ce){return ce.toUpperCase()}),H=B.map(function(ce){var ue=ce.split("/");return ue[ue.length-(ce.slice(-1)=="/"?2:1)]}),q=!1;j.charCodeAt(0)===47?(q=!0,j=B[0].slice(0,-1)+j):q=j.indexOf("/")!==-1;var G=j.toUpperCase(),de=q===!0?B.indexOf(G):H.indexOf(G);if(de!==-1)return P.FileIndex[de];var ve=!G.match(zx);for(G=G.replace(Gh,""),ve&&(G=G.replace(zx,"!")),de=0;de<B.length;++de)if((ve?B[de].replace(zx,"!"):B[de]).replace(Gh,"")==G||(ve?H[de].replace(zx,"!"):H[de]).replace(Gh,"")==G)return P.FileIndex[de];return null}var V=64,U=-2,nt="d0cf11e0a1b11ae1",Ae=[208,207,17,224,161,177,26,225],lt="00000000000000000000000000000000",ut={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:nt,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:lt,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ut(P,j,B){l();var H=F(P,B);c.writeFileSync(j,H)}function It(P){for(var j=new Array(P.length),B=0;B<P.length;++B)j[B]=String.fromCharCode(P[B]);return j.join("")}function Ft(P,j){var B=F(P,j);switch(j&&j.type||"buffer"){case"file":return l(),c.writeFileSync(j.filename,B),B;case"binary":return typeof B=="string"?B:It(B);case"base64":return Um(typeof B=="string"?B:It(B));case"buffer":if(un)return Buffer.isBuffer(B)?B:Lc(B);case"array":return typeof B=="string"?No(B):B}return B}var Cn;function Z(P){try{var j=P.InflateRaw,B=new j;if(B._processChunk(new Uint8Array([3,0]),B._finishFlushFlag),B.bytesRead)Cn=P;else throw new Error("zlib does not expose bytesRead")}catch(H){console.error("cannot use native zlib: "+(H.message||H))}}function me(P,j){if(!Cn)return Bd(P,j);var B=Cn.InflateRaw,H=new B,q=H._processChunk(P.slice(P.l),H._finishFlushFlag);return P.l+=H.bytesRead,q}function re(P){return Cn?Cn.deflateRawSync(P):Dr(P)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],we=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function rt(P){var j=(P<<1|P<<11)&139536|(P<<5|P<<15)&558144;return(j>>16|j>>8|j)&255}for(var Ge=typeof Uint8Array<"u",ke=Ge?new Uint8Array(256):[],Lt=0;Lt<256;++Lt)ke[Lt]=rt(Lt);function xt(P,j){var B=ke[P&255];return j<=8?B>>>8-j:(B=B<<8|ke[P>>8&255],j<=16?B>>>16-j:(B=B<<8|ke[P>>16&255],B>>>24-j))}function sr(P,j){var B=j&7,H=j>>>3;return(P[H]|(B<=6?0:P[H+1]<<8))>>>B&3}function ct(P,j){var B=j&7,H=j>>>3;return(P[H]|(B<=5?0:P[H+1]<<8))>>>B&7}function qn(P,j){var B=j&7,H=j>>>3;return(P[H]|(B<=4?0:P[H+1]<<8))>>>B&15}function Tn(P,j){var B=j&7,H=j>>>3;return(P[H]|(B<=3?0:P[H+1]<<8))>>>B&31}function Ve(P,j){var B=j&7,H=j>>>3;return(P[H]|(B<=1?0:P[H+1]<<8))>>>B&127}function Wr(P,j,B){var H=j&7,q=j>>>3,G=(1<<B)-1,de=P[q]>>>H;return B<8-H||(de|=P[q+1]<<8-H,B<16-H)||(de|=P[q+2]<<16-H,B<24-H)||(de|=P[q+3]<<24-H),de&G}function Ni(P,j,B){var H=j&7,q=j>>>3;return H<=5?P[q]|=(B&7)<<H:(P[q]|=B<<H&255,P[q+1]=(B&7)>>8-H),j+3}function ps(P,j,B){var H=j&7,q=j>>>3;return B=(B&1)<<H,P[q]|=B,j+1}function mt(P,j,B){var H=j&7,q=j>>>3;return B<<=H,P[q]|=B&255,B>>>=8,P[q+1]=B,j+8}function Jr(P,j,B){var H=j&7,q=j>>>3;return B<<=H,P[q]|=B&255,B>>>=8,P[q+1]=B&255,P[q+2]=B>>>8,j+16}function Gi(P,j){var B=P.length,H=2*B>j?2*B:j+5,q=0;if(B>=j)return P;if(un){var G=Y6(H);if(P.copy)P.copy(G);else for(;q<P.length;++q)G[q]=P[q];return G}else if(Ge){var de=new Uint8Array(H);if(de.set)de.set(P);else for(;q<B;++q)de[q]=P[q];return de}return P.length=H,P}function dr(P){for(var j=new Array(P),B=0;B<P;++B)j[B]=0;return j}function Dn(P,j,B){var H=1,q=0,G=0,de=0,ve=0,ce=P.length,ue=Ge?new Uint16Array(32):dr(32);for(G=0;G<32;++G)ue[G]=0;for(G=ce;G<B;++G)P[G]=0;ce=P.length;var he=Ge?new Uint16Array(ce):dr(ce);for(G=0;G<ce;++G)ue[q=P[G]]++,H<q&&(H=q),he[G]=0;for(ue[0]=0,G=1;G<=H;++G)ue[G+16]=ve=ve+ue[G-1]<<1;for(G=0;G<ce;++G)ve=P[G],ve!=0&&(he[G]=ue[ve+16]++);var Ie=0;for(G=0;G<ce;++G)if(Ie=P[G],Ie!=0)for(ve=xt(he[G],H)>>H-Ie,de=(1<<H+4-Ie)-1;de>=0;--de)j[ve|de<<Ie]=Ie&15|G<<4;return H}var Yn=Ge?new Uint16Array(512):dr(512),Xn=Ge?new Uint16Array(32):dr(32);if(!Ge){for(var Ln=0;Ln<512;++Ln)Yn[Ln]=0;for(Ln=0;Ln<32;++Ln)Xn[Ln]=0}(function(){for(var P=[],j=0;j<32;j++)P.push(5);Dn(P,Xn,32);var B=[];for(j=0;j<=143;j++)B.push(8);for(;j<=255;j++)B.push(9);for(;j<=279;j++)B.push(7);for(;j<=287;j++)B.push(8);Dn(B,Yn,288)})();var Ls=function(){for(var j=Ge?new Uint8Array(32768):[],B=0,H=0;B<Be.length-1;++B)for(;H<Be[B+1];++H)j[H]=B;for(;H<32768;++H)j[H]=29;var q=Ge?new Uint8Array(259):[];for(B=0,H=0;B<we.length-1;++B)for(;H<we[B+1];++H)q[H]=B;function G(ve,ce){for(var ue=0;ue<ve.length;){var he=Math.min(65535,ve.length-ue),Ie=ue+he==ve.length;for(ce.write_shift(1,+Ie),ce.write_shift(2,he),ce.write_shift(2,~he&65535);he-- >0;)ce[ce.l++]=ve[ue++]}return ce.l}function de(ve,ce){for(var ue=0,he=0,Ie=Ge?new Uint16Array(32768):[];he<ve.length;){var Ee=Math.min(65535,ve.length-he);if(Ee<10){for(ue=Ni(ce,ue,+(he+Ee==ve.length)),ue&7&&(ue+=8-(ue&7)),ce.l=ue/8|0,ce.write_shift(2,Ee),ce.write_shift(2,~Ee&65535);Ee-- >0;)ce[ce.l++]=ve[he++];ue=ce.l*8;continue}ue=Ni(ce,ue,+(he+Ee==ve.length)+2);for(var qe=0;Ee-- >0;){var Me=ve[he];qe=(qe<<5^Me)&32767;var Le=-1,st=0;if((Le=Ie[qe])&&(Le|=he&-32768,Le>he&&(Le-=32768),Le<he))for(;ve[Le+st]==ve[he+st]&&st<250;)++st;if(st>2){Me=q[st],Me<=22?ue=mt(ce,ue,ke[Me+1]>>1)-1:(mt(ce,ue,3),ue+=5,mt(ce,ue,ke[Me-23]>>5),ue+=3);var dn=Me<8?0:Me-4>>2;dn>0&&(Jr(ce,ue,st-we[Me]),ue+=dn),Me=j[he-Le],ue=mt(ce,ue,ke[Me]>>3),ue-=3;var Ar=Me<4?0:Me-2>>1;Ar>0&&(Jr(ce,ue,he-Le-Be[Me]),ue+=Ar);for(var Sn=0;Sn<st;++Sn)Ie[qe]=he&32767,qe=(qe<<5^ve[he])&32767,++he;Ee-=st-1}else Me<=143?Me=Me+48:ue=ps(ce,ue,1),ue=mt(ce,ue,ke[Me]),Ie[qe]=he&32767,++he}ue=mt(ce,ue,0)-1}return ce.l=(ue+7)/8|0,ce.l}return function(ce,ue){return ce.length<8?G(ce,ue):de(ce,ue)}}();function Dr(P){var j=_e(50+Math.floor(P.length*1.1)),B=Ls(P,j);return j.slice(0,B)}var iu=Ge?new Uint16Array(32768):dr(32768),su=Ge?new Uint16Array(32768):dr(32768),no=Ge?new Uint16Array(128):dr(128),Oa=1,ou=1;function au(P,j){var B=Tn(P,j)+257;j+=5;var H=Tn(P,j)+1;j+=5;var q=qn(P,j)+4;j+=4;for(var G=0,de=Ge?new Uint8Array(19):dr(19),ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ce=1,ue=Ge?new Uint8Array(8):dr(8),he=Ge?new Uint8Array(8):dr(8),Ie=de.length,Ee=0;Ee<q;++Ee)de[ne[Ee]]=G=ct(P,j),ce<G&&(ce=G),ue[G]++,j+=3;var qe=0;for(ue[0]=0,Ee=1;Ee<=ce;++Ee)he[Ee]=qe=qe+ue[Ee-1]<<1;for(Ee=0;Ee<Ie;++Ee)(qe=de[Ee])!=0&&(ve[Ee]=he[qe]++);var Me=0;for(Ee=0;Ee<Ie;++Ee)if(Me=de[Ee],Me!=0){qe=ke[ve[Ee]]>>8-Me;for(var Le=(1<<7-Me)-1;Le>=0;--Le)no[qe|Le<<Me]=Me&7|Ee<<3}var st=[];for(ce=1;st.length<B+H;)switch(qe=no[Ve(P,j)],j+=qe&7,qe>>>=3){case 16:for(G=3+sr(P,j),j+=2,qe=st[st.length-1];G-- >0;)st.push(qe);break;case 17:for(G=3+ct(P,j),j+=3;G-- >0;)st.push(0);break;case 18:for(G=11+Ve(P,j),j+=7;G-- >0;)st.push(0);break;default:st.push(qe),ce<qe&&(ce=qe);break}var dn=st.slice(0,B),Ar=st.slice(B);for(Ee=B;Ee<286;++Ee)dn[Ee]=0;for(Ee=H;Ee<30;++Ee)Ar[Ee]=0;return Oa=Dn(dn,iu,286),ou=Dn(Ar,su,30),j}function s0(P,j){if(P[0]==3&&!(P[1]&3))return[Md(j),2];for(var B=0,H=0,q=Y6(j||1<<18),G=0,de=q.length>>>0,ve=0,ce=0;!(H&1);){if(H=ct(P,B),B+=3,H>>>1)H>>1==1?(ve=9,ce=5):(B=au(P,B),ve=Oa,ce=ou);else{B&7&&(B+=8-(B&7));var ue=P[B>>>3]|P[(B>>>3)+1]<<8;if(B+=32,ue>0)for(!j&&de<G+ue&&(q=Gi(q,G+ue),de=q.length);ue-- >0;)q[G++]=P[B>>>3],B+=8;continue}for(;;){!j&&de<G+32767&&(q=Gi(q,G+32767),de=q.length);var he=Wr(P,B,ve),Ie=H>>>1==1?Yn[he]:iu[he];if(B+=Ie&15,Ie>>>=4,!(Ie>>>8&255))q[G++]=Ie;else{if(Ie==256)break;Ie-=257;var Ee=Ie<8?0:Ie-4>>2;Ee>5&&(Ee=0);var qe=G+we[Ie];Ee>0&&(qe+=Wr(P,B,Ee),B+=Ee),he=Wr(P,B,ce),Ie=H>>>1==1?Xn[he]:su[he],B+=Ie&15,Ie>>>=4;var Me=Ie<4?0:Ie-2>>1,Le=Be[Ie];for(Me>0&&(Le+=Wr(P,B,Me),B+=Me),!j&&de<qe&&(q=Gi(q,qe+100),de=q.length);G<qe;)q[G]=q[G-Le],++G}}}return j?[q,B+7>>>3]:[q.slice(0,G),B+7>>>3]}function Bd(P,j){var B=P.slice(P.l||0),H=s0(B,j);return P.l+=H[1],H[0]}function Ki(P,j){if(P)typeof console<"u"&&console.error(j);else throw new Error(j)}function cu(P,j){var B=P;Fs(B,0);var H=[],q=[],G={FileIndex:H,FullPaths:q};D(G,{root:j.root});for(var de=B.length-4;(B[de]!=80||B[de+1]!=75||B[de+2]!=5||B[de+3]!=6)&&de>=0;)--de;B.l=de+4,B.l+=4;var ve=B.read_shift(2);B.l+=6;var ce=B.read_shift(4);for(B.l=ce,de=0;de<ve;++de){B.l+=20;var ue=B.read_shift(4),he=B.read_shift(4),Ie=B.read_shift(2),Ee=B.read_shift(2),qe=B.read_shift(2);B.l+=8;var Me=B.read_shift(4),Le=a(B.slice(B.l+Ie,B.l+Ie+Ee));B.l+=Ie+Ee+qe;var st=B.l;B.l=Me+4,Ud(B,ue,he,G,Le),B.l=st}return G}function Ud(P,j,B,H,q){P.l+=2;var G=P.read_shift(2),de=P.read_shift(2),ve=o(P);if(G&8257)throw new Error("Unsupported ZIP encryption");for(var ce=P.read_shift(4),ue=P.read_shift(4),he=P.read_shift(4),Ie=P.read_shift(2),Ee=P.read_shift(2),qe="",Me=0;Me<Ie;++Me)qe+=String.fromCharCode(P[P.l++]);if(Ee){var Le=a(P.slice(P.l,P.l+Ee));(Le[21589]||{}).mt&&(ve=Le[21589].mt),((q||{})[21589]||{}).mt&&(ve=q[21589].mt)}P.l+=Ee;var st=P.slice(P.l,P.l+ue);switch(de){case 8:st=me(P,he);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+de)}var dn=!1;G&8&&(ce=P.read_shift(4),ce==134695760&&(ce=P.read_shift(4),dn=!0),ue=P.read_shift(4),he=P.read_shift(4)),ue!=j&&Ki(dn,"Bad compressed size: "+j+" != "+ue),he!=B&&Ki(dn,"Bad uncompressed size: "+B+" != "+he),Bc(H,qe,st,{unsafe:!0,mt:ve})}function Na(P,j){var B=j||{},H=[],q=[],G=_e(1),de=B.compression?8:0,ve=0,ce=!1;ce&&(ve|=8);var ue=0,he=0,Ie=0,Ee=0,qe=P.FullPaths[0],Me=qe,Le=P.FileIndex[0],st=[],dn=0;for(ue=1;ue<P.FullPaths.length;++ue)if(Me=P.FullPaths[ue].slice(qe.length),Le=P.FileIndex[ue],!(!Le.size||!Le.content||Me=="Sh33tJ5")){var Ar=Ie,Sn=_e(Me.length);for(he=0;he<Me.length;++he)Sn.write_shift(1,Me.charCodeAt(he)&127);Sn=Sn.slice(0,Sn.l),st[Ee]=Lde.buf(Le.content,0);var Zn=Le.content;de==8&&(Zn=re(Zn)),G=_e(30),G.write_shift(4,67324752),G.write_shift(2,20),G.write_shift(2,ve),G.write_shift(2,de),Le.mt?s(G,Le.mt):G.write_shift(4,0),G.write_shift(-4,ve&8?0:st[Ee]),G.write_shift(4,ve&8?0:Zn.length),G.write_shift(4,ve&8?0:Le.content.length),G.write_shift(2,Sn.length),G.write_shift(2,0),Ie+=G.length,H.push(G),Ie+=Sn.length,H.push(Sn),Ie+=Zn.length,H.push(Zn),ve&8&&(G=_e(12),G.write_shift(-4,st[Ee]),G.write_shift(4,Zn.length),G.write_shift(4,Le.content.length),Ie+=G.l,H.push(G)),G=_e(46),G.write_shift(4,33639248),G.write_shift(2,0),G.write_shift(2,20),G.write_shift(2,ve),G.write_shift(2,de),G.write_shift(4,0),G.write_shift(-4,st[Ee]),G.write_shift(4,Zn.length),G.write_shift(4,Le.content.length),G.write_shift(2,Sn.length),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(4,0),G.write_shift(4,Ar),dn+=G.l,q.push(G),dn+=Sn.length,q.push(Sn),++Ee}return G=_e(22),G.write_shift(4,101010256),G.write_shift(2,0),G.write_shift(2,0),G.write_shift(2,Ee),G.write_shift(2,Ee),G.write_shift(4,dn),G.write_shift(4,Ie),G.write_shift(2,0),yi([yi(H),yi(q),G])}var Bo={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function lu(P,j){if(P.ctype)return P.ctype;var B=P.name||"",H=B.match(/\.([^\.]+)$/);return H&&Bo[H[1]]||j&&(H=(B=j).match(/[\.\\]([^\.\\])+$/),H&&Bo[H[1]])?Bo[H[1]]:"application/octet-stream"}function ms(P){for(var j=Um(P),B=[],H=0;H<j.length;H+=76)B.push(j.slice(H,H+76));return B.join(`\r
`)+`\r
`}function jd(P){var j=P.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ue){var he=ue.charCodeAt(0).toString(16).toUpperCase();return"="+(he.length==1?"0"+he:he)});j=j.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),j.charAt(0)==`
`&&(j="=0D"+j.slice(1)),j=j.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var B=[],H=j.split(`\r
`),q=0;q<H.length;++q){var G=H[q];if(G.length==0){B.push("");continue}for(var de=0;de<G.length;){var ve=76,ce=G.slice(de,de+ve);ce.charAt(ve-1)=="="?ve--:ce.charAt(ve-2)=="="?ve-=2:ce.charAt(ve-3)=="="&&(ve-=3),ce=G.slice(de,de+ve),de+=ve,de<G.length&&(ce+="="),B.push(ce)}}return B.join(`\r
`)}function Vc(P){for(var j=[],B=0;B<P.length;++B){for(var H=P[B];B<=P.length&&H.charAt(H.length-1)=="=";)H=H.slice(0,H.length-1)+P[++B];j.push(H)}for(var q=0;q<j.length;++q)j[q]=j[q].replace(/[=][0-9A-Fa-f]{2}/g,function(G){return String.fromCharCode(parseInt(G.slice(1),16))});return No(j.join(`\r
`))}function $d(P,j,B){for(var H="",q="",G="",de,ve=0;ve<10;++ve){var ce=j[ve];if(!ce||ce.match(/^\s*$/))break;var ue=ce.match(/^(.*?):\s*([^\s].*)$/);if(ue)switch(ue[1].toLowerCase()){case"content-location":H=ue[2].trim();break;case"content-type":G=ue[2].trim();break;case"content-transfer-encoding":q=ue[2].trim();break}}switch(++ve,q.toLowerCase()){case"base64":de=No(Oc(j.slice(ve).join("")));break;case"quoted-printable":de=Vc(j.slice(ve));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+q)}var he=Bc(P,H.slice(B.length),de,{unsafe:!0});G&&(he.ctype=G)}function La(P,j){if(It(P.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var B=j&&j.root||"",H=(un&&Buffer.isBuffer(P)?P.toString("binary"):It(P)).split(`\r
`),q=0,G="";for(q=0;q<H.length;++q)if(G=H[q],!!/^Content-Location:/i.test(G)&&(G=G.slice(G.indexOf("file")),B||(B=G.slice(0,G.lastIndexOf("/")+1)),G.slice(0,B.length)!=B))for(;B.length>0&&(B=B.slice(0,B.length-1),B=B.slice(0,B.lastIndexOf("/")+1),G.slice(0,B.length)!=B););var de=(H[1]||"").match(/boundary="(.*?)"/);if(!de)throw new Error("MAD cannot find boundary");var ve="--"+(de[1]||""),ce=[],ue=[],he={FileIndex:ce,FullPaths:ue};D(he);var Ie,Ee=0;for(q=0;q<H.length;++q){var qe=H[q];qe!==ve&&qe!==ve+"--"||(Ee++&&$d(he,H.slice(Ie,q),B),Ie=q)}return he}function Hd(P,j){var B=j||{},H=B.boundary||"SheetJS";H="------="+H;for(var q=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+H.slice(2)+'"',"","",""],G=P.FullPaths[0],de=G,ve=P.FileIndex[0],ce=1;ce<P.FullPaths.length;++ce)if(de=P.FullPaths[ce].slice(G.length),ve=P.FileIndex[ce],!(!ve.size||!ve.content||de=="Sh33tJ5")){de=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(st){return"_x"+st.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(st){return"_u"+st.charCodeAt(0).toString(16)+"_"});for(var ue=ve.content,he=un&&Buffer.isBuffer(ue)?ue.toString("binary"):It(ue),Ie=0,Ee=Math.min(1024,he.length),qe=0,Me=0;Me<=Ee;++Me)(qe=he.charCodeAt(Me))>=32&&qe<128&&++Ie;var Le=Ie>=Ee*4/5;q.push(H),q.push("Content-Location: "+(B.root||"file:///C:/SheetJS/")+de),q.push("Content-Transfer-Encoding: "+(Le?"quoted-printable":"base64")),q.push("Content-Type: "+lu(ve,de)),q.push(""),q.push(Le?jd(he):ms(he))}return q.push(H+`--\r
`),q.join(`\r
`)}function Cr(P){var j={};return D(j,P),j}function Bc(P,j,B,H){var q=H&&H.unsafe;q||D(P);var G=!q&&In.find(P,j);if(!G){var de=P.FullPaths[0];j.slice(0,de.length)==de?de=j:(de.slice(-1)!="/"&&(de+="/"),de=(de+j).replace("//","/")),G={name:i(j),type:2},P.FileIndex.push(G),P.FullPaths.push(de),q||In.utils.cfb_gc(P)}return G.content=B,G.size=B?B.length:0,H&&(H.CLSID&&(G.clsid=H.CLSID),H.mt&&(G.mt=H.mt),H.ct&&(G.ct=H.ct)),G}function Va(P,j){D(P);var B=In.find(P,j);if(B){for(var H=0;H<P.FileIndex.length;++H)if(P.FileIndex[H]==B)return P.FileIndex.splice(H,1),P.FullPaths.splice(H,1),!0}return!1}function Ba(P,j,B){D(P);var H=In.find(P,j);if(H){for(var q=0;q<P.FileIndex.length;++q)if(P.FileIndex[q]==H)return P.FileIndex[q].name=i(B),P.FullPaths[q]=B,!0}return!1}function o0(P){A(P,!0)}return e.find=N,e.read=te,e.parse=u,e.write=Ft,e.writeFile=Ut,e.utils={cfb_new:Cr,cfb_add:Bc,cfb_del:Va,cfb_mov:Ba,cfb_gc:o0,ReadShift:Fm,CheckField:aB,prep_blob:Fs,bconcat:yi,use_zlib:Z,_deflateRaw:Dr,_inflateRaw:Bd,consts:ut},e}(),qx;function Vde(n){return typeof n=="string"?dw(n):Array.isArray(n)?ude(n):n}function qm(n,e,t){if(typeof qx<"u"&&qx.writeFileSync)return t?qx.writeFileSync(n,e,t):qx.writeFileSync(n,e);if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=dw(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Mc(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([Vde(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=n,o.href=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(n);return a.open("w"),a.encoding="binary",Array.isArray(e)&&(e=Wm(e)),a.write(e),a.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+n)}function bi(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function i8(n,e){for(var t=[],r=bi(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function UA(n){for(var e=[],t=bi(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function pw(n){for(var e=[],t=bi(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function Bde(n){for(var e=[],t=bi(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var tw=new Date(1899,11,30,0,0,0);function ds(n,e){var t=n.getTime();e&&(t-=1462*24*60*60*1e3);var r=tw.getTime()+(n.getTimezoneOffset()-tw.getTimezoneOffset())*6e4;return(t-r)/(24*60*60*1e3)}var Q8=new Date,Ude=tw.getTime()+(Q8.getTimezoneOffset()-tw.getTimezoneOffset())*6e4,s8=Q8.getTimezoneOffset();function Y8(n){var e=new Date;return e.setTime(n*24*60*60*1e3+Ude),e.getTimezoneOffset()!==s8&&e.setTime(e.getTime()+(e.getTimezoneOffset()-s8)*6e4),e}var o8=new Date("2017-02-19T19:06:09.000Z"),X8=isNaN(o8.getFullYear())?new Date("2/19/17"):o8,jde=X8.getFullYear()==2017;function qi(n,e){var t=new Date(n);if(jde)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(X8.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function mw(n,e){if(un&&Buffer.isBuffer(n)){if(e){if(n[0]==255&&n[1]==254)return Mc(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return Mc(lde(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(n[0]==255&&n[1]==254)return Mc(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return Mc(new TextDecoder("utf-16be").decode(n.slice(2)))}var t={"\u20AC":"\x80","\u201A":"\x82",\u0192:"\x83","\u201E":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02C6":"\x88","\u2030":"\x89",\u0160:"\x8A","\u2039":"\x8B",\u0152:"\x8C",\u017D:"\x8E","\u2018":"\x91","\u2019":"\x92","\u201C":"\x93","\u201D":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02DC":"\x98","\u2122":"\x99",\u0161:"\x9A","\u203A":"\x9B",\u0153:"\x9C",\u017E:"\x9E",\u0178:"\x9F"};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function fs(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=fs(n[t]));return e}function br(n,e){for(var t="";t.length<e;)t+=n;return t}function Pc(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var $de=["january","february","march","april","may","june","july","august","september","october","november","december"];function jm(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var o=n.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&$de.indexOf(o)==-1)return t}else if(o.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function Mt(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return un?r=Lc(t):r=dde(t),In.utils.cfb_add(n,e,r)}In.utils.cfb_add(n,e,t)}else n.file(e,t)}function jA(){return In.utils.cfb_new()}var zr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`;var Hde={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},$A=UA(Hde);var HA=/[&<>'"]/g,zde=/[\u0000-\u0008\u000b-\u001f]/g;function bn(n){var e=n+"";return e.replace(HA,function(t){return $A[t]}).replace(zde,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function a8(n){return bn(n).replace(/ /g,"_x0020_")}var Z8=/[\u0000-\u001f]/g;function Wde(n){var e=n+"";return e.replace(HA,function(t){return $A[t]}).replace(/\n/g,"<br/>").replace(Z8,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function qde(n){var e=n+"";return e.replace(HA,function(t){return $A[t]}).replace(Z8,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function Gde(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function Kde(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function TA(n){for(var e="",t=0,r=0,i=0,s=0,o=0,a=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){o=(r&31)<<6,o|=i&63,e+=String.fromCharCode(o);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}o=n.charCodeAt(t++),a=((r&7)<<18|(i&63)<<12|(s&63)<<6|o&63)-65536,e+=String.fromCharCode(55296+(a>>>10&1023)),e+=String.fromCharCode(56320+(a&1023))}return e}function c8(n){var e=Md(2*n.length),t,r,i=1,s=0,o=0,a;for(r=0;r<n.length;r+=i)i=1,(a=n.charCodeAt(r))<128?t=a:a<224?(t=(a&31)*64+(n.charCodeAt(r+1)&63),i=2):a<240?(t=(a&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(a&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,o=55296+(t>>>10&1023),t=56320+(t&1023)),o!==0&&(e[s++]=o&255,e[s++]=o>>>8,o=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function l8(n){return Lc(n,"binary").toString("utf8")}var Gx="foo bar baz\xE2\x98\x83\xF0\x9F\x8D\xA3",Pm=un&&(l8(Gx)==TA(Gx)&&l8||c8(Gx)==TA(Gx)&&c8)||TA,Mc=un?function(n){return Lc(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")};var Qde=function(){var n=[["nbsp"," "],["middot","\xB7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}}();var J8=/(^\s|\s$|\n)/;function xi(n,e){return"<"+n+(e.match(J8)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function $m(n){return bi(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function Fe(n,e,t){return"<"+n+(t!=null?$m(t):"")+(e!=null?(e.match(J8)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function OA(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function Yde(n,e){switch(typeof n){case"string":var t=Fe("vt:lpwstr",bn(n));return e&&(t=t.replace(/&quot;/g,"_x0022_")),t;case"number":return Fe((n|0)==n?"vt:i4":"vt:r8",bn(String(n)));case"boolean":return Fe("vt:bool",n?"true":"false")}if(n instanceof Date)return Fe("vt:filetime",OA(n));throw new Error("Unable to serialize "+n)}var ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},e0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Os={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Xde(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function Zde(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,o=r?-e:e;isFinite(o)?o==0?i=s=0:(i=Math.floor(Math.log(o)/Math.LN2),s=o*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var a=0;a<=5;++a,s/=256)n[t+a]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var u8=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},d8=un?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:Lc(e)})):u8(n)}:u8,f8=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(Rm(n,i)));return r.join("").replace(Gh,"")},gw=un?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(Gh,""):f8(n,e,t)}:f8,h8=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},eB=un?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):h8(n,e,t)}:h8,p8=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Wh(n,i)));return r.join("")},t0=un?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):p8(e,t,r)}:p8,tB=function(n,e){var t=ai(n,e);return t>0?t0(n,e+4,e+4+t-1):""},zA=tB,nB=function(n,e){var t=ai(n,e);return t>0?t0(n,e+4,e+4+t-1):""},WA=nB,rB=function(n,e){var t=2*ai(n,e);return t>0?t0(n,e+4,e+4+t-1):""},qA=rB,iB=function(e,t){var r=ai(e,t);return r>0?gw(e,t+4,t+4+r):""},GA=iB,sB=function(n,e){var t=ai(n,e);return t>0?t0(n,e+4,e+4+t):""},KA=sB,oB=function(n,e){return Xde(n,e)},nw=oB,QA=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};un&&(zA=function(e,t){if(!Buffer.isBuffer(e))return tB(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},WA=function(e,t){if(!Buffer.isBuffer(e))return nB(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},qA=function(e,t){if(!Buffer.isBuffer(e))return rB(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},GA=function(e,t){if(!Buffer.isBuffer(e))return iB(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},KA=function(e,t){if(!Buffer.isBuffer(e))return sB(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},nw=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):oB(e,t)},QA=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});function Jde(){gw=function(n,e,t){return Nn.utils.decode(1200,n.slice(e,t)).replace(Gh,"")},t0=function(n,e,t){return Nn.utils.decode(65001,n.slice(e,t))},zA=function(n,e){var t=ai(n,e);return t>0?Nn.utils.decode(Zh,n.slice(e+4,e+4+t-1)):""},WA=function(n,e){var t=ai(n,e);return t>0?Nn.utils.decode(Ad,n.slice(e+4,e+4+t-1)):""},qA=function(n,e){var t=2*ai(n,e);return t>0?Nn.utils.decode(1200,n.slice(e+4,e+4+t-1)):""},GA=function(n,e){var t=ai(n,e);return t>0?Nn.utils.decode(1200,n.slice(e+4,e+4+t)):""},KA=function(n,e){var t=ai(n,e);return t>0?Nn.utils.decode(65001,n.slice(e+4,e+4+t)):""}}typeof Nn<"u"&&Jde();var Wh=function(n,e){return n[e]},Rm=function(n,e){return n[e+1]*256+n[e]},efe=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},ai=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},Dd=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},tfe=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Fm(n,e){var t="",r,i,s=[],o,a,c,l;switch(e){case"dbcs":if(l=this.l,un&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(c=0;c<n;++c)t+=String.fromCharCode(Rm(this,l)),l+=2;n*=2;break;case"utf8":t=t0(this,this.l,this.l+n);break;case"utf16le":n*=2,t=gw(this,this.l,this.l+n);break;case"wstr":if(typeof Nn<"u")t=Nn.utils.decode(Ad,this.slice(this.l,this.l+2*n));else return Fm.call(this,n,"dbcs");n=2*n;break;case"lpstr-ansi":t=zA(this,this.l),n=4+ai(this,this.l);break;case"lpstr-cp":t=WA(this,this.l),n=4+ai(this,this.l);break;case"lpwstr":t=qA(this,this.l),n=4+2*ai(this,this.l);break;case"lpp4":n=4+ai(this,this.l),t=GA(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+ai(this,this.l),t=KA(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(o=Wh(this,this.l+n++))!==0;)s.push(Hx(o));t=s.join("");break;case"_wstr":for(n=0,t="";(o=Rm(this,this.l+n))!==0;)s.push(Hx(o)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",l=this.l,c=0;c<n;++c){if(this.lens&&this.lens.indexOf(l)!==-1)return o=Wh(this,l),this.l=l+1,a=Fm.call(this,n-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Hx(Rm(this,l))),l+=2}t=s.join(""),n*=2;break;case"cpstr":if(typeof Nn<"u"){t=Nn.utils.decode(Ad,this.slice(this.l,this.l+n));break}case"sbcs-cont":for(t="",l=this.l,c=0;c!=n;++c){if(this.lens&&this.lens.indexOf(l)!==-1)return o=Wh(this,l),this.l=l+1,a=Fm.call(this,n-c,o?"dbcs-cont":"sbcs-cont"),s.join("")+a;s.push(Hx(Wh(this,l))),l+=1}t=s.join("");break;default:switch(n){case 1:return r=Wh(this,this.l),this.l++,r;case 2:return r=(e==="i"?efe:Rm)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(n>0?Dd:tfe)(this,this.l),this.l+=4,r):(i=ai(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=nw(this,this.l):i=nw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=eB(this,this.l,n);break}}return this.l+=n,t}var nfe=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},rfe=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},ife=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function sfe(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)ife(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){if(typeof Nn<"u"&&Zh==874)for(i=0;i!=e.length;++i){var s=Nn.utils.encode(Zh,e.charAt(i));this[this.l+i]=s[0]}else for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var o=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,nfe(this,e,this.l);break;case 8:if(r=8,t==="f"){Zde(this,e,this.l);break}case 16:break;case-4:r=4,rfe(this,e,this.l);break}return this.l+=r,this}function aB(n,e){var t=eB(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function Fs(n,e){n.l=e,n.read_shift=Fm,n.chk=aB,n.write_shift=sfe}function Pa(n,e){n.l+=e}function _e(n){var e=Md(n);return Fs(e,0),e}function us(){var n=[],e=un?256:2048,t=function(l){var u=_e(l);return Fs(u,0),u},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(l){return r&&l<r.length-r.l?r:(i(),r=t(Math.max(l+1,e)))},o=function(){return i(),yi(n)},a=function(l){i(),r=l,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:a,end:o,_bufs:n}}function Ce(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Zge[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var o=n.next(s);i<=127?o.write_shift(1,i):(o.write_shift(1,(i&127)+128),o.write_shift(1,i>>7));for(var a=0;a!=4;++a)if(r>=128)o.write_shift(1,(r&127)+128),r>>=7;else{o.write_shift(1,r);break}r>0&&QA(t)&&n.push(t)}}function Om(n,e,t){var r=fs(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function m8(n,e,t){var r=fs(n);return r.s=Om(r.s,e.s,t),r.e=Om(r.e,e.s,t),r}function Nm(n,e){if(n.cRel&&n.c<0)for(n=fs(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=fs(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=En(n);return!n.cRel&&n.cRel!=null&&(t=cfe(t)),!n.rRel&&n.rRel!=null&&(t=ofe(t)),t}function DA(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Fi(n.s.c)+":"+(n.e.cRel?"":"$")+Fi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+wi(n.s.r)+":"+(n.e.rRel?"":"$")+wi(n.e.r):Nm(n.s,e.biff)+":"+Nm(n.e,e.biff)}function YA(n){return parseInt(afe(n),10)-1}function wi(n){return""+(n+1)}function ofe(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function afe(n){return n.replace(/\$(\d+)$/,"$1")}function XA(n){for(var e=lfe(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Fi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function cfe(n){return n.replace(/^([A-Z])/,"$$$1")}function lfe(n){return n.replace(/^\$([A-Z])/,"$1")}function ufe(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function li(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function En(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function Ns(n){var e=n.indexOf(":");return e==-1?{s:li(n),e:li(n)}:{s:li(n.slice(0,e)),e:li(n.slice(e+1))}}function Hr(n,e){return typeof e>"u"||typeof e=="number"?Hr(n.s,n.e):(typeof n!="string"&&(n=En(n)),typeof e!="string"&&(e=En(e)),n==e?n:n+":"+e)}function Qn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function g8(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=eu(n.z,t?ds(e):e)}catch{}try{return n.w=eu((n.XF||{}).numFmtId||(t?14:0),t?ds(e):e)}catch{return""+e}}function Nc(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Gm[n.v]||n.v:e==null?g8(n,n.v):g8(n,e))}function Fd(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function cB(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense;Ra!=null&&i==null&&(i=Ra);var s=n||(i?[]:{}),o=0,a=0;if(s&&r.origin!=null){if(typeof r.origin=="number")o=r.origin;else{var c=typeof r.origin=="string"?li(r.origin):r.origin;o=c.r,a=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var l={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var u=Qn(s["!ref"]);l.s.c=u.s.c,l.s.r=u.s.r,l.e.c=Math.max(l.e.c,u.e.c),l.e.r=Math.max(l.e.r,u.e.r),o==-1&&(l.e.r=o=u.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[d].length;++m)if(!(typeof e[d][m]>"u")){var g={v:e[d][m]},w=o+d,y=a+m;if(l.s.r>w&&(l.s.r=w),l.s.c>y&&(l.s.c=y),l.e.r<w&&(l.e.r=w),l.e.c<y&&(l.e.c=y),e[d][m]&&typeof e[d][m]=="object"&&!Array.isArray(e[d][m])&&!(e[d][m]instanceof Date))g=e[d][m];else if(Array.isArray(g.v)&&(g.f=e[d][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(r.nullError)g.t="e",g.v=0;else if(r.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=r.dateNF||Er[14],r.cellDates?(g.t="d",g.w=eu(g.z,ds(g.v))):(g.t="n",g.v=ds(g.v),g.w=eu(g.z,g.v))):g.t="s";if(i)s[w]||(s[w]=[]),s[w][y]&&s[w][y].z&&(g.z=s[w][y].z),s[w][y]=g;else{var E=En({c:y,r:w});s[E]&&s[E].z&&(g.z=s[E].z),s[E]=g}}}return l.s.c<1e7&&(s["!ref"]=Hr(l)),s}function n0(n,e){return cB(null,n,e)}function dfe(n){return n.read_shift(4,"i")}function Vo(n,e){return e||(e=_e(4)),e.write_shift(4,n),e}function Oi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function ui(n,e){var t=!1;return e==null&&(t=!0,e=_e(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function ffe(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function hfe(n,e){return e||(e=_e(4)),e.write_shift(2,n.ich||0),e.write_shift(2,n.ifnt||0),e}function ZA(n,e){var t=n.l,r=n.read_shift(1),i=Oi(n),s=[],o={t:i,h:i};if(r&1){for(var a=n.read_shift(4),c=0;c!=a;++c)s.push(ffe(n));o.r=s}else o.r=[{ich:0,ifnt:0}];return n.l=t+e,o}function pfe(n,e){var t=!1;return e==null&&(t=!0,e=_e(15+4*n.t.length)),e.write_shift(1,0),ui(n.t,e),t?e.slice(0,e.l):e}var mfe=ZA;function gfe(n,e){var t=!1;return e==null&&(t=!0,e=_e(23+4*n.t.length)),e.write_shift(1,1),ui(n.t,e),e.write_shift(4,1),hfe({ich:0,ifnt:0},e),t?e.slice(0,e.l):e}function to(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function Od(n,e){return e==null&&(e=_e(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function Nd(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Ld(n,e){return e==null&&(e=_e(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var vfe=Oi,lB=ui;function JA(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function rw(n,e){var t=!1;return e==null&&(t=!0,e=_e(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var _fe=Oi,NA=JA,ek=rw;function uB(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?nw([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Dd(e,0)>>2;return t?i/100:i}function dB(n,e){e==null&&(e=_e(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?r=1:i==(i|0)&&i>=-(1<<29)&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function fB(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function yfe(n,e){return e||(e=_e(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Vd=fB,r0=yfe;function i0(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Rd(n,e){return(e||_e(8)).write_shift(8,n,"f")}function xfe(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),o=n.read_shift(1),a=n.read_shift(1),c=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var l=Afe[i];l&&(e.rgb=T8(l));break;case 2:e.rgb=T8([o,a,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function iw(n,e){if(e||(e=_e(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function wfe(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function bfe(n,e){e||(e=_e(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var hB=2,Ps=3,Kx=11;var sw=19;var Qx=64,Efe=65,Cfe=71;var Sfe=4108,Ife=4126,_i=80;var v8={1:{n:"CodePage",t:hB},2:{n:"Category",t:_i},3:{n:"PresentationFormat",t:_i},4:{n:"ByteCount",t:Ps},5:{n:"LineCount",t:Ps},6:{n:"ParagraphCount",t:Ps},7:{n:"SlideCount",t:Ps},8:{n:"NoteCount",t:Ps},9:{n:"HiddenCount",t:Ps},10:{n:"MultimediaClipCount",t:Ps},11:{n:"ScaleCrop",t:Kx},12:{n:"HeadingPairs",t:Sfe},13:{n:"TitlesOfParts",t:Ife},14:{n:"Manager",t:_i},15:{n:"Company",t:_i},16:{n:"LinksUpToDate",t:Kx},17:{n:"CharacterCount",t:Ps},19:{n:"SharedDoc",t:Kx},22:{n:"HyperlinksChanged",t:Kx},23:{n:"AppVersion",t:Ps,p:"version"},24:{n:"DigSig",t:Efe},26:{n:"ContentType",t:_i},27:{n:"ContentStatus",t:_i},28:{n:"Language",t:_i},29:{n:"Version",t:_i},255:{},2147483648:{n:"Locale",t:sw},2147483651:{n:"Behavior",t:sw},1919054434:{}},_8={1:{n:"CodePage",t:hB},2:{n:"Title",t:_i},3:{n:"Subject",t:_i},4:{n:"Author",t:_i},5:{n:"Keywords",t:_i},6:{n:"Comments",t:_i},7:{n:"Template",t:_i},8:{n:"LastAuthor",t:_i},9:{n:"RevNumber",t:_i},10:{n:"EditTime",t:Qx},11:{n:"LastPrinted",t:Qx},12:{n:"CreatedDate",t:Qx},13:{n:"ModifiedDate",t:Qx},14:{n:"PageCount",t:Ps},15:{n:"WordCount",t:Ps},16:{n:"CharCount",t:Ps},17:{n:"Thumbnail",t:Cfe},18:{n:"Application",t:_i},19:{n:"DocSecurity",t:Ps},255:{},2147483648:{n:"Locale",t:sw},2147483651:{n:"Behavior",t:sw},1919054434:{}};function Tfe(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Dfe=Tfe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Afe=fs(Dfe),Gm={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"};var kfe={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Yx={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pB(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function mB(n,e){var t=Bde(kfe),r=[],i;r[r.length]=zr,r[r.length]=Fe("Types",null,{xmlns:ci.CT,"xmlns:xsd":ci.xsd,"xmlns:xsi":ci.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Fe("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){n[c]&&n[c].length>0&&(i=n[c][0],r[r.length]=Fe("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:Yx[c][e.bookType]||Yx[c].xlsx}))},o=function(c){(n[c]||[]).forEach(function(l){r[r.length]=Fe("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:Yx[c][e.bookType]||Yx[c].xlsx})})},a=function(c){(n[c]||[]).forEach(function(l){r[r.length]=Fe("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:t[c][0]})})};return s("workbooks"),o("sheets"),o("charts"),a("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(a),a("vba"),a("comments"),a("threadedcomments"),a("drawings"),o("metadata"),a("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var on={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function gB(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Qh(n){var e=[zr,Fe("Relationships",null,{xmlns:ci.RELS})];return bi(n["!id"]).forEach(function(t){e[e.length]=Fe("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function wn(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,s?i.TargetMode=s:[on.HLINK,on.XPATH,on.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function Mfe(n){var e=[zr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function y8(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Rfe(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function Pfe(n){var e=[zr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(y8(n[t][0],n[t][1])),e.push(Rfe("",n[t][0]));return e.push(y8("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function vB(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Vm.version+"</meta:generator></office:meta></office:document-meta>"}var kd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function AA(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=bn(e),r[r.length]=t?Fe(n,e,t):xi(n,e))}function _B(n,e){var t=e||{},r=[zr,Fe("cp:coreProperties",null,{"xmlns:cp":ci.CORE_PROPS,"xmlns:dc":ci.dc,"xmlns:dcterms":ci.dcterms,"xmlns:dcmitype":ci.dcmitype,"xmlns:xsi":ci.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&AA("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:OA(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&AA("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:OA(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=kd.length;++s){var o=kd[s],a=t.Props&&t.Props[o[1]]!=null?t.Props[o[1]]:n?n[o[1]]:null;a===!0?a="1":a===!1?a="0":typeof a=="number"&&(a=String(a)),a!=null&&AA(o[0],a,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Yh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],yB=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function xB(n){var e=[],t=Fe;return n||(n={}),n.Application="SheetJS",e[e.length]=zr,e[e.length]=Fe("Properties",null,{xmlns:ci.EXT_PROPS,"xmlns:vt":ci.vt}),Yh.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=bn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+bn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function wB(n){var e=[zr,Fe("Properties",null,{xmlns:ci.CUST_PROPS,"xmlns:vt":ci.vt})];if(!n)return e.join("");var t=1;return bi(n).forEach(function(i){++t,e[e.length]=Fe("property",Yde(n[i],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:bn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var x8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function Ffe(n,e){var t=[];return bi(x8).map(function(r){for(var i=0;i<kd.length;++i)if(kd[i][1]==r)return kd[i];for(i=0;i<Yh.length;++i)if(Yh[i][1]==r)return Yh[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(xi(x8[r[1]]||r[1],i))}}),Fe("DocumentProperties",t.join(""),{xmlns:Os.o})}function Ofe(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&bi(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var o=0;o<kd.length;++o)if(s==kd[o][1])return;for(o=0;o<Yh.length;++o)if(s==Yh[o][1])return;for(o=0;o<t.length;++o)if(s==t[o])return;var a=n[s],c="string";typeof a=="number"?(c="float",a=String(a)):a===!0||a===!1?(c="boolean",a=a?"1":"0"):a=String(a),i.push(Fe(a8(s),a,{"dt:dt":c}))}}),e&&bi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var o=e[s],a="string";typeof o=="number"?(a="float",o=String(o)):o===!0||o===!1?(a="boolean",o=o?"1":"0"):o instanceof Date?(a="dateTime.tz",o=o.toISOString()):o=String(o),i.push(Fe(a8(s),o,{"dt:dt":a}))}}),"<"+r+' xmlns="'+Os.o+'">'+i.join("")+"</"+r+">"}function Nfe(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var o=_e(8);return o.write_shift(4,r),o.write_shift(4,i),o}function w8(n,e){var t=_e(4),r=_e(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=_e(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=Nfe(e);break;case 31:case 80:for(r=_e(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return yi([t,r])}var bB=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Lfe(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function b8(n,e,t){var r=_e(8),i=[],s=[],o=8,a=0,c=_e(8),l=_e(8);if(c.write_shift(4,2),c.write_shift(4,1200),l.write_shift(4,1),s.push(c),i.push(l),o+=8+c.length,!e){l=_e(8),l.write_shift(4,0),i.unshift(l);var u=[_e(4)];for(u[0].write_shift(4,n.length),a=0;a<n.length;++a){var d=n[a][0];for(c=_e(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,a+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=yi(u),s.unshift(c),o+=8+c.length}for(a=0;a<n.length;++a)if(!(e&&!e[n[a][0]])&&!(bB.indexOf(n[a][0])>-1||yB.indexOf(n[a][0])>-1)&&n[a][1]!=null){var m=n[a][1],g=0;if(e){g=+e[n[a][0]];var w=t[g];if(w.p=="version"&&typeof m=="string"){var y=m.split(".");m=(+y[0]<<16)+(+y[1]||0)}c=w8(w.t,m)}else{var E=Lfe(m);E==-1&&(E=31,m=String(m)),c=w8(E,m)}s.push(c),l=_e(8),l.write_shift(4,e?g:2+a),i.push(l),o+=8+c.length}var M=8*(s.length+1);for(a=0;a<s.length;++a)i[a].write_shift(4,M),M+=s[a].length;return r.write_shift(4,o),r.write_shift(4,s.length),yi([r].concat(i).concat(s))}function E8(n,e,t,r,i,s){var o=_e(i?68:48),a=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,In.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,i?2:1),o.write_shift(16,e,"hex"),o.write_shift(4,i?68:48);var c=b8(n,t,r);if(a.push(c),i){var l=b8(i,null,null);o.write_shift(16,s,"hex"),o.write_shift(4,68+c.length),a.push(l)}return yi(a)}function Vfe(n,e){e||(e=_e(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function Bfe(n,e){return n.read_shift(e)===1}function Wi(n,e){return e||(e=_e(2)),e.write_shift(2,+!!n),e}function EB(n){return n.read_shift(2,"u")}function eo(n,e){return e||(e=_e(2)),e.write_shift(2,n),e}function CB(n,e,t){return t||(t=_e(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function SB(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont",s=Ad;if(t&&t.biff>=8&&(Ad=1200),!t||t.biff==8){var o=n.read_shift(1);o&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return Ad=s,a}function Ufe(n){var e=n.t||"",t=1,r=_e(3+(t>1?2:0));r.write_shift(2,e.length),r.write_shift(1,(t>1?8:0)|1),t>1&&r.write_shift(2,t);var i=_e(2*e.length);i.write_shift(2*e.length,e,"utf16le");var s=[r,i];return yi(s)}function jfe(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function $fe(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):jfe(n,r,t)}function Hfe(n,e,t){if(t.biff>5)return $fe(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function IB(n,e,t){return t||(t=_e(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function C8(n,e){e||(e=_e(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function zfe(n){var e=_e(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var o=[8,6815827,6619237,4849780,83];for(t=0;t<o.length;++t)e.write_shift(4,o[t]);if(s==28)r=r.slice(1),C8(r,e);else if(s&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));var a=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(a.length+1)),t=0;t<a.length;++t)e.write_shift(2,a.charCodeAt(t));e.write_shift(2,0),s&8&&C8(i>-1?r.slice(i+1):"",e)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<o.length;++t)e.write_shift(1,parseInt(o[t],16));for(var c=0;r.slice(c*3,c*3+3)=="../"||r.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,r.length-3*c+1),t=0;t<r.length-3*c;++t)e.write_shift(1,r.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Pd(n,e,t,r){return r||(r=_e(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function Wfe(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),o=n.read_shift(r,"i");return[i,s,o]}function qfe(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function TB(n,e){return e||(e=_e(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function tk(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=_e(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Gfe(n,e){var t=!e||e.biff==8,r=_e(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function Kfe(n,e){var t=!e||e.biff>=8?2:1,r=_e(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function Qfe(n,e){var t=_e(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=Ufe(n[i],e);var s=yi([t].concat(r));return s.parts=[t.length].concat(r.map(function(o){return o.length})),s}function Yfe(){var n=_e(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Xfe(n){var e=_e(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Zfe(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=_e(i);return s.write_shift(2,(n.sz||12)*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function Jfe(n,e,t,r){var i=_e(10);return Pd(n,e,r,i),i.write_shift(4,t),i}function ehe(n,e,t,r,i){var s=!i||i.biff==8,o=_e(8+ +s+(1+s)*t.length);return Pd(n,e,r,o),o.write_shift(2,t.length),s&&o.write_shift(1,1),o.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),o}function the(n,e,t,r){var i=t&&t.biff==5;r||(r=_e(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function nhe(n,e){var t=e.biff==8||!e.biff?4:2,r=_e(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function S8(n,e,t,r){var i=t&&t.biff==5;r||(r=_e(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function rhe(n){var e=_e(8);return e.write_shift(4,0),e.write_shift(2,n[0]?n[0]+1:0),e.write_shift(2,n[1]?n[1]+1:0),e}function ihe(n,e,t,r,i,s){var o=_e(8);return Pd(n,e,r,o),CB(t,s,o),o}function she(n,e,t,r){var i=_e(14);return Pd(n,e,r,i),Rd(t,i),i}function ohe(n,e,t){if(t.biff<8)return ahe(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(Wfe(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function ahe(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=SB(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function che(n){var e=_e(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)TB(n[t],e);return e}function lhe(n){var e=_e(24),t=li(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return yi([e,zfe(n[1])])}function uhe(n){var e=n[1].Tooltip,t=_e(10+2*(e.length+1));t.write_shift(2,2048);var r=li(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function dhe(n){return n||(n=_e(4)),n.write_shift(2,1),n.write_shift(2,1),n}function fhe(n,e,t){if(!t.cellStyles)return Pa(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),o=n.read_shift(r),a=n.read_shift(r),c=n.read_shift(2);r==2&&(n.l+=2);var l={s:i,e:s,w:o,ixfe:a,flags:c};return(t.biff>=5||!t.biff)&&(l.level=c>>8&7),l}function hhe(n,e){var t=_e(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function phe(n){for(var e=_e(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function mhe(n,e,t){var r=_e(15);return Qm(r,n,e),r.write_shift(8,t,"f"),r}function ghe(n,e,t){var r=_e(9);return Qm(r,n,e),r.write_shift(2,t),r}var vhe=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=UA({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(a,c){var l=[],u=Md(1);switch(c.type){case"base64":u=No(Oc(a));break;case"binary":u=No(a);break;case"buffer":case"array":u=a;break}Fs(u,0);var d=u.read_shift(1),m=!!(d&136),g=!1,w=!1;switch(d){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var y=0,E=521;d==2&&(y=u.read_shift(2)),u.l+=3,d!=2&&(y=u.read_shift(4)),y>1048576&&(y=1e6),d!=2&&(E=u.read_shift(2));var M=u.read_shift(2),k=c.codepage||1252;d!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(k=n[u[u.l]]),u.l+=1,u.l+=2),w&&(u.l+=36);for(var O=[],K={},Q=Math.min(u.length,d==2?521:E-10-(g?264:0)),te=w?32:11;u.l<Q&&u[u.l]!=13;)switch(K={},K.name=Nn.utils.decode(k,u.slice(u.l,u.l+te)).replace(/[\u0000\r\n].*$/g,""),u.l+=te,K.type=String.fromCharCode(u.read_shift(1)),d!=2&&!w&&(K.offset=u.read_shift(4)),K.len=u.read_shift(1),d==2&&(K.offset=u.read_shift(2)),K.dec=u.read_shift(1),K.name.length&&O.push(K),d!=2&&(u.l+=w?13:14),K.type){case"B":(!g||K.len!=8)&&c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+K.type)}if(u[u.l]!==13&&(u.l=E-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=E;var D=0,T=0;for(l[0]=[],T=0;T!=O.length;++T)l[0][T]=O[T].name;for(;y-- >0;){if(u[u.l]===42){u.l+=M;continue}for(++u.l,l[++D]=[],T=0,T=0;T!=O.length;++T){var A=u.slice(u.l,u.l+O[T].len);u.l+=O[T].len,Fs(A,0);var F=Nn.utils.decode(k,A);switch(O[T].type){case"C":F.trim().length&&(l[D][T]=F.replace(/\s+$/,""));break;case"D":F.length===8?l[D][T]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):l[D][T]=F;break;case"F":l[D][T]=parseFloat(F.trim());break;case"+":case"I":l[D][T]=w?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":l[D][T]=!0;break;case"N":case"F":l[D][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));l[D][T]="##MEMO##"+(w?parseInt(F.trim(),10):A.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(l[D][T]=+F||0);break;case"@":l[D][T]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":l[D][T]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":l[D][T]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":l[D][T]=-A.read_shift(-8,"f");break;case"B":if(g&&O[T].len==8){l[D][T]=A.read_shift(8,"f");break}case"G":case"P":A.l+=O[T].len;break;case"0":if(O[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+O[T].type)}}}if(d!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(l=l.slice(0,c.sheetRows)),c.DBF=O,l}function r(a,c){var l=c||{};l.dateNF||(l.dateNF="yyyymmdd");var u=n0(t(a,l),l);return u["!cols"]=l.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete l.DBF,u}function i(a,c){try{return Fd(r(a,c),c)}catch(l){if(c&&c.WTF)throw l}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function o(a,c){var l=c||{};if(+l.codepage>=0&&Bm(+l.codepage),l.type=="string")throw new Error("Cannot write DBF to JS string");var u=us(),d=uw(a,{header:1,raw:!0,cellDates:!0}),m=d[0],g=d.slice(1),w=a["!cols"]||[],y=0,E=0,M=0,k=1;for(y=0;y<m.length;++y){if(((w[y]||{}).DBF||{}).name){m[y]=w[y].DBF.name,++M;continue}if(m[y]!=null){if(++M,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(E=0;E<1024;++E)if(m.indexOf(m[y]+"_"+E)==-1){m[y]+="_"+E;break}}}}var O=Qn(a["!ref"]),K=[],Q=[],te=[];for(y=0;y<=O.e.c-O.s.c;++y){var D="",T="",A=0,F=[];for(E=0;E<g.length;++E)g[E][y]!=null&&F.push(g[E][y]);if(F.length==0||m[y]==null){K[y]="?";continue}for(E=0;E<F.length;++E){switch(typeof F[E]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=F[E]instanceof Date?"D":"C";break;default:T="C"}A=Math.max(A,String(F[E]).length),D=D&&D!=T?"C":T}A>250&&(A=250),T=((w[y]||{}).DBF||{}).type,T=="C"&&w[y].DBF.len>A&&(A=w[y].DBF.len),D=="B"&&T=="N"&&(D="N",te[y]=w[y].DBF.dec,A=w[y].DBF.len),Q[y]=D=="C"||T=="N"?A:s[D]||0,k+=Q[y],K[y]=D}var N=u.next(32);for(N.write_shift(4,318902576),N.write_shift(4,g.length),N.write_shift(2,296+32*M),N.write_shift(2,k),y=0;y<4;++y)N.write_shift(4,0);for(N.write_shift(4,0|(+e[Zh]||3)<<8),y=0,E=0;y<m.length;++y)if(m[y]!=null){var V=u.next(32),U=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,U,"sbcs"),V.write_shift(1,K[y]=="?"?"C":K[y],"sbcs"),V.write_shift(4,E),V.write_shift(1,Q[y]||s[K[y]]||0),V.write_shift(1,te[y]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),E+=Q[y]||s[K[y]]||0}var nt=u.next(264);for(nt.write_shift(4,13),y=0;y<65;++y)nt.write_shift(4,0);for(y=0;y<g.length;++y){var Ae=u.next(k);for(Ae.write_shift(1,0),E=0;E<m.length;++E)if(m[E]!=null)switch(K[E]){case"L":Ae.write_shift(1,g[y][E]==null?63:g[y][E]?84:70);break;case"B":Ae.write_shift(8,g[y][E]||0,"f");break;case"N":var lt="0";for(typeof g[y][E]=="number"&&(lt=g[y][E].toFixed(te[E]||0)),M=0;M<Q[E]-lt.length;++M)Ae.write_shift(1,32);Ae.write_shift(1,lt,"sbcs");break;case"D":g[y][E]?(Ae.write_shift(4,("0000"+g[y][E].getFullYear()).slice(-4),"sbcs"),Ae.write_shift(2,("00"+(g[y][E].getMonth()+1)).slice(-2),"sbcs"),Ae.write_shift(2,("00"+g[y][E].getDate()).slice(-2),"sbcs")):Ae.write_shift(8,"00000000","sbcs");break;case"C":var ut=String(g[y][E]!=null?g[y][E]:"").slice(0,Q[E]);for(Ae.write_shift(1,ut,"sbcs"),M=0;M<Q[E]-ut.length;++M)Ae.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:i,to_sheet:r,from_sheet:o}}(),_he=function(){var n={AA:"\xC0",BA:"\xC1",CA:"\xC2",DA:195,HA:"\xC4",JA:197,AE:"\xC8",BE:"\xC9",CE:"\xCA",HE:"\xCB",AI:"\xCC",BI:"\xCD",CI:"\xCE",HI:"\xCF",AO:"\xD2",BO:"\xD3",CO:"\xD4",DO:213,HO:"\xD6",AU:"\xD9",BU:"\xDA",CU:"\xDB",HU:"\xDC",Aa:"\xE0",Ba:"\xE1",Ca:"\xE2",Da:227,Ha:"\xE4",Ja:229,Ae:"\xE8",Be:"\xE9",Ce:"\xEA",He:"\xEB",Ai:"\xEC",Bi:"\xED",Ci:"\xEE",Hi:"\xEF",Ao:"\xF2",Bo:"\xF3",Co:"\xF4",Do:245,Ho:"\xF6",Au:"\xF9",Bu:"\xFA",Cu:"\xFB",Hu:"\xFC",KC:"\xC7",Kc:"\xE7",q:"\xE6",z:"\u0153",a:"\xC6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+bi(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(m,g){var w=n[g];return typeof w=="number"?Q6(w):w},r=function(m,g,w){var y=g.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return y==59?m:Q6(y)};n["|"]=254;function i(m,g){switch(g.type){case"base64":return s(Oc(m),g);case"binary":return s(m,g);case"buffer":return s(un&&Buffer.isBuffer(m)?m.toString("binary"):Wm(m),g);case"array":return s(mw(m),g)}throw new Error("Unrecognized type "+g.type)}function s(m,g){var w=m.split(/[\n\r]+/),y=-1,E=-1,M=0,k=0,O=[],K=[],Q=null,te={},D=[],T=[],A=[],F=0,N;for(+g.codepage>=0&&Bm(+g.codepage);M!==w.length;++M){F=0;var V=w[M].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),U=V.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),nt=U[0],Ae;if(V.length>0)switch(nt){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&K.push(V.slice(3).replace(/;;/g,";"));break;case"C":var lt=!1,ut=!1,Ut=!1,It=!1,Ft=-1,Cn=-1;for(k=1;k<U.length;++k)switch(U[k].charAt(0)){case"A":break;case"X":E=parseInt(U[k].slice(1))-1,ut=!0;break;case"Y":for(y=parseInt(U[k].slice(1))-1,ut||(E=0),N=O.length;N<=y;++N)O[N]=[];break;case"K":Ae=U[k].slice(1),Ae.charAt(0)==='"'?Ae=Ae.slice(1,Ae.length-1):Ae==="TRUE"?Ae=!0:Ae==="FALSE"?Ae=!1:isNaN(Pc(Ae))?isNaN(jm(Ae).getDate())||(Ae=qi(Ae)):(Ae=Pc(Ae),Q!==null&&q8(Q)&&(Ae=Y8(Ae))),typeof Nn<"u"&&typeof Ae=="string"&&(g||{}).type!="string"&&(g||{}).codepage&&(Ae=Nn.utils.decode(g.codepage,Ae)),lt=!0;break;case"E":It=!0;var Z=g0e(U[k].slice(1),{r:y,c:E});O[y][E]=[O[y][E],Z];break;case"S":Ut=!0,O[y][E]=[O[y][E],"S5S"];break;case"G":break;case"R":Ft=parseInt(U[k].slice(1))-1;break;case"C":Cn=parseInt(U[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}if(lt&&(O[y][E]&&O[y][E].length==2?O[y][E][0]=Ae:O[y][E]=Ae,Q=null),Ut){if(It)throw new Error("SYLK shared formula cannot have own formula");var me=Ft>-1&&O[Ft][Cn];if(!me||!me[1])throw new Error("SYLK shared formula cannot find base");O[y][E][1]=v0e(me[1],{r:y-Ft,c:E-Cn})}break;case"F":var re=0;for(k=1;k<U.length;++k)switch(U[k].charAt(0)){case"X":E=parseInt(U[k].slice(1))-1,++re;break;case"Y":for(y=parseInt(U[k].slice(1))-1,N=O.length;N<=y;++N)O[N]=[];break;case"M":F=parseInt(U[k].slice(1))/20;break;case"F":break;case"G":break;case"P":Q=K[parseInt(U[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=U[k].slice(1).split(" "),N=parseInt(A[0],10);N<=parseInt(A[1],10);++N)F=parseInt(A[2],10),T[N-1]=F===0?{hidden:!0}:{wch:F},nk(T[N-1]);break;case"C":E=parseInt(U[k].slice(1))-1,T[E]||(T[E]={});break;case"R":y=parseInt(U[k].slice(1))-1,D[y]||(D[y]={}),F>0?(D[y].hpt=F,D[y].hpx=RB(F)):F===0&&(D[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}re<1&&(Q=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}}return D.length>0&&(te["!rows"]=D),T.length>0&&(te["!cols"]=T),g&&g.sheetRows&&(O=O.slice(0,g.sheetRows)),[O,te]}function o(m,g){var w=i(m,g),y=w[0],E=w[1],M=n0(y,g);return bi(E).forEach(function(k){M[k]=E[k]}),M}function a(m,g){return Fd(o(m,g),g)}function c(m,g,w,y){var E="C;Y"+(w+1)+";X"+(y+1)+";K";switch(m.t){case"n":E+=m.v||0,m.f&&!m.F&&(E+=";E"+ik(m.f,{r:w,c:y}));break;case"b":E+=m.v?"TRUE":"FALSE";break;case"e":E+=m.w||m.v;break;case"d":E+='"'+(m.w||m.v)+'"';break;case"s":E+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function l(m,g){g.forEach(function(w,y){var E="F;W"+(y+1)+" "+(y+1)+" ";w.hidden?E+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=ow(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=aw(w.wpx)),typeof w.wch=="number"&&(E+=Math.round(w.wch))),E.charAt(E.length-1)!=" "&&m.push(E)})}function u(m,g){g.forEach(function(w,y){var E="F;";w.hidden?E+="M0;":w.hpt?E+="M"+20*w.hpt+";":w.hpx&&(E+="M"+20*cw(w.hpx)+";"),E.length>2&&m.push(E+"R"+(y+1))})}function d(m,g){var w=["ID;PWXL;N;E"],y=[],E=Qn(m["!ref"]),M,k=Array.isArray(m),O=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),m["!cols"]&&l(w,m["!cols"]),m["!rows"]&&u(w,m["!rows"]),w.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var K=E.s.r;K<=E.e.r;++K)for(var Q=E.s.c;Q<=E.e.c;++Q){var te=En({r:K,c:Q});M=k?(m[K]||[])[Q]:m[te],!(!M||M.v==null&&(!M.f||M.F))&&y.push(c(M,m,K,Q,g))}return w.join(O)+O+y.join(O)+O+"E"+O}return{to_workbook:a,to_sheet:o,from_sheet:d}}(),yhe=function(){function n(s,o){switch(o.type){case"base64":return e(Oc(s),o);case"binary":return e(s,o);case"buffer":return e(un&&Buffer.isBuffer(s)?s.toString("binary"):Wm(s),o);case"array":return e(mw(s),o)}throw new Error("Unrecognized type "+o.type)}function e(s,o){for(var a=s.split(`
`),c=-1,l=-1,u=0,d=[];u!==a.length;++u){if(a[u].trim()==="BOT"){d[++c]=[],l=0;continue}if(!(c<0)){var m=a[u].trim().split(","),g=m[0],w=m[1];++u;for(var y=a[u]||"";(y.match(/["]/g)||[]).length&1&&u<a.length-1;)y+=`
`+a[++u];switch(y=y.trim(),+g){case-1:if(y==="BOT"){d[++c]=[],l=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?d[c][l]=!0:y==="FALSE"?d[c][l]=!1:isNaN(Pc(w))?isNaN(jm(w).getDate())?d[c][l]=w:d[c][l]=qi(w):d[c][l]=Pc(w),++l;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),km&&y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),d[c][l++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function t(s,o){return n0(n(s,o),o)}function r(s,o){return Fd(t(s,o),o)}var i=function(){var s=function(c,l,u,d,m){c.push(l),c.push(u+","+d),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,l,u,d){c.push(l+","+u),c.push(l==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var l=[],u=Qn(c["!ref"]),d,m=Array.isArray(c);s(l,"TABLE",0,1,"sheetjs"),s(l,"VECTORS",0,u.e.r-u.s.r+1,""),s(l,"TUPLES",0,u.e.c-u.s.c+1,""),s(l,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(l,-1,0,"BOT");for(var w=u.s.c;w<=u.e.c;++w){var y=En({r:g,c:w});if(d=m?(c[g]||[])[w]:c[y],!d){o(l,1,0,"");continue}switch(d.t){case"n":var E=km?d.w:d.v;!E&&d.v!=null&&(E=d.v),E==null?km&&d.f&&!d.F?o(l,1,0,"="+d.f):o(l,1,0,""):o(l,0,E,"V");break;case"b":o(l,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(l,1,0,!km||isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=eu(d.z||Er[14],ds(qi(d.v)))),km?o(l,0,d.w,"V"):o(l,1,0,d.w);break;default:o(l,1,0,"")}}}o(l,-1,0,"EOD");var M=`\r
`,k=l.join(M);return k}}();return{to_workbook:r,to_sheet:t,from_sheet:i}}(),DB=function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,m){for(var g=d.split(`
`),w=-1,y=-1,E=0,M=[];E!==g.length;++E){var k=g[E].trim().split(":");if(k[0]==="cell"){var O=li(k[1]);if(M.length<=O.r)for(w=M.length;w<=O.r;++w)M[w]||(M[w]=[]);switch(w=O.r,y=O.c,k[2]){case"t":M[w][y]=n(k[3]);break;case"v":M[w][y]=+k[3];break;case"vtf":var K=k[k.length-1];case"vtc":switch(k[3]){case"nl":M[w][y]=!!+k[4];break;default:M[w][y]=+k[4];break}k[2]=="vtf"&&(M[w][y]=[M[w][y],K])}}}return m&&m.sheetRows&&(M=M.slice(0,m.sheetRows)),M}function r(d,m){return n0(t(d,m),m)}function i(d,m){return Fd(r(d,m),m)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,a=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function l(d){if(!d||!d["!ref"])return"";for(var m=[],g=[],w,y="",E=Ns(d["!ref"]),M=Array.isArray(d),k=E.s.r;k<=E.e.r;++k)for(var O=E.s.c;O<=E.e.c;++O)if(y=En({r:k,c:O}),w=M?(d[k]||[])[O]:d[y],!(!w||w.v==null||w.t==="z")){switch(g=["cell",y,"t"],w.t){case"s":case"str":g.push(e(w.v));break;case"n":w.f?(g[2]="vtf",g[3]="n",g[4]=w.v,g[5]=e(w.f)):(g[2]="v",g[3]=w.v);break;case"b":g[2]="vt"+(w.f?"f":"c"),g[3]="nl",g[4]=w.v?"1":"0",g[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var K=ds(qi(w.v));g[2]="vtc",g[3]="nd",g[4]=""+K,g[5]=w.w||eu(w.z||Er[14],K);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(d){return[s,o,a,o,l(d),c].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:u}}(),xhe=function(){function n(u,d,m,g,w){w.raw?d[m][g]=u:u===""||(u==="TRUE"?d[m][g]=!0:u==="FALSE"?d[m][g]=!1:isNaN(Pc(u))?isNaN(jm(u).getDate())?d[m][g]=u:d[m][g]=qi(u):d[m][g]=Pc(u))}function e(u,d){var m=d||{},g=[];if(!u||u.length===0)return g;for(var w=u.split(/[\r\n]/),y=w.length-1;y>=0&&w[y].length===0;)--y;for(var E=10,M=0,k=0;k<=y;++k)M=w[k].indexOf(" "),M==-1?M=w[k].length:M++,E=Math.max(E,M);for(k=0;k<=y;++k){g[k]=[];var O=0;for(n(w[k].slice(0,E).trim(),g,k,O,m),O=1;O<=(w[k].length-E)/10+1;++O)n(w[k].slice(E+(O-1)*10,E+O*10).trim(),g,k,O,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(u){for(var d={},m=!1,g=0,w=0;g<u.length;++g)(w=u.charCodeAt(g))==34?m=!m:!m&&w in t&&(d[w]=(d[w]||0)+1);w=[];for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&w.push([d[g],g]);if(!w.length){d=r;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&w.push([d[g],g])}return w.sort(function(y,E){return y[0]-E[0]||r[y[1]]-r[E[1]]}),t[w.pop()[1]]||44}function s(u,d){var m=d||{},g="";Ra!=null&&m.dense==null&&(m.dense=Ra);var w=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=i(u.slice(0,1024)):m&&m.FS?g=m.FS:g=i(u.slice(0,1024));var E=0,M=0,k=0,O=0,K=0,Q=g.charCodeAt(0),te=!1,D=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var A=m.dateNF!=null?Ode(m.dateNF):null;function F(){var N=u.slice(O,K),V={};if(N.charAt(0)=='"'&&N.charAt(N.length-1)=='"'&&(N=N.slice(1,-1).replace(/""/g,'"')),N.length===0)V.t="z";else if(m.raw)V.t="s",V.v=N;else if(N.trim().length===0)V.t="s",V.v=N;else if(N.charCodeAt(0)==61)N.charCodeAt(1)==34&&N.charCodeAt(N.length-1)==34?(V.t="s",V.v=N.slice(2,-1).replace(/""/g,'"')):_0e(N)?(V.t="n",V.f=N.slice(1)):(V.t="s",V.v=N);else if(N=="TRUE")V.t="b",V.v=!0;else if(N=="FALSE")V.t="b",V.v=!1;else if(!isNaN(k=Pc(N)))V.t="n",m.cellText!==!1&&(V.w=N),V.v=k;else if(!isNaN(jm(N).getDate())||A&&N.match(A)){V.z=m.dateNF||Er[14];var U=0;A&&N.match(A)&&(N=Nde(N,m.dateNF,N.match(A)||[]),U=1),m.cellDates?(V.t="d",V.v=qi(N,U)):(V.t="n",V.v=ds(qi(N,U))),m.cellText!==!1&&(V.w=eu(V.z,V.v instanceof Date?ds(V.v):V.v)),m.cellNF||delete V.z}else V.t="s",V.v=N;if(V.t=="z"||(m.dense?(w[E]||(w[E]=[]),w[E][M]=V):w[En({c:M,r:E})]=V),O=K+1,T=u.charCodeAt(O),y.e.c<M&&(y.e.c=M),y.e.r<E&&(y.e.r=E),D==Q)++M;else if(M=0,++E,m.sheetRows&&m.sheetRows<=E)return!0}e:for(;K<u.length;++K)switch(D=u.charCodeAt(K)){case 34:T===34&&(te=!te);break;case Q:case 10:case 13:if(!te&&F())break e;break;default:break}return K-O>0&&F(),w["!ref"]=Hr(y),w}function o(u,d){return!(d&&d.PRN)||d.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?s(u,d):n0(e(u,d),d)}function a(u,d){var m="",g=d.type=="string"?[0,0,0,0]:Rve(u,d);switch(d.type){case"base64":m=Oc(u);break;case"binary":m=u;break;case"buffer":d.codepage==65001?m=u.toString("utf8"):d.codepage&&typeof Nn<"u"?m=Nn.utils.decode(d.codepage,u):m=un&&Buffer.isBuffer(u)?u.toString("binary"):Wm(u);break;case"array":m=mw(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+d.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=Pm(m.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?m=Pm(m):d.type=="binary"&&typeof Nn<"u"&&d.codepage&&(m=Nn.utils.decode(d.codepage,Nn.utils.encode(28591,m))),m.slice(0,19)=="socialcalc:version:"?DB.to_sheet(d.type=="string"?m:Pm(m),d):o(m,d)}function c(u,d){return Fd(a(u,d),d)}function l(u){for(var d=[],m=Qn(u["!ref"]),g,w=Array.isArray(u),y=m.s.r;y<=m.e.r;++y){for(var E=[],M=m.s.c;M<=m.e.c;++M){var k=En({r:y,c:M});if(g=w?(u[y]||[])[M]:u[k],!g||g.v==null){E.push("          ");continue}for(var O=(g.w||(Nc(g),g.w)||"").slice(0,10);O.length<10;)O+=" ";E.push(O+(M===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:a,from_sheet:l}}();var I8=function(){function n(Z,me,re){if(Z){Fs(Z,Z.l||0);for(var ne=re.Enum||Ft;Z.l<Z.length;){var we=Z.read_shift(2),Be=ne[we]||ne[65535],rt=Z.read_shift(2),Ge=Z.l+rt,ke=Be.f&&Be.f(Z,rt,re);if(Z.l=Ge,me(ke,Be,we))return}}}function e(Z,me){switch(me.type){case"base64":return t(No(Oc(Z)),me);case"binary":return t(No(Z),me);case"buffer":case"array":return t(Z,me)}throw"Unsupported type "+me.type}function t(Z,me){if(!Z)return Z;var re=me||{};Ra!=null&&re.dense==null&&(re.dense=Ra);var ne=re.dense?[]:{},we="Sheet1",Be="",rt=0,Ge={},ke=[],Lt=[],xt={s:{r:0,c:0},e:{r:0,c:0}},sr=re.sheetRows||0;if(Z[2]==0&&(Z[3]==8||Z[3]==9)&&Z.length>=16&&Z[14]==5&&Z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Z[2]==2)re.Enum=Ft,n(Z,function(Ve,Wr,Ni){switch(Ni){case 0:re.vers=Ve,Ve>=4096&&(re.qpro=!0);break;case 6:xt=Ve;break;case 204:Ve&&(Be=Ve);break;case 222:Be=Ve;break;case 15:case 51:re.qpro||(Ve[1].v=Ve[1].v.slice(1));case 13:case 14:case 16:Ni==14&&(Ve[2]&112)==112&&(Ve[2]&15)>1&&(Ve[2]&15)<15&&(Ve[1].z=re.dateNF||Er[14],re.cellDates&&(Ve[1].t="d",Ve[1].v=Y8(Ve[1].v))),re.qpro&&Ve[3]>rt&&(ne["!ref"]=Hr(xt),Ge[we]=ne,ke.push(we),ne=re.dense?[]:{},xt={s:{r:0,c:0},e:{r:0,c:0}},rt=Ve[3],we=Be||"Sheet"+(rt+1),Be="");var ps=re.dense?(ne[Ve[0].r]||[])[Ve[0].c]:ne[En(Ve[0])];if(ps){ps.t=Ve[1].t,ps.v=Ve[1].v,Ve[1].z!=null&&(ps.z=Ve[1].z),Ve[1].f!=null&&(ps.f=Ve[1].f);break}re.dense?(ne[Ve[0].r]||(ne[Ve[0].r]=[]),ne[Ve[0].r][Ve[0].c]=Ve[1]):ne[En(Ve[0])]=Ve[1];break;default:}},re);else if(Z[2]==26||Z[2]==14)re.Enum=Cn,Z[2]==14&&(re.qpro=!0,Z.l=0),n(Z,function(Ve,Wr,Ni){switch(Ni){case 204:we=Ve;break;case 22:Ve[1].v=Ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ve[3]>rt&&(ne["!ref"]=Hr(xt),Ge[we]=ne,ke.push(we),ne=re.dense?[]:{},xt={s:{r:0,c:0},e:{r:0,c:0}},rt=Ve[3],we="Sheet"+(rt+1)),sr>0&&Ve[0].r>=sr)break;re.dense?(ne[Ve[0].r]||(ne[Ve[0].r]=[]),ne[Ve[0].r][Ve[0].c]=Ve[1]):ne[En(Ve[0])]=Ve[1],xt.e.c<Ve[0].c&&(xt.e.c=Ve[0].c),xt.e.r<Ve[0].r&&(xt.e.r=Ve[0].r);break;case 27:Ve[14e3]&&(Lt[Ve[14e3][0]]=Ve[14e3][1]);break;case 1537:Lt[Ve[0]]=Ve[1],Ve[0]==rt&&(we=Ve[1]);break;default:break}},re);else throw new Error("Unrecognized LOTUS BOF "+Z[2]);if(ne["!ref"]=Hr(xt),Ge[Be||we]=ne,ke.push(Be||we),!Lt.length)return{SheetNames:ke,Sheets:Ge};for(var ct={},qn=[],Tn=0;Tn<Lt.length;++Tn)Ge[ke[Tn]]?(qn.push(Lt[Tn]||ke[Tn]),ct[Lt[Tn]]=Ge[Lt[Tn]]||Ge[ke[Tn]]):(qn.push(Lt[Tn]),ct[Lt[Tn]]={"!ref":"A1"});return{SheetNames:qn,Sheets:ct}}function r(Z,me){var re=me||{};if(+re.codepage>=0&&Bm(+re.codepage),re.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=us(),we=Qn(Z["!ref"]),Be=Array.isArray(Z),rt=[];Ne(ne,0,s(1030)),Ne(ne,6,c(we));for(var Ge=Math.min(we.e.r,8191),ke=we.s.r;ke<=Ge;++ke)for(var Lt=wi(ke),xt=we.s.c;xt<=we.e.c;++xt){ke===we.s.r&&(rt[xt]=Fi(xt));var sr=rt[xt]+Lt,ct=Be?(Z[ke]||[])[xt]:Z[sr];if(!(!ct||ct.t=="z"))if(ct.t=="n")(ct.v|0)==ct.v&&ct.v>=-32768&&ct.v<=32767?Ne(ne,13,g(ke,xt,ct.v)):Ne(ne,14,y(ke,xt,ct.v));else{var qn=Nc(ct);Ne(ne,15,d(ke,xt,qn.slice(0,239)))}}return Ne(ne,1),ne.end()}function i(Z,me){var re=me||{};if(+re.codepage>=0&&Bm(+re.codepage),re.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=us();Ne(ne,0,o(Z));for(var we=0,Be=0;we<Z.SheetNames.length;++we)(Z.Sheets[Z.SheetNames[we]]||{})["!ref"]&&Ne(ne,27,It(Z.SheetNames[we],Be++));var rt=0;for(we=0;we<Z.SheetNames.length;++we){var Ge=Z.Sheets[Z.SheetNames[we]];if(!(!Ge||!Ge["!ref"])){for(var ke=Qn(Ge["!ref"]),Lt=Array.isArray(Ge),xt=[],sr=Math.min(ke.e.r,8191),ct=ke.s.r;ct<=sr;++ct)for(var qn=wi(ct),Tn=ke.s.c;Tn<=ke.e.c;++Tn){ct===ke.s.r&&(xt[Tn]=Fi(Tn));var Ve=xt[Tn]+qn,Wr=Lt?(Ge[ct]||[])[Tn]:Ge[Ve];if(!(!Wr||Wr.t=="z"))if(Wr.t=="n")Ne(ne,23,F(ct,Tn,rt,Wr.v));else{var Ni=Nc(Wr);Ne(ne,22,D(ct,Tn,rt,Ni.slice(0,239)))}}++rt}}return Ne(ne,1),ne.end()}function s(Z){var me=_e(2);return me.write_shift(2,Z),me}function o(Z){var me=_e(26);me.write_shift(2,4096),me.write_shift(2,4),me.write_shift(4,0);for(var re=0,ne=0,we=0,Be=0;Be<Z.SheetNames.length;++Be){var rt=Z.SheetNames[Be],Ge=Z.Sheets[rt];if(!(!Ge||!Ge["!ref"])){++we;var ke=Ns(Ge["!ref"]);re<ke.e.r&&(re=ke.e.r),ne<ke.e.c&&(ne=ke.e.c)}}return re>8191&&(re=8191),me.write_shift(2,re),me.write_shift(1,we),me.write_shift(1,ne),me.write_shift(2,0),me.write_shift(2,0),me.write_shift(1,1),me.write_shift(1,2),me.write_shift(4,0),me.write_shift(4,0),me}function a(Z,me,re){var ne={s:{c:0,r:0},e:{c:0,r:0}};return me==8&&re.qpro?(ne.s.c=Z.read_shift(1),Z.l++,ne.s.r=Z.read_shift(2),ne.e.c=Z.read_shift(1),Z.l++,ne.e.r=Z.read_shift(2),ne):(ne.s.c=Z.read_shift(2),ne.s.r=Z.read_shift(2),me==12&&re.qpro&&(Z.l+=2),ne.e.c=Z.read_shift(2),ne.e.r=Z.read_shift(2),me==12&&re.qpro&&(Z.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function c(Z){var me=_e(8);return me.write_shift(2,Z.s.c),me.write_shift(2,Z.s.r),me.write_shift(2,Z.e.c),me.write_shift(2,Z.e.r),me}function l(Z,me,re){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return re.qpro&&re.vers!=20768?(ne[0].c=Z.read_shift(1),ne[3]=Z.read_shift(1),ne[0].r=Z.read_shift(2),Z.l+=2):(ne[2]=Z.read_shift(1),ne[0].c=Z.read_shift(2),ne[0].r=Z.read_shift(2)),ne}function u(Z,me,re){var ne=Z.l+me,we=l(Z,me,re);if(we[1].t="s",re.vers==20768){Z.l++;var Be=Z.read_shift(1);return we[1].v=Z.read_shift(Be,"utf8"),we}return re.qpro&&Z.l++,we[1].v=Z.read_shift(ne-Z.l,"cstr"),we}function d(Z,me,re){var ne=_e(7+re.length);ne.write_shift(1,255),ne.write_shift(2,me),ne.write_shift(2,Z),ne.write_shift(1,39);for(var we=0;we<ne.length;++we){var Be=re.charCodeAt(we);ne.write_shift(1,Be>=128?95:Be)}return ne.write_shift(1,0),ne}function m(Z,me,re){var ne=l(Z,me,re);return ne[1].v=Z.read_shift(2,"i"),ne}function g(Z,me,re){var ne=_e(7);return ne.write_shift(1,255),ne.write_shift(2,me),ne.write_shift(2,Z),ne.write_shift(2,re,"i"),ne}function w(Z,me,re){var ne=l(Z,me,re);return ne[1].v=Z.read_shift(8,"f"),ne}function y(Z,me,re){var ne=_e(13);return ne.write_shift(1,255),ne.write_shift(2,me),ne.write_shift(2,Z),ne.write_shift(8,re,"f"),ne}function E(Z,me,re){var ne=Z.l+me,we=l(Z,me,re);if(we[1].v=Z.read_shift(8,"f"),re.qpro)Z.l=ne;else{var Be=Z.read_shift(2);K(Z.slice(Z.l,Z.l+Be),we),Z.l+=Be}return we}function M(Z,me,re){var ne=me&32768;return me&=-32769,me=(ne?Z:0)+(me>=8192?me-16384:me),(ne?"":"$")+(re?Fi(me):wi(me))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},O=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function K(Z,me){Fs(Z,0);for(var re=[],ne=0,we="",Be="",rt="",Ge="";Z.l<Z.length;){var ke=Z[Z.l++];switch(ke){case 0:re.push(Z.read_shift(8,"f"));break;case 1:Be=M(me[0].c,Z.read_shift(2),!0),we=M(me[0].r,Z.read_shift(2),!1),re.push(Be+we);break;case 2:{var Lt=M(me[0].c,Z.read_shift(2),!0),xt=M(me[0].r,Z.read_shift(2),!1);Be=M(me[0].c,Z.read_shift(2),!0),we=M(me[0].r,Z.read_shift(2),!1),re.push(Lt+xt+":"+Be+we)}break;case 3:if(Z.l<Z.length){console.error("WK1 premature formula end");return}break;case 4:re.push("("+re.pop()+")");break;case 5:re.push(Z.read_shift(2));break;case 6:{for(var sr="";ke=Z[Z.l++];)sr+=String.fromCharCode(ke);re.push('"'+sr.replace(/"/g,'""')+'"')}break;case 8:re.push("-"+re.pop());break;case 23:re.push("+"+re.pop());break;case 22:re.push("NOT("+re.pop()+")");break;case 20:case 21:Ge=re.pop(),rt=re.pop(),re.push(["AND","OR"][ke-20]+"("+rt+","+Ge+")");break;default:if(ke<32&&O[ke])Ge=re.pop(),rt=re.pop(),re.push(rt+O[ke]+Ge);else if(k[ke]){if(ne=k[ke][1],ne==69&&(ne=Z[Z.l++]),ne>re.length){console.error("WK1 bad formula parse 0x"+ke.toString(16)+":|"+re.join("|")+"|");return}var ct=re.slice(-ne);re.length-=ne,re.push(k[ke][0]+"("+ct.join(",")+")")}else return ke<=7?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=24?console.error("WK1 unsupported op "+ke.toString(16)):ke<=30?console.error("WK1 invalid opcode "+ke.toString(16)):ke<=115?console.error("WK1 unsupported function opcode "+ke.toString(16)):console.error("WK1 unrecognized opcode "+ke.toString(16))}}re.length==1?me[1].f=""+re[0]:console.error("WK1 bad formula parse |"+re.join("|")+"|")}function Q(Z){var me=[{c:0,r:0},{t:"n",v:0},0];return me[0].r=Z.read_shift(2),me[3]=Z[Z.l++],me[0].c=Z[Z.l++],me}function te(Z,me){var re=Q(Z,me);return re[1].t="s",re[1].v=Z.read_shift(me-4,"cstr"),re}function D(Z,me,re,ne){var we=_e(6+ne.length);we.write_shift(2,Z),we.write_shift(1,re),we.write_shift(1,me),we.write_shift(1,39);for(var Be=0;Be<ne.length;++Be){var rt=ne.charCodeAt(Be);we.write_shift(1,rt>=128?95:rt)}return we.write_shift(1,0),we}function T(Z,me){var re=Q(Z,me);re[1].v=Z.read_shift(2);var ne=re[1].v>>1;if(re[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return re[1].v=ne,re}function A(Z,me){var re=Q(Z,me),ne=Z.read_shift(4),we=Z.read_shift(4),Be=Z.read_shift(2);if(Be==65535)return ne===0&&we===3221225472?(re[1].t="e",re[1].v=15):ne===0&&we===3489660928?(re[1].t="e",re[1].v=42):re[1].v=0,re;var rt=Be&32768;return Be=(Be&32767)-16446,re[1].v=(1-rt*2)*(we*Math.pow(2,Be+32)+ne*Math.pow(2,Be)),re}function F(Z,me,re,ne){var we=_e(14);if(we.write_shift(2,Z),we.write_shift(1,re),we.write_shift(1,me),ne==0)return we.write_shift(4,0),we.write_shift(4,0),we.write_shift(2,65535),we;var Be=0,rt=0,Ge=0,ke=0;return ne<0&&(Be=1,ne=-ne),rt=Math.log2(ne)|0,ne/=Math.pow(2,rt-31),ke=ne>>>0,ke&2147483648||(ne/=2,++rt,ke=ne>>>0),ne-=ke,ke|=2147483648,ke>>>=0,ne*=Math.pow(2,32),Ge=ne>>>0,we.write_shift(4,Ge),we.write_shift(4,ke),rt+=16383+(Be?32768:0),we.write_shift(2,rt),we}function N(Z,me){var re=A(Z,14);return Z.l+=me-14,re}function V(Z,me){var re=Q(Z,me),ne=Z.read_shift(4);return re[1].v=ne>>6,re}function U(Z,me){var re=Q(Z,me),ne=Z.read_shift(8,"f");return re[1].v=ne,re}function nt(Z,me){var re=U(Z,14);return Z.l+=me-10,re}function Ae(Z,me){return Z[Z.l+me-1]==0?Z.read_shift(me,"cstr"):""}function lt(Z,me){var re=Z[Z.l++];re>me-1&&(re=me-1);for(var ne="";ne.length<re;)ne+=String.fromCharCode(Z[Z.l++]);return ne}function ut(Z,me,re){if(!(!re.qpro||me<21)){var ne=Z.read_shift(1);Z.l+=17,Z.l+=1,Z.l+=2;var we=Z.read_shift(me-21,"cstr");return[ne,we]}}function Ut(Z,me){for(var re={},ne=Z.l+me;Z.l<ne;){var we=Z.read_shift(2);if(we==14e3){for(re[we]=[0,""],re[we][0]=Z.read_shift(2);Z[Z.l];)re[we][1]+=String.fromCharCode(Z[Z.l]),Z.l++;Z.l++}}return re}function It(Z,me){var re=_e(5+Z.length);re.write_shift(2,14e3),re.write_shift(2,me);for(var ne=0;ne<Z.length;++ne){var we=Z.charCodeAt(ne);re[re.l++]=we>127?95:we}return re[re.l++]=0,re}var Ft={0:{n:"BOF",f:EB},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:a},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Ae},222:{n:"SHEETNAMELP",f:lt},65535:{n:""}},Cn={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:te},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:N},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ut},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:nt},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ut},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}();var whe=/^\s|\s$|[\t\n\r]/;function AB(n,e){if(!e.bookSST)return"";var t=[zr];t[t.length]=Fe("sst",null,{xmlns:e0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(whe)&&(s+=' xml:space="preserve"'),s+=">"+bn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function bhe(n){return[n.read_shift(4),n.read_shift(4)]}function Ehe(n,e){return e||(e=_e(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var Che=pfe;function She(n){var e=us();Ce(e,159,Ehe(n));for(var t=0;t<n.length;++t)Ce(e,19,Che(n[t]));return Ce(e,160),e.end()}function Ihe(n){if(typeof Nn<"u")return Nn.utils.encode(Zh,n);for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function kB(n){var e=0,t,r=Ihe(n),i=r.length+1,s,o,a,c,l;for(t=Md(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)o=t[s],a=e&16384?1:0,c=e<<1&32767,l=a|c,e=l^o;return e^52811}var The=function(){function n(i,s){switch(s.type){case"base64":return e(Oc(i),s);case"binary":return e(i,s);case"buffer":return e(un&&Buffer.isBuffer(i)?i.toString("binary"):Wm(i),s);case"array":return e(mw(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var o=s||{},a=o.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var l={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,d){Array.isArray(a)&&(a[d]=[]);for(var m=/\\\w+\b/g,g=0,w,y=-1;w=m.exec(u);){switch(w[0]){case"\\cell":var E=u.slice(g,m.lastIndex-w[0].length);if(E[0]==" "&&(E=E.slice(1)),++y,E.length){var M={v:E,t:"s"};Array.isArray(a)?a[d][y]=M:a[En({r:d,c:y})]=M}break}g=m.lastIndex}y>l.e.c&&(l.e.c=y)}),a["!ref"]=Hr(l),a}function t(i,s){return Fd(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],o=Qn(i["!ref"]),a,c=Array.isArray(i),l=o.s.r;l<=o.e.r;++l){s.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)s.push("\\cellx"+(u+1));for(s.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var d=En({r:l,c:u});a=c?(i[l]||[])[u]:i[d],!(!a||a.v==null&&(!a.f||a.F))&&(s.push(" "+(a.w||(Nc(a),a.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}}();function T8(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var Dhe=6;var Fc=Dhe;function ow(n){return Math.floor((n+Math.round(128/Fc)/256)*Fc)}function aw(n){return Math.floor((n-5)/Fc*100+.5)/100}function LA(n){return Math.round((n*Fc+5)/Fc*256)/256}function nk(n){n.width?(n.wpx=ow(n.width),n.wch=aw(n.wpx),n.MDW=Fc):n.wpx?(n.wch=aw(n.wpx),n.width=LA(n.wch),n.MDW=Fc):typeof n.wch=="number"&&(n.width=LA(n.wch),n.wpx=ow(n.width),n.MDW=Fc),n.customWidth&&delete n.customWidth}var Ahe=96,MB=Ahe;function cw(n){return n*96/MB}function RB(n){return n*MB/96}function khe(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=Fe("numFmt",null,{numFmtId:r,formatCode:bn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Fe("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function Mhe(n){var e=[];return e[e.length]=Fe("cellXfs",null),n.forEach(function(t){e[e.length]=Fe("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Fe("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function PB(n,e){var t=[zr,Fe("styleSheet",null,{xmlns:e0[0],"xmlns:vt":ci.vt})],r;return n.SSF&&(r=khe(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Mhe(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function Rhe(n,e){var t=n.read_shift(2),r=Oi(n,e-2);return[t,r]}function Phe(n,e,t){t||(t=_e(6+4*e.length)),t.write_shift(2,n),ui(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function Fhe(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=wfe(n,2,t);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var o=n.read_shift(1);o!=0&&(r.underline=o);var a=n.read_shift(1);a>0&&(r.family=a);var c=n.read_shift(1);switch(c>0&&(r.charset=c),n.l++,r.color=xfe(n,8),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=Oi(n,e-21),r}function Ohe(n,e){e||(e=_e(25+4*32)),e.write_shift(2,n.sz*20),bfe(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),iw(n.color,e);var r=0;return n.scheme=="major"&&(r=1),n.scheme=="minor"&&(r=2),e.write_shift(1,r),ui(n.name,e),e.length>e.l?e.slice(0,e.l):e}var Nhe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],kA,Lhe=Pa;function D8(n,e){e||(e=_e(4*3+8*7+16*1)),kA||(kA=UA(Nhe));var t=kA[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(iw({auto:1},e),iw({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Vhe(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function FB(n,e,t){t||(t=_e(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Mm(n,e){return e||(e=_e(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Bhe=Pa;function Uhe(n,e){return e||(e=_e(51)),e.write_shift(1,0),Mm(null,e),Mm(null,e),Mm(null,e),Mm(null,e),Mm(null,e),e.length>e.l?e.slice(0,e.l):e}function jhe(n,e){return e||(e=_e(12+4*10)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,+n.builtinId),e.write_shift(1,0),rw(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function $he(n,e,t){var r=_e(2052);return r.write_shift(4,n),rw(e,r),rw(t,r),r.length>r.l?r.slice(0,r.l):r}function Hhe(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Ce(n,615,Vo(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ce(n,44,Phe(i,e[i]))}),Ce(n,616))}}function zhe(n){var e=1;e!=0&&(Ce(n,611,Vo(e)),Ce(n,43,Ohe({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),Ce(n,612))}function Whe(n){var e=2;e!=0&&(Ce(n,603,Vo(e)),Ce(n,45,D8({patternType:"none"})),Ce(n,45,D8({patternType:"gray125"})),Ce(n,604))}function qhe(n){var e=1;e!=0&&(Ce(n,613,Vo(e)),Ce(n,46,Uhe({})),Ce(n,614))}function Ghe(n){var e=1;Ce(n,626,Vo(e)),Ce(n,47,FB({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),Ce(n,627)}function Khe(n,e){Ce(n,617,Vo(e.length)),e.forEach(function(t){Ce(n,47,FB(t,0))}),Ce(n,618)}function Qhe(n){var e=1;Ce(n,619,Vo(e)),Ce(n,48,jhe({xfId:0,builtinId:0,name:"Normal"})),Ce(n,620)}function Yhe(n){var e=0;Ce(n,505,Vo(e)),Ce(n,506)}function Xhe(n){var e=0;Ce(n,508,$he(e,"TableStyleMedium9","PivotStyleMedium4")),Ce(n,509)}function Zhe(n,e){var t=us();return Ce(t,278),Hhe(t,n.SSF),zhe(t,n),Whe(t,n),qhe(t,n),Ghe(t,n),Khe(t,e.cellXfs),Qhe(t,n),Yhe(t,n),Xhe(t,n),Ce(t,279),t.end()}function OB(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[zr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',t[t.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',t[t.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',t[t.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface="\uFF2D\uFF33 \uFF30\u30B4\u30B7\u30C3\u30AF"/>',t[t.length]='<a:font script="Hang" typeface="\uB9D1\uC740 \uACE0\uB515"/>',t[t.length]='<a:font script="Hans" typeface="\u5B8B\u4F53"/>',t[t.length]='<a:font script="Hant" typeface="\u65B0\u7D30\u660E\u9AD4"/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Jhe(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:Oi(n,e-8)}}function e0e(n){var e=_e(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),ui(n.name,e),e.slice(0,e.l)}function t0e(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function n0e(n){var e=_e(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function r0e(n,e){var t=_e(8+2*e.length);return t.write_shift(4,n),ui(e,t),t.slice(0,t.l)}function i0e(n){return n.l+=4,n.read_shift(4)!=0}function s0e(n,e){var t=_e(8);return t.write_shift(4,n),t.write_shift(4,e?1:0),t}function o0e(){var n=us();return Ce(n,332),Ce(n,334,Vo(1)),Ce(n,335,e0e({name:"XLDAPR",version:12e4,flags:3496657072})),Ce(n,336),Ce(n,339,r0e(1,"XLDAPR")),Ce(n,52),Ce(n,35,Vo(514)),Ce(n,4096,Vo(0)),Ce(n,4097,eo(1)),Ce(n,36),Ce(n,53),Ce(n,340),Ce(n,337,s0e(1,!0)),Ce(n,51,n0e([[1,0]])),Ce(n,338),Ce(n,333),n.end()}function NB(){var n=[zr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function a0e(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=En(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var qh=1024;function LB(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[Fe("xml",null,{"xmlns:v":Os.v,"xmlns:o":Os.o,"xmlns:x":Os.x,"xmlns:mv":Os.mv}).replace(/\/>/,">"),Fe("o:shapelayout",Fe("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),Fe("v:shapetype",[Fe("v:stroke",null,{joinstyle:"miter"}),Fe("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];qh<n*1e3;)qh+=1e3;return e.forEach(function(s){var o=li(s[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var c=a.type=="gradient"?Fe("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,l=Fe("v:fill",c,a),u={on:"t",obscured:"t"};++qh,i=i.concat(["<v:shape"+$m({id:"_x0000_s"+qh,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",l,Fe("v:shadow",null,u),Fe("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xi("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),xi("x:AutoFill","False"),xi("x:Row",String(o.r)),xi("x:Column",String(o.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function VB(n){var e=[zr,Fe("comments",null,{xmlns:e0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=bn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(c){c.a&&(i=t.indexOf(bn(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(xi("t",bn(s[0]||"")));else{for(var o=`Comment:
    `+s[0]+`
`,a=1;a<s.length;++a)o+=`Reply:
    `+s[a]+`
`;e.push(xi("t",bn(o)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function c0e(n,e,t){var r=[zr,Fe("ThreadedComments",null,{xmlns:ci.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(o,a){if(!o.T){delete o.ID;return}o.a&&e.indexOf(o.a)==-1&&e.push(o.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};a==0?s=c.id:c.parentId=s,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(o.a)).slice(-12)+"}"),r.push(Fe("threadedComment",xi("text",o.t||""),c))})}),r.push("</ThreadedComments>"),r.join("")}function l0e(n){var e=[zr,Fe("personList",null,{xmlns:ci.TCMNT,"xmlns:x":e0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(Fe("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function u0e(n){var e={};e.iauthor=n.read_shift(4);var t=Vd(n,16);return e.rfx=t.s,e.ref=En(t.s),n.l+=16,e}function d0e(n,e){return e==null&&(e=_e(36)),e.write_shift(4,n[1].iauthor),r0(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var f0e=Oi;function h0e(n){return ui(n.slice(0,54))}function p0e(n){var e=us(),t=[];return Ce(e,628),Ce(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Ce(e,632,h0e(i.a)))})}),Ce(e,631),Ce(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:li(r[0]),e:li(r[0])};Ce(e,635,d0e([s,i])),i.t&&i.t.length>0&&Ce(e,637,gfe(i)),Ce(e,636),delete i.iauthor})}),Ce(e,634),Ce(e,629),e.end()}function m0e(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&In.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var BB=["xlsb","xlsm","xlam","biff8","xla"];var g0e=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,o){var a=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),o.length==0?a=!0:o.charAt(0)=="["&&(a=!0,o=o.slice(1,-1));var l=s.length>0?parseInt(s,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return a?u+=e.c:--u,c?l+=e.r:--l,i+(a?"":"$")+Fi(u)+(c?"":"$")+wi(l)}return function(i,s){return e=s,i.replace(n,t)}}(),rk=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ik=function(){return function(e,t){return e.replace(rk,function(r,i,s,o,a,c){var l=XA(o)-(s?0:t.c),u=YA(c)-(a?0:t.r),d=u==0?"":a?u+1:"["+u+"]",m=l==0?"":s?l+1:"["+l+"]";return i+"R"+d+"C"+m})}}();function v0e(n,e){return n.replace(rk,function(t,r,i,s,o,a){return r+(i=="$"?i+s:Fi(XA(s)+e.c))+(o=="$"?o+a:wi(YA(a)+e.r))})}function _0e(n){return n.length!=1}function $r(n){n.l+=1}function tu(n,e){var t=n.read_shift(e==1?1:2);return[t&16383,t>>14&1,t>>15&1]}function UB(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return jB(n,e,t);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),o=tu(n,2),a=tu(n,2);return{s:{r:i,c:o[0],cRel:o[1],rRel:o[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function jB(n){var e=tu(n,2),t=tu(n,2),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function y0e(n,e,t){if(t.biff<8)return jB(n,e,t);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=tu(n,2),o=tu(n,2);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function $B(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return x0e(n,e,t);var r=n.read_shift(t&&t.biff==12?4:2),i=tu(n,2);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function x0e(n){var e=tu(n,2),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function w0e(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function b0e(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return E0e(n,e,t);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),o=(s&16384)>>14,a=(s&32768)>>15;if(s&=16383,a==1)for(;i>524287;)i-=1048576;if(o==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:o,rRel:a}}function E0e(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function C0e(n,e,t){var r=(n[n.l++]&96)>>5,i=UB(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function S0e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var o=UB(n,s,t);return[r,i,o]}function I0e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function T0e(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function D0e(n,e,t){var r=(n[n.l++]&96)>>5,i=y0e(n,e-1,t);return[r,i]}function A0e(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function A8(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function k0e(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function M0e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function R0e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function P0e(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function F0e(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function HB(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function O0e(n){return n.read_shift(2),HB(n,2)}function N0e(n){return n.read_shift(2),HB(n,2)}function L0e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=$B(n,0,t);return[r,i]}function V0e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=b0e(n,0,t);return[r,i]}function B0e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=$B(n,0,t);return[r,i,s]}function U0e(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[Upe[i],qB[i],r]}function j0e(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:$0e(n);return[i,(s[0]===0?qB:Bpe)[s[1]]]}function $0e(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function H0e(n,e,t){n.l+=t&&t.biff==2?3:4}function z0e(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function W0e(n){return n.l++,Gm[n.read_shift(1)]}function q0e(n){return n.l++,n.read_shift(2)}function G0e(n){return n.l++,n.read_shift(1)!==0}function K0e(n){return n.l++,i0(n,8)}function Q0e(n,e,t){return n.l++,SB(n,e-1,t)}function Y0e(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Bfe(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Gm[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=i0(n,8);break;case 2:t[1]=Hfe(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function X0e(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?Vd:qfe)(n,8));return i}function Z0e(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,o=[];s!=r&&(o[s]=[]);++s)for(var a=0;a!=i;++a)o[s][a]=Y0e(n,t.biff);return o}function J0e(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function epe(n,e,t){if(t.biff==5)return tpe(n,e,t);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function tpe(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function npe(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function rpe(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function ipe(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function spe(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var ope=Pa,ape=Pa,cpe=Pa;function Km(n,e,t){return n.l+=2,[w0e(n,4,t)]}function sk(n){return n.l+=6,[]}var lpe=Km,upe=sk,dpe=sk,fpe=Km;function zB(n){return n.l+=2,[EB(n),n.read_shift(2)&1]}var hpe=Km,ppe=zB,mpe=sk,gpe=Km,vpe=Km,_pe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function ype(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),o=_pe[t>>2&31];return{ixti:e,coltype:t&3,rt:o,idx:r,c:i,C:s}}function xpe(n){return n.l+=2,[n.read_shift(4)]}function wpe(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function bpe(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function Epe(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Cpe(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function Spe(n){return n.l+=4,[0,0]}var k8={1:{n:"PtgExp",f:z0e},2:{n:"PtgTbl",f:cpe},3:{n:"PtgAdd",f:$r},4:{n:"PtgSub",f:$r},5:{n:"PtgMul",f:$r},6:{n:"PtgDiv",f:$r},7:{n:"PtgPower",f:$r},8:{n:"PtgConcat",f:$r},9:{n:"PtgLt",f:$r},10:{n:"PtgLe",f:$r},11:{n:"PtgEq",f:$r},12:{n:"PtgGe",f:$r},13:{n:"PtgGt",f:$r},14:{n:"PtgNe",f:$r},15:{n:"PtgIsect",f:$r},16:{n:"PtgUnion",f:$r},17:{n:"PtgRange",f:$r},18:{n:"PtgUplus",f:$r},19:{n:"PtgUminus",f:$r},20:{n:"PtgPercent",f:$r},21:{n:"PtgParen",f:$r},22:{n:"PtgMissArg",f:$r},23:{n:"PtgStr",f:Q0e},26:{n:"PtgSheet",f:wpe},27:{n:"PtgEndSheet",f:bpe},28:{n:"PtgErr",f:W0e},29:{n:"PtgBool",f:G0e},30:{n:"PtgInt",f:q0e},31:{n:"PtgNum",f:K0e},32:{n:"PtgArray",f:A0e},33:{n:"PtgFunc",f:U0e},34:{n:"PtgFuncVar",f:j0e},35:{n:"PtgName",f:J0e},36:{n:"PtgRef",f:L0e},37:{n:"PtgArea",f:C0e},38:{n:"PtgMemArea",f:npe},39:{n:"PtgMemErr",f:ope},40:{n:"PtgMemNoMem",f:ape},41:{n:"PtgMemFunc",f:rpe},42:{n:"PtgRefErr",f:ipe},43:{n:"PtgAreaErr",f:I0e},44:{n:"PtgRefN",f:V0e},45:{n:"PtgAreaN",f:D0e},46:{n:"PtgMemAreaN",f:Epe},47:{n:"PtgMemNoMemN",f:Cpe},57:{n:"PtgNameX",f:epe},58:{n:"PtgRef3d",f:B0e},59:{n:"PtgArea3d",f:S0e},60:{n:"PtgRefErr3d",f:spe},61:{n:"PtgAreaErr3d",f:T0e},255:{}},Ipe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Tpe={1:{n:"PtgElfLel",f:zB},2:{n:"PtgElfRw",f:gpe},3:{n:"PtgElfCol",f:lpe},6:{n:"PtgElfRwV",f:vpe},7:{n:"PtgElfColV",f:fpe},10:{n:"PtgElfRadical",f:hpe},11:{n:"PtgElfRadicalS",f:mpe},13:{n:"PtgElfColS",f:upe},15:{n:"PtgElfColSV",f:dpe},16:{n:"PtgElfRadicalLel",f:ppe},25:{n:"PtgList",f:ype},29:{n:"PtgSxName",f:xpe},255:{}},Dpe={0:{n:"PtgAttrNoop",f:Spe},1:{n:"PtgAttrSemi",f:F0e},2:{n:"PtgAttrIf",f:R0e},4:{n:"PtgAttrChoose",f:k0e},8:{n:"PtgAttrGoto",f:M0e},16:{n:"PtgAttrSum",f:H0e},32:{n:"PtgAttrBaxcel",f:A8},33:{n:"PtgAttrBaxcel",f:A8},64:{n:"PtgAttrSpace",f:O0e},65:{n:"PtgAttrSpaceSemi",f:N0e},128:{n:"PtgAttrIfError",f:P0e},255:{}};function Ape(n,e,t,r){if(r.biff<8)return Pa(n,e);for(var i=n.l+e,s=[],o=0;o!==t.length;++o)switch(t[o][0]){case"PtgArray":t[o][1]=Z0e(n,0,r),s.push(t[o][1]);break;case"PtgMemArea":t[o][2]=X0e(n,t[o][1],r),s.push(t[o][2]);break;case"PtgExp":r&&r.biff==12&&(t[o][1][1]=n.read_shift(4),s.push(t[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[o][0];default:break}return e=i-n.l,e!==0&&s.push(Pa(n,e)),s}function kpe(n,e,t){for(var r=n.l+e,i,s,o=[];r!=n.l;)e=r-n.l,s=n[n.l],i=k8[s]||k8[Ipe[s]],(s===24||s===25)&&(i=(s===24?Tpe:Dpe)[n[n.l+1]]),!i||!i.f?Pa(n,e):o.push([i.n,i.f(n,e,t)]);return o}function Mpe(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var o=r[s];if(o)switch(o[0]){case 2:i.push('"'+o[1].replace(/"/g,'""')+'"');break;default:i.push(o[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Rpe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ppe(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function WB(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function M8(n,e,t){var r=WB(n,e,t);return r=="#REF"?r:Ppe(r,t)}function Jh(n,e,t,r,i){var s=i&&i.biff||8,o={s:{c:0,r:0},e:{c:0,r:0}},a=[],c,l,u,d=0,m=0,g,w="";if(!n[0]||!n[0][0])return"";for(var y=-1,E="",M=0,k=n[0].length;M<k;++M){var O=n[0][M];switch(O[0]){case"PtgUminus":a.push("-"+a.pop());break;case"PtgUplus":a.push("+"+a.pop());break;case"PtgPercent":a.push(a.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=a.pop(),l=a.pop(),y>=0){switch(n[0][y][1][0]){case 0:E=br(" ",n[0][y][1][1]);break;case 1:E=br("\r",n[0][y][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}l=l+E,y=-1}a.push(l+Rpe[O[0]]+c);break;case"PtgIsect":c=a.pop(),l=a.pop(),a.push(l+" "+c);break;case"PtgUnion":c=a.pop(),l=a.pop(),a.push(l+","+c);break;case"PtgRange":c=a.pop(),l=a.pop(),a.push(l+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Om(O[1][1],o,i),a.push(Nm(u,s));break;case"PtgRefN":u=t?Om(O[1][1],t,i):O[1][1],a.push(Nm(u,s));break;case"PtgRef3d":d=O[1][1],u=Om(O[1][2],o,i),w=M8(r,d,i);var K=w;a.push(w+"!"+Nm(u,s));break;case"PtgFunc":case"PtgFuncVar":var Q=O[1][0],te=O[1][1];Q||(Q=0),Q&=127;var D=Q==0?[]:a.slice(-Q);a.length-=Q,te==="User"&&(te=D.shift()),a.push(te+"("+D.join(",")+")");break;case"PtgBool":a.push(O[1]?"TRUE":"FALSE");break;case"PtgInt":a.push(O[1]);break;case"PtgNum":a.push(String(O[1]));break;case"PtgStr":a.push('"'+O[1].replace(/"/g,'""')+'"');break;case"PtgErr":a.push(O[1]);break;case"PtgAreaN":g=m8(O[1][1],t?{s:t}:o,i),a.push(DA(g,i));break;case"PtgArea":g=m8(O[1][1],o,i),a.push(DA(g,i));break;case"PtgArea3d":d=O[1][1],g=O[1][2],w=M8(r,d,i),a.push(w+"!"+DA(g,i));break;case"PtgAttrSum":a.push("SUM("+a.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=O[1][2];var T=(r.names||[])[m-1]||(r[0]||[])[m],A=T?T.Name:"SH33TJSNAME"+String(m);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),a.push(A);break;case"PtgNameX":var F=O[1][1];m=O[1][2];var N;if(i.biff<=5)F<0&&(F=-F),r[F]&&(N=r[F][m]);else{var V="";if(((r[F]||[])[0]||[])[0]==14849||(((r[F]||[])[0]||[])[0]==1025?r[F][m]&&r[F][m].itab>0&&(V=r.SheetNames[r[F][m].itab-1]+"!"):V=r.SheetNames[m-1]+"!"),r[F]&&r[F][m])V+=r[F][m].Name;else if(r[0]&&r[0][m])V+=r[0][m].Name;else{var U=(WB(r,F,i)||"").split(";;");U[m-1]?V=U[m-1]:V+="SH33TJSERRX"}a.push(V);break}N||(N={Name:"SH33TJSERRY"}),a.push(N.Name);break;case"PtgParen":var nt="(",Ae=")";if(y>=0){switch(E="",n[0][y][1][0]){case 2:nt=br(" ",n[0][y][1][1])+nt;break;case 3:nt=br("\r",n[0][y][1][1])+nt;break;case 4:Ae=br(" ",n[0][y][1][1])+Ae;break;case 5:Ae=br("\r",n[0][y][1][1])+Ae;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][y][1][0])}y=-1}a.push(nt+a.pop()+Ae);break;case"PtgRefErr":a.push("#REF!");break;case"PtgRefErr3d":a.push("#REF!");break;case"PtgExp":u={c:O[1][1],r:O[1][0]};var lt={c:t.c,r:t.r};if(r.sharedf[En(u)]){var ut=r.sharedf[En(u)];a.push(Jh(ut,o,lt,r,i))}else{var Ut=!1;for(c=0;c!=r.arrayf.length;++c)if(l=r.arrayf[c],!(u.c<l[0].s.c||u.c>l[0].e.c)&&!(u.r<l[0].s.r||u.r>l[0].e.r)){a.push(Jh(l[1],o,lt,r,i)),Ut=!0;break}Ut||a.push(O[1])}break;case"PtgArray":a.push("{"+Mpe(O[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=M;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":a.push("");break;case"PtgAreaErr":a.push("#REF!");break;case"PtgAreaErr3d":a.push("#REF!");break;case"PtgList":a.push("Table"+O[1].idx+"[#"+O[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(O));default:throw new Error("Unrecognized Formula Token: "+String(O))}var It=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&y>=0&&It.indexOf(n[0][M][0])==-1){O=n[0][y];var Ft=!0;switch(O[1][0]){case 4:Ft=!1;case 0:E=br(" ",O[1][1]);break;case 5:Ft=!1;case 1:E=br("\r",O[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+O[1][0])}a.push((Ft?E:"")+a.pop()+(Ft?"":E)),y=-1}}if(a.length>1&&i.WTF)throw new Error("bad formula stack");return a[0]}function Fpe(n){if(n==null){var e=_e(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Rd(n);return Rd(0)}function Ope(n,e,t,r,i){var s=Pd(e,t,i),o=Fpe(n.v),a=_e(6),c=33;a.write_shift(2,c),a.write_shift(4,0);for(var l=_e(n.bf.length),u=0;u<n.bf.length;++u)l[u]=n.bf[u];var d=yi([s,o,a,l]);return d}function vw(n,e,t){var r=n.read_shift(4),i=kpe(n,r,t),s=n.read_shift(4),o=s>0?Ape(n,s,i,t):null;return[i,o]}var Npe=vw,_w=vw,Lpe=vw,Vpe=vw,Bpe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},qB={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Upe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function jpe(n){var e="of:="+n.replace(rk,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function $pe(n){return n.replace(/\./,"!")}var Lm=typeof Map<"u";function ok(n,e,t){var r=0,i=n.length;if(t){if(Lm?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Lm?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(Lm?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function yw(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Fc=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=aw(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=LA(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function GB(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(t=[1,1,1,1,.5,.5]),n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function ru(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){G8(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Hpe(n,e,t){if(n&&n["!ref"]){var r=Qn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function zpe(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Hr(n[t])+'"/>';return e+"</mergeCells>"}function Wpe(n,e,t,r,i){var s=!1,o={},a=null;if(r.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,o.codeName=Mc(bn(c))}if(n&&n["!outline"]){var l={summaryBelow:1,summaryRight:1};n["!outline"].above&&(l.summaryBelow=0),n["!outline"].left&&(l.summaryRight=0),a=(a||"")+Fe("outlinePr",null,l)}!s&&!a||(i[i.length]=Fe("sheetPr",a,o))}var qpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Gpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Kpe(n){var e={sheet:1};return qpe.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),Gpe.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=kB(n.password).toString(16).toUpperCase()),Fe("sheetProtection",null,e)}function Qpe(n){return GB(n),Fe("pageMargins",null,n)}function Ype(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=Fe("col",null,yw(i,r)));return t[t.length]="</cols>",t.join("")}function Xpe(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Hr(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,o=Ns(i);o.s.r==o.e.r&&(o.e.r=Ns(e["!ref"]).e.r,i=Hr(o));for(var a=0;a<s.length;++a){var c=s[a];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return a==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),Fe("autoFilter",null,{ref:i})}function Zpe(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Fe("sheetViews",Fe("sheetView",null,i),{})}function Jpe(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,o=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Gm[n.v];break;case"d":r&&r.cellDates?i=qi(n.v,-1).toISOString():(n=fs(n),n.t="n",i=""+(n.v=ds(qi(n.v)))),typeof n.z>"u"&&(n.z=Er[14]);break;default:i=n.v;break}var a=xi("v",bn(i)),c={r:e},l=ru(r.cellXfs,n,r);switch(l!==0&&(c.s=l),n.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){a=xi("v",""+ok(r.Strings,n.v,r.revStrings)),c.t="s";break}c.t="str";break}if(n.t!=s&&(n.t=s,n.v=o),typeof n.f=="string"&&n.f){var u=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;a=Fe("f",bn(n.f),u)+(n.v!=null?a:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(c.cm=1),Fe("c",a,c)}function eme(n,e,t,r){var i=[],s=[],o=Qn(n["!ref"]),a="",c,l="",u=[],d=0,m=0,g=n["!rows"],w=Array.isArray(n),y={r:l},E,M=-1;for(m=o.s.c;m<=o.e.c;++m)u[m]=Fi(m);for(d=o.s.r;d<=o.e.r;++d){for(s=[],l=wi(d),m=o.s.c;m<=o.e.c;++m){c=u[m]+l;var k=w?(n[d]||[])[m]:n[c];k!==void 0&&(a=Jpe(k,c,n,e,t,r))!=null&&s.push(a)}(s.length>0||g&&g[d])&&(y={r:l},g&&g[d]&&(E=g[d],E.hidden&&(y.hidden=1),M=-1,E.hpx?M=cw(E.hpx):E.hpt&&(M=E.hpt),M>-1&&(y.ht=M,y.customHeight=1),E.level&&(y.outlineLevel=E.level)),i[i.length]=Fe("row",s.join(""),y))}if(g)for(;d<g.length;++d)g&&g[d]&&(y={r:d+1},E=g[d],E.hidden&&(y.hidden=1),M=-1,E.hpx?M=cw(E.hpx):E.hpt&&(M=E.hpt),M>-1&&(y.ht=M,y.customHeight=1),E.level&&(y.outlineLevel=E.level),i[i.length]=Fe("row","",y));return i.join("")}function KB(n,e,t,r){var i=[zr,Fe("worksheet",null,{xmlns:e0[0],"xmlns:r":ci.r})],s=t.SheetNames[n],o=0,a="",c=t.Sheets[s];c==null&&(c={});var l=c["!ref"]||"A1",u=Qn(l);if(u.e.c>16383||u.e.r>1048575){if(e.WTF)throw new Error("Range "+l+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),l=Hr(u)}r||(r={}),c["!comments"]=[];var d=[];Wpe(c,t,n,e,i),i[i.length]=Fe("dimension",null,{ref:l}),i[i.length]=Zpe(c,e,n,t),e.sheetFormat&&(i[i.length]=Fe("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=Ype(c,c["!cols"])),i[o=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(a=eme(c,e,n,t,r),a.length>0&&(i[i.length]=a)),i.length>o+1&&(i[i.length]="</sheetData>",i[o]=i[o].replace("/>",">")),c["!protect"]&&(i[i.length]=Kpe(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=Xpe(c["!autofilter"],c,t,n)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=zpe(c["!merges"]));var m=-1,g,w=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(w=wn(r,-1,bn(y[1].Target).replace(/#.*$/,""),on.HLINK),g["r:id"]="rId"+w),(m=y[1].Target.indexOf("#"))>-1&&(g.location=bn(y[1].Target.slice(m+1))),y[1].Tooltip&&(g.tooltip=bn(y[1].Tooltip)),i[i.length]=Fe("hyperlink",null,g))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=Qpe(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=xi("ignoredErrors",Fe("ignoredError",null,{numberStoredAsText:1,sqref:l}))),d.length>0&&(w=wn(r,-1,"../drawings/drawing"+(n+1)+".xml",on.DRAW),i[i.length]=Fe("drawing",null,{"r:id":"rId"+w}),c["!drawing"]=d),c["!comments"].length>0&&(w=wn(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",on.VML),i[i.length]=Fe("legacyDrawing",null,{"r:id":"rId"+w}),c["!legacy"]=w),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function tme(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function nme(n,e,t){var r=_e(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=cw(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var o=0;i.level&&(o|=i.level),i.hidden&&(o|=16),(i.hpx||i.hpt)&&(o|=32),r.write_shift(1,o),r.write_shift(1,0);var a=0,c=r.l;r.l+=4;for(var l={r:n,c:0},u=0;u<16;++u)if(!(e.s.c>u+1<<10||e.e.c<u<<10)){for(var d=-1,m=-1,g=u<<10;g<u+1<<10;++g){l.c=g;var w=Array.isArray(t)?(t[l.r]||[])[l.c]:t[En(l)];w&&(d<0&&(d=g),m=g)}d<0||(++a,r.write_shift(4,d),r.write_shift(4,m))}var y=r.l;return r.l=c,r.write_shift(4,a),r.l=y,r.length>r.l?r.slice(0,r.l):r}function rme(n,e,t,r){var i=nme(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Ce(n,0,i)}var ime=Vd,sme=r0;function ome(){}function ame(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=vfe(n,e-19),t}function cme(n,e,t){t==null&&(t=_e(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return iw({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),lB(n,t),t.slice(0,t.l)}function lme(n){var e=to(n);return[e]}function ume(n,e,t){return t==null&&(t=_e(8)),Od(e,t)}function dme(n){var e=Nd(n);return[e]}function fme(n,e,t){return t==null&&(t=_e(4)),Ld(e,t)}function hme(n){var e=to(n),t=n.read_shift(1);return[e,t,"b"]}function pme(n,e,t){return t==null&&(t=_e(9)),Od(e,t),t.write_shift(1,n.v?1:0),t}function mme(n){var e=Nd(n),t=n.read_shift(1);return[e,t,"b"]}function gme(n,e,t){return t==null&&(t=_e(5)),Ld(e,t),t.write_shift(1,n.v?1:0),t}function vme(n){var e=to(n),t=n.read_shift(1);return[e,t,"e"]}function _me(n,e,t){return t==null&&(t=_e(9)),Od(e,t),t.write_shift(1,n.v),t}function yme(n){var e=Nd(n),t=n.read_shift(1);return[e,t,"e"]}function xme(n,e,t){return t==null&&(t=_e(8)),Ld(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function wme(n){var e=to(n),t=n.read_shift(4);return[e,t,"s"]}function bme(n,e,t){return t==null&&(t=_e(12)),Od(e,t),t.write_shift(4,e.v),t}function Eme(n){var e=Nd(n),t=n.read_shift(4);return[e,t,"s"]}function Cme(n,e,t){return t==null&&(t=_e(8)),Ld(e,t),t.write_shift(4,e.v),t}function Sme(n){var e=to(n),t=i0(n);return[e,t,"n"]}function Ime(n,e,t){return t==null&&(t=_e(16)),Od(e,t),Rd(n.v,t),t}function Tme(n){var e=Nd(n),t=i0(n);return[e,t,"n"]}function Dme(n,e,t){return t==null&&(t=_e(12)),Ld(e,t),Rd(n.v,t),t}function Ame(n){var e=to(n),t=uB(n);return[e,t,"n"]}function kme(n,e,t){return t==null&&(t=_e(12)),Od(e,t),dB(n.v,t),t}function Mme(n){var e=Nd(n),t=uB(n);return[e,t,"n"]}function Rme(n,e,t){return t==null&&(t=_e(8)),Ld(e,t),dB(n.v,t),t}function Pme(n){var e=to(n),t=ZA(n);return[e,t,"is"]}function Fme(n){var e=to(n),t=Oi(n);return[e,t,"str"]}function Ome(n,e,t){return t==null&&(t=_e(12+4*n.v.length)),Od(e,t),ui(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Nme(n){var e=Nd(n),t=Oi(n);return[e,t,"str"]}function Lme(n,e,t){return t==null&&(t=_e(8+4*n.v.length)),Ld(e,t),ui(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Vme(n,e,t){var r=n.l+e,i=to(n);i.r=t["!row"];var s=n.read_shift(1),o=[i,s,"b"];if(t.cellFormula){n.l+=2;var a=_w(n,r-n.l,t);o[3]=Jh(a,null,i,t.supbooks,t)}else n.l=r;return o}function Bme(n,e,t){var r=n.l+e,i=to(n);i.r=t["!row"];var s=n.read_shift(1),o=[i,s,"e"];if(t.cellFormula){n.l+=2;var a=_w(n,r-n.l,t);o[3]=Jh(a,null,i,t.supbooks,t)}else n.l=r;return o}function Ume(n,e,t){var r=n.l+e,i=to(n);i.r=t["!row"];var s=i0(n),o=[i,s,"n"];if(t.cellFormula){n.l+=2;var a=_w(n,r-n.l,t);o[3]=Jh(a,null,i,t.supbooks,t)}else n.l=r;return o}function jme(n,e,t){var r=n.l+e,i=to(n);i.r=t["!row"];var s=Oi(n),o=[i,s,"str"];if(t.cellFormula){n.l+=2;var a=_w(n,r-n.l,t);o[3]=Jh(a,null,i,t.supbooks,t)}else n.l=r;return o}var $me=Vd,Hme=r0;function zme(n,e){return e==null&&(e=_e(4)),e.write_shift(4,n),e}function Wme(n,e){var t=n.l+e,r=Vd(n,16),i=JA(n),s=Oi(n),o=Oi(n),a=Oi(n);n.l=t;var c={rfx:r,relId:i,loc:s,display:a};return o&&(c.Tooltip=o),c}function qme(n,e){var t=_e(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));r0({s:li(n[0]),e:li(n[0])},t),ek("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return ui(i||"",t),ui(n[1].Tooltip||"",t),ui("",t),t.slice(0,t.l)}function Gme(){}function Kme(n,e,t){var r=n.l+e,i=fB(n,16),s=n.read_shift(1),o=[i];if(o[2]=s,t.cellFormula){var a=Npe(n,r-n.l,t);o[1]=a}else n.l=r;return o}function Qme(n,e,t){var r=n.l+e,i=Vd(n,16),s=[i];if(t.cellFormula){var o=Vpe(n,r-n.l,t);s[1]=o,n.l=r}else n.l=r;return s}function Yme(n,e,t){t==null&&(t=_e(18));var r=yw(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var QB=["left","right","top","bottom","header","footer"];function Xme(n){var e={};return QB.forEach(function(t){e[t]=i0(n,8)}),e}function Zme(n,e){return e==null&&(e=_e(6*8)),GB(n),QB.forEach(function(t){Rd(n[t],e)}),e}function Jme(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function ege(n,e,t){t==null&&(t=_e(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function tge(n){var e=_e(24);return e.write_shift(4,4),e.write_shift(4,1),r0(n,e),e}function nge(n,e){return e==null&&(e=_e(16*4+2)),e.write_shift(2,n.password?kB(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function rge(){}function ige(){}function sge(n,e,t,r,i,s,o){if(e.v===void 0)return!1;var a="";switch(e.t){case"b":a=e.v?"1":"0";break;case"d":e=fs(e),e.z=e.z||Er[14],e.v=ds(qi(e.v)),e.t="n";break;case"n":case"e":a=""+e.v;break;default:a=e.v;break}var c={r:t,c:r};switch(c.s=ru(i.cellXfs,e,i),e.l&&s["!links"].push([En(c),e.l]),e.c&&s["!comments"].push([En(c),e.c]),e.t){case"s":case"str":return i.bookSST?(a=ok(i.Strings,e.v,i.revStrings),c.t="s",c.v=a,o?Ce(n,18,Cme(e,c)):Ce(n,7,bme(e,c))):(c.t="str",o?Ce(n,17,Lme(e,c)):Ce(n,6,Ome(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?o?Ce(n,13,Rme(e,c)):Ce(n,2,kme(e,c)):o?Ce(n,16,Dme(e,c)):Ce(n,5,Ime(e,c)),!0;case"b":return c.t="b",o?Ce(n,15,gme(e,c)):Ce(n,4,pme(e,c)),!0;case"e":return c.t="e",o?Ce(n,14,xme(e,c)):Ce(n,3,_me(e,c)),!0}return o?Ce(n,12,fme(e,c)):Ce(n,1,ume(e,c)),!0}function oge(n,e,t,r){var i=Qn(e["!ref"]||"A1"),s,o="",a=[];Ce(n,145);var c=Array.isArray(e),l=i.e.r;e["!rows"]&&(l=Math.max(i.e.r,e["!rows"].length-1));for(var u=i.s.r;u<=l;++u){o=wi(u),rme(n,e,i,u);var d=!1;if(u<=i.e.r)for(var m=i.s.c;m<=i.e.c;++m){u===i.s.r&&(a[m]=Fi(m)),s=a[m]+o;var g=c?(e[u]||[])[m]:e[s];if(!g){d=!1;continue}d=sge(n,g,u,m,r,e,d)}}Ce(n,146)}function age(n,e){!e||!e["!merges"]||(Ce(n,177,zme(e["!merges"].length)),e["!merges"].forEach(function(t){Ce(n,176,Hme(t))}),Ce(n,178))}function cge(n,e){!e||!e["!cols"]||(Ce(n,390),e["!cols"].forEach(function(t,r){t&&Ce(n,60,Yme(r,t))}),Ce(n,391))}function lge(n,e){!e||!e["!ref"]||(Ce(n,648),Ce(n,649,tge(Qn(e["!ref"]))),Ce(n,650))}function uge(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=wn(t,-1,r[1].Target.replace(/#.*$/,""),on.HLINK);Ce(n,494,qme(r,i))}}),delete e["!links"]}function dge(n,e,t,r){if(e["!comments"].length>0){var i=wn(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",on.VML);Ce(n,551,ek("rId"+i)),e["!legacy"]=i}}function fge(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Hr(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var o=t.Workbook.Names,a=Ns(s);a.s.r==a.e.r&&(a.e.r=Ns(e["!ref"]).e.r,s=Hr(a));for(var c=0;c<o.length;++c){var l=o[c];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==r){l.Ref="'"+t.SheetNames[r]+"'!"+s;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Ce(n,161,r0(Qn(s))),Ce(n,162)}}function hge(n,e,t){Ce(n,133),Ce(n,137,ege(e,t)),Ce(n,138),Ce(n,134)}function pge(n,e){e["!protect"]&&Ce(n,535,nge(e["!protect"]))}function mge(n,e,t,r){var i=us(),s=t.SheetNames[n],o=t.Sheets[s]||{},a=s;try{t&&t.Workbook&&(a=t.Workbook.Sheets[n].CodeName||a)}catch{}var c=Qn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Ce(i,129),(t.vbaraw||o["!outline"])&&Ce(i,147,cme(a,o["!outline"])),Ce(i,148,sme(c)),hge(i,o,t.Workbook),cge(i,o,n,e,t),oge(i,o,n,e,t),pge(i,o),fge(i,o,t,n),age(i,o),uge(i,o,r),o["!margins"]&&Ce(i,476,Zme(o["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&lge(i,o),dge(i,o,n,r),Ce(i,130),i.end()}function gge(n,e){n.l+=10;var t=Oi(n,e-10);return{name:t}}var vge=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function _ge(n){return!n.Workbook||!n.Workbook.WBProps?"false":Kde(n.Workbook.WBProps.date1904)?"true":"false"}var yge="][*?/\\".split("");function YB(n,e){if(n.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var t=!0;return yge.forEach(function(r){if(n.indexOf(r)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");t=!1}}),t}function xge(n,e,t){n.forEach(function(r,i){YB(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var o=e&&e[i]&&e[i].CodeName||r;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function wge(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];xge(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)Hpe(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function XB(n){var e=[zr];e[e.length]=Fe("workbook",null,{xmlns:e0[0],"xmlns:r":ci.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(vge.forEach(function(a){n.Workbook.WBProps[a[0]]!=null&&n.Workbook.WBProps[a[0]]!=a[1]&&(r[a[0]]=n.Workbook.WBProps[a[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Fe("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var o={name:bn(n.SheetNames[s].slice(0,31))};if(o.sheetId=""+(s+1),o["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}e[e.length]=Fe("sheet",null,o)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(a){var c={name:a.Name};a.Comment&&(c.comment=a.Comment),a.Sheet!=null&&(c.localSheetId=""+a.Sheet),a.Hidden&&(c.hidden="1"),a.Ref&&(e[e.length]=Fe("definedName",bn(a.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function bge(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=NA(n,e-8),t.name=Oi(n),t}function Ege(n,e){return e||(e=_e(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),ek(n.strRelID,e),ui(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Cge(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?Oi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Sge(n,e){e||(e=_e(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),lB(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Ige(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=_fe(n),o=Lpe(n,0,t),a=JA(n);n.l=r;var c={Name:s,Ptg:o};return i<268435455&&(c.Sheet=i),a&&(c.Comment=a),c}function Tge(n,e){Ce(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Ce(n,156,Ege(i))}Ce(n,144)}function Dge(n,e){e||(e=_e(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return ui("SheetJS",e),ui(Vm.version,e),ui(Vm.version,e),ui("7262",e),e.length>e.l?e.slice(0,e.l):e}function Age(n,e){e||(e=_e(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function kge(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Ce(n,135),Ce(n,158,Age(i)),Ce(n,136))}}function Mge(n,e){var t=us();return Ce(t,131),Ce(t,128,Dge()),Ce(t,153,Sge(n.Workbook&&n.Workbook.WBProps||null)),kge(t,n,e),Tge(t,n,e),Ce(t,132),t.end()}function Rge(n,e,t){return(e.slice(-4)===".bin"?Mge:XB)(n,t)}function Pge(n,e,t,r,i){return(e.slice(-4)===".bin"?mge:KB)(n,t,r,i)}function Fge(n,e,t){return(e.slice(-4)===".bin"?Zhe:PB)(n,t)}function Oge(n,e,t){return(e.slice(-4)===".bin"?She:AB)(n,t)}function Nge(n,e,t){return(e.slice(-4)===".bin"?p0e:VB)(n,t)}function Lge(n){return(n.slice(-4)===".bin"?o0e:NB)()}function Vge(n,e){var t=[];return n.Props&&t.push(Ffe(n.Props,e)),n.Custprops&&t.push(Ofe(n.Props,n.Custprops,e)),t.join("")}function Bge(){return""}function Uge(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(Fe("NumberFormat",null,{"ss:Format":bn(Er[r.numFmtId])}));var o={"ss:ID":"s"+(21+i)};t.push(Fe("Style",s.join(""),o))}),Fe("Styles",t.join(""))}function ZB(n){return Fe("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+ik(n.Ref,{r:0,c:0})})}function jge(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(ZB(i)))}return Fe("Names",t.join(""))}function $ge(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],o=0;o<i.length;++o){var a=i[o];a.Sheet==t&&(a.Name.match(/^_xlfn\./)||s.push(ZB(a)))}return s.join("")}function Hge(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(Fe("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(Fe("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(Fe("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(Fe("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(xi("ProtectContents","True")),n["!protect"].objects&&i.push(xi("ProtectObjects","True")),n["!protect"].scenarios&&i.push(xi("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(xi("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(xi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){n["!protect"][o[0]]&&i.push("<"+o[1]+"/>")})),i.length==0?"":Fe("WorksheetOptions",i.join(""),{xmlns:Os.x})}function zge(n){return n.map(function(e){var t=Gde(e.t||""),r=Fe("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Fe("Comment",r,{"ss:Author":e.a})}).join("")}function Wge(n,e,t,r,i,s,o){if(!n||n.v==null&&n.f==null)return"";var a={};if(n.f&&(a["ss:Formula"]="="+bn(ik(n.f,o))),n.F&&n.F.slice(0,e.length)==e){var c=li(n.F.slice(e.length+1));a["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(n.l&&n.l.Target&&(a["ss:HRef"]=bn(n.l.Target),n.l.Tooltip&&(a["x:HRefScreenTip"]=bn(n.l.Tooltip))),t["!merges"])for(var l=t["!merges"],u=0;u!=l.length;++u)l[u].s.c!=o.c||l[u].s.r!=o.r||(l[u].e.c>l[u].s.c&&(a["ss:MergeAcross"]=l[u].e.c-l[u].s.c),l[u].e.r>l[u].s.r&&(a["ss:MergeDown"]=l[u].e.r-l[u].s.r));var d="",m="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",m=String(n.v);break;case"b":d="Boolean",m=n.v?"1":"0";break;case"e":d="Error",m=Gm[n.v];break;case"d":d="DateTime",m=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||Er[14]);break;case"s":d="String",m=qde(n.v||"");break}var g=ru(r.cellXfs,n,r);a["ss:StyleID"]="s"+(21+g),a["ss:Index"]=o.c+1;var w=n.v!=null?m:"",y=n.t=="z"?"":'<Data ss:Type="'+d+'">'+w+"</Data>";return(n.c||[]).length>0&&(y+=zge(n.c)),Fe("Cell",y,a)}function qge(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=RB(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Gge(n,e,t,r){if(!n["!ref"])return"";var i=Qn(n["!ref"]),s=n["!merges"]||[],o=0,a=[];n["!cols"]&&n["!cols"].forEach(function(E,M){nk(E);var k=!!E.width,O=yw(M,E),K={"ss:Index":M+1};k&&(K["ss:Width"]=ow(O.width)),E.hidden&&(K["ss:Hidden"]="1"),a.push(Fe("Column",null,K))});for(var c=Array.isArray(n),l=i.s.r;l<=i.e.r;++l){for(var u=[qge(l,(n["!rows"]||[])[l])],d=i.s.c;d<=i.e.c;++d){var m=!1;for(o=0;o!=s.length;++o)if(!(s[o].s.c>d)&&!(s[o].s.r>l)&&!(s[o].e.c<d)&&!(s[o].e.r<l)){(s[o].s.c!=d||s[o].s.r!=l)&&(m=!0);break}if(!m){var g={r:l,c:d},w=En(g),y=c?(n[l]||[])[d]:n[w];u.push(Wge(y,w,n,e,t,r,g))}}u.push("</Row>"),u.length>2&&a.push(u.join(""))}return a.join("")}function Kge(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],o=s?$ge(s,e,n,t):"";return o.length>0&&r.push("<Names>"+o+"</Names>"),o=s?Gge(s,e,n,t):"",o.length>0&&r.push("<Table>"+o+"</Table>"),r.push(Hge(s,e,n,t)),r.join("")}function Qge(n,e){e||(e={}),n.SSF||(n.SSF=fs(Er)),n.SSF&&(hw(),fw(n.SSF),e.revssf=pw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],ru(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Vge(n,e)),t.push(Bge(n,e)),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(Fe("Worksheet",Kge(r,e,n),{"ss:Name":bn(n.SheetNames[r])}));return t[2]=Uge(n,e),t[3]=jge(n,e),zr+Fe("Workbook",t.join(""),{xmlns:Os.ss,"xmlns:o":Os.o,"xmlns:x":Os.x,"xmlns:ss":Os.ss,"xmlns:dt":Os.dt,"xmlns:html":Os.html})}var MA={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Yge(n,e){var t=[],r=[],i=[],s=0,o,a=i8(v8,"n"),c=i8(_8,"n");if(n.Props)for(o=bi(n.Props),s=0;s<o.length;++s)(Object.prototype.hasOwnProperty.call(a,o[s])?t:Object.prototype.hasOwnProperty.call(c,o[s])?r:i).push([o[s],n.Props[o[s]]]);if(n.Custprops)for(o=bi(n.Custprops),s=0;s<o.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},o[s])||(Object.prototype.hasOwnProperty.call(a,o[s])?t:Object.prototype.hasOwnProperty.call(c,o[s])?r:i).push([o[s],n.Custprops[o[s]]]);var l=[];for(s=0;s<i.length;++s)bB.indexOf(i[s][0])>-1||yB.indexOf(i[s][0])>-1||i[s][1]!=null&&l.push(i[s]);r.length&&In.utils.cfb_add(e,"/SummaryInformation",E8(r,MA.SI,c,_8)),(t.length||l.length)&&In.utils.cfb_add(e,"/DocumentSummaryInformation",E8(t,MA.DSI,a,v8,l.length?l:null,MA.UDI))}function Xge(n,e){var t=e||{},r=In.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return In.utils.cfb_add(r,i,JB(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Yge(n,r),t.biff==8&&n.vbaraw&&m0e(r,In.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Zge={0:{f:tme},1:{f:lme},2:{f:Ame},3:{f:vme},4:{f:hme},5:{f:Sme},6:{f:Fme},7:{f:wme},8:{f:jme},9:{f:Ume},10:{f:Vme},11:{f:Bme},12:{f:dme},13:{f:Mme},14:{f:yme},15:{f:mme},16:{f:Tme},17:{f:Nme},18:{f:Eme},19:{f:ZA},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Ige},40:{},42:{},43:{f:Fhe},44:{f:Rhe},45:{f:Lhe},46:{f:Bhe},47:{f:Vhe},48:{},49:{f:dfe},50:{},51:{f:t0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:fhe},62:{f:Pme},63:{f:a0e},64:{f:rge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Pa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Jme},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ame},148:{f:ime,p:16},151:{f:Gme},152:{},153:{f:Cge},154:{},155:{},156:{f:bge},157:{},158:{},159:{T:1,f:bhe},160:{T:-1},161:{T:1,f:Vd},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:$me},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Jhe},336:{T:-1},337:{f:i0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:NA},357:{},358:{},359:{},360:{T:1},361:{},362:{f:ohe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Kme},427:{f:Qme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Xme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ome},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Wme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:NA},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:f0e},633:{T:1},634:{T:-1},635:{T:1,f:u0e},636:{T:-1},637:{f:mfe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:gge},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:ige},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function Ne(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,o=n.next(4);o.write_shift(2,i),o.write_shift(2,s),s>0&&QA(t)&&n.push(t)}}function Jge(n,e,t,r){var i=r||(t||[]).length||0;if(i<=8224)return Ne(n,e,t,i);var s=e;if(!isNaN(s)){for(var o=t.parts||[],a=0,c=0,l=0;l+(o[a]||8224)<=8224;)l+=o[a]||8224,a++;var u=n.next(4);for(u.write_shift(2,s),u.write_shift(2,l),n.push(t.slice(c,c+l)),c+=l;c<i;){for(u=n.next(4),u.write_shift(2,60),l=0;l+(o[a]||8224)<=8224;)l+=o[a]||8224,a++;u.write_shift(2,l),n.push(t.slice(c,c+l)),c+=l}}}function Qm(n,e,t){return n||(n=_e(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function eve(n,e,t,r){var i=_e(9);return Qm(i,n,e),CB(t,r||"b",i),i}function tve(n,e,t){var r=_e(8+2*t.length);return Qm(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function nve(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?ds(qi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?Ne(n,2,ghe(t,r,i)):Ne(n,3,mhe(t,r,i));return;case"b":case"e":Ne(n,5,eve(t,r,e.v,e.t));return;case"s":case"str":Ne(n,4,tve(t,r,(e.v||"").slice(0,255)));return}Ne(n,1,Qm(null,t,r))}function rve(n,e,t,r){var i=Array.isArray(e),s=Qn(e["!ref"]||"A1"),o,a="",c=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),o=Hr(s)}for(var l=s.s.r;l<=s.e.r;++l){a=wi(l);for(var u=s.s.c;u<=s.e.c;++u){l===s.s.r&&(c[u]=Fi(u)),o=c[u]+a;var d=i?(e[l]||[])[u]:e[o];d&&nve(n,d,l,u,r)}}}function ive(n,e){var t=e||{};Ra!=null&&t.dense==null&&(t.dense=Ra);for(var r=us(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return Ne(r,t.biff==4?1033:t.biff==3?521:9,tk(n,16,t)),rve(r,n.Sheets[n.SheetNames[i]],i,t,n),Ne(r,10),r.end()}function sve(n,e,t){Ne(n,49,Zfe({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},t))}function ove(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Ne(n,1054,the(i,e[i],t))})}function ave(n,e){var t=_e(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),Ne(n,2151,t),t=_e(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),TB(Qn(e["!ref"]||"A1"),t),t.write_shift(4,4),Ne(n,2152,t)}function cve(n,e){for(var t=0;t<16;++t)Ne(n,224,S8({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){Ne(n,224,S8(r,0,e))})}function lve(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];Ne(n,440,lhe(r)),r[1].Tooltip&&Ne(n,2048,uhe(r))}delete e["!links"]}function uve(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&Ne(n,125,hhe(yw(i,r),i))})}}function dve(n,e,t,r,i){var s=16+ru(i.cellXfs,e,i);if(e.v==null&&!e.bf){Ne(n,513,Pd(t,r,s));return}if(e.bf)Ne(n,6,Ope(e,t,r,i,s));else switch(e.t){case"d":case"n":var o=e.t=="d"?ds(qi(e.v)):e.v;Ne(n,515,she(t,r,o,s,i));break;case"b":case"e":Ne(n,517,ihe(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var a=ok(i.Strings,e.v,i.revStrings);Ne(n,253,Jfe(t,r,a,s,i))}else Ne(n,516,ehe(t,r,(e.v||"").slice(0,255),s,i));break;default:Ne(n,513,Pd(t,r,s))}}function fve(n,e,t){var r=us(),i=t.SheetNames[n],s=t.Sheets[i]||{},o=(t||{}).Workbook||{},a=(o.Sheets||[])[n]||{},c=Array.isArray(s),l=e.biff==8,u,d="",m=[],g=Qn(s["!ref"]||"A1"),w=l?65536:16384;if(g.e.c>255||g.e.r>=w){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,w-1)}Ne(r,2057,tk(t,16,e)),Ne(r,13,eo(1)),Ne(r,12,eo(100)),Ne(r,15,Wi(!0)),Ne(r,17,Wi(!1)),Ne(r,16,Rd(.001)),Ne(r,95,Wi(!0)),Ne(r,42,Wi(!1)),Ne(r,43,Wi(!1)),Ne(r,130,eo(1)),Ne(r,128,rhe([0,0])),Ne(r,131,Wi(!1)),Ne(r,132,Wi(!1)),l&&uve(r,s["!cols"]),Ne(r,512,nhe(g,e)),l&&(s["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){d=wi(y);for(var E=g.s.c;E<=g.e.c;++E){y===g.s.r&&(m[E]=Fi(E)),u=m[E]+d;var M=c?(s[y]||[])[E]:s[u];M&&(dve(r,M,y,E,e),l&&M.l&&s["!links"].push([u,M.l]))}}var k=a.CodeName||a.name||i;return l&&Ne(r,574,Xfe((o.Views||[])[0])),l&&(s["!merges"]||[]).length&&Ne(r,229,che(s["!merges"])),l&&lve(r,s),Ne(r,442,IB(k,e)),l&&ave(r,s),Ne(r,10),r.end()}function hve(n,e,t){var r=us(),i=(n||{}).Workbook||{},s=i.Sheets||[],o=i.WBProps||{},a=t.biff==8,c=t.biff==5;if(Ne(r,2057,tk(n,5,t)),t.bookType=="xla"&&Ne(r,135),Ne(r,225,a?eo(1200):null),Ne(r,193,Vfe(2)),c&&Ne(r,191),c&&Ne(r,192),Ne(r,226),Ne(r,92,Gfe("SheetJS",t)),Ne(r,66,eo(a?1200:1252)),a&&Ne(r,353,eo(0)),a&&Ne(r,448),Ne(r,317,phe(n.SheetNames.length)),a&&n.vbaraw&&Ne(r,211),a&&n.vbaraw){var l=o.CodeName||"ThisWorkbook";Ne(r,442,IB(l,t))}Ne(r,156,eo(17)),Ne(r,25,Wi(!1)),Ne(r,18,Wi(!1)),Ne(r,19,eo(0)),a&&Ne(r,431,Wi(!1)),a&&Ne(r,444,eo(0)),Ne(r,61,Yfe(t)),Ne(r,64,Wi(!1)),Ne(r,141,eo(0)),Ne(r,34,Wi(_ge(n)=="true")),Ne(r,14,Wi(!0)),a&&Ne(r,439,Wi(!1)),Ne(r,218,eo(0)),sve(r,n,t),ove(r,n.SSF,t),cve(r,t),a&&Ne(r,352,Wi(!1));var u=r.end(),d=us();a&&Ne(d,140,dhe()),a&&t.Strings&&Jge(d,252,Qfe(t.Strings,t)),Ne(d,10);var m=d.end(),g=us(),w=0,y=0;for(y=0;y<n.SheetNames.length;++y)w+=(a?12:11)+(a?2:1)*n.SheetNames[y].length;var E=u.length+w+m.length;for(y=0;y<n.SheetNames.length;++y){var M=s[y]||{};Ne(g,133,Kfe({pos:E,hs:M.Hidden||0,dt:0,name:n.SheetNames[y]},t)),E+=e[y].length}var k=g.end();if(w!=k.length)throw new Error("BS8 "+w+" != "+k.length);var O=[];return u.length&&O.push(u),k.length&&O.push(k),m.length&&O.push(m),yi(O)}function pve(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=fs(Er)),n&&n.SSF&&(hw(),fw(n.SSF),t.revssf=pw(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ak(t),t.cellXfs=[],ru(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=fve(i,t,n);return r.unshift(hve(n,r,t)),yi(r)}function JB(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=Ns(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return pve(n,e);case 4:case 3:case 2:return ive(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function mve(n,e,t,r){for(var i=n["!merges"]||[],s=[],o=e.s.c;o<=e.e.c;++o){for(var a=0,c=0,l=0;l<i.length;++l)if(!(i[l].s.r>t||i[l].s.c>o)&&!(i[l].e.r<t||i[l].e.c<o)){if(i[l].s.r<t||i[l].s.c<o){a=-1;break}a=i[l].e.r-i[l].s.r+1,c=i[l].e.c-i[l].s.c+1;break}if(!(a<0)){var u=En({r:t,c:o}),d=r.dense?(n[t]||[])[o]:n[u],m=d&&d.v!=null&&(d.h||Wde(d.w||(Nc(d),d.w)||""))||"",g={};a>1&&(g.rowspan=a),c>1&&(g.colspan=c),r.editable?m='<span contenteditable="true">'+m+"</span>":d&&(g["data-t"]=d&&d.t||"z",d.v!=null&&(g["data-v"]=d.v),d.z!=null&&(g["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+d.l.Target+'">'+m+"</a>")),g.id=(r.id||"sjs")+"-"+u,s.push(Fe("td",m,g))}}var w="<tr>";return w+s.join("")+"</tr>"}var gve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',vve="</body></html>";function _ve(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function e9(n,e){var t=e||{},r=t.header!=null?t.header:gve,i=t.footer!=null?t.footer:vve,s=[r],o=Ns(n["!ref"]);t.dense=Array.isArray(n),s.push(_ve(n,o,t));for(var a=o.s.r;a<=o.e.r;++a)s.push(mve(n,o,a,t));return s.push("</table>"+i),s.join("")}function t9(n,e,t){var r=t||{};Ra!=null&&(r.dense=Ra);var i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var o=typeof r.origin=="string"?li(r.origin):r.origin;i=o.r,s=o.c}var a=e.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,a.length),l={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var u=Ns(n["!ref"]);l.s.r=Math.min(l.s.r,u.s.r),l.s.c=Math.min(l.s.c,u.s.c),l.e.r=Math.max(l.e.r,u.e.r),l.e.c=Math.max(l.e.c,u.e.c),i==-1&&(l.e.r=i=u.e.r+1)}var d=[],m=0,g=n["!rows"]||(n["!rows"]=[]),w=0,y=0,E=0,M=0,k=0,O=0;for(n["!cols"]||(n["!cols"]=[]);w<a.length&&y<c;++w){var K=a[w];if(R8(K)){if(r.display)continue;g[y]={hidden:!0}}var Q=K.children;for(E=M=0;E<Q.length;++E){var te=Q[E];if(!(r.display&&R8(te))){var D=te.hasAttribute("data-v")?te.getAttribute("data-v"):te.hasAttribute("v")?te.getAttribute("v"):Qde(te.innerHTML),T=te.getAttribute("data-z")||te.getAttribute("z");for(m=0;m<d.length;++m){var A=d[m];A.s.c==M+s&&A.s.r<y+i&&y+i<=A.e.r&&(M=A.e.c+1-s,m=-1)}O=+te.getAttribute("colspan")||1,((k=+te.getAttribute("rowspan")||1)>1||O>1)&&d.push({s:{r:y+i,c:M+s},e:{r:y+i+(k||1)-1,c:M+s+(O||1)-1}});var F={t:"s",v:D},N=te.getAttribute("data-t")||te.getAttribute("t")||"";D!=null&&(D.length==0?F.t=N||"z":r.raw||D.trim().length==0||N=="s"||(D==="TRUE"?F={t:"b",v:!0}:D==="FALSE"?F={t:"b",v:!1}:isNaN(Pc(D))?isNaN(jm(D).getDate())||(F={t:"d",v:qi(D)},r.cellDates||(F={t:"n",v:ds(F.v)}),F.z=r.dateNF||Er[14]):F={t:"n",v:Pc(D)})),F.z===void 0&&T!=null&&(F.z=T);var V="",U=te.getElementsByTagName("A");if(U&&U.length)for(var nt=0;nt<U.length&&!(U[nt].hasAttribute("href")&&(V=U[nt].getAttribute("href"),V.charAt(0)!="#"));++nt);V&&V.charAt(0)!="#"&&(F.l={Target:V}),r.dense?(n[y+i]||(n[y+i]=[]),n[y+i][M+s]=F):n[En({c:M+s,r:y+i})]=F,l.e.c<M+s&&(l.e.c=M+s),M+=O}}++y}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),l.e.r=Math.max(l.e.r,y-1+i),n["!ref"]=Hr(l),y>=c&&(n["!fullref"]=Hr((l.e.r=a.length-w+y-1+i,l))),n}function n9(n,e){var t=e||{},r=t.dense?[]:{};return t9(r,n,e)}function yve(n,e){return Fd(n9(n,e),e)}function R8(n){var e="",t=xve(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function xve(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var wve=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+$m({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return zr+e}}(),P8=function(){var n=function(s){return bn(s).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,o,a){var c=[];c.push('      <table:table table:name="'+bn(o.SheetNames[a])+`" table:style-name="ta1">
`);var l=0,u=0,d=Ns(s["!ref"]||"A1"),m=s["!merges"]||[],g=0,w=Array.isArray(s);if(s["!cols"])for(u=0;u<=d.e.c;++u)c.push("        <table:table-column"+(s["!cols"][u]?' table:style-name="co'+s["!cols"][u].ods+'"':"")+`></table:table-column>
`);var y="",E=s["!rows"]||[];for(l=0;l<d.s.r;++l)y=E[l]?' table:style-name="ro'+E[l].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;l<=d.e.r;++l){for(y=E[l]?' table:style-name="ro'+E[l].ods+'"':"",c.push("        <table:table-row"+y+`>
`),u=0;u<d.s.c;++u)c.push(e);for(;u<=d.e.c;++u){var M=!1,k={},O="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>u)&&!(m[g].s.r>l)&&!(m[g].e.c<u)&&!(m[g].e.r<l)){(m[g].s.c!=u||m[g].s.r!=l)&&(M=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(M){c.push(t);continue}var K=En({r:l,c:u}),Q=w?(s[l]||[])[u]:s[K];if(Q&&Q.f&&(k["table:formula"]=bn(jpe(Q.f)),Q.F&&Q.F.slice(0,K.length)==K)){var te=Ns(Q.F);k["table:number-matrix-columns-spanned"]=te.e.c-te.s.c+1,k["table:number-matrix-rows-spanned"]=te.e.r-te.s.r+1}if(!Q){c.push(e);continue}switch(Q.t){case"b":O=Q.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=Q.v?"true":"false";break;case"n":O=Q.w||String(Q.v||0),k["office:value-type"]="float",k["office:value"]=Q.v||0;break;case"s":case"str":O=Q.v==null?"":Q.v,k["office:value-type"]="string";break;case"d":O=Q.w||qi(Q.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=qi(Q.v).toISOString(),k["table:style-name"]="ce1";break;default:c.push(e);continue}var D=n(O);if(Q.l&&Q.l.Target){var T=Q.l.Target;T=T.charAt(0)=="#"?"#"+$pe(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),D=Fe("text:a",D,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+Fe("table:table-cell",Fe("text:p",D,{}),k)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,o){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var a=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!cols"]){for(var u=0;u<l["!cols"].length;++u)if(l["!cols"][u]){var d=l["!cols"][u];if(d.width==null&&d.wpx==null&&d.wch==null)continue;nk(d),d.ods=a;var m=l["!cols"][u].wpx+"px";s.push('  <style:style style:name="co'+a+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),s.push(`  </style:style>
`),++a}}});var c=0;o.SheetNames.map(function(l){return o.Sheets[l]}).forEach(function(l){if(l&&l["!rows"]){for(var u=0;u<l["!rows"].length;++u)if(l["!rows"][u]){l["!rows"][u].ods=c;var d=l["!rows"][u].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(o,a){var c=[zr],l=$m({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=$m({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});a.bookType=="fods"?(c.push("<office:document"+l+u+`>
`),c.push(vB().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+l+`>
`),i(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)c.push(r(o.Sheets[o.SheetNames[d]],o,d,a));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),a.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function r9(n,e){if(e.bookType=="fods")return P8(n,e);var t=jA(),r="",i=[],s=[];return r="mimetype",Mt(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Mt(t,r,P8(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Mt(t,r,wve(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Mt(t,r,zr+vB()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Mt(t,r,Pfe(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Mt(t,r,Mfe(i)),t}function lw(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function bve(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):No(Mc(n))}function Eve(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function nu(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function Cve(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Hm(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function xn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Xh(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Zr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Hm(n,t),s=i&7;i=Math.floor(i/8);var o=0,a;if(i==0)break;switch(s){case 0:{for(var c=t[0];n[t[0]++]>=128;);a=n.slice(c,t[0])}break;case 5:o=4,a=n.slice(t[0],t[0]+o),t[0]+=o;break;case 1:o=8,a=n.slice(t[0],t[0]+o),t[0]+=o;break;case 2:o=Hm(n,t),a=n.slice(t[0],t[0]+o),t[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var l={data:a,type:s};e[i]==null?e[i]=[l]:e[i].push(l)}return e}function vi(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(xn(r*8+i.type)),i.type==2&&e.push(xn(i.data.length)),e.push(i.data))})}),nu(e)}function Fo(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Hm(n,r),s=Zr(n.slice(r[0],r[0]+i));r[0]+=i;var o={id:Xh(s[1][0].data),messages:[]};s[2].forEach(function(a){var c=Zr(a.data),l=Xh(c[3][0].data);o.messages.push({meta:c,data:n.slice(r[0],r[0]+l)}),r[0]+=l}),(e=s[3])!=null&&e[0]&&(o.merge=Xh(s[3][0].data)>>>0>0),t.push(o)}return t}function Hh(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:xn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:xn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(o){i.push(o.data),o.meta[3]=[{type:0,data:xn(o.data.length)}],r[2].push({data:vi(o.meta),type:2})});var s=vi(r);e.push(xn(s.length)),e.push(s),i.forEach(function(o){return e.push(o)})}),nu(e)}function Sve(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Hm(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var o=e[t[0]++]>>2;if(o<60)++o;else{var a=o-59;o=e[t[0]],a>1&&(o|=e[t[0]+1]<<8),a>2&&(o|=e[t[0]+2]<<16),a>3&&(o|=e[t[0]+3]<<24),o>>>=0,o++,t[0]+=a}i.push(e.slice(t[0],t[0]+o)),t[0]+=o;continue}else{var c=0,l=0;if(s==1?(l=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(l=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[nu(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(l>=c)for(i.push(i[0].slice(-c)),l-=c;l>=i[i.length-1].length;)i.push(i[i.length-1]),l-=i[i.length-1].length;i.push(i[0].slice(-c,-c+l))}}var u=nu(i);if(u.length!=r)throw new Error("Unexpected length: ".concat(u.length," != ").concat(r));return u}function Oo(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Sve(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return nu(e)}function zh(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=xn(r),o=s.length;e.push(s),r<=60?(o++,e.push(new Uint8Array([r-1<<2]))):r<=256?(o+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(o+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(o+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(o+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),o+=r,i[0]=0,i[1]=o&255,i[2]=o>>8&255,i[3]=o>>16&255,t+=r}return nu(e)}function RA(n,e){var t=new Uint8Array(32),r=lw(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,Cve(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function PA(n,e){var t=new Uint8Array(32),r=lw(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function Xl(n){var e=Zr(n);return Hm(e[1][0].data)}function Ive(n,e,t){var r,i,s,o;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var a=((o=(s=n[8])==null?void 0:s[0])==null?void 0:o.data)&&Xh(n[8][0].data)>0||!1;if(a)throw"Math only works with normal offsets";for(var c=0,l=lw(n[7][0].data),u=0,d=[],m=lw(n[4][0].data),g=0,w=[],y=0;y<e.length;++y){if(e[y]==null){l.setUint16(y*2,65535,!0),m.setUint16(y*2,65535);continue}l.setUint16(y*2,u,!0),m.setUint16(y*2,g,!0);var E,M;switch(typeof e[y]){case"string":E=RA({t:"s",v:e[y]},t),M=PA({t:"s",v:e[y]},t);break;case"number":E=RA({t:"n",v:e[y]},t),M=PA({t:"n",v:e[y]},t);break;case"boolean":E=RA({t:"b",v:e[y]},t),M=PA({t:"b",v:e[y]},t);break;default:throw new Error("Unsupported value "+e[y])}d.push(E),u+=E.length,w.push(M),g+=M.length,++c}for(n[2][0].data=xn(c);y<n[7][0].data.length/2;++y)l.setUint16(y*2,65535,!0),m.setUint16(y*2,65535,!0);return n[6][0].data=nu(d),n[3][0].data=nu(w),c}function Tve(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=Ns(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Hr(r)));var s=uw(t,{range:r,header:1}),o=["~Sh33tJ5~"];s.forEach(function(re){return re.forEach(function(ne){typeof ne=="string"&&o.push(ne)})});var a={},c=[],l=In.read(e.numbers,{type:"base64"});l.FileIndex.map(function(re,ne){return[re,l.FullPaths[ne]]}).forEach(function(re){var ne=re[0],we=re[1];if(ne.type==2&&ne.name.match(/\.iwa/)){var Be=ne.content,rt=Oo(Be),Ge=Fo(rt);Ge.forEach(function(ke){c.push(ke.id),a[ke.id]={deps:[],location:we,type:Xh(ke.messages[0].meta[1][0].data)}})}}),c.sort(function(re,ne){return re-ne});var u=c.filter(function(re){return re>1}).map(function(re){return[re,xn(re)]});l.FileIndex.map(function(re,ne){return[re,l.FullPaths[ne]]}).forEach(function(re){var ne=re[0],we=re[1];if(ne.name.match(/\.iwa/)){var Be=Fo(Oo(ne.content));Be.forEach(function(rt){rt.messages.forEach(function(Ge){u.forEach(function(ke){rt.messages.some(function(Lt){return Xh(Lt.meta[1][0].data)!=11006&&Eve(Lt.data,ke[1])})&&a[ke[0]].deps.push(rt.id)})})})}});function d(){for(var re=927262;re<2e6;++re)if(!a[re])return re;throw new Error("Too many messages")}for(var m=In.find(l,a[1].location),g=Fo(Oo(m.content)),w,y=0;y<g.length;++y){var E=g[y];E.id==1&&(w=E)}var M=Xl(Zr(w.messages[0].data)[1][0].data);for(m=In.find(l,a[M].location),g=Fo(Oo(m.content)),y=0;y<g.length;++y)E=g[y],E.id==M&&(w=E);for(M=Xl(Zr(w.messages[0].data)[2][0].data),m=In.find(l,a[M].location),g=Fo(Oo(m.content)),y=0;y<g.length;++y)E=g[y],E.id==M&&(w=E);for(M=Xl(Zr(w.messages[0].data)[2][0].data),m=In.find(l,a[M].location),g=Fo(Oo(m.content)),y=0;y<g.length;++y)E=g[y],E.id==M&&(w=E);var k=Zr(w.messages[0].data);{k[6][0].data=xn(r.e.r+1),k[7][0].data=xn(r.e.c+1);var O=Xl(k[46][0].data),K=In.find(l,a[O].location),Q=Fo(Oo(K.content));{for(var te=0;te<Q.length&&Q[te].id!=O;++te);if(Q[te].id!=O)throw"Bad ColumnRowUIDMapArchive";var D=Zr(Q[te].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var T=0;T<=r.e.c;++T){var A=[];A[1]=A[2]=[{type:0,data:xn(T+420690)}],D[1].push({type:2,data:vi(A)}),D[2].push({type:0,data:xn(T)}),D[3].push({type:0,data:xn(T)})}D[4]=[],D[5]=[],D[6]=[];for(var F=0;F<=r.e.r;++F)A=[],A[1]=A[2]=[{type:0,data:xn(F+726270)}],D[4].push({type:2,data:vi(A)}),D[5].push({type:0,data:xn(F)}),D[6].push({type:0,data:xn(F)});Q[te].messages[0].data=vi(D)}K.content=zh(Hh(Q)),K.size=K.content.length,delete k[46];var N=Zr(k[4][0].data);{N[7][0].data=xn(r.e.r+1);var V=Zr(N[1][0].data),U=Xl(V[2][0].data);K=In.find(l,a[U].location),Q=Fo(Oo(K.content));{if(Q[0].id!=U)throw"Bad HeaderStorageBucket";var nt=Zr(Q[0].messages[0].data);for(F=0;F<s.length;++F){var Ae=Zr(nt[2][0].data);Ae[1][0].data=xn(F),Ae[4][0].data=xn(s[F].length),nt[2][F]={type:nt[2][0].type,data:vi(Ae)}}Q[0].messages[0].data=vi(nt)}K.content=zh(Hh(Q)),K.size=K.content.length;var lt=Xl(N[2][0].data);K=In.find(l,a[lt].location),Q=Fo(Oo(K.content));{if(Q[0].id!=lt)throw"Bad HeaderStorageBucket";for(nt=Zr(Q[0].messages[0].data),T=0;T<=r.e.c;++T)Ae=Zr(nt[2][0].data),Ae[1][0].data=xn(T),Ae[4][0].data=xn(r.e.r+1),nt[2][T]={type:nt[2][0].type,data:vi(Ae)};Q[0].messages[0].data=vi(nt)}K.content=zh(Hh(Q)),K.size=K.content.length;var ut=Xl(N[4][0].data);(function(){for(var re=In.find(l,a[ut].location),ne=Fo(Oo(re.content)),we,Be=0;Be<ne.length;++Be){var rt=ne[Be];rt.id==ut&&(we=rt)}var Ge=Zr(we.messages[0].data);{Ge[3]=[];var ke=[];o.forEach(function(sr,ct){ke[1]=[{type:0,data:xn(ct)}],ke[2]=[{type:0,data:xn(1)}],ke[3]=[{type:2,data:bve(sr)}],Ge[3].push({type:2,data:vi(ke)})})}we.messages[0].data=vi(Ge);var Lt=Hh(ne),xt=zh(Lt);re.content=xt,re.size=re.content.length})();var Ut=Zr(N[3][0].data);{var It=Ut[1][0];delete Ut[2];var Ft=Zr(It.data);{var Cn=Xl(Ft[2][0].data);(function(){for(var re=In.find(l,a[Cn].location),ne=Fo(Oo(re.content)),we,Be=0;Be<ne.length;++Be){var rt=ne[Be];rt.id==Cn&&(we=rt)}var Ge=Zr(we.messages[0].data);{delete Ge[6],delete Ut[7];var ke=new Uint8Array(Ge[5][0].data);Ge[5]=[];for(var Lt=0,xt=0;xt<=r.e.r;++xt){var sr=Zr(ke);Lt+=Ive(sr,s[xt],o),sr[1][0].data=xn(xt),Ge[5].push({data:vi(sr),type:2})}Ge[1]=[{type:0,data:xn(r.e.c+1)}],Ge[2]=[{type:0,data:xn(r.e.r+1)}],Ge[3]=[{type:0,data:xn(Lt)}],Ge[4]=[{type:0,data:xn(r.e.r+1)}]}we.messages[0].data=vi(Ge);var ct=Hh(ne),qn=zh(ct);re.content=qn,re.size=re.content.length})()}It.data=vi(Ft)}N[3][0].data=vi(Ut)}k[4][0].data=vi(N)}w.messages[0].data=vi(k);var Z=Hh(g),me=zh(Z);return m.content=me,m.size=m.content.length,l}function Dve(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function ak(n){Dve([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Ave(n,e){return e.bookType=="ods"?r9(n,e):e.bookType=="numbers"?Tve(n,e):e.bookType=="xlsb"?kve(n,e):Mve(n,e)}function kve(n,e){qh=1024,n&&!n.SSF&&(n.SSF=fs(Er)),n&&n.SSF&&(hw(),fw(n.SSF),e.revssf=pw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Lm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=BB.indexOf(e.bookType)>-1,i=pB();ak(e=e||{});var s=jA(),o="",a=0;if(e.cellXfs=[],ru(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),o="docProps/core.xml",Mt(s,o,_B(n.Props,e)),i.coreprops.push(o),wn(e.rels,2,o,on.CORE_PROPS),o="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],l=0;l<n.SheetNames.length;++l)(n.Workbook.Sheets[l]||{}).Hidden!=2&&c.push(n.SheetNames[l]);n.Props.SheetNames=c}for(n.Props.Worksheets=n.Props.SheetNames.length,Mt(s,o,xB(n.Props,e)),i.extprops.push(o),wn(e.rels,3,o,on.EXT_PROPS),n.Custprops!==n.Props&&bi(n.Custprops||{}).length>0&&(o="docProps/custom.xml",Mt(s,o,wB(n.Custprops,e)),i.custprops.push(o),wn(e.rels,4,o,on.CUST_PROPS)),a=1;a<=n.SheetNames.length;++a){var u={"!id":{}},d=n.Sheets[n.SheetNames[a-1]],m=(d||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+a+"."+t,Mt(s,o,Pge(a-1,o,e,n,u)),i.sheets.push(o),wn(e.wbrels,-1,"worksheets/sheet"+a+"."+t,on.WS[0])}if(d){var g=d["!comments"],w=!1,y="";g&&g.length>0&&(y="xl/comments"+a+"."+t,Mt(s,y,Nge(g,y,e)),i.comments.push(y),wn(u,-1,"../comments"+a+"."+t,on.CMNT),w=!0),d["!legacy"]&&w&&Mt(s,"xl/drawings/vmlDrawing"+a+".vml",LB(a,d["!comments"])),delete d["!comments"],delete d["!legacy"]}u["!id"].rId1&&Mt(s,gB(o),Qh(u))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,Mt(s,o,Oge(e.Strings,o,e)),i.strs.push(o),wn(e.wbrels,-1,"sharedStrings."+t,on.SST)),o="xl/workbook."+t,Mt(s,o,Rge(n,o,e)),i.workbooks.push(o),wn(e.rels,1,o,on.WB),o="xl/theme/theme1.xml",Mt(s,o,OB(n.Themes,e)),i.themes.push(o),wn(e.wbrels,-1,"theme/theme1.xml",on.THEME),o="xl/styles."+t,Mt(s,o,Fge(n,o,e)),i.styles.push(o),wn(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(o="xl/vbaProject.bin",Mt(s,o,n.vbaraw),i.vba.push(o),wn(e.wbrels,-1,"vbaProject.bin",on.VBA)),o="xl/metadata."+t,Mt(s,o,Lge(o)),i.metadata.push(o),wn(e.wbrels,-1,"metadata."+t,on.XLMETA),Mt(s,"[Content_Types].xml",mB(i,e)),Mt(s,"_rels/.rels",Qh(e.rels)),Mt(s,"xl/_rels/workbook."+t+".rels",Qh(e.wbrels)),delete e.revssf,delete e.ssf,s}function Mve(n,e){qh=1024,n&&!n.SSF&&(n.SSF=fs(Er)),n&&n.SSF&&(hw(),fw(n.SSF),e.revssf=pw(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Lm?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=BB.indexOf(e.bookType)>-1,i=pB();ak(e=e||{});var s=jA(),o="",a=0;if(e.cellXfs=[],ru(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),o="docProps/core.xml",Mt(s,o,_B(n.Props,e)),i.coreprops.push(o),wn(e.rels,2,o,on.CORE_PROPS),o="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],l=0;l<n.SheetNames.length;++l)(n.Workbook.Sheets[l]||{}).Hidden!=2&&c.push(n.SheetNames[l]);n.Props.SheetNames=c}n.Props.Worksheets=n.Props.SheetNames.length,Mt(s,o,xB(n.Props,e)),i.extprops.push(o),wn(e.rels,3,o,on.EXT_PROPS),n.Custprops!==n.Props&&bi(n.Custprops||{}).length>0&&(o="docProps/custom.xml",Mt(s,o,wB(n.Custprops,e)),i.custprops.push(o),wn(e.rels,4,o,on.CUST_PROPS));var u=["SheetJ5"];for(e.tcid=0,a=1;a<=n.SheetNames.length;++a){var d={"!id":{}},m=n.Sheets[n.SheetNames[a-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+a+"."+t,Mt(s,o,KB(a-1,e,n,d)),i.sheets.push(o),wn(e.wbrels,-1,"worksheets/sheet"+a+"."+t,on.WS[0])}if(m){var w=m["!comments"],y=!1,E="";if(w&&w.length>0){var M=!1;w.forEach(function(k){k[1].forEach(function(O){O.T==!0&&(M=!0)})}),M&&(E="xl/threadedComments/threadedComment"+a+"."+t,Mt(s,E,c0e(w,u,e)),i.threadedcomments.push(E),wn(d,-1,"../threadedComments/threadedComment"+a+"."+t,on.TCMNT)),E="xl/comments"+a+"."+t,Mt(s,E,VB(w,e)),i.comments.push(E),wn(d,-1,"../comments"+a+"."+t,on.CMNT),y=!0}m["!legacy"]&&y&&Mt(s,"xl/drawings/vmlDrawing"+a+".vml",LB(a,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&Mt(s,gB(o),Qh(d))}return e.Strings!=null&&e.Strings.length>0&&(o="xl/sharedStrings."+t,Mt(s,o,AB(e.Strings,e)),i.strs.push(o),wn(e.wbrels,-1,"sharedStrings."+t,on.SST)),o="xl/workbook."+t,Mt(s,o,XB(n,e)),i.workbooks.push(o),wn(e.rels,1,o,on.WB),o="xl/theme/theme1.xml",Mt(s,o,OB(n.Themes,e)),i.themes.push(o),wn(e.wbrels,-1,"theme/theme1.xml",on.THEME),o="xl/styles."+t,Mt(s,o,PB(n,e)),i.styles.push(o),wn(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(o="xl/vbaProject.bin",Mt(s,o,n.vbaraw),i.vba.push(o),wn(e.wbrels,-1,"vbaProject.bin",on.VBA)),o="xl/metadata."+t,Mt(s,o,NB()),i.metadata.push(o),wn(e.wbrels,-1,"metadata."+t,on.XLMETA),u.length>1&&(o="xl/persons/person.xml",Mt(s,o,l0e(u,e)),i.people.push(o),wn(e.wbrels,-1,"persons/person.xml",on.PEOPLE)),Mt(s,"[Content_Types].xml",mB(i,e)),Mt(s,"_rels/.rels",Qh(e.rels)),Mt(s,"xl/_rels/workbook."+t+".rels",Qh(e.wbrels)),delete e.revssf,delete e.ssf,s}function Rve(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=Oc(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function i9(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return qm(e.file,In.write(n,{type:un?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return In.write(n,e)}function Pve(n,e){var t=fs(e||{}),r=Ave(n,t);return Fve(r,t)}function Fve(n,e){var t={},r=un?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?In.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(dw(i))}return e.password&&typeof encrypt_agile<"u"?i9(encrypt_agile(i,e.password),e):e.type==="file"?qm(e.file,i):e.type=="string"?Pm(i):i}function Ove(n,e){var t=e||{},r=Xge(n,t);return i9(r,t)}function Ma(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Um(Mc(r));case"binary":return Mc(r);case"string":return n;case"file":return qm(e.file,r,"utf8");case"buffer":return un?Lc(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):Ma(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Nve(n,e){switch(e.type){case"base64":return Um(n);case"binary":return n;case"string":return n;case"file":return qm(e.file,n,"binary");case"buffer":return un?Lc(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Xx(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Um(t):e.type=="string"?Pm(t):t;case"file":return qm(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function s9(n,e){cde(),wge(n);var t=fs(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=s9(n,t);return t.type="array",dw(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return Ma(Qge(n,t),t);case"slk":case"sylk":return Ma(_he.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return Ma(e9(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Nve(a9(n.Sheets[n.SheetNames[i]],t),t);case"csv":return Ma(ck(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return Ma(yhe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return Xx(vhe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return Ma(xhe.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return Ma(The.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return Ma(DB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return Ma(r9(n,t),t);case"wk1":return Xx(I8.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return Xx(I8.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),Xx(JB(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),Ove(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Pve(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Lve(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function o9(n,e,t){var r=t||{};return r.type="file",r.file=e,Lve(r),s9(n,r)}function Vve(n,e,t,r,i,s,o,a){var c=wi(t),l=a.defval,u=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),d=!0,m=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:t,enumerable:!1})}catch{m.__rowNum__=t}else m.__rowNum__=t;if(!o||n[t])for(var g=e.s.c;g<=e.e.c;++g){var w=o?n[t][g]:n[r[g]+c];if(w===void 0||w.t===void 0){if(l===void 0)continue;s[g]!=null&&(m[s[g]]=l);continue}var y=w.v;switch(w.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(s[g]!=null){if(y==null)if(w.t=="e"&&y===null)m[s[g]]=null;else if(l!==void 0)m[s[g]]=l;else if(u&&y===null)m[s[g]]=null;else continue;else m[s[g]]=u&&(w.t!=="n"||w.t==="n"&&a.rawNumbers!==!1)?y:Nc(w,y,a);y!=null&&(d=!1)}}return{row:m,isempty:d}}function uw(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],o=0,a="",c={s:{r:0,c:0},e:{r:0,c:0}},l=e||{},u=l.range!=null?l.range:n["!ref"];switch(l.header===1?r=1:l.header==="A"?r=2:Array.isArray(l.header)?r=3:l.header==null&&(r=0),typeof u){case"string":c=Qn(u);break;case"number":c=Qn(n["!ref"]),c.s.r=u;break;default:c=u}r>0&&(i=0);var d=wi(c.s.r),m=[],g=[],w=0,y=0,E=Array.isArray(n),M=c.s.r,k=0,O={};E&&!n[M]&&(n[M]=[]);var K=l.skipHidden&&n["!cols"]||[],Q=l.skipHidden&&n["!rows"]||[];for(k=c.s.c;k<=c.e.c;++k)if(!(K[k]||{}).hidden)switch(m[k]=Fi(k),t=E?n[M][k]:n[m[k]+d],r){case 1:s[k]=k-c.s.c;break;case 2:s[k]=m[k];break;case 3:s[k]=l.header[k-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),a=o=Nc(t,null,l),y=O[o]||0,!y)O[o]=1;else{do a=o+"_"+y++;while(O[a]);O[o]=y,O[a]=1}s[k]=a}for(M=c.s.r+i;M<=c.e.r;++M)if(!(Q[M]||{}).hidden){var te=Vve(n,c,M,m,r,s,E,l);(te.isempty===!1||(r===1?l.blankrows!==!1:l.blankrows))&&(g[w++]=te.row)}return g.length=w,g}var F8=/"/g;function Bve(n,e,t,r,i,s,o,a){for(var c=!0,l=[],u="",d=wi(t),m=e.s.c;m<=e.e.c;++m)if(r[m]){var g=a.dense?(n[t]||[])[m]:n[r[m]+d];if(g==null)u="";else if(g.v!=null){c=!1,u=""+(a.rawNumbers&&g.t=="n"?g.v:Nc(g,null,a));for(var w=0,y=0;w!==u.length;++w)if((y=u.charCodeAt(w))===i||y===s||y===34||a.forceQuotes){u='"'+u.replace(F8,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(c=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(F8,'""')+'"')):u="";l.push(u)}return a.blankrows===!1&&c?null:l.join(o)}function ck(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Qn(n["!ref"]),s=r.FS!==void 0?r.FS:",",o=s.charCodeAt(0),a=r.RS!==void 0?r.RS:`
`,c=a.charCodeAt(0),l=new RegExp((s=="|"?"\\|":s)+"+$"),u="",d=[];r.dense=Array.isArray(n);for(var m=r.skipHidden&&n["!cols"]||[],g=r.skipHidden&&n["!rows"]||[],w=i.s.c;w<=i.e.c;++w)(m[w]||{}).hidden||(d[w]=Fi(w));for(var y=0,E=i.s.r;E<=i.e.r;++E)(g[E]||{}).hidden||(u=Bve(n,i,E,d,o,c,s,r),u!=null&&(r.strip&&(u=u.replace(l,"")),(u||r.blankrows!==!1)&&t.push((y++?a:"")+u)));return delete r.dense,t.join("")}function a9(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=ck(n,e);if(typeof Nn>"u"||e.type=="string")return t;var r=Nn.utils.encode(1200,t,"str");return"\xFF\xFE"+r}function Uve(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Qn(n["!ref"]),s="",o=[],a,c=[],l=Array.isArray(n);for(a=i.s.c;a<=i.e.c;++a)o[a]=Fi(a);for(var u=i.s.r;u<=i.e.r;++u)for(s=wi(u),a=i.s.c;a<=i.e.c;++a)if(e=o[a]+s,t=l?(n[u]||[])[a]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}c[c.length]=e+"="+r}return c}function c9(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},o=0,a=0;if(s&&r.origin!=null)if(typeof r.origin=="number")o=r.origin;else{var c=typeof r.origin=="string"?li(r.origin):r.origin;o=c.r,a=c.c}var l,u={s:{c:0,r:0},e:{c:a,r:o+e.length-1+i}};if(s["!ref"]){var d=Qn(s["!ref"]);u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),o==-1&&(o=d.e.r+1,u.e.r=o+e.length-1+i)}else o==-1&&(o=0,u.e.r=e.length-1+i);var m=r.header||[],g=0;e.forEach(function(y,E){bi(y).forEach(function(M){(g=m.indexOf(M))==-1&&(m[g=m.length]=M);var k=y[M],O="z",K="",Q=En({c:a+g,r:o+E+i});l=zm(s,Q),k&&typeof k=="object"&&!(k instanceof Date)?s[Q]=k:(typeof k=="number"?O="n":typeof k=="boolean"?O="b":typeof k=="string"?O="s":k instanceof Date?(O="d",r.cellDates||(O="n",k=ds(k)),K=r.dateNF||Er[14]):k===null&&r.nullError&&(O="e",k=0),l?(l.t=O,l.v=k,delete l.w,delete l.R,K&&(l.z=K)):s[Q]=l={t:O,v:k},K&&(l.z=K))})}),u.e.c=Math.max(u.e.c,a+m.length-1);var w=wi(o);if(i)for(g=0;g<m.length;++g)s[Fi(g+a)+w]={t:"s",v:m[g]};return s["!ref"]=Hr(u),s}function jve(n,e){return c9(null,n,e)}function zm(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=li(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?zm(n,En(e)):zm(n,En({r:e,c:t||0}))}function $ve(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Hve(){return{SheetNames:[],Sheets:{}}}function zve(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var o=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=o+i)!=-1;++i);}if(YB(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Wve(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=$ve(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function qve(n,e){return n.z=e,n}function l9(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Gve(n,e,t){return l9(n,"#"+e,t)}function Kve(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Qve(n,e,t,r){for(var i=typeof e!="string"?e:Qn(e),s=typeof e=="string"?e:Hr(e),o=i.s.r;o<=i.e.r;++o)for(var a=i.s.c;a<=i.e.c;++a){var c=zm(n,o,a);c.t="n",c.F=s,delete c.v,o==i.s.r&&a==i.s.c&&(c.f=t,r&&(c.D=!0))}return n}var xw={encode_col:Fi,encode_row:wi,encode_cell:En,encode_range:Hr,decode_col:XA,decode_row:YA,split_cell:ufe,decode_cell:li,decode_range:Ns,format_cell:Nc,sheet_add_aoa:cB,sheet_add_json:c9,sheet_add_dom:t9,aoa_to_sheet:n0,json_to_sheet:jve,table_to_sheet:n9,table_to_book:yve,sheet_to_csv:ck,sheet_to_txt:a9,sheet_to_json:uw,sheet_to_html:e9,sheet_to_formulae:Uve,sheet_to_row_object_array:uw,sheet_get_cell:zm,book_new:Hve,book_append_sheet:zve,book_set_sheet_visibility:Wve,cell_set_number_format:qve,cell_set_hyperlink:l9,cell_set_internal_link:Gve,cell_add_comment:Kve,sheet_set_array_formula:Qve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};var RMe=Vm.version;var Xve=["salesByDayChart"],Zve=["paymentMethodsChart"],Jve=["topDishesChart"],e1e=["salesByHourChart"],t1e=["categoriesChart"],n1e=["inventoryChart"],r1e=(n,e,t)=>({"text-green-500":n,"text-red-500":e,"text-gray-500":t});function i1e(n,e){n&1&&(f(0,"span"),v(1,"\u2191"),p())}function s1e(n,e){n&1&&(f(0,"span"),v(1,"\u2193"),p())}function o1e(n,e){if(n&1){let t=ye();f(0,"tr")(1,"td",49),v(2),ot(3,"date"),p(),f(4,"td",49),v(5),p(),f(6,"td",49),v(7),p(),f(8,"td",49),v(9),p(),f(10,"td",50),v(11),p(),f(12,"td",49),v(13),p(),f(14,"td",51),J("click",function(){let i=Y(t).$implicit,s=R();return X(s.viewOrderDetails(i.id))}),v(15," Ver detalles "),p()()}if(n&2){let t=e.$implicit;x(2),De(ar(3,6,t.date,"dd/MM/yyyy HH:mm")),x(3),De(t.id.substring(0,8)),x(2),De(t.customerName),x(2),De(t.itemCount),x(2),ie("$",t.total.toFixed(2),""),x(2),De(t.paymentMethod)}}function a1e(n,e){n&1&&(f(0,"div",52),v(1," No hay datos disponibles para el per\xEDodo seleccionado "),p())}function c1e(n,e){if(n&1){let t=ye();f(0,"div",53)(1,"p",54),v(2),p(),f(3,"div",12)(4,"button",55),J("click",function(){Y(t);let i=R();return X(i.changePage(i.currentPage-1))}),v(5," Anterior "),p(),f(6,"button",55),J("click",function(){Y(t);let i=R();return X(i.changePage(i.currentPage+1))}),v(7," Siguiente "),p()()()}if(n&2){let t=R();x(2),gn("Mostrando ",t.pageSize," de ",t.reportData.totalOrderCount," pedidos "),x(2),tt("opacity-50",t.currentPage===1),ee("disabled",t.currentPage===1),x(2),tt("opacity-50",t.currentPage*t.pageSize>=t.reportData.totalOrderCount),ee("disabled",t.currentPage*t.pageSize>=t.reportData.totalOrderCount)}}kc.register(...K6);var ww=class n{firestore=le(rn);router=le(Ht);Math=Math;salesByDayChartRef;paymentMethodsChartRef;topDishesChartRef;salesByHourChartRef;categoriesChartRef;inventoryChartRef;startDate="";endDate="";selectedPeriod="thisMonth";currentPage=1;pageSize=10;reportData={totalSales:0,salesGrowth:0,totalOrders:0,totalOrderCount:0,totalItems:0,uniqueDishes:0,averageTicket:0,topPaymentMethod:"",topPaymentMethodPercentage:0,salesByDay:[],paymentMethods:[],topDishes:[],salesByHour:[],categories:[],inventoryItems:[],recentOrders:[]};charts={};ngOnInit(){this.updateDateRange(),this.loadReportData()}updateDateRange(){let e=new Date,t=new Date,r=new Date;switch(this.selectedPeriod){case"today":t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);break;case"yesterday":t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()-1,23,59,59);break;case"thisWeek":let i=e.getDay(),s=i===0?6:i-1;t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-s),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),23,59,59);break;case"lastWeek":let o=e.getDay(),a=o===0?6:o-1;t=new Date(e.getFullYear(),e.getMonth(),e.getDate()-a-7),r=new Date(e.getFullYear(),e.getMonth(),e.getDate()-a-1,23,59,59);break;case"thisMonth":t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59);break;case"lastMonth":t=new Date(e.getFullYear(),e.getMonth()-1,1),r=new Date(e.getFullYear(),e.getMonth(),0,23,59,59);break;case"thisYear":t=new Date(e.getFullYear(),0,1),r=new Date(e.getFullYear(),11,31,23,59,59);break;case"custom":return}this.startDate=this.formatDateForInput(t),this.endDate=this.formatDateForInput(r)}formatDateForInput(e){return e.toISOString().split("T")[0]}loadReportData(){return W(this,null,function*(){try{Fa.default.fire({title:"Cargando datos",text:"Por favor espere...",allowOutsideClick:!1,didOpen:()=>{Fa.default.showLoading()}});let e=this.startDate?new Date(this.startDate):new Date,t=this.endDate?new Date(this.endDate+"T23:59:59"):new Date,r=yield this.fetchOrders(e,t);this.calculateMetrics(r),yield this.fetchInventoryData(),setTimeout(()=>{this.renderCharts(),Fa.default.close()},500)}catch(e){console.error("Error al cargar datos:",e),Fa.default.fire("Error","No se pudieron cargar los datos del reporte","error")}})}fetchOrders(e,t){return W(this,null,function*(){let r=it(this.firestore,"orders"),i=tn(r,yn("status","==","Cobrado"),yn("paidAt",">=",e),yn("paidAt","<=",t),Un("paidAt","desc")),s=yield Tr(i),o=[];s.forEach(a=>{let c=a.data();o.push(Te(fe({id:a.id},c),{paidAt:c.paidAt?.toDate()||new Date,date:c.date?.toDate()||new Date}))});for(let a of o){let c=it(this.firestore,`orders/${a.id}/payments`),l=yield Tr(c),u=[];l.forEach(d=>{let m=d.data();u.push(Te(fe({id:d.id},m),{timestamp:m.timestamp?.toDate()||new Date}))}),a.payments=u}return o})}calculateMetrics(e){let t=e.reduce((k,O)=>k+(O.total||0),0),r=e.length,i=[],s=new Set;e.forEach(k=>{k.items&&Array.isArray(k.items)&&(i=i.concat(k.items),k.items.forEach(O=>{O.id&&s.add(O.id)}))});let o=i.reduce((k,O)=>k+(O.quantity||1),0),a={},c={};e.forEach(k=>{let O=k.paymentMethod||"Desconocido";a[O]=(a[O]||0)+1,c[O]=(c[O]||0)+(k.total||0)});let l="Desconocido",u=0;Object.entries(a).forEach(([k,O])=>{O>u&&(l=k,u=O)});let d=this.groupOrdersByDay(e),m=Object.entries(c).map(([k,O])=>({method:k,amount:O,percentage:e.length>0?O/t:0})),g={};i.forEach(k=>{let O=k.id||"unknown",K=k.quantity||1,Q=k.price||0;g[O]||(g[O]={name:k.name||"Desconocido",count:0,total:0}),g[O].count+=K,g[O].total+=K*Q});let w=Object.values(g).sort((k,O)=>O.count-k.count).slice(0,10),y=this.groupOrdersByHour(e),E=this.groupOrdersByCategory(i),M=e.slice(0,this.pageSize).map(k=>({id:k.id,date:k.paidAt||k.date,customerName:k.customer?.name||"Cliente no registrado",itemCount:k.items?.length||0,total:k.total||0,paymentMethod:k.paymentMethod||"Desconocido",paymentDetails:this.getPaymentDetails(k)}));this.reportData={totalSales:t,salesGrowth:this.calculateGrowth(t,0),totalOrders:r,totalOrderCount:r,totalItems:o,uniqueDishes:s.size,averageTicket:r>0?t/r:0,topPaymentMethod:l,topPaymentMethodPercentage:r>0?u/r:0,salesByDay:d,paymentMethods:m,topDishes:w,salesByHour:y,categories:E,inventoryItems:[],recentOrders:M}}groupOrdersByDay(e){let t={};return e.forEach(r=>{let s=(r.paidAt||r.date).toISOString().split("T")[0];t[s]=(t[s]||0)+(r.total||0)}),Object.entries(t).map(([r,i])=>({date:r,amount:i})).sort((r,i)=>r.date.localeCompare(i.date))}groupOrdersByHour(e){let t=Array(24).fill(0);return e.forEach(r=>{let s=(r.paidAt||r.date).getHours();t[s]+=r.total||0}),t.map((r,i)=>({hour:`${i}:00`,amount:r}))}groupOrdersByCategory(e){let t={};return e.forEach(r=>{let i=r.categoryName||"Sin categor\xEDa",s=r.quantity||1,o=r.price||0,a=s*o;t[i]=(t[i]||0)+a}),Object.entries(t).map(([r,i])=>({category:r,amount:i})).sort((r,i)=>i.amount-r.amount)}calculateGrowth(e,t){return t===0?0:(e-t)/t*100}getPaymentDetails(e){return e.paymentMethod?e.paymentMethod==="Efectivo"&&e.amountReceived?`Recibido: $${e.amountReceived.toFixed(2)}, Cambio: $${(e.amountReceived-e.total).toFixed(2)}`:e.paymentMethod==="Transferencia"&&e.bankName?`Banco: ${e.bankName}, C\xF3digo: ${e.transactionCode||"N/A"}`:["Ahorita","De una"].includes(e.paymentMethod)&&e.transactionCode?`C\xF3digo: ${e.transactionCode}`:"":""}fetchInventoryData(){return W(this,null,function*(){try{let e=it(this.firestore,"inventory"),t=yield Tr(e),r=[];t.forEach(i=>{let s=i.data();r.push({id:i.id,name:s.name||"Sin nombre",quantity:s.quantity||0,unit:s.unit||"unidad",minStock:s.minStock||0,category:s.category||"Sin categor\xEDa",lastUpdated:s.updatedAt?.toDate()||new Date})}),this.reportData.inventoryItems=r.sort((i,s)=>i.quantity-s.quantity)}catch(e){console.error("Error al obtener datos de inventario:",e)}})}renderCharts(){Object.values(this.charts).forEach(e=>e.destroy()),this.renderSalesByDayChart(),this.renderPaymentMethodsChart(),this.renderTopDishesChart(),this.renderSalesByHourChart(),this.renderCategoriesChart(),this.renderInventoryChart()}renderSalesByDayChart(){if(!this.salesByDayChartRef||this.reportData.salesByDay.length===0)return;let t=this.salesByDayChartRef.nativeElement.getContext("2d"),r=this.reportData.salesByDay.map(o=>new Date(o.date).toLocaleDateString()),i=this.reportData.salesByDay.map(o=>o.amount),s={type:"line",data:{labels:r,datasets:[{label:"Ventas ($)",data:i,backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgb(59, 130, 246)",borderWidth:2,tension:.3,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!1},legend:{display:!1},tooltip:{callbacks:{label:function(o){return`$ ${o.raw}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return"$ "+o}}}}}};this.charts.salesByDay=new kc(t,s)}renderPaymentMethodsChart(){if(!this.paymentMethodsChartRef||this.reportData.paymentMethods.length===0)return;let t=this.paymentMethodsChartRef.nativeElement.getContext("2d"),r=this.reportData.paymentMethods.map(a=>a.method),i=this.reportData.paymentMethods.map(a=>a.amount),o={type:"doughnut",data:{labels:r,datasets:[{data:i,backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(199, 199, 199, 0.8)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:function(a){let c=a.raw,l=a.chart.data.datasets[0].data.reduce((d,m)=>d+m,0),u=(c/l*100).toFixed(1);return`${a.label}: $${c} (${u}%)`}}}}}};this.charts.paymentMethods=new kc(t,o)}renderTopDishesChart(){if(!this.topDishesChartRef||this.reportData.topDishes.length===0)return;let t=this.topDishesChartRef.nativeElement.getContext("2d"),r=this.reportData.topDishes.map(o=>o.name),i=this.reportData.topDishes.map(o=>o.count),s={type:"bar",data:{labels:r,datasets:[{label:"Cantidad",data:i,backgroundColor:"rgba(75, 192, 192, 0.8)",borderColor:"rgb(75, 192, 192)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{precision:0}}}}};this.charts.topDishes=new kc(t,s)}renderSalesByHourChart(){if(!this.salesByHourChartRef||this.reportData.salesByHour.length===0)return;let t=this.salesByHourChartRef.nativeElement.getContext("2d"),r=this.reportData.salesByHour.map(o=>o.hour),i=this.reportData.salesByHour.map(o=>o.amount),s={type:"bar",data:{labels:r,datasets:[{label:"Ventas ($)",data:i,backgroundColor:"rgba(153, 102, 255, 0.8)",borderColor:"rgb(153, 102, 255)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){return`$ ${o.raw}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(o){return"$ "+o}}}}}};this.charts.salesByHour=new kc(t,s)}renderCategoriesChart(){if(!this.categoriesChartRef||this.reportData.categories.length===0)return;let t=this.categoriesChartRef.nativeElement.getContext("2d"),r=[...this.reportData.categories];if(r.length>7){let c=r.slice(0,6),u=r.slice(6).reduce((d,m)=>d+m.amount,0);u>0&&c.push({category:"Otras",amount:u}),r=c}let i=r.map(c=>c.category),s=r.map(c=>c.amount),a={type:"pie",data:{labels:i,datasets:[{data:s,backgroundColor:["rgba(54, 162, 235, 0.85)","rgba(255, 99, 132, 0.85)","rgba(255, 206, 86, 0.85)","rgba(75, 192, 192, 0.85)","rgba(153, 102, 255, 0.85)","rgba(255, 159, 64, 0.85)","rgba(119, 136, 153, 0.85)"],borderWidth:1,borderColor:"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{padding:15,usePointStyle:!0,font:{size:12}}},tooltip:{callbacks:{label:function(c){let l=c.raw,u=c.chart.data.datasets[0].data.reduce((m,g)=>m+g,0),d=(l/u*100).toFixed(1);return`${c.label}: $${l.toFixed(2)} (${d}%)`}}}}}};this.charts.categories=new kc(t,a)}renderInventoryChart(){if(!this.inventoryChartRef||this.reportData.inventoryItems.length===0)return;let e=this.reportData.inventoryItems.slice().sort((c,l)=>c.quantity/(c.minStock||1)-l.quantity/(l.minStock||1)).slice(0,10),r=this.inventoryChartRef.nativeElement.getContext("2d"),i=e.map(c=>c.name),s=e.map(c=>c.quantity),o=e.map(c=>c.minStock),a={type:"bar",data:{labels:i,datasets:[{label:"Stock actual",data:s,backgroundColor:"rgba(75, 192, 192, 0.8)",borderColor:"rgb(75, 192, 192)",borderWidth:1},{label:"Stock m\xEDnimo",data:o,backgroundColor:"rgba(255, 99, 132, 0.2)",borderColor:"rgb(255, 99, 132)",borderWidth:1,type:"line"}]},options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{beginAtZero:!0,ticks:{precision:0}}}}};this.charts.inventory=new kc(r,a)}changePage(e){e<1||(this.currentPage=e,this.fetchPagedOrders())}fetchPagedOrders(){return W(this,null,function*(){try{let e=this.startDate?new Date(this.startDate):new Date,t=this.endDate?new Date(this.endDate+"T23:59:59"):new Date,r=it(this.firestore,"orders"),i=tn(r,yn("status","==","Cobrado"),yn("paidAt",">=",e),yn("paidAt","<=",t),Un("paidAt","desc"),Jp(this.pageSize)),s=yield Tr(i),o=[];s.forEach(a=>{let c=a.data();o.push(Te(fe({id:a.id},c),{paidAt:c.paidAt?.toDate()||new Date,date:c.date?.toDate()||new Date}))}),this.reportData.recentOrders=o.map(a=>({id:a.id,date:a.paidAt||a.date,customerName:a.customer?.name||"Cliente no registrado",itemCount:a.items?.length||0,total:a.total||0,paymentMethod:a.paymentMethod||"Desconocido",paymentDetails:this.getPaymentDetails(a)}))}catch(e){console.error("Error al obtener pedidos paginados:",e)}})}viewOrderDetails(e){return W(this,null,function*(){try{let t=Ye(this.firestore,"orders",e),r=yield ln(t);if(!r.exists()){Fa.default.fire("Error","No se encontr\xF3 el pedido","error");return}let i=r.data(),s=it(this.firestore,`orders/${e}/payments`),o=yield Tr(s),a=[];o.forEach(l=>{let u=l.data();a.push(Te(fe({id:l.id},u),{timestamp:u.timestamp?.toDate()}))});let c=`
        <div class="text-left">
          <h2 class="text-lg font-semibold mb-2">Pedido #${e.substring(0,8)}</h2>
          <p><strong>Cliente:</strong> ${i.customer?.name||"Sin nombre"}</p>
          <p><strong>Fecha:</strong> ${i.paidAt?.toDate().toLocaleString()||i.date?.toDate().toLocaleString()}</p>
          <p><strong>Total:</strong> $${i.total?.toFixed(2)||"0.00"}</p>
          <p><strong>Estado:</strong> ${i.status||"Desconocido"}</p>
          <p><strong>M\xE9todo de pago:</strong> ${i.paymentMethod||"Desconocido"}</p>
          
          <h3 class="text-md font-semibold mt-4 mb-2">Detalle de art\xEDculos:</h3>
          <ul class="space-y-1">
      `;i.items&&Array.isArray(i.items)?i.items.forEach(l=>{c+=`
            <li>${l.quantity||1} x ${l.name||"Item sin nombre"} - $${((l.price||0)*(l.quantity||1)).toFixed(2)}</li>
          `}):c+="<li>No hay items disponibles</li>",c+="</ul>",a.length>0&&(c+=`
          <h3 class="text-md font-semibold mt-4 mb-2">Pagos Cobrados:</h3>
          <ul class="space-y-2">
        `,a.forEach(l=>{c+=`
            <li class="border-t pt-2">
              <div><strong>${l.partName||"Pago"}</strong> - $${l.amount?.toFixed(2)||"0.00"}</div>
              <div>M\xE9todo: ${l.method||"Desconocido"}</div>
          `,l.method==="Efectivo"&&l.amountReceived!==void 0?c+=`
              <div>Recibido: $${l.amountReceived.toFixed(2)}</div>
              <div>Cambio: $${l.change?.toFixed(2)||"0.00"}</div>
            `:l.method==="Transferencia"&&l.bankName?c+=`
              <div>Banco: ${l.bankName}</div>
              <div>C\xF3digo: ${l.transactionCode||"No registrado"}</div>
            `:["Ahorita","De una"].includes(l.method)&&l.transactionCode&&(c+=`<div>C\xF3digo: ${l.transactionCode}</div>`),c+=`
              <div class="text-xs text-gray-500">${l.timestamp?.toLocaleString()||"Fecha desconocida"}</div>
            </li>
          `}),c+="</ul>"),c+="</div>",Fa.default.fire({title:"Detalles del Pedido",html:c,width:"600px",confirmButtonText:"Cerrar"})}catch(t){console.error("Error al obtener detalles del pedido:",t),Fa.default.fire("Error","No se pudieron cargar los detalles del pedido","error")}})}exportSalesData(){try{let e=this.reportData.recentOrders.map((a,c)=>({"N\xB0":c+1,Fecha:this.formatDate(a.date),"ID Pedido":a.id,Cliente:a.customerName,"N\xB0 Items":a.itemCount,Total:a.total.toFixed(2),"M\xE9todo de Pago":a.paymentMethod,Detalles:a.paymentDetails})),t=xw.json_to_sheet(e),r=xw.book_new();xw.book_append_sheet(r,t,"Ventas");let i=[{wch:5},{wch:20},{wch:15},{wch:25},{wch:10},{wch:12},{wch:15},{wch:35}];t["!cols"]=i;let o=`Reporte_Ventas_${`${this.formatDate(new Date(this.startDate))} al ${this.formatDate(new Date(this.endDate))}`}.xlsx`;o9(r,o),Fa.default.fire({title:"Exportaci\xF3n exitosa",text:`Los datos han sido exportados a "${o}"`,icon:"success"})}catch(e){console.error("Error al exportar datos:",e),Fa.default.fire("Error","No se pudieron exportar los datos","error")}}formatDate(e){return e?e.toLocaleDateString():""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-reports"]],viewQuery:function(t,r){if(t&1&&(_o(Xve,5),_o(Zve,5),_o(Jve,5),_o(e1e,5),_o(t1e,5),_o(n1e,5)),t&2){let i;ws(i=bs())&&(r.salesByDayChartRef=i.first),ws(i=bs())&&(r.paymentMethodsChartRef=i.first),ws(i=bs())&&(r.topDishesChartRef=i.first),ws(i=bs())&&(r.salesByHourChartRef=i.first),ws(i=bs())&&(r.categoriesChartRef=i.first),ws(i=bs())&&(r.inventoryChartRef=i.first)}},standalone:!0,features:[Jt],decls:136,vars:21,consts:[["salesByDayChart",""],["paymentMethodsChart",""],["topDishesChart",""],["salesByHourChart",""],["categoriesChart",""],["inventoryChart",""],[1,"container","mx-auto","px-4","py-6"],[1,"font-bold","text-2xl","lg:text-3xl","mb-6","text-center","text-gray-800"],[1,"bg-white","p-4","rounded-lg","shadow","mb-6"],[1,"font-semibold","text-lg","mb-3"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","gap-2"],["type","date",1,"w-full","px-3","py-2","border","border-gray-300","rounded",3,"ngModelChange","change","ngModel"],[1,"w-full","px-3","py-2","border","border-gray-300","rounded",3,"ngModelChange","change","ngModel"],["value","today"],["value","yesterday"],["value","thisWeek"],["value","lastWeek"],["value","thisMonth"],["value","lastMonth"],["value","thisYear"],["value","custom"],[1,"flex","items-end"],[1,"w-full","py-2","bg-blue-500","hover:bg-blue-600","text-white","rounded",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-8"],[1,"bg-white","p-4","rounded-lg","shadow"],[1,"text-gray-500","text-sm","uppercase"],[1,"text-2xl","font-bold","text-gray-800"],[1,"text-sm",3,"ngClass"],[4,"ngIf"],[1,"text-gray-500","text-sm"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-8"],[1,"font-semibold","text-lg","mb-4"],[1,"h-80"],[1,"bg-white","p-4","rounded-lg","shadow","mb-8"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-semibold","text-lg"],[1,"px-4","py-2","bg-green-500","hover:bg-green-600","text-white","rounded","flex","items-center","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[4,"ngFor","ngForOf"],["class","py-8 text-center text-gray-500",4,"ngIf"],["class","flex justify-between mt-4",4,"ngIf"],[1,"px-6","py-4","whitespace-nowrap","text-sm"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-blue-500","cursor-pointer",3,"click"],[1,"py-8","text-center","text-gray-500"],[1,"flex","justify-between","mt-4"],[1,"text-sm","text-gray-500"],[1,"px-3","py-1","bg-gray-200","rounded",3,"click","disabled"]],template:function(t,r){if(t&1){let i=ye();f(0,"div",6)(1,"h1",7),v(2," \u{1F4CA} Reportes y An\xE1lisis "),p(),f(3,"div",8)(4,"h2",9),v(5,"Filtros"),p(),f(6,"div",10)(7,"div")(8,"label",11),v(9,"Rango de fechas"),p(),f(10,"div",12)(11,"input",13),He("ngModelChange",function(o){return Y(i),ze(r.startDate,o)||(r.startDate=o),X(o)}),J("change",function(){return Y(i),X(r.loadReportData())}),p(),f(12,"input",13),He("ngModelChange",function(o){return Y(i),ze(r.endDate,o)||(r.endDate=o),X(o)}),J("change",function(){return Y(i),X(r.loadReportData())}),p()()(),f(13,"div")(14,"label",11),v(15,"Periodo"),p(),f(16,"select",14),He("ngModelChange",function(o){return Y(i),ze(r.selectedPeriod,o)||(r.selectedPeriod=o),X(o)}),J("change",function(){return Y(i),X(r.updateDateRange())}),f(17,"option",15),v(18,"Hoy"),p(),f(19,"option",16),v(20,"Ayer"),p(),f(21,"option",17),v(22,"Esta semana"),p(),f(23,"option",18),v(24,"Semana pasada"),p(),f(25,"option",19),v(26,"Este mes"),p(),f(27,"option",20),v(28,"Mes pasado"),p(),f(29,"option",21),v(30,"Este a\xF1o"),p(),f(31,"option",22),v(32,"Personalizado"),p()()(),f(33,"div",23)(34,"button",24),J("click",function(){return Y(i),X(r.loadReportData())}),v(35," Actualizar "),p()()()(),f(36,"div",25)(37,"div",26)(38,"h3",27),v(39,"Total ventas"),p(),f(40,"p",28),v(41),p(),f(42,"p",29),se(43,i1e,2,0,"span",30)(44,s1e,2,0,"span",30),v(45),p()(),f(46,"div",26)(47,"h3",27),v(48,"Pedidos"),p(),f(49,"p",28),v(50),p(),f(51,"p",31),v(52),p()(),f(53,"div",26)(54,"h3",27),v(55,"Platos vendidos"),p(),f(56,"p",28),v(57),p(),f(58,"p",31),v(59),p()(),f(60,"div",26)(61,"h3",27),v(62,"M\xE9todo de pago popular"),p(),f(63,"p",28),v(64),p(),f(65,"p",31),v(66),p()()(),f(67,"div",32)(68,"div",26)(69,"h3",33),v(70,"Ventas por d\xEDa"),p(),f(71,"div",34),ae(72,"canvas",null,0),p()(),f(74,"div",26)(75,"h3",33),v(76,"Ventas por m\xE9todo de pago"),p(),f(77,"div",34),ae(78,"canvas",null,1),p()()(),f(80,"div",32)(81,"div",26)(82,"h3",33),v(83,"Top 10 platos m\xE1s vendidos"),p(),f(84,"div",34),ae(85,"canvas",null,2),p()(),f(87,"div",26)(88,"h3",33),v(89,"Ventas por hora del d\xEDa"),p(),f(90,"div",34),ae(91,"canvas",null,3),p()()(),f(93,"div",32)(94,"div",26)(95,"h3",33),v(96,"Ventas por categor\xEDa"),p(),f(97,"div",34),ae(98,"canvas",null,4),p()(),f(100,"div",26)(101,"h3",33),v(102,"An\xE1lisis de inventario"),p(),f(103,"div",34),ae(104,"canvas",null,5),p()()(),f(106,"div",35)(107,"div",36)(108,"h3",37),v(109,"Detalle de ventas"),p(),f(110,"button",38),J("click",function(){return Y(i),X(r.exportSalesData())}),xe(),f(111,"svg",39),ae(112,"path",40),p(),v(113," Exportar "),p()(),Pe(),f(114,"div",41)(115,"table",42)(116,"thead",43)(117,"tr")(118,"th",44),v(119,"Fecha "),p(),f(120,"th",44),v(121," Pedido #"),p(),f(122,"th",44),v(123," Cliente"),p(),f(124,"th",44),v(125,"Items "),p(),f(126,"th",44),v(127,"Total "),p(),f(128,"th",44),v(129," M\xE9todo"),p(),f(130,"th",44),v(131," Detalles"),p()()(),f(132,"tbody",45),se(133,o1e,16,9,"tr",46),p()(),se(134,a1e,2,0,"div",47)(135,c1e,8,8,"div",48),p()()()}t&2&&(x(11),$e("ngModel",r.startDate),x(),$e("ngModel",r.endDate),x(4),$e("ngModel",r.selectedPeriod),x(25),ie("$",r.reportData.totalSales.toFixed(2),""),x(),ee("ngClass",gl(17,r1e,r.reportData.salesGrowth>0,r.reportData.salesGrowth<0,r.reportData.salesGrowth===0)),x(),ee("ngIf",r.reportData.salesGrowth>0),x(),ee("ngIf",r.reportData.salesGrowth<0),x(),ie(" ",r.Math.abs(r.reportData.salesGrowth).toFixed(1),"% vs. periodo anterior "),x(5),De(r.reportData.totalOrders),x(2),ie("Ticket promedio: $",r.reportData.averageTicket.toFixed(2),""),x(5),De(r.reportData.totalItems),x(2),ie("En ",r.reportData.uniqueDishes," platos diferentes"),x(5),De(r.reportData.topPaymentMethod),x(2),ie("",(r.reportData.topPaymentMethodPercentage*100).toFixed(1),"% de las ventas"),x(67),ee("ngForOf",r.reportData.recentOrders),x(),ee("ngIf",r.reportData.recentOrders.length===0),x(),ee("ngIf",r.reportData.recentOrders.length>0))},dependencies:[nn,tr,qs,sa,_l,Ur,Qs,Ys,xr,ss,Br,pi],styles:["canvas[_ngcontent-%COMP%]{width:100%!important;height:100%!important}button[_ngcontent-%COMP%], select[_ngcontent-%COMP%], input[type=date][_ngcontent-%COMP%]{transition:all .2s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ddd;border-radius:4px}.overflow-x-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ccc}.bg-white[_ngcontent-%COMP%]{transition:box-shadow .3s ease}.bg-white[_ngcontent-%COMP%]:hover{box-shadow:0 5px 15px #00000014}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s ease}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f3f4f680}"]})};var hs=n=>()=>{let e=le(jn),t=le(Ht);return e.hasRole(n).pipe(Mr(1),je(r=>r?!0:(t.navigate(["/login"]),!1)))};var Dt=Bs(Rs());var l1e=(n,e)=>e.id;function u1e(n,e){n&1&&(f(0,"p",3),v(1,"Cargando informaci\xF3n de caja..."),p())}function d1e(n,e){if(n&1){let t=ye();f(0,"div",27)(1,"div",37)(2,"span",38),v(3),p(),f(4,"span",39),v(5),p()(),f(6,"div",40)(7,"button",41),J("click",function(){let i=Y(t).$index,s=R(4);return X(s.updateDenominationDetail(i,s.detallesApertura[i].count-1))}),v(8," - "),p(),f(9,"input",42),J("input",function(i){let s=Y(t).$index,o=R(4);return X(o.updateDenominationDetail(s,i.target.value))}),p(),f(10,"button",43),J("click",function(){let i=Y(t).$index,s=R(4);return X(s.updateDenominationDetail(i,s.detallesApertura[i].count+1))}),v(11," + "),p(),f(12,"span",44),v(13),ot(14,"number"),p()()()}if(n&2){let t=e.$implicit,r=e.$index,i=R(4);x(3),De(t.etiqueta),x(2),De(t.tipo==="bill"?"Billete":"Moneda"),x(4),ee("value",i.detallesApertura[r].count),x(4),ie("$ ",ar(14,4,i.detallesApertura[r].subtotal,"1.2-2"),"")}}function f1e(n,e){if(n&1){let t=ye();f(0,"div",22)(1,"form",23),J("ngSubmit",function(){Y(t);let i=R(3);return X(i.openCashRegister())}),f(2,"div",1)(3,"h3",24),v(4,"Arqueo Inicial de Caja"),p(),f(5,"p",25),v(6,"Ingresa la cantidad de cada denominaci\xF3n para el monto inicial"),p(),f(7,"div",26),Xt(8,d1e,15,7,"div",27,ml),p(),f(10,"div",28)(11,"div",29)(12,"span",30),v(13,"Total Inicial:"),p(),f(14,"span",31),v(15),ot(16,"number"),p()()()(),f(17,"div",1)(18,"label",32),v(19,"Notas (opcional)"),p(),ae(20,"textarea",33),p(),f(21,"div",34)(22,"button",35)(23,"span",36),xe(),f(24,"svg",12),ae(25,"path",19),p(),v(26," Abrir Caja "),p()()()()()}if(n&2){let t=R(3);x(),ee("formGroup",t.openForm),x(7),Zt(t.denominaciones),x(7),ie("$ ",ar(16,3,t.totalApertura,"1.2-2"),""),x(7),ee("disabled",t.openForm.invalid||t.totalApertura<=0||!t.validateAllDenominations())}}function h1e(n,e){if(n&1){let t=ye();f(0,"div",9)(1,"div",17),J("click",function(){Y(t);let i=R(2);return X(i.toggleOpenForm())}),f(2,"h2",18),xe(),f(3,"svg",12),ae(4,"path",19),p(),v(5," Abrir Nueva Caja "),p(),f(6,"svg",20),ae(7,"path",21),p()(),se(8,f1e,27,6,"div",22),p()}if(n&2){let t=R(2);x(6),tt("rotate-180",t.showOpenForm),x(2),Se(t.showOpenForm?8:-1)}}function p1e(n,e){n&1&&(f(0,"p",61),v(1,"Ingrese un monto v\xE1lido"),p())}function m1e(n,e){n&1&&(f(0,"p",61),v(1,"Descripci\xF3n requerida"),p())}function g1e(n,e){if(n&1){let t=ye();f(0,"div",4)(1,"div",10)(2,"h2",45),v(3,"Caja Abierta"),p(),f(4,"span",46),v(5,"Activa"),p()(),f(6,"div",47)(7,"div",48)(8,"p",49),v(9,"Monto Inicial"),p(),f(10,"p",50),v(11),ot(12,"number"),p()(),f(13,"div",48)(14,"p",49),v(15,"Monto Actual"),p(),f(16,"p",50),v(17),ot(18,"number"),p()(),f(19,"div",48)(20,"p",49),v(21,"Transacciones"),p(),f(22,"p",50),v(23),p()()(),f(24,"div",51)(25,"h3",52),xe(),f(26,"svg",53),ae(27,"path",54),p(),v(28," Registrar Transacci\xF3n "),p(),Pe(),f(29,"form",23),J("ngSubmit",function(){Y(t);let i=R(2);return X(i.registerTransaction())}),f(30,"div",55)(31,"div")(32,"label",56),v(33,"Tipo"),p(),f(34,"select",57)(35,"option",58),v(36,"Ingreso"),p(),f(37,"option",59),v(38,"Gasto"),p()()(),f(39,"div")(40,"label",56),v(41,"Monto ($)"),p(),ae(42,"input",60),se(43,p1e,2,0,"p",61),p(),f(44,"div")(45,"label",56),v(46,"Descripci\xF3n"),p(),ae(47,"input",62),se(48,m1e,2,0,"p",61),p()(),f(49,"div",63)(50,"button",64)(51,"span",40),xe(),f(52,"svg",7),ae(53,"path",65),p(),v(54," Registrar "),p()()()()(),Pe(),f(55,"div",66)(56,"button",67),J("click",function(){Y(t);let i=R(2);return X(i.showTransactionDialog())}),xe(),f(57,"svg",7),ae(58,"path",68)(59,"path",69),p(),Pe(),f(60,"span"),v(61,"Operaciones"),p()(),f(62,"button",70),J("click",function(){Y(t);let i=R(2);return X(i.showTransactions())}),xe(),f(63,"svg",7),ae(64,"path",71),p(),Pe(),f(65,"span"),v(66,"Transacciones"),p()(),f(67,"button",72),J("click",function(){Y(t);let i=R(2);return X(i.showSummary())}),xe(),f(68,"svg",7),ae(69,"path",73)(70,"path",74),p(),Pe(),f(71,"span"),v(72,"Resumen"),p()(),f(73,"button",75),J("click",function(){Y(t);let i=R(2);return X(i.loadHistoryData())}),xe(),f(74,"svg",7),ae(75,"path",13),p(),Pe(),f(76,"span"),v(77,"Historial"),p()(),f(78,"button",76),J("click",function(){Y(t);let i=R(2);return X(i.closeCashRegister())}),xe(),f(79,"svg",7),ae(80,"path",77),p(),Pe(),f(81,"span"),v(82,"Cerrar"),p()()()()}if(n&2){let t,r,i=R(2);x(11),ie("$ ",ar(12,7,i.currentRegister==null?null:i.currentRegister.initialAmount,"1.2-2"),""),x(6),ie("$ ",ar(18,10,i.currentRegister==null?null:i.currentRegister.currentAmount,"1.2-2"),""),x(6),De((i.currentRegister==null||i.currentRegister.transactions==null?null:i.currentRegister.transactions.length)||0),x(6),ee("formGroup",i.transactionForm),x(14),Se((t=i.transactionForm.get("amount"))!=null&&t.invalid&&((t=i.transactionForm.get("amount"))!=null&&t.touched)?43:-1),x(5),Se((r=i.transactionForm.get("description"))!=null&&r.invalid&&((r=i.transactionForm.get("description"))!=null&&r.touched)?48:-1),x(2),ee("disabled",i.transactionForm.invalid)}}function v1e(n,e){n&1&&(f(0,"div",15),xe(),f(1,"svg",78),ae(2,"circle",79)(3,"path",80),p()())}function _1e(n,e){n&1&&(f(0,"div",16)(1,"p",81),v(2,"No hay registros de cierres de caja anteriores"),p()())}function y1e(n,e){if(n&1){let t=ye();f(0,"tr",88)(1,"td",89)(2,"div",90),v(3),p(),f(4,"div",39),v(5),p()(),f(6,"td",91),v(7),p(),f(8,"td",91),v(9),p(),f(10,"td",91),v(11),p(),f(12,"td",92)(13,"button",93),J("click",function(){let i=Y(t).$implicit,s=R(4);return X(s.viewRegisterDetails(i.id))}),v(14," Ver Detalles "),p()()()}if(n&2){let t,r=e.$implicit,i=R(4);x(3),De(i.getFormattedDate(r.openedAt)),x(2),ie("Cierre: ",i.getFormattedDate((t=r.closedAt)!==null&&t!==void 0?t:void 0),""),x(2),ie("$",r.initialAmount.toFixed(2),""),x(2),ie("$",(r.finalAmount||0).toFixed(2),""),x(),pl((r.difference||0)>=0?"text-green-600":"text-red-600"),x(),gn(" ",(r.difference||0)>=0?"+":"","\\$",i.Math.abs(r.difference||0).toFixed(2)," ")}}function x1e(n,e){if(n&1&&(f(0,"div",82)(1,"table",83)(2,"thead",84)(3,"tr")(4,"th",85),v(5,"Fecha"),p(),f(6,"th",86),v(7,"Monto Inicial"),p(),f(8,"th",86),v(9,"Monto Final"),p(),f(10,"th",86),v(11,"Diferencia"),p(),f(12,"th",87),v(13,"Acciones"),p()()(),f(14,"tbody"),Xt(15,y1e,15,8,"tr",88,l1e),p()()()),n&2){let t=R(3);x(15),Zt(t.closedRegisters)}}function w1e(n,e){if(n&1&&(f(0,"div",97)(1,"h3",98),v(2,"Notas"),p(),f(3,"div",100)(4,"p",113),v(5),p()()()),n&2){let t=R(4);x(5),De(t.selectedRegister.notes)}}function b1e(n,e){if(n&1&&(f(0,"tr",116)(1,"td",102),v(2),p(),f(3,"td",86),v(4),p(),f(5,"td",85),v(6),p(),f(7,"td",117),v(8),p()()),n&2){let t=e.$implicit,r=R(5);x(),pl(r.getTransactionTypeClass(t.type)),x(),ie(" ",r.getTransactionTypeLabel(t.type)," "),x(),pl(t.amount>=0?"text-green-600":"text-red-600"),x(),ie(" $",r.Math.abs(t.amount).toFixed(2)," "),x(2),De(t.description),x(2),De(r.getFormattedTime(t.timestamp))}}function E1e(n,e){if(n&1&&(f(0,"div")(1,"h3",98),v(2,"Lista de Transacciones"),p(),f(3,"div",114)(4,"table",115)(5,"thead",84)(6,"tr")(7,"th",85),v(8,"Tipo"),p(),f(9,"th",86),v(10,"Monto"),p(),f(11,"th",85),v(12,"Descripci\xF3n"),p(),f(13,"th",86),v(14,"Hora"),p()()(),f(15,"tbody"),Xt(16,b1e,9,8,"tr",116,ml),p()()()()),n&2){let t=R(4);x(16),Zt(t.selectedRegister.transactions)}}function C1e(n,e){n&1&&(f(0,"div",112)(1,"p",81),v(2,"No hay transacciones registradas en este cierre"),p()())}function S1e(n,e){if(n&1){let t=ye();f(0,"div",94)(1,"button",95),J("click",function(){Y(t);let i=R(3);return X(i.backToHistoryList())}),xe(),f(2,"svg",7),ae(3,"path",96),p(),v(4," Volver al Listado "),p()(),Pe(),f(5,"div",97)(6,"h3",98),v(7,"M\xE9todos de Pago"),p(),f(8,"div",99)(9,"div",100)(10,"p",39),v(11,"Efectivo"),p(),f(12,"p",101),v(13),p()(),f(14,"div",100)(15,"p",39),v(16,"Transferencia"),p(),f(17,"p",101),v(18),p()(),f(19,"div",100)(20,"p",39),v(21,"Ahorita"),p(),f(22,"p",101),v(23),p()(),f(24,"div",100)(25,"p",39),v(26,"De Una"),p(),f(27,"p",101),v(28),p()()()(),f(29,"div",102)(30,"div",103)(31,"div",100)(32,"p",39),v(33,"Apertura"),p(),f(34,"p",38),v(35),p(),f(36,"p",104),v(37),p()(),f(38,"div",100)(39,"p",39),v(40,"Cierre"),p(),f(41,"p",38),v(42),p(),f(43,"p",104),v(44),p()()(),f(45,"div",97)(46,"h3",98),v(47,"Resumen Financiero"),p(),f(48,"div",105)(49,"div",106)(50,"p",39),v(51,"Monto Inicial"),p(),f(52,"p",107),v(53),p()(),f(54,"div",106)(55,"p",39),v(56,"Monto Final"),p(),f(57,"p",107),v(58),p()(),f(59,"div",106)(60,"p",39),v(61,"Diferencia"),p(),f(62,"p",108),v(63),p()(),f(64,"div",106)(65,"p",39),v(66,"Transacciones"),p(),f(67,"p",107),v(68),p()()()(),f(69,"div",97)(70,"h3",98),v(71,"Detalle de Transacciones"),p(),f(72,"div",105)(73,"div",100)(74,"p",39),v(75,"Pagos Recibidos"),p(),f(76,"p",109),v(77),p()(),f(78,"div",100)(79,"p",39),v(80,"Ingresos Adicionales"),p(),f(81,"p",109),v(82),p()(),f(83,"div",100)(84,"p",39),v(85,"Gastos"),p(),f(86,"p",110),v(87),p()(),f(88,"div",100)(89,"p",39),v(90,"Reembolsos"),p(),f(91,"p",111),v(92),p()()()(),se(93,w1e,6,1,"div",97)(94,E1e,18,0,"div")(95,C1e,3,0,"div",112),p()}if(n&2){let t=R(3);x(13),ie("$",t.registerStats.paymentMethods.efectivo.toFixed(2)||"0.00",""),x(5),ie(" $",t.registerStats.paymentMethods.transferencia.toFixed(2)||"0.00",""),x(5),ie("$",t.registerStats.paymentMethods.ahorita.toFixed(2)||"0.00",""),x(5),ie("$",t.registerStats.paymentMethods.deUna.toFixed(2)||"0.00",""),x(7),De(t.getFormattedDateTime(t.selectedRegister.openedAt)),x(2),ie("Por: ",t.selectedRegister.openedBy.name||"Desconocido",""),x(5),De(t.selectedRegister.closedAt?t.getFormattedDateTime(t.selectedRegister.closedAt):"-"),x(2),ie("Por: ",(t.selectedRegister.closedBy==null?null:t.selectedRegister.closedBy.name)||"-",""),x(9),ie("$",t.selectedRegister.initialAmount.toFixed(2),""),x(5),ie("$",(t.selectedRegister.finalAmount||0).toFixed(2)," "),x(4),pl((t.selectedRegister.difference||0)>=0?"text-green-600":"text-red-600"),x(),gn(" ",(t.selectedRegister.difference||0)>=0?"+":"","\\$",t.Math.abs(t.selectedRegister.difference||0).toFixed(2)," "),x(5),De(t.selectedRegister.transactions.length||0),x(9),ie("$",t.registerStats.payments.toFixed(2),""),x(5),ie("$",t.registerStats.incomes.toFixed(2),""),x(5),ie("$",t.registerStats.expenses.toFixed(2),""),x(5),ie("$",t.registerStats.refunds.toFixed(2),""),x(),Se(t.selectedRegister.notes?93:-1),x(),Se(t.selectedRegister.transactions&&t.selectedRegister.transactions.length>0?94:95)}}function I1e(n,e){if(n&1&&se(0,x1e,17,0,"div",82)(1,S1e,96,21),n&2){let t=R(2);Se(t.selectedRegister?1:0)}}function T1e(n,e){if(n&1){let t=ye();se(0,h1e,9,3,"div",9)(1,g1e,83,13,"div",4),f(2,"div",4)(3,"div",10)(4,"h2",11),xe(),f(5,"svg",12),ae(6,"path",13),p(),v(7," Historial de Cierres de Caja "),p(),Pe(),f(8,"button",14),J("click",function(){Y(t);let i=R();return X(i.loadHistoryData())}),xe(),f(9,"svg",7),ae(10,"path",8),p(),v(11," Actualizar "),p()(),se(12,v1e,4,0,"div",15)(13,_1e,3,0,"div",16)(14,I1e,2,1),p()}if(n&2){let t=R();Se(t.isRegisterOpen?-1:0),x(),Se(t.isRegisterOpen?1:-1),x(11),Se(t.loadingHistory?12:t.closedRegisters.length===0?13:14)}}function D1e(n,e){n&1&&(f(0,"div",5)(1,"div",118)(2,"div",40),xe(),f(3,"svg",119),ae(4,"circle",79)(5,"path",80),p(),Pe(),f(6,"span",120),v(7,"Procesando..."),p()()()())}var bw=class n{constructor(e,t){this.fb=e;this.cashRegisterService=t;this.openForm=this.fb.group({initialAmount:[0,[Ms.required,Ms.min(0)]],notes:[""]}),this.transactionForm=this.fb.group({type:["income",Ms.required],amount:[0,[Ms.required,Ms.min(0)]],description:["",Ms.required]}),this.initializeDenominationDetails(),b2(()=>{this.cashRegisterService.transactionOccurred(),this.isRegisterOpen&&!this.loading&&this.refreshRegisterData()})}openForm;transactionForm;currentRegister=null;isRegisterOpen=!1;loading=!0;showOpenForm=!1;loadingHistory=!1;closedRegisters=[];selectedRegister=null;registerStats={payments:0,expenses:0,incomes:0,refunds:0,paymentMethods:{efectivo:0,transferencia:0,ahorita:0,deUna:0,otros:0}};Math=Math;denominaciones=[{valor:100,tipo:"bill",etiqueta:"$100"},{valor:50,tipo:"bill",etiqueta:"$50"},{valor:20,tipo:"bill",etiqueta:"$20"},{valor:10,tipo:"bill",etiqueta:"$10"},{valor:5,tipo:"bill",etiqueta:"$5"},{valor:1,tipo:"bill",etiqueta:"$1"},{valor:.5,tipo:"coin",etiqueta:"50\xA2"},{valor:.25,tipo:"coin",etiqueta:"25\xA2"},{valor:.1,tipo:"coin",etiqueta:"10\xA2"},{valor:.05,tipo:"coin",etiqueta:"5\xA2"},{valor:.01,tipo:"coin",etiqueta:"1\xA2"}];detallesApertura=[];totalApertura=0;isSyncing=!1;syncSub=null;ngOnInit(){this.checkRegisterStatus(),this.loadHistoryData()}toggleOpenForm(){this.showOpenForm=!this.showOpenForm}syncOrdersWithCashRegister(){this.isSyncing||Dt.default.fire({title:"\xBFSincronizar \xF3rdenes?",text:"Esta acci\xF3n verificar\xE1 las \xF3rdenes pagadas que no han sido registradas en caja y las a\xF1adir\xE1 como transacciones.",icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, sincronizar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&(this.isSyncing=!0,Dt.default.fire({title:"Sincronizando",text:"Procesando \xF3rdenes pendientes...",allowOutsideClick:!1,didOpen:()=>{Dt.default.showLoading()}}),this.syncSub=this.cashRegisterService.syncOrdersWithTransactions().subscribe({next:t=>{this.isSyncing=!1,Dt.default.close(),t?Dt.default.fire({icon:"success",title:"Sincronizaci\xF3n completada",text:"Las \xF3rdenes han sido sincronizadas correctamente con la caja.",confirmButtonText:"Entendido"}).then(()=>{this.refreshRegisterData()}):Dt.default.fire({icon:"warning",title:"Sincronizaci\xF3n parcial",text:"Algunas \xF3rdenes no pudieron ser sincronizadas. Intente nuevamente m\xE1s tarde.",confirmButtonText:"Entendido"})},error:t=>{this.isSyncing=!1,console.error("Error durante la sincronizaci\xF3n:",t),Dt.default.fire({icon:"error",title:"Error de sincronizaci\xF3n",text:"No se pudieron sincronizar las \xF3rdenes con la caja.",confirmButtonText:"Entendido"})}}))})}ngOnDestroy(){this.syncSub&&this.syncSub.unsubscribe()}initializeDenominationDetails(){this.detallesApertura=this.denominaciones.map(e=>({denomination:e.valor,type:e.tipo,count:0,subtotal:0}))}checkRegisterStatus(){this.loading=!0,this.cashRegisterService.getCurrentCashRegister().subscribe({next:e=>{this.currentRegister=e,this.isRegisterOpen=!!e,this.loading=!1},error:e=>{console.error("Error al verificar estado de caja:",e),this.loading=!1,Dt.default.fire({icon:"error",title:"Error",text:"No se pudo verificar el estado de la caja. Por favor, verifica tus permisos o contacta al administrador."})}})}refreshRegisterData(){this.cashRegisterService.getCurrentCashRegister().subscribe({next:e=>{this.currentRegister=e,this.isRegisterOpen=!!e},error:e=>{console.error("Error al actualizar datos de caja:",e)}})}updateDenominationDetail(e,t){t<0&&(t=0),t=parseInt(t.toString(),10)||0,this.detallesApertura[e].count=t;let r=this.calculateSubtotal(this.detallesApertura[e].denomination,this.detallesApertura[e].count);this.detallesApertura[e].subtotal=r,this.calculateTotal(),this.openForm.patchValue({initialAmount:this.totalApertura})}calculateSubtotal(e,t){return parseFloat((e*t).toFixed(2))}calculateTotal(){this.totalApertura=this.detallesApertura.reduce((e,t)=>e+t.subtotal,0),this.totalApertura=parseFloat(this.totalApertura.toFixed(2))}formatAmount(e){return e.toFixed(2)}openCashRegister(){if(this.openForm.invalid||this.totalApertura<=0)return;this.detallesApertura.forEach(t=>{t.subtotal=this.calculateSubtotal(t.denomination,t.count)});let e={initialAmount:this.totalApertura,details:this.detallesApertura,openedAt:new Date,status:"open",openedBy:this.cashRegisterService.getUserInfo(),notes:this.openForm.value.notes};this.loading=!0,this.cashRegisterService.openCashRegister(e).subscribe({next:t=>{this.loading=!1,Dt.default.fire({icon:"success",title:"\xA1Caja abierta!",text:`La caja ha sido abierta exitosamente. ID: ${t}`,confirmButtonText:"Continuar"}).then(()=>{this.checkRegisterStatus()})},error:t=>{this.loading=!1,console.error("Error al abrir caja:",t),Dt.default.fire({icon:"error",title:"Error",text:"No se pudo abrir la caja. Verifica tus permisos o contacta al administrador."})}})}registerTransaction(){if(this.transactionForm.invalid)return;let e=this.transactionForm.value,t=parseFloat(e.amount);if(isNaN(t)||t<=0){Dt.default.fire({icon:"error",title:"Error",text:"Por favor ingresa un monto v\xE1lido mayor a cero"});return}let r={description:e.description};switch(e.type){case"income":r.amount=parseFloat(t.toFixed(2));break;case"expense":r.amount=parseFloat((-t).toFixed(2));break;default:Dt.default.fire({icon:"error",title:"Error",text:"Tipo de transacci\xF3n no v\xE1lido"});return}this.loading=!0,this.cashRegisterService.registerTransaction(r).subscribe({next:i=>{this.loading=!1,i?(Dt.default.fire({icon:"success",title:"Transacci\xF3n registrada",text:"La transacci\xF3n se ha registrado exitosamente"}),this.transactionForm.reset({type:"income",amount:0,description:""})):Dt.default.fire({icon:"error",title:"Error",text:"No se pudo registrar la transacci\xF3n"})},error:i=>{this.loading=!1,console.error("Error al registrar transacci\xF3n:",i),Dt.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al registrar la transacci\xF3n"})}})}closeCashRegister(){Dt.default.fire({title:"\xBFCerrar caja?",text:"Una vez cerrada la caja no podr\xE1s hacer m\xE1s transacciones",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, cerrar caja",cancelButtonText:"No, cancelar"}).then(e=>{e.isConfirmed&&this.showClosingFormDialog()})}showClosingFormDialog(){if(!this.currentRegister)return;this.refreshRegisterData();let e=`
  <div class="text-left">
    <h3 class="text-lg font-medium mb-3">Cierre de Caja</h3>
    <p class="text-sm text-gray-500 mb-4">Ingresa el monto final contado en caja</p>
    
    <div class="mb-4">
      <label class="block text-sm font-medium mb-2">Monto Final ($)</label>
      <input type="number" id="final-amount" class="w-full border rounded p-2" min="0" step="0.01" value="${this.currentRegister.currentAmount.toFixed(2)}">
    </div>
    
    <div class="mt-4 mb-2">
      <label class="block text-sm font-medium">Notas (opcional)</label>
      <textarea id="closing-notes" class="w-full border rounded p-2 text-sm" rows="2"></textarea>
    </div>
  </div>
  `;Dt.default.fire({title:"Cerrar Caja",html:e,showCancelButton:!0,confirmButtonText:"Cerrar Caja",cancelButtonText:"Cancelar",showLoaderOnConfirm:!0,preConfirm:()=>{let t=parseFloat(document.getElementById("final-amount").value)||0,r=document.getElementById("closing-notes").value;return{finalAmount:t,details:[],notes:r}},allowOutsideClick:()=>!Dt.default.isLoading()}).then(t=>{if(t.isConfirmed){let r=t.value,i=this.currentRegister.currentAmount,s=r.finalAmount-i;Dt.default.fire({title:"Confirmar Cierre",html:`
        <div class="text-left">
          <p><strong>Monto esperado:</strong> $${i.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
          <p><strong>Monto contado:</strong> $${r.finalAmount.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
          <p><strong>Diferencia:</strong> $${s.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
        </div>
      `,icon:s===0?"success":s<0?"error":"warning",showCancelButton:!0,confirmButtonText:"Confirmar Cierre",cancelButtonText:"Cancelar"}).then(o=>{o.isConfirmed&&(this.loading=!0,this.cashRegisterService.closeCashRegister(r).subscribe({next:a=>{this.loading=!1,a?Dt.default.fire({icon:"success",title:"Caja Cerrada",text:"La caja ha sido cerrada exitosamente"}).then(()=>{this.checkRegisterStatus(),this.loadHistoryData()}):Dt.default.fire({icon:"error",title:"Error",text:"No se pudo cerrar la caja"})},error:a=>{this.loading=!1,console.error("Error al cerrar caja:",a),Dt.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al cerrar la caja"})}}))})}})}loadHistoryData(){this.loadingHistory=!0,this.selectedRegister=null,this.cashRegisterService.getCashRegisterHistory(20).subscribe({next:e=>{this.loadingHistory=!1,this.closedRegisters=e.filter(t=>t.status==="closed"),this.closedRegisters.sort((t,r)=>{let i=t.closedAt?new Date(t.closedAt).getTime():0;return(r.closedAt?new Date(r.closedAt).getTime():0)-i}),this.closedRegisters.length===0?console.log("No se encontraron registros de cierres de caja"):console.log(`Se cargaron ${this.closedRegisters.length} registros de cierres de caja`)},error:e=>{this.loadingHistory=!1,console.error("Error al obtener historial de cierres:",e),Dt.default.fire({icon:"error",title:"Error",text:"No se pudo cargar el historial de cierres de caja"})}})}showTransactions(){this.loading=!0,this.cashRegisterService.getCurrentCashRegister().subscribe({next:e=>{if(this.loading=!1,this.currentRegister=e,!this.currentRegister||!this.currentRegister.transactions){Dt.default.fire({icon:"info",title:"Sin transacciones",text:"No hay transacciones para mostrar"});return}let t=this.currentRegister.transactions,r=`
          <div class="max-h-96 overflow-y-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="bg-gray-100">
                  <th class="p-2 text-left">Tipo</th>
                  <th class="p-2 text-right">Monto</th>
                  <th class="p-2 text-left">Descripci\xF3n</th>
                  <th class="p-2 text-left">Fecha</th>
                </tr>
              </thead>
              <tbody>
        `;t.length===0&&(r+=`
            <tr>
              <td colspan="4" class="p-2 text-center">No hay transacciones registradas</td>
            </tr>
          `),t.forEach(i=>{let s="",o="";switch(i.type){case"income":s="text-green-600",o="Ingreso";break;case"expense":s="text-red-600",o="Gasto";break;case"payment":s="text-blue-600",o="Pago";break;case"refund":s="text-orange-600",o="Reembolso";break}let a=this.getFormattedDateTime(i.timestamp);r+=`
    <tr class="border-b">
      <td class="p-2 ${s}">${o}</td>
      <td class="p-2 text-right ${i.amount>=0?"text-green-600":"text-red-600"}">
        $${Math.abs(i.amount).toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}
      </td>
      <td class="p-2">${i.description}</td>
      <td class="p-2 text-xs">${a}</td>
    </tr>
  `}),r+=`
              </tbody>
            </table>
          </div>
        `,Dt.default.fire({title:"Transacciones",html:r,width:"800px",confirmButtonText:"Cerrar"})},error:e=>{this.loading=!1,console.error("Error al obtener transacciones:",e),Dt.default.fire({icon:"error",title:"Error",text:"No se pudieron cargar las transacciones"})}})}validateAllDenominations(){return this.detallesApertura.every(e=>e.count>=0&&Number.isInteger(e.count))}showTransactionDialog(){this.refreshRegisterData();let t=`
    <form id="transaction-form" class="text-left">
      <div class="mb-3">
        <label class="block text-sm font-medium mb-1">Tipo de transacci\xF3n</label>
        <select id="transaction-type" class="w-full border rounded p-2">
          ${[{value:"income",label:"Ingreso"},{value:"expense",label:"Gasto"}].map(r=>`<option value="${r.value}">${r.label}</option>`).join("")}
        </select>
      </div>
      
      <div class="mb-3">
        <label class="block text-sm font-medium mb-1">Monto ($)</label>
        <input type="number" id="transaction-amount" class="w-full border rounded p-2" min="0" step="0.01" placeholder="0">
      </div>
      
      <div class="mb-3">
        <label class="block text-sm font-medium mb-1">Descripci\xF3n</label>
        <textarea id="transaction-description" class="w-full border rounded p-2" rows="2" placeholder="Motivo de la transacci\xF3n"></textarea>
      </div>
    </form>
  `;Dt.default.fire({title:"Registrar Movimiento",html:t,showCancelButton:!0,confirmButtonText:"Registrar",cancelButtonText:"Cancelar",focusConfirm:!1,preConfirm:()=>{let r=document.getElementById("transaction-type").value,i=document.getElementById("transaction-amount").value,s=document.getElementById("transaction-description").value;if(!s.trim())return Dt.default.showValidationMessage("Debe ingresar una descripci\xF3n"),!1;let o=parseFloat(i);return isNaN(o)||o<=0?(Dt.default.showValidationMessage("Debe ingresar un monto v\xE1lido mayor a cero"),!1):{type:r,amount:o,description:s}}}).then(r=>{if(r.isConfirmed){let i=r.value;i.type==="income"?this.registerIncome(i.amount,i.description):i.type==="expense"&&this.registerExpense(i.amount,i.description)}})}registerExpense(e,t){this.loading=!0,this.cashRegisterService.registerExpense({amount:e,description:t}).subscribe({next:r=>{this.loading=!1,r?Dt.default.fire({icon:"success",title:"Gasto registrado",text:"El gasto se ha registrado exitosamente"}).then(()=>{this.checkRegisterStatus()}):Dt.default.fire({icon:"error",title:"Error",text:"No se pudo registrar el gasto"})},error:r=>{this.loading=!1,console.error("Error al registrar gasto:",r),Dt.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al registrar el gasto"})}})}viewRegisterDetails(e){this.loadingHistory=!0,this.cashRegisterService.getCashRegisterById(e).subscribe({next:t=>{if(this.loadingHistory=!1,!t){Dt.default.fire({icon:"error",title:"No encontrado",text:"No se pudo encontrar la informaci\xF3n de este cierre de caja"});return}console.log("Tipo de closedAt:",typeof t.closedAt),console.log("Valor de closedAt:",t.closedAt),this.selectedRegister=t,this.registerStats=this.calculateRegisterStats(t)},error:t=>{this.loadingHistory=!1,console.error("Error al obtener detalles del cierre:",t),Dt.default.fire({icon:"error",title:"Error",text:"No se pudieron cargar los detalles de este cierre de caja"})}})}registerIncome(e,t){this.loading=!0,this.cashRegisterService.registerIncome({amount:e,description:t}).subscribe({next:r=>{this.loading=!1,r?Dt.default.fire({icon:"success",title:"Ingreso registrado",text:"El ingreso se ha registrado exitosamente"}).then(()=>{this.checkRegisterStatus()}):Dt.default.fire({icon:"error",title:"Error",text:"No se pudo registrar el ingreso"})},error:r=>{this.loading=!1,console.error("Error al registrar ingreso:",r),Dt.default.fire({icon:"error",title:"Error",text:"Ocurri\xF3 un error al registrar el ingreso"})}})}calculateRegisterStats(e){let t=0,r=0,i=0,s=0,o=0,a=0,c=0,l=0,u=0;return(e.transactions||[]).forEach(d=>{switch(d.type){case"payment":t+=d.amount;let m=(d.paymentMethod||"").toLowerCase();m==="efectivo"?o+=d.amount:m==="transferencia"?a+=d.amount:m==="ahorita"?c+=d.amount:m==="de una"?l+=d.amount:u+=d.amount;break;case"expense":r+=Math.abs(d.amount);break;case"income":i+=d.amount;break;case"refund":s+=Math.abs(d.amount);break}}),{payments:t,expenses:r,incomes:i,refunds:s,paymentMethods:{efectivo:o,transferencia:a,ahorita:c,deUna:l,otros:u}}}backToHistoryList(){this.selectedRegister=null}getFormattedDate(e){if(!e)return"-";try{let t;return e&&e.toDate&&typeof e.toDate=="function"?t=e.toDate():e.seconds!==void 0&&e.nanoseconds!==void 0?t=new Date(e.seconds*1e3):t=new Date(e),isNaN(t.getTime())?(console.log("Fecha inv\xE1lida detectada:",e),"-"):t.toLocaleDateString("es-EC")}catch(t){return console.error("Error al formatear fecha:",t,e),"-"}}getFormattedDateTime(e){if(!e)return"-";try{let t;return e&&e.toDate&&typeof e.toDate=="function"?t=e.toDate():e.seconds!==void 0&&e.nanoseconds!==void 0?t=new Date(e.seconds*1e3):t=new Date(e),isNaN(t.getTime())?(console.log("Fecha inv\xE1lida detectada:",e),"-"):t.toLocaleString("es-EC")}catch(t){return console.error("Error al formatear fecha y hora:",t,e),"-"}}getFormattedTime(e){if(!e)return"-";try{let t;return e&&e.toDate&&typeof e.toDate=="function"?t=e.toDate():e.seconds!==void 0&&e.nanoseconds!==void 0?t=new Date(e.seconds*1e3):t=new Date(e),isNaN(t.getTime())?(console.log("Fecha inv\xE1lida detectada:",e),"-"):t.toLocaleTimeString("es-EC")}catch(t){return console.error("Error al formatear hora:",t,e),"-"}}getTransactionTypeClass(e){switch(e){case"income":return"text-green-600";case"expense":return"text-red-600";case"payment":return"text-blue-600";case"refund":return"text-orange-600";default:return""}}getTransactionTypeLabel(e){switch(e){case"income":return"Ingreso";case"expense":return"Gasto";case"payment":return"Pago";case"refund":return"Reembolso";default:return e}}showSummary(){this.loading=!0,this.cashRegisterService.getCurrentCashRegister().subscribe({next:e=>{this.currentRegister=e,this.cashRegisterService.getCurrentSummary().subscribe({next:t=>{this.loading=!1;let r=`
            <div class="text-left">
              <div class="grid grid-cols-2 gap-4 mb-4">
                <div class="bg-gray-50 p-3 rounded">
                  <p class="text-sm text-gray-500">Monto Inicial</p>
                  <p class="text-xl font-semibold">$${t.initialAmount.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                </div>
                <div class="bg-gray-50 p-3 rounded">
                  <p class="text-sm text-gray-500">Monto Actual</p>
                  <p class="text-xl font-semibold">$${t.currentAmount.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                </div>
              </div>
              
              <div class="mb-4">
                <h3 class="font-medium mb-2">Detalle de Transacciones</h3>
                <div class="grid grid-cols-2 gap-3">
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Pagos Recibidos</p>
                    <p class="text-lg font-medium text-green-600">$${t.totalPayments.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Ingresos Adicionales</p>
                    <p class="text-lg font-medium text-green-600">$${t.totalIncomes.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Gastos</p>
                    <p class="text-lg font-medium text-red-600">$${t.totalExpenses.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Reembolsos</p>
                    <p class="text-lg font-medium text-orange-600">$${t.totalRefunds.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                </div>
              </div>
              
              <div class="mb-4">
                <h3 class="font-medium mb-2">M\xE9todos de Pago</h3>
                <div class="grid grid-cols-2 gap-3">
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Efectivo</p>
                    <p class="text-lg font-medium text-blue-600">$${t.paymentMethods.efectivo.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Transferencia</p>
                    <p class="text-lg font-medium text-blue-600">$${t.paymentMethods.transferencia.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">Ahorita</p>
                    <p class="text-lg font-medium text-blue-600">$${t.paymentMethods.ahorita.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                  <div class="border p-2 rounded">
                    <p class="text-sm text-gray-500">De Una</p>
                    <p class="text-lg font-medium text-blue-600">$${t.paymentMethods.deUna.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</p>
                  </div>
                </div>
              </div>
              
              <div class="border-t pt-3">
                <div class="flex justify-between">
                  <span class="font-medium">Balance Total:</span>
                  <span class="text-xl font-bold">$${t.currentAmount.toLocaleString("es-EC",{minimumFractionDigits:2,maximumFractionDigits:2})}</span>
                </div>
              </div>
            </div>
          `;Dt.default.fire({title:"Resumen de Caja",html:r,width:"800px",confirmButtonText:"Cerrar"})},error:t=>{this.loading=!1,console.error("Error al obtener resumen:",t),Dt.default.fire({icon:"error",title:"Error",text:"No se pudo cargar el resumen de caja"})}})},error:e=>{this.loading=!1,console.error("Error al obtener datos de caja:",e),Dt.default.fire({icon:"error",title:"Error",text:"No se pudo acceder a los datos de la caja"})}})}static \u0275fac=function(t){return new(t||n)(Qe(Hy),Qe(ba))};static \u0275cmp=Yt({type:n,selectors:[["app-cash-register"]],standalone:!0,features:[Jt],decls:12,vars:4,consts:[[1,"container","mx-auto","p-2","sm:p-4"],[1,"mb-4","sm:mb-6"],[1,"text-xl","sm:text-2xl","font-bold","text-gray-800","mb-1","sm:mb-2"],[1,"text-sm","text-gray-600"],[1,"bg-white","rounded-lg","shadow","p-3","sm:p-6","mb-4","sm:mb-6"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],["type","button",1,"px-3","py-2","text-sm","bg-amber-500","text-white","rounded-lg","hover:bg-amber-600","active:bg-amber-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","mr-1"],["fill-rule","evenodd","d","M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule","evenodd"],[1,"bg-white","rounded-lg","shadow","mb-4","sm:mb-6"],[1,"flex","justify-between","items-center","mb-3","sm:mb-4"],[1,"text-lg","sm:text-xl","font-semibold","text-purple-600","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule","evenodd"],[1,"text-purple-500","hover:text-purple-700","flex","items-center","text-sm",3,"click"],[1,"flex","justify-center","items-center","p-6"],[1,"text-center","p-6","bg-gray-50","rounded-lg"],[1,"p-3","sm:p-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-50",3,"click"],[1,"text-lg","sm:text-xl","font-semibold","text-teal-600","flex","items-center"],["fill-rule","evenodd","d","M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule","evenodd"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","transform","transition-transform","duration-200"],["fill-rule","evenodd","d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"p-3","sm:p-6","border-t"],[3,"ngSubmit","formGroup"],[1,"text-base","sm:text-lg","font-medium","text-gray-700","mb-2"],[1,"text-xs","sm:text-sm","text-gray-500","mb-3"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-2","sm:gap-4"],[1,"border","p-2","sm:p-3","rounded","shadow-sm","hover:shadow-md","transition-all"],[1,"mt-3","sm:mt-4","p-3","bg-gray-50","rounded-lg","shadow-inner"],[1,"flex","justify-between","items-center"],[1,"font-semibold","text-sm","sm:text-base"],[1,"text-lg","sm:text-xl","font-bold","text-teal-600","amount"],["for","notes",1,"block","mb-1","sm:mb-2","text-xs","sm:text-sm","font-medium","text-gray-700"],["id","notes","formControlName","notes","rows","2","placeholder","Agregar notas o comentarios sobre la apertura de caja",1,"w-full","border","rounded","p-2","text-sm","focus:ring-2","focus:ring-teal-300","focus:border-teal-500"],[1,"flex","justify-center","sm:justify-end"],["type","submit",1,"w-full","sm:w-auto","px-4","sm:px-6","py-2","bg-teal-500","text-white","rounded-lg","hover:bg-teal-600","active:bg-teal-700","disabled:bg-gray-300","disabled:cursor-not-allowed","text-sm","sm:text-base","transition-all","shadow","hover:shadow-md",3,"disabled"],[1,"flex","items-center","justify-center"],[1,"flex","justify-between","items-center","mb-1","sm:mb-2"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-500"],[1,"flex","items-center"],["type","button",1,"w-8","h-8","bg-gray-200","rounded-l","flex","items-center","justify-center","qty-control","hover:bg-gray-300","active:bg-gray-400",3,"click"],["type","number",1,"w-12","sm:w-16","h-8","border","text-center","text-sm","denomination-input","focus:ring-2","focus:ring-teal-300","focus:border-teal-500","transition-all",3,"input","value"],["type","button",1,"w-8","h-8","bg-gray-200","rounded-r","flex","items-center","justify-center","qty-control","hover:bg-gray-300","active:bg-gray-400",3,"click"],[1,"ml-2","sm:ml-4","text-sm","amount"],[1,"text-lg","sm:text-xl","font-semibold","text-teal-600"],[1,"px-2","py-1","text-xs","bg-green-100","text-green-800","rounded-full"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","gap-2","sm:gap-4","mb-4"],[1,"bg-gray-50","p-3","rounded-lg","shadow-sm","hover:shadow","transition-all"],[1,"text-xs","sm:text-sm","text-gray-500"],[1,"text-lg","sm:text-xl","font-semibold"],[1,"mb-4","sm:mb-6","border","rounded-lg","p-3","sm:p-4","hover:shadow-md","transition-all"],[1,"text-base","sm:text-lg","font-medium","text-gray-700","mb-2","sm:mb-3","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2","text-teal-500"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z","clip-rule","evenodd"],[1,"grid","grid-cols-1","gap-3","sm:grid-cols-3","sm:gap-4"],[1,"block","text-xs","sm:text-sm","font-medium","mb-1","text-gray-700"],["formControlName","type",1,"w-full","border","rounded","p-2","text-sm","focus:ring-2","focus:ring-teal-300","focus:border-teal-500","transition-all"],["value","income"],["value","expense"],["type","number","formControlName","amount","min","0","step","0.01",1,"w-full","border","rounded","p-2","text-sm","focus:ring-2","focus:ring-teal-300","focus:border-teal-500","transition-all"],[1,"text-xs","text-red-500","mt-1"],["type","text","formControlName","description","placeholder","Motivo",1,"w-full","border","rounded","p-2","text-sm","focus:ring-2","focus:ring-teal-300","focus:border-teal-500","transition-all"],[1,"mt-3","flex","justify-end"],["type","submit",1,"px-4","py-2","bg-teal-500","text-white","text-sm","rounded-lg","hover:bg-teal-600","active:bg-teal-700","disabled:bg-gray-300","disabled:cursor-not-allowed","transition-all","shadow","hover:shadow-md",3,"disabled"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-5","gap-2"],["type","button",1,"px-3","py-2","text-sm","bg-teal-500","text-white","rounded-lg","hover:bg-teal-600","active:bg-teal-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click"],["d","M10 12a2 2 0 100-4 2 2 0 000 4z"],["fill-rule","evenodd","d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule","evenodd"],["type","button",1,"px-3","py-2","text-sm","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","active:bg-blue-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click"],["fill-rule","evenodd","d","M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule","evenodd"],["type","button",1,"px-3","py-2","text-sm","bg-indigo-500","text-white","rounded-lg","hover:bg-indigo-600","active:bg-indigo-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click"],["d","M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"],["d","M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"],["type","button",1,"px-3","py-2","text-sm","bg-purple-500","text-white","rounded-lg","hover:bg-purple-600","active:bg-purple-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click"],["type","button",1,"px-3","py-2","text-sm","bg-red-500","text-white","rounded-lg","hover:bg-red-600","active:bg-red-700","transition","shadow","hover:shadow-md","flex","items-center","justify-center",3,"click"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-8","w-8","text-purple-500"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"text-gray-500"],[1,"overflow-x-auto"],[1,"w-full","text-sm","border-collapse"],[1,"bg-gray-100"],[1,"p-2","text-left"],[1,"p-2","text-right"],[1,"p-2","text-center"],[1,"border-b","hover:bg-gray-50"],[1,"p-3"],[1,"font-medium"],[1,"p-3","text-right"],[1,"p-3","text-center"],[1,"bg-blue-500","hover:bg-blue-600","text-white","px-2","py-1","rounded","text-xs",3,"click"],[1,"mb-3"],[1,"text-blue-500","hover:text-blue-700","flex","items-center","text-sm",3,"click"],["fill-rule","evenodd","d","M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule","evenodd"],[1,"mb-4"],[1,"text-base","font-medium","mb-2","text-gray-700"],[1,"grid","grid-cols-2","sm:grid-cols-2","lg:grid-cols-4","gap-2"],[1,"bg-gray-50","p-3","rounded","shadow-sm"],[1,"text-base","font-medium","text-blue-600"],[1,"p-2"],[1,"mb-4","grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"text-xs","text-gray-600","mt-1"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-2"],[1,"bg-gray-50","p-3","rounded","shadow-sm","text-center"],[1,"text-lg","font-bold","text-gray-800"],[1,"text-lg","font-bold"],[1,"text-base","font-medium","text-green-600"],[1,"text-base","font-medium","text-red-600"],[1,"text-base","font-medium","text-orange-600"],[1,"text-center","p-4","bg-gray-50","rounded-lg"],[1,"text-sm"],[1,"bg-gray-50","rounded","shadow-sm","overflow-hidden"],[1,"w-full","text-sm"],[1,"border-b","hover:bg-gray-100"],[1,"p-2","text-right","text-xs"],[1,"bg-white","p-4","sm:p-6","rounded-lg","shadow-lg"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","sm:h-6","sm:w-6","text-teal-600","mr-3"],[1,"text-gray-700"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"h1",2),v(3,"Caja Registradora"),p(),se(4,u1e,2,0,"p",3),p(),se(5,T1e,15,3,"div",4)(6,D1e,8,0,"div",5),p(),f(7,"button",6),J("click",function(){return r.syncOrdersWithCashRegister()}),xe(),f(8,"svg",7),ae(9,"path",8),p(),Pe(),f(10,"span"),v(11,"Sincronizar"),p()()),t&2&&(x(4),Se(r.loading?4:-1),x(),Se(r.loading?-1:5),x(),Se(r.loading?6:-1),x(),ee("disabled",r.isSyncing))},dependencies:[nn,eO,zy,jy,Qs,Ys,xr,Do,ss,Br,Ly,Ao,om,am,wl],styles:['@charset "UTF-8";.transition-all[_ngcontent-%COMP%]{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}@media (max-width: 640px){.denomination-input[_ngcontent-%COMP%]{width:40px}.qty-control[_ngcontent-%COMP%]{width:28px;height:28px}}']})};var u9=[{path:"login",component:Wy},{path:"redirect",component:Ty},{path:"home",component:Gy,canActivate:[hs(["admin","mesero","cobrador"])]},{path:"cocina",component:Qy,canActivate:[hs(["admin","cocinero"])]},{path:"pedido",component:Xy,canActivate:[hs(["admin","mesero"])]},{path:"cobrar/:id",component:lm,canActivate:[hs(["admin","cobrador","mesero"])]},{path:"cobrar",component:lm,canActivate:[hs(["admin","cobrador","mesero"])]},{path:"tienda",component:ix,canActivate:[hs(["admin","cobrador","mesero"])]},{path:"users",component:Zy,canActivate:[hs(["admin"])]},{path:"admin",component:Jy,canActivate:[hs(["admin"])]},{path:"admin/caja",component:bw,canActivate:[hs(["admin"])]},{path:"admin/categorias",component:ex,canActivate:[hs(["admin"])]},{path:"admin/productos",component:tx,canActivate:[hs(["admin"])]},{path:"admin/inventario",component:rx,canActivate:[hs(["admin"])]},{path:"admin/reportes",component:ww,canActivate:[hs(["admin"])]},{path:"",pathMatch:"full",redirectTo:"home"}];var h9="functions";var lk=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return W(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return W(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return W(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return W(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var uk="us-central1";var dk=class{constructor(e,t,r,i,s=uk,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new lk(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=uk}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function A1e(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var d9="@firebase/functions",f9="0.11.8";var k1e="auth-internal",M1e="app-check-internal",R1e="messaging-internal";function P1e(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(k1e),a=r.getProvider(R1e),c=r.getProvider(M1e);return new dk(s,o,a,c,i,n)};ca(new rs(h9,t,"PUBLIC").setMultipleInstances(!0)),rr(d9,f9,e),rr(d9,f9,"esm2017")}function p9(n=Sl(),e=uk){let r=Qu(nr(n),h9).getImmediate({identifier:e}),i=n_("functions");return i&&m9(r,...i),r}function m9(n,e,t){A1e(nr(n),e,t)}P1e(fetch.bind(self));var Ym=class{constructor(e){return e}},g9="functions",fk=class{constructor(){return Xu(g9)}};var hk=new Ze("angularfire2.functions-instances");function F1e(n,e){let t=eh(g9,n,e);return t&&new Ym(t)}function O1e(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ym(r)}}var N1e={provide:fk,deps:[[new gr,hk]]},L1e={provide:Ym,useFactory:F1e,deps:[[new gr,hk],Eo]};function v9(n,...e){return rr("angularfire",dc.full,"fn"),$s([L1e,N1e,{provide:hk,useFactory:O1e(n),multi:!0,deps:[$t,Rr,Tl,fc,[new gr,nd],[new gr,Il],...e]}])}var _9=Pn(p9,!0);var y9={providers:[RF({eventCoalescing:!0}),JO(u9),R4(()=>P4({projectId:"complejo-paraiso",appId:"1:572747406183:web:2ccd25787ff30964bbadc2",storageBucket:"complejo-paraiso.firebasestorage.app",apiKey:"AIzaSyBC3JiEftn1mhp5FsPrWwvpyZ7AZ8cVbdg",authDomain:"complejo-paraiso.firebaseapp.com",messagingSenderId:"572747406183"})),MN(()=>FN()),$5(()=>H5()),v9(()=>_9())]};var V1e=()=>({exact:!0}),B1e=(n,e,t,r)=>({"bg-blue-100 text-blue-800":n,"bg-green-100 text-green-800":e,"bg-yellow-100 text-yellow-800":t,"bg-purple-100 text-purple-800":r});function U1e(n,e){if(n&1){let t=ye();f(0,"a",14),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(1,"svg",15),ae(2,"path",16),p(),Pe(),f(3,"span"),v(4,"Dashboard"),p()()}n&2&&ee("routerLinkActiveOptions",CF(1,V1e))}function j1e(n,e){if(n&1){let t=ye();f(0,"a",17),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(1,"svg",15),ae(2,"path",18),p(),Pe(),f(3,"span"),v(4,"Pedidos"),p()()}}function $1e(n,e){if(n&1){let t=ye();f(0,"a",19),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(1,"svg",15),ae(2,"path",20),p(),Pe(),f(3,"span"),v(4,"Cocina"),p()()}}function H1e(n,e){if(n&1){let t=ye();f(0,"a",21),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(1,"svg",15),ae(2,"path",22),p(),Pe(),f(3,"span"),v(4,"Tienda"),p()()}}function z1e(n,e){if(n&1){let t=ye();f(0,"a",23),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(1,"svg",15),ae(2,"path",24),p(),Pe(),f(3,"span"),v(4,"Cobrar"),p()()}}function W1e(n,e){if(n&1){let t=ye();f(0,"div",25)(1,"h3",26),v(2," Administraci\xF3n "),p()(),f(3,"a",27),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(4,"svg",15),ae(5,"path",28)(6,"path",29),p(),Pe(),f(7,"span"),v(8,"Panel Admin"),p()(),f(9,"a",30),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(10,"svg",15),ae(11,"path",28)(12,"path",29),p(),Pe(),f(13,"span"),v(14,"Caja"),p()(),f(15,"a",31),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(16,"svg",15),ae(17,"path",32),p(),Pe(),f(18,"span"),v(19,"Usuarios"),p()(),f(20,"a",33),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(21,"svg",15),ae(22,"path",34),p(),Pe(),f(23,"span"),v(24,"Categor\xEDas"),p()(),f(25,"a",35),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(26,"svg",15),ae(27,"path",36),p(),Pe(),f(28,"span"),v(29,"Productos"),p()(),f(30,"a",37),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(31,"svg",15),ae(32,"path",38),p(),Pe(),f(33,"span"),v(34,"Inventario"),p()(),f(35,"a",39),J("click",function(){Y(t);let i=R();return X(i.closeSidebar())}),xe(),f(36,"svg",15),ae(37,"path",40),p(),Pe(),f(38,"span"),v(39,"Reportes"),p()()}}function q1e(n,e){if(n&1){let t=ye();f(0,"div",13)(1,"div",41)(2,"div",42)(3,"div",43),v(4),p()(),f(5,"div",44)(6,"p",45),v(7),p(),f(8,"p",46)(9,"span",47),v(10),p()()(),f(11,"button",48),J("click",function(){Y(t);let i=R();return X(i.logout())}),xe(),f(12,"svg",49),ae(13,"path",50),p()()()()}if(n&2){let t=R(),r=ec(21);x(4),ie(" ",(r.name==null?null:r.name.charAt(0))||(r.displayName==null?null:r.displayName.charAt(0))||"U"," "),x(3),De(r.name||r.displayName),x(2),ee("ngClass",ju(4,B1e,r.role==="admin",r.role==="mesero",r.role==="cocinero",r.role==="cobrador")),x(),ie(" ",t.getRoleLabel(r.role)," ")}}var Ew=class n{authService=le(jn);toggleSidebar=new Gn;isAdmin$=this.authService.isAdmin$;canAccessDashboard$=this.authService.hasRole(["admin","mesero","cobrador"]);canAccessOrders$=this.authService.hasRole(["admin","mesero"]);canAccessKitchen$=this.authService.hasRole(["admin","cocinero"]);canAccessPayments$=this.authService.hasRole(["admin","cobrador","mesero"]);userData$=this.authService.userData$;closeSidebar(){window.innerWidth<1280&&(this.toggleSidebar.emit(),setTimeout(()=>{window.scrollTo(0,0)},150))}logout(){this.closeSidebar(),setTimeout(()=>{this.authService.logout()},200)}getRoleLabel(e){switch(e){case"admin":return"Administrador";case"mesero":return"Mesero";case"cocinero":return"Cocinero";case"cobrador":return"Cobrador";default:return e}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-sidebar"]],outputs:{toggleSidebar:"toggleSidebar"},standalone:!0,features:[Jt],decls:24,vars:22,consts:[[1,"h-full","bg-white","shadow-md","flex","flex-col","w-72","z-30"],[1,"p-4","border-b","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-teal-500"],[1,"text-gray-500","hover:text-teal-500","focus:outline-none","focus:ring-2","focus:ring-teal-500","p-2","rounded-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"flex-1","overflow-y-auto","py-2"],[1,"px-3","space-y-0.5"],["routerLink","/home","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"routerLinkActiveOptions"],["routerLink","/pedido","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors"],["routerLink","/cocina","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors"],["routerLink","/tienda","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors"],["routerLink","/cobrar","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors"],[1,"border-t","border-gray-200","p-5"],["routerLink","/home","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click","routerLinkActiveOptions"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mr-3","h-6","w-6","text-gray-500","group-hover:text-teal-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],["routerLink","/pedido","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"],["routerLink","/cocina","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],["routerLink","/tienda","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],["routerLink","/cobrar","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"],[1,"mt-6","pt-3","border-t","border-gray-200"],[1,"px-3","py-2","text-sm","font-semibold","text-gray-500","uppercase","tracking-wider"],["routerLink","/admin","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"],["routerLink","admin/caja","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["routerLink","/users","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],["routerLink","/admin/categorias","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"],["routerLink","/admin/productos","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"],["routerLink","/admin/inventario","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"],["routerLink","/admin/reportes","routerLinkActive","bg-teal-50 text-teal-600",1,"group","flex","items-center","px-3","py-4","text-base","font-medium","rounded-md","hover:bg-teal-50","hover:text-teal-600","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"h-10","w-10","rounded-full","bg-teal-500","flex","items-center","justify-center","text-white","font-medium"],[1,"ml-3","flex-1"],[1,"text-base","font-medium","text-gray-700","truncate"],[1,"mt-1"],[1,"px-2","py-1","text-sm","rounded-full",3,"ngClass"],[1,"p-3","text-gray-400","hover:text-red-500","hover:bg-gray-100","rounded-full","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-6","w-6"],["fill-rule","evenodd","d","M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V4a1 1 0 00-1-1H3zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z","clip-rule","evenodd"]],template:function(t,r){if(t&1){let i=ye();f(0,"div",0)(1,"div",1)(2,"span",2),v(3,"Complejo Para\xEDso"),p(),f(4,"button",3),J("click",function(){return Y(i),X(r.toggleSidebar.emit())}),xe(),f(5,"svg",4),ae(6,"path",5),p()()(),Pe(),f(7,"div",6)(8,"nav",7),se(9,U1e,5,2,"a",8),ot(10,"async"),se(11,j1e,5,0,"a",9),ot(12,"async"),se(13,$1e,5,0,"a",10),ot(14,"async"),se(15,H1e,5,0,"a",11),ot(16,"async"),se(17,z1e,5,0,"a",12),ot(18,"async"),se(19,W1e,40,0),ot(20,"async"),p()(),Mn(21),ot(22,"async"),se(23,q1e,14,9,"div",13),p()}if(t&2){x(9),Se(hn(10,7,r.canAccessDashboard$)?9:-1),x(2),Se(hn(12,9,r.canAccessOrders$)?11:-1),x(2),Se(hn(14,11,r.canAccessKitchen$)?13:-1),x(2),Se(hn(16,13,r.canAccessPayments$)?15:-1),x(2),Se(hn(18,15,r.canAccessPayments$)?17:-1),x(2),Se(hn(20,17,r.isAdmin$)?19:-1),x(2);let i=Ja(hn(22,19,r.userData$));x(2),Se(i?23:-1)}},dependencies:[nn,tr,M1,wl,Qf,XO],encapsulation:2})};var G1e=(n,e)=>({"translate-x-0":n,"-translate-x-full":e});function K1e(n,e){if(n&1){let t=ye();f(0,"div",21),J("click",function(){Y(t);let i=R();return X(i.toggleSidebar())}),p()}}var Cw=class n{title="complejo-paraiso";showSidebar=!1;pageTitle="";isTabletView=!0;router=le(Ht);activatedRoute=le(ts);authService=le(jn);titleService=le(F1);ngOnInit(){this.checkScreenSize(),this.router.events.pipe(di(t=>t instanceof Ds),je(()=>this.activatedRoute),je(t=>{for(;t.firstChild;)t=t.firstChild;return t}),hr(t=>t.data)).subscribe(t=>{this.pageTitle=t.title||this.getDefaultTitle(),this.titleService.setTitle(`${this.pageTitle} | Complejo Para\xEDso`),this.isTabletView&&(this.showSidebar=!1)}),this.authService.user$.subscribe(t=>{!t&&!this.router.url.includes("/login")&&this.router.navigate(["/login"])}),localStorage.getItem("sidebarOpen")==="true"&&(this.showSidebar=!0)}checkScreenSize(){let e=window.innerWidth;this.isTabletView=e<1280,e<768&&(this.showSidebar=!1)}toggleSidebar(){this.showSidebar=!this.showSidebar,localStorage.setItem("sidebarOpen",this.showSidebar.toString())}getDefaultTitle(){let e=this.router.url;return e.includes("/home")?"Inicio":e.includes("/pedido")?" \u{1F6D2} Realizar Pedido":e.includes("/cocina")?"Cocina":e.includes("/tienda")?"Tienda":e.includes("/cobrar")?"Cobrar Pedido":e.includes("/users")?"Administraci\xF3n de Usuarios":e.includes("/admin/categorias")?"Gesti\xF3n de Categor\xEDas":e.includes("/admin/productos")?"Gesti\xF3n de Productos":e.includes("/admin/inventario")?"Gesti\xF3n de Inventario":e.includes("/admin/reportes")?"Reportes":e.includes("/admin")?"Panel de Administraci\xF3n":"Complejo Para\xEDso"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Yt({type:n,selectors:[["app-root"]],hostBindings:function(t,r){t&1&&J("resize",function(s){return r.checkScreenSize(s)},!1,bP)},standalone:!0,features:[Jt],decls:28,vars:6,consts:[[1,"flex","h-screen","bg-gray-100","overflow-hidden"],[1,"fixed","inset-y-0","left-0","z-30","transition-transform","duration-300","ease-in-out","transform",3,"ngClass"],[3,"toggleSidebar"],[1,"flex-1","flex","flex-col","overflow-hidden","w-full"],[1,"bg-white","shadow-sm","z-10"],[1,"max-w-7xl","mx-auto","px-4"],[1,"flex","justify-between","items-center","h-16"],[1,"p-3","rounded-md","text-gray-500","hover:text-teal-500","hover:bg-gray-100","focus:outline-none","focus:ring-2","focus:ring-teal-500",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-7","w-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex-1","flex","justify-center","sm:justify-start"],[1,"flex-shrink-0","flex","items-center","ml-2","lg:ml-0"],[1,"text-xl","font-semibold","text-gray-800"],[1,"flex","items-center","space-x-4"],["type","button",1,"bg-white","p-2","rounded-full","text-gray-400","hover:text-gray-500","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-teal-500"],[1,"sr-only"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"],[1,"flex-1","overflow-y-auto","p-4","bg-gray-100"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","z-20"],[1,"fixed","inset-0","bg-gray-600","bg-opacity-50","z-20",3,"click"]],template:function(t,r){t&1&&(f(0,"div",0)(1,"div",1)(2,"app-sidebar",2),J("toggleSidebar",function(){return r.toggleSidebar()}),p()(),f(3,"div",3)(4,"header",4)(5,"div",5)(6,"div",6)(7,"button",7),J("click",function(){return r.toggleSidebar()}),xe(),f(8,"svg",8),ae(9,"path",9),p()(),Pe(),f(10,"div",10)(11,"div",11)(12,"h1",12),v(13),p()()(),f(14,"div",13)(15,"button",14)(16,"span",15),v(17,"Buscar"),p(),xe(),f(18,"svg",16),ae(19,"path",17),p()(),Pe(),f(20,"button",14)(21,"span",15),v(22,"Ver notificaciones"),p(),xe(),f(23,"svg",16),ae(24,"path",18),p()()()()()(),Pe(),f(25,"main",19),ae(26,"router-outlet"),p()(),se(27,K1e,1,0,"div",20),p()),t&2&&(x(),ee("ngClass",vn(3,G1e,r.showSidebar,!r.showSidebar)),x(12),De(r.pageTitle),x(14),Se(r.showSidebar?27:-1))},dependencies:[SC,Ew,nn,tr]})};lO(Cw,y9).catch(n=>console.error(n));
